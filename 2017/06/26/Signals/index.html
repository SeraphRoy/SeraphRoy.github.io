<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>System Signals</title>
    <meta name="description" content="  Exception and Interrupt  SignalException and InterruptBefore we talk about signals, lets go over interrupts and exceptions briefly. The operating system ma...">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/assets/stylesheets/main.css ">
    <link rel="canonical" href="https://www.gaeblog.com/2017/06/26/Signals/">
    <link rel="alternate" type="application/rss+xml" title="Gae Blog" href="https://www.gaeblog.com/assets/feed.xml ">



    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-100686813-1', 'auto');
      ga('send', 'pageview');

    </script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: { inlineMath: [["$","$"],["\\(","\\)"]] },
    "HTML-CSS": {
      linebreaks: { automatic: true, width: "container" }
    }
});
</script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>System Signals | Gae Blog</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="System Signals" />
<meta name="author" content="Yanxi Chen" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Exception and Interrupt Signal Exception and Interrupt Before we talk about signals, lets go over interrupts and exceptions briefly. The operating system maintains a table of exceptions and interrupts, the entry of each of which corresponds to a handler that gets called when the system gets a specific exception/interrupt. Exceptions and interrupts are inplemented in the hardware and the handlers are maintained by the operating system. But these two things don’t seem to be enough. What if a process is running and the user hits ctrl-c? How does the process know that it needs to be terminated? So we need some kinds of mechanism for the process to know and act upon some specifi events. Signal A signal is a small message that notifies a process that an event of some type has occurred in the system. akin to exceptions and interrupts (like a software version of exception/interrupt) sent from the kernal (sometimes at the request of another process) to a process signal type is identified by small integer ID’s (1-30) only info in a signal is its ID and the fact that it arrived" />
<meta property="og:description" content="Exception and Interrupt Signal Exception and Interrupt Before we talk about signals, lets go over interrupts and exceptions briefly. The operating system maintains a table of exceptions and interrupts, the entry of each of which corresponds to a handler that gets called when the system gets a specific exception/interrupt. Exceptions and interrupts are inplemented in the hardware and the handlers are maintained by the operating system. But these two things don’t seem to be enough. What if a process is running and the user hits ctrl-c? How does the process know that it needs to be terminated? So we need some kinds of mechanism for the process to know and act upon some specifi events. Signal A signal is a small message that notifies a process that an event of some type has occurred in the system. akin to exceptions and interrupts (like a software version of exception/interrupt) sent from the kernal (sometimes at the request of another process) to a process signal type is identified by small integer ID’s (1-30) only info in a signal is its ID and the fact that it arrived" />
<link rel="canonical" href="https://www.gaeblog.com/2017/06/26/Signals/" />
<meta property="og:url" content="https://www.gaeblog.com/2017/06/26/Signals/" />
<meta property="og:site_name" content="Gae Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-26T10:51:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="System Signals" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Yanxi Chen"},"description":"Exception and Interrupt Signal Exception and Interrupt Before we talk about signals, lets go over interrupts and exceptions briefly. The operating system maintains a table of exceptions and interrupts, the entry of each of which corresponds to a handler that gets called when the system gets a specific exception/interrupt. Exceptions and interrupts are inplemented in the hardware and the handlers are maintained by the operating system. But these two things don’t seem to be enough. What if a process is running and the user hits ctrl-c? How does the process know that it needs to be terminated? So we need some kinds of mechanism for the process to know and act upon some specifi events. Signal A signal is a small message that notifies a process that an event of some type has occurred in the system. akin to exceptions and interrupts (like a software version of exception/interrupt) sent from the kernal (sometimes at the request of another process) to a process signal type is identified by small integer ID’s (1-30) only info in a signal is its ID and the fact that it arrived","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.gaeblog.com/2017/06/26/Signals/"},"@type":"BlogPosting","headline":"System Signals","dateModified":"2017-06-26T10:51:00+00:00","datePublished":"2017-06-26T10:51:00+00:00","url":"https://www.gaeblog.com/2017/06/26/Signals/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Gae Blog</a>
        <small>Software Engineer@Amazon</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/search/">
                        
                            <i class="fa fa-search"></i>Search
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>System Signals</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2017-06-26
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>Yanxi Chen
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Operating System" title="Category: Operating System" rel="category">Operating System</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#exception-and-interrupt" id="markdown-toc-exception-and-interrupt">Exception and Interrupt</a></li>
  <li><a href="#signal" id="markdown-toc-signal">Signal</a></li>
  <li><a href="#sending-a-signal" id="markdown-toc-sending-a-signal">Sending a Signal</a></li>
  <li><a href="#receiving-a-signal" id="markdown-toc-receiving-a-signal">Receiving a Signal</a></li>
  <li><a href="#pending-and-blocked-signals" id="markdown-toc-pending-and-blocked-signals">Pending and Blocked Signals</a></li>
  <li><a href="#process-data-structures" id="markdown-toc-process-data-structures">Process Data Structures</a></li>
  <li><a href="#process-groups" id="markdown-toc-process-groups">Process Groups</a></li>
  <li><a href="#some-examples-of-sending-signals" id="markdown-toc-some-examples-of-sending-signals">Some Examples of Sending Signals</a></li>
</ul>

<h2 id="exception-and-interrupt">Exception and Interrupt</h2>

<p>Before we talk about signals, lets go over interrupts and exceptions briefly. The operating system maintains a table of exceptions and interrupts, the entry of each of which corresponds to a handler that gets called when the system gets a specific exception/interrupt. Exceptions and interrupts are inplemented in the hardware and the handlers are maintained by the operating system.</p>

<p>But these two things don’t seem to be enough. What if a process is running and the user hits ctrl-c? How does the process know that it needs to be terminated? So we need some kinds of mechanism for the process to know and act upon some specifi events.</p>

<h2 id="signal">Signal</h2>
<p>A signal is a small message that notifies a process that an event of some type has occurred in the system.</p>

<ul>
  <li>akin to exceptions and interrupts (like a software version of exception/interrupt)</li>
  <li>sent from the kernal (sometimes at the request of another process) to a process</li>
  <li>signal type is identified by small integer ID’s (1-30)</li>
  <li>only info in a signal is its ID and the fact that it arrived</li>
</ul>

<!--more-->

<h2 id="sending-a-signal">Sending a Signal</h2>
<ul>
  <li>Kernal sends (delivers) a signal to a destination process by updating some state in the context of the destination process (flip a bit in the process)</li>
  <li>Kernal sends a signal for one of the following reasons:
    <ul>
      <li>Kernal has detected a system event such as divide-by-zero (SIGFPE) or the terminal of a child process (SIGCHLD). SIGCHLD is used to implement background process handling for the shell</li>
      <li>Another process has invoked the <code class="language-plaintext highlighter-rouge">kill</code> system call explicitly request the kernal to send a signal to the destination process (<code class="language-plaintext highlighter-rouge">kill</code> means sending signals)</li>
    </ul>
  </li>
</ul>

<p>Sending a signal means flipping a bit corresponding to a signal in a process (pending signal mask). If multiple signals are sent, the bit stays on. So a flipped bit means <em>one or more</em> signals is received. It doesn’t cause the process to do actions reponding to the signal; it just delivers a message that a signal is received. A process acts upon a signal upon return to user mode from supervisor mode. When the process gets back to user mode, it walks through the signal table; if one of the bits is set, it clears the bit and calles the corresponding signal handler.</p>

<h2 id="receiving-a-signal">Receiving a Signal</h2>

<p>A destination process receives a signal when it is forced by the kernal to react in some way to the delivery of the signal</p>

<p>Three possible ways to react:</p>

<ul>
  <li><em>Ignore</em> the signal (reset the bit and do nothing)</li>
  <li><em>Terminate</em> the process (with optional core dump)</li>
  <li><em>Catch</em> the signal by executing a user-level function called <em>signal handler</em>
    <ul>
      <li>Akin to a hardware exception handler being called in response to an asynchronous interrupt</li>
    </ul>
  </li>
</ul>

<h2 id="pending-and-blocked-signals">Pending and Blocked Signals</h2>
<p>A signal is <em>pending</em> if sent but not yet received (not yet act upon it)</p>

<ul>
  <li>There can be at most one pending signal of any particular type (only one bit)</li>
</ul>

<p>A process can <em>block</em> the receipt of certain signals</p>

<ul>
  <li>Blocked signals can be delivered, but will not be received until the signal is unblocked</li>
</ul>

<h2 id="process-data-structures">Process Data Structures</h2>
<p>So for each process, there are 3 corresponding data structures:</p>

<ul>
  <li>An array of signal handlers</li>
  <li>Pending signal mask</li>
  <li>Blocking signal mask</li>
</ul>

<p>So the process will act upon a signal if the pending signal mask is on and blocking signal mask is off.</p>

<h2 id="process-groups">Process Groups</h2>

<p>Every process belongs to exactly one process group
<img src="https://www.gaeblog.com/assets/Signals-1.png" alt="" />
There is exactly group leader of each group, which is the first process that is put into the group. It is nothing special except that its pid is the groupid. Each process group has only one input and one output. There can be only one foregroup process group and many background process groups for each <em>session</em>, which is an abstraction that associated with a text input device (keyboard) and a text output device (screen). That means only one process group can interact with the keyboard.</p>

<h2 id="some-examples-of-sending-signals">Some Examples of Sending Signals</h2>

<p>So <code class="language-plaintext highlighter-rouge">/bin/kill</code> is the program that can send arbitrary signal to a process or process group, e.g. (negative pid is groupid)
<img src="https://www.gaeblog.com/assets/Signals-2.png" alt="" />
Typing ctrl-c/ctrl-z sends a SIGINT/SIGTSTP to every job in the foreground process group</p>

<p>There are default actions corresponding to each signals, but we can write our own signal handler but implementing the <code class="language-plaintext highlighter-rouge">signal</code> function</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>handler_t *signal(int signum, handler_t *handler)
</code></pre></div></div>

<p><img src="https://www.gaeblog.com/assets/Signals-3.png" alt="" /></p>

        </article>
        <hr>

        
        
            
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
            
            
                
            
                
            
        
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2017/06/20/Bit-Hacks/">Bit Hacks</a></p>
        
    </div>
    <div class="nex">

        
        <p><strong>下一篇</strong> <a href="/2017/06/26/Markov-Chains/">Markov Chains</a></p>
        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        


<div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */

    var disqus_config = function() {
        this.page.url = 'https://www.gaeblog.com/2017/06/26/Signals/'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://www.gaeblog.com/2017/06/26/Signals/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
            s = d.createElement('script');

        s.src = '//https-seraphroy-github-io-1.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

             <div class="side content" id="search-div">
                 <div>
    <i class="fa fa-search"></i>
    Search
</div>
<div id="site_search">
    <input type="text" id="search_box" placeholder="Search..." >
</div>
<div id="search_results"></div>

<link rel="stylesheet" type="text/css" href="https://www.gaeblog.com/assets/stylesheets/main.css">
<script type="text/javascript" src="https://www.gaeblog.com/assets/js/search.js"></script>
<script type="text/javascript" src="https://www.gaeblog.com/assets/js/node_modules/simpleblogsearch/index.js"></script>

<script>
SimpleBlogSearch({
   searchDataPath: '/assets/search_data.json',
   dataType: 'json',
   processDataFunc: function(data){ return data },
   searchInputID: 'search_box',
   resultsDivID: 'search_results',
   resultULClass: 'content-ul search-ul content-side',
   highlightKeywordClass: 'search_keyword',
   limit: 4,

});
</script>

             </div>
            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#exception-and-interrupt">Exception and Interrupt</a></li>
<li class="toc-entry toc-h2"><a href="#signal">Signal</a></li>
<li class="toc-entry toc-h2"><a href="#sending-a-signal">Sending a Signal</a></li>
<li class="toc-entry toc-h2"><a href="#receiving-a-signal">Receiving a Signal</a></li>
<li class="toc-entry toc-h2"><a href="#pending-and-blocked-signals">Pending and Blocked Signals</a></li>
<li class="toc-entry toc-h2"><a href="#process-data-structures">Process Data Structures</a></li>
<li class="toc-entry toc-h2"><a href="#process-groups">Process Groups</a></li>
<li class="toc-entry toc-h2"><a href="#some-examples-of-sending-signals">Some Examples of Sending Signals</a></li>
</ul>
                <ul id="content-side" class="content-ul">
                    
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/assets/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
            
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/SeraphRoy" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:royxagain@gmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>     
            <a href="https://www.facebook.com/SeraphRoy" title="Facebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a>   
            <a href="https://www.linkedin.com/in/yanxichen" title="LinkedIn"><i class="fa fa-linkedin" aria-hidden="true"></i></a>  
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /assets/js/main.js " charset="utf-8"></script>
    <script src=" /assets/js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /assets/js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
