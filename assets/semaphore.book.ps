%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: book.dvi
%%Pages: 130
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -o book.ps book
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2002.02.08:1519
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
%%BeginProcSet: color.pro
%!
TeXDict begin/setcmykcolor where{pop}{/setcmykcolor{dup 10 eq{pop
setrgbcolor}{1 sub 4 1 roll 3{3 index add neg dup 0 lt{pop 0}if 3 1 roll
}repeat setrgbcolor pop}ifelse}B}ifelse/TeXcolorcmyk{setcmykcolor}def
/TeXcolorrgb{setrgbcolor}def/TeXcolorgrey{setgray}def/TeXcolorgray{
setgray}def/TeXcolorhsb{sethsbcolor}def/currentcmykcolor where{pop}{
/currentcmykcolor{currentrgbcolor 10}B}ifelse/DC{exch dup userdict exch
known{pop pop}{X}ifelse}B/GreenYellow{0.15 0 0.69 0 setcmykcolor}DC
/Yellow{0 0 1 0 setcmykcolor}DC/Goldenrod{0 0.10 0.84 0 setcmykcolor}DC
/Dandelion{0 0.29 0.84 0 setcmykcolor}DC/Apricot{0 0.32 0.52 0
setcmykcolor}DC/Peach{0 0.50 0.70 0 setcmykcolor}DC/Melon{0 0.46 0.50 0
setcmykcolor}DC/YellowOrange{0 0.42 1 0 setcmykcolor}DC/Orange{0 0.61
0.87 0 setcmykcolor}DC/BurntOrange{0 0.51 1 0 setcmykcolor}DC
/Bittersweet{0 0.75 1 0.24 setcmykcolor}DC/RedOrange{0 0.77 0.87 0
setcmykcolor}DC/Mahogany{0 0.85 0.87 0.35 setcmykcolor}DC/Maroon{0 0.87
0.68 0.32 setcmykcolor}DC/BrickRed{0 0.89 0.94 0.28 setcmykcolor}DC/Red{
0 1 1 0 setcmykcolor}DC/OrangeRed{0 1 0.50 0 setcmykcolor}DC/RubineRed{
0 1 0.13 0 setcmykcolor}DC/WildStrawberry{0 0.96 0.39 0 setcmykcolor}DC
/Salmon{0 0.53 0.38 0 setcmykcolor}DC/CarnationPink{0 0.63 0 0
setcmykcolor}DC/Magenta{0 1 0 0 setcmykcolor}DC/VioletRed{0 0.81 0 0
setcmykcolor}DC/Rhodamine{0 0.82 0 0 setcmykcolor}DC/Mulberry{0.34 0.90
0 0.02 setcmykcolor}DC/RedViolet{0.07 0.90 0 0.34 setcmykcolor}DC
/Fuchsia{0.47 0.91 0 0.08 setcmykcolor}DC/Lavender{0 0.48 0 0
setcmykcolor}DC/Thistle{0.12 0.59 0 0 setcmykcolor}DC/Orchid{0.32 0.64 0
0 setcmykcolor}DC/DarkOrchid{0.40 0.80 0.20 0 setcmykcolor}DC/Purple{
0.45 0.86 0 0 setcmykcolor}DC/Plum{0.50 1 0 0 setcmykcolor}DC/Violet{
0.79 0.88 0 0 setcmykcolor}DC/RoyalPurple{0.75 0.90 0 0 setcmykcolor}DC
/BlueViolet{0.86 0.91 0 0.04 setcmykcolor}DC/Periwinkle{0.57 0.55 0 0
setcmykcolor}DC/CadetBlue{0.62 0.57 0.23 0 setcmykcolor}DC
/CornflowerBlue{0.65 0.13 0 0 setcmykcolor}DC/MidnightBlue{0.98 0.13 0
0.43 setcmykcolor}DC/NavyBlue{0.94 0.54 0 0 setcmykcolor}DC/RoyalBlue{1
0.50 0 0 setcmykcolor}DC/Blue{1 1 0 0 setcmykcolor}DC/Cerulean{0.94 0.11
0 0 setcmykcolor}DC/Cyan{1 0 0 0 setcmykcolor}DC/ProcessBlue{0.96 0 0 0
setcmykcolor}DC/SkyBlue{0.62 0 0.12 0 setcmykcolor}DC/Turquoise{0.85 0
0.20 0 setcmykcolor}DC/TealBlue{0.86 0 0.34 0.02 setcmykcolor}DC
/Aquamarine{0.82 0 0.30 0 setcmykcolor}DC/BlueGreen{0.85 0 0.33 0
setcmykcolor}DC/Emerald{1 0 0.50 0 setcmykcolor}DC/JungleGreen{0.99 0
0.52 0 setcmykcolor}DC/SeaGreen{0.69 0 0.50 0 setcmykcolor}DC/Green{1 0
1 0 setcmykcolor}DC/ForestGreen{0.91 0 0.88 0.12 setcmykcolor}DC
/PineGreen{0.92 0 0.59 0.25 setcmykcolor}DC/LimeGreen{0.50 0 1 0
setcmykcolor}DC/YellowGreen{0.44 0 0.74 0 setcmykcolor}DC/SpringGreen{
0.26 0 0.76 0 setcmykcolor}DC/OliveGreen{0.64 0 0.95 0.40 setcmykcolor}
DC/RawSienna{0 0.72 1 0.45 setcmykcolor}DC/Sepia{0 0.83 1 0.70
setcmykcolor}DC/Brown{0 0.81 1 0.60 setcmykcolor}DC/Tan{0.14 0.42 0.56 0
setcmykcolor}DC/Gray{0 0 0 0.50 setcmykcolor}DC/Black{0 0 0 1
setcmykcolor}DC/White{0 0 0 0 setcmykcolor}DC end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (book.dvi)
@start
%DVIPSBitmapFont: Fa cmr8 8 8
/Fa 8 113 df<123C127EB4FCA21380A2127F123D1201A312031300A25A1206120E5A5A
5A126009157A8714>44 D<EB3FC0EBFFF03803E07C48487E48487E497E001EEB0780A200
3E14C0A248EB03E0A500FC14F0B0007C14E0A3007E1307003E14C0A36CEB0F806C14006D
5A3807C03E3803F0FC3800FFF0EB3FC01C2D7DAB23>48 D<EB7F803801FFF0380780FC38
0E003F48EB1F8048EB0FC05A0060EB07E012F000FC14F07E1403A3007C1307C7FCA215E0
140F15C0141F1580EC3F00147E147C5C495A495A495A495A011EC7FC5B5B4913305B485A
4848136048C7FC000E14E0001FB5FC5A4814C0B6FCA21C2C7DAB23>50
D<EB03F8EB0FFE90383E0780EBF8013901F007C03803E00FEA07C0EA0F80A2391F000780
91C7FC123EA2127EA2127CEB0FC038FC3FF0EBF07C38FDC01EB4487E01001380EC07C048
14E0A214034814F0A4127CA3127EA2003E14E01407121E001F14C06CEB0F803907801F00
3803C03E6C6C5A38007FF0EB1FC01C2D7DAB23>54 D<13FF000713C0380F01F0381C00F8
003F137C80A2143F001E7FC7FCA4EB07FF137F3801FE1FEA07F0EA1FC0EA3F80EA7F0012
7E00FE14065AA3143F7E007E137F007FEBEF8C391F83C7FC390FFF03F83901FC01E01F20
7D9E23>97 D<EB1F80EBFFF03803E0783807C03E380F801E381F001FEC0F80123E007E13
0715C0127C12FCA3B6FCA200FCC8FCA5127EA2003E14C0123F6C1301390F80038001C013
003803E00F3801F03C38007FF8EB1FC01A207E9E1F>101 D<013F13F89038FFC3FE3903
E1FF1E3807807C000F140C391F003E00A2003E7FA76C133EA26C6C5A00071378380FE1F0
380CFFC0D81C3FC7FC90C8FCA3121E121F380FFFF814FF6C14C04814F0391E0007F84813
0048147C12F848143CA46C147C007C14F86CEB01F06CEB03E03907E01F803901FFFE0038
003FF01F2D7E9D23>103 D<3807C0FE39FFC7FF809038CF03E0390FDC01F03907F800FC
49137E49133E49133FED1F80A3ED0FC0A8151F1680A2ED3F00A26D137E6D137C5D9038FC
01F09038CE07E09038C7FF80D9C1FCC7FC01C0C8FCA9487EEAFFFEA2222B7E9D27>112
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb cmti8 8 13
/Fb 13 122 df<4AB4FC020F13C091383E03F09138F8007CD903E07FD907807F011FC77E
013E15804914074915C0485AEE03E0485A485AA2485A121F90C8FC5AA2003E1507127EA3
48ED0FC0A3EE1F80A217005E163E167E167C16FC4B5A007C5D4B5A6C4A5A4B5A6C4AC7FC
6C6C133E6D13F83903E003F03901F80FC026007FFFC8FCEB0FF02B2F75AD37>79
D<91380FF00C91383FFC1C9138F80F3C903903C007BC9039078003FC90390F0001F8131E
491300A24914F0A313F816E0A216007F7F6D7EEB7FF8ECFF806D13E06D13F801077F0101
7FEB001FEC01FF6E7E8181A281121CA35D003C141EA25DA2007E5C5D007F495A6D485A26
F1F01FC7FC38E07FFC38C00FF0262F7BAD28>83 D<EB07C0EB1FF090387C39C0EBF81FEA
01F03803E00FEA07C0120FD81F801380A2EA3F00141F481400127EA25C00FE133E5AA2EC
7E18EC7C385AA214FCD878011378397C03F870A2393C0F78E0381E1E3D390FF81FC03903
E00F001D1F799D24>97 D<EB03F8EB0FFEEB3E0FEBF8073901F00380EA03E0EA07C0000F
1307D81F8013005C383F001E5C387F03F8EBFFE049C7FC007EC8FC12FE5AA4127CEC0180
EC03C0EC07806CEB0F00141E6C137C380F83F03803FFC0C648C7FC1A1F799D21>101
D<14F8EB03FE90380F873890381F03F8137EEB7C0113F81201EA03F015F0EA07E0140312
0F01C013E0A21407121F018013C0A2140FA21580141F120F143FEC7F006C6C5AEA03C338
01FFBF38007E3E1300147EA2147CA214FC00385BEAFC015C495A48485A38F01F80D87FFE
C7FCEA1FF01D2C7C9D21>103 D<130E131FEB3F80A2EB1F00130E90C7FCA9EA03E0EA0F
F0EA1E78EA1C7C12381278127013FCEAF0F812E012E1EAC1F0120112035B12075BA2120F
13831387121F13075BEA3F0E123EEA1E1C133C1338EA0FF0EA03C0112E7AAC16>105
D<3B07801FC007F03B1FE07FF01FFC3B3DF1E0F8783E3B38F3C078F01E3B78FF007DC01F
D870FEEB7F80A2D8F1FC1400D8E1F8137EA249137C00C302FC5B0003163E495BA2000701
01147E177C01C05B17FC000F0103ECF83018700180EBE00117F0001F010715F0040313E0
010001C013E0EFE1C048010F1301EFE380003E91398000FF00001C6DC7123C341F7A9D3A
>109 D<3907801FC0391FE07FF0393DF1E0F83938F3C0783978FF007CEA70FEA2EAF1FC
EAE1F8A25B00C314FC00035C5BA2000713015D13C01403000FECE0C015E1EB800715C100
1F14C3020F13800100138391380787005A158E003EEB03FC001CEB00F0221F7A9D28>I<
90383C01F09038FF07FC3901E79E1E9038C7BC0F000301F81380903887F00702E013C038
078FC0130F1480A2D8061F130F12001400A249131F1680133EA2017EEB3F00A2017C133E
157E01FC137C5DEBFE015D486C485AEC0F80D9F3FEC7FCEBF0F8000390C8FCA25BA21207
A25BA2120FA2EAFFFCA2222B7F9D24>112 D<3807803E391FE0FF80393CF3C1C03938F7
81E03878FF07EA70FE13FC12F139E1F8038091C7FC5B12C312035BA21207A25BA2120FA2
5BA2121FA290C8FCA25AA2123E121C1B1F7A9D1E>114 D<EB0FC0EB7FF0EBF03C3801E0
1C3803C01EEA0780143EA2000F133C1418EBC00013F813FF6C13C06C13E06C13F0EA007F
130713031301EA780012FCA2130100F813E012E0EB03C038F0078038781F00EA1FFCEA07
F0171F7A9D1D>I<131C133EA2137EA2137CA213FCA25BA21201A2B512E0A23803F000A2
5BA21207A25BA2120FA25BA2121FA290C7FCA24813C01301123E130314801307003C1300
130E131E6C5AEA0FF0EA07C0132B7AA918>I<EA03C0D80FF01338D81E78137CD81C7C13
FC003814F812781270EBFC01D8F0F813F012E012E138C1F003000114E0120313E0140700
0714C013C0A2140F000F14801380A2141F150000075B5C13C03803E1FE3801FFBE38007E
3EEB007E147CA2003E5BA2387E01F0A2387C03E0387007C06C485AD83C3EC7FCEA1FF8EA
07E01E2C7A9D23>121 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmr6 6 1
/Fc 1 50 df<13E01201120712FF12F91201B3A7487EB512C0A212217AA01E>49
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmsy10 10 2
/Fd 2 16 df<007FB81280B912C0A26C17803204799641>0 D<EB1FF0EBFFFE487F0007
14C04814E04814F04814F8A24814FCA3B612FEA96C14FCA36C14F8A26C14F06C14E06C14
C0000114006C5BEB1FF01F1F7BA42A>15 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmbx12 12 55
/Fe 55 123 df<DB0FFFEB03FF4AB5D8C03F13C0020F02F1B512E0027F91B612F0902701
FFF8039038FE1FF849018002F813FC010F4948EBF03F49484913E0495A4A15C0495AF11F
F801FF16804A6DEC07E070EC018096C7FCABBA12F0A5C69026E000030180C7FCB3B0007F
D9FFC1B67EA546467EC541>11 D<ED0FFF4AB512C0020F14F0027F80903A01FFF803FC49
9038C000FE010FEB00034948497E49485B5C495A4C138001FF6E13005CA3705AEE01F893
C8FCA74BB51280B9FCA5C69038E00003B3B0007FD9FFC1B6FCA538467EC53E>I<DB0FFF
EC1FFE4AB5D8E003B57E020FDAF01F14E0027F02FCB67E902701FFF803B538F007F84990
26C0007F90388001FC010F903B0001FFFE00074948010749497E49484B131F4A495B4948
5D507E01FF725A4A5DA282706F5A70ED03F097C8FCA70703B5FCBDFCA5C69026E0000190
38C00007B3B0007FD9FFC0B60083B512FEA557467EC55D>14 D<DC03C0EB01E04C6C497E
A3040F14074D5CA2041F140F4D5CA3043F141F94C75BA24C143F047E92C7FCA204FE5C4C
147EA3030115FE4C5CA2030314014C5CA2030714034C5CA2007FBB12FEBDFCA4003F1AFE
C8003FC7D81F80C7FCA34B143F037E92C8FCA303FE5C4B147EA4020115FE4B5CA3003FBB
12FEBDFCA46C1AFEC7280FC00007E0C8FCA2021F140F4B5CA2023F141F92C75BA24A143F
027E92C9FCA302FE5C4A147EA2010115FE4A5CA2010314014A5CA3010714034A5CA2010F
14074A5CA36D486D5A50587AC45D>35 D<EA07C0EA1FF0487E487E487E7FA31480A37E7E
EA1FF7EA07C7EA0007130FA21400A25B131E133EA25B13FC5B485A485A1207485A485A90
C7FC120C112278C41F>39 D<B612F8A91D097F9A25>45 D<EA07C0EA1FF0EA3FF8EA7FFC
EAFFFEA7EA7FFCEA3FF8EA1FF0EA07C00F0F788E1F>I<EC03C01407141F147FEB03FF13
3FB6FCA413C3EA0003B3B3ADB712FCA5264177C038>49 D<ECFFE0010F13FE013F6D7E90
B612E0000315F82607FC0313FE3A0FE0007FFFD81F806D138048C7000F13C0488001C015
E001F07F00FF6E13F07F17F881A46C5A6C5A6C5AC9FC17F05DA217E05D17C04B13804B13
00A2ED1FFC4B5A5E4B5A4B5A4A90C7FC4A5A4A5AEC0FF04A5AEC3F804AC7127814FE495A
494814F8D907E014F0495A495A49C8FC017C140149140348B7FC4816E05A5A5A5A5AB8FC
17C0A42D417BC038>I<ECFFF0010713FF011F14C0017F14F049C66C7ED803F8EB3FFED8
07E06D7E81D80FF86D138013FE001F16C07FA66C5A6C4815806C485BC814005D5E4B5A4B
5A4B5A4A5B020F1380902607FFFEC7FC15F815FF16C090C713F0ED3FFCED0FFEEEFF8081
6F13C017E0A26F13F0A217F8A3EA0FC0EA3FF0487EA2487EA217F0A25D17E06C5A494913
C05BD83F80491380D81FF0491300D80FFEEBFFFE6CB612F800015D6C6C14C0011F49C7FC
010113E02D427BC038>I<163FA25E5E5D5DA25D5D5D5DA25D92B5FCEC01F7EC03E71407
15C7EC0F87EC1F07143E147E147C14F8EB01F0EB03E0130714C0EB0F80EB1F00133E5BA2
5B485A485A485A120F5B48C7FC123E5A12FCB91280A5C8000F90C7FCAC027FB61280A531
417DC038>I<0007150301E0143F01FFEB07FF91B6FC5E5E5E5E5E16804BC7FC5D15E092
C8FC01C0C9FCAAEC3FF001C1B5FC01C714C001DF14F09039FFE03FFC9138000FFE01FC6D
7E01F06D13804915C0497F6C4815E0C8FC6F13F0A317F8A4EA0F80EA3FE0487E12FF7FA3
17F05B5D6C4815E05B007EC74813C0123E003F4A1380D81FC0491300D80FF0495AD807FE
EBFFFC6CB612F0C65D013F1480010F01FCC7FC010113C02D427BC038>I<4AB47E021F13
F0027F13FC49B6FC01079038807F8090390FFC001FD93FF014C04948137F4948EBFFE048
495A5A1400485A120FA248486D13C0EE7F80EE1E00003F92C7FCA25B127FA2EC07FC9138
1FFF8000FF017F13E091B512F89039F9F01FFC9039FBC007FE9039FF8003FF17804A6C13
C05B6F13E0A24915F0A317F85BA4127FA5123FA217F07F121FA2000F4A13E0A26C6C15C0
6D4913806C018014006C6D485A6C9038E01FFC6DB55A011F5C010714C0010191C7FC9038
003FF02D427BC038>I<121E121F13FC90B712FEA45A17FC17F817F017E017C0A2481680
007EC8EA3F00007C157E5E00785D15014B5A00F84A5A484A5A5E151FC848C7FC157E5DA2
4A5A14035D14074A5AA2141F5D143FA2147F5D14FFA25BA35B92C8FCA35BA55BAA6D5A6D
5A6D5A2F447AC238>I<EC7FF00103B5FC010F14C0013F14F090397F801FFC3A01FC0003
FE48486D7E497F4848EC7F80163F484815C0A2001F151FA27FA27F7F01FE143F6D158002
C0137F02F014006C01FC5B6E485A6C9038FF83FCEDE7F86CECFFE06C5D6C92C7FC6D14C0
6D80010F14F882013F8090B7FC48013F14802607FC0F14C0260FF80314E04848C6FC496D
13F0003F141F48481307496D13F8150000FF157F90C8123F161F160FA21607A36D15F012
7F160F6D15E06C6C141F6DEC3FC06C6CEC7F80D80FFE903801FF003A07FFC00FFE6C90B5
5AC615F0013F14C0010F91C7FC010013F02D427BC038>I<EC7FF0903807FFFE011F6D7E
017F14E09039FFE03FF0489038800FF848496C7E48488048486D7E001F80003F1680A248
4815C08117E0A212FF17F0A617F8A45D127FA3003F5CA26C7E5D6C6C5B12076C6C133E6C
EBC07C6CEBFFF8013F5B010F01C013F00101130090C8FCA217E05DA2EA03C0D80FF015C0
487E486C491380A217004B5A150F5E49495A6C48495A01C0EBFFE0260FF0035B6CB65A6C
4AC7FC6C14F86C6C13E0D907FEC8FC2D427BC038>I<B9FC18F018FE727E19E026003FFC
C700077F05017F716C7E727E727EA2721380A37213C0A74E1380A24E1300A24E5A4E5A4E
5A4D5B05075B94B5128091B700FCC7FC18F018FF19E002FCC7000113F8716C7EF01FFE72
7E7213801AC07213E0A27213F0A31AF8A71AF0A2601AE0604E13C0604E138095B5120005
075BBA12F86119C04EC7FC18E045447CC350>66 D<DCFFF01470031F01FF14F04AB6EAE0
010207EDF803023FEDFE0791B539E001FF0F4949C7EA3F9F010701F0EC0FFF4901C08049
90C87E4948814948814948167F4849163F4849161F5A4A160F485B19074890CAFC19035A
5BA2007F1801A34994C7FC12FFAE127F7F1AF0A2123FA27F6C18011AE06C7F19036C6D17
C06E16077E6C6DEE0F806C6DEE1F006D6C5E6D6C167E6D6C6C5D6D6D4A5A6D01F0EC07F0
010101FEEC1FE06D903AFFF001FF80023F90B6C7FC020715FC020115F0DA001F14800300
01F8C8FC44467AC451>I<B9FC18F018FE727E19E026003FFEC7001F13F805017F943800
3FFF060F7F727F727F727F84737E737EA2737EA2737EA21B80A2851BC0A51BE0AD1BC0A5
1B8061A21B006162193F624F5A19FF624E5B06075B4E5B063F90C7FC4DB45A050F13F8BA
5A19C04EC8FC18F095C9FC4B447CC356>I<BA12F8A485D8001F90C71201EF003F180F18
0318011800A2197E193EA3191EA21778A285A405F890C7FCA316011603161F92B5FCA5ED
001F160316011600A2F101E01778A2F103C0A494C7FC1907A21A80A2190FA2191FA2193F
F17F0061601807181F4DB5FCBBFC61A443447DC34A>I<BA1280A419C026003FFEC7121F
1701EF007F183F181F180F180719E01803A31801A3EE01E0F000F0A419001603A3160716
0F167F91B6FCA59138FE007F160F16071603A31601A693C9FCAFB712F0A53C447CC346>
I<DCFFF01470031F01FF14F04AB6EAE0010207EDF803023FEDFE0791B539E001FF0F4949
C7EA3F9F010701F0EC0FFF4901C0804990C87E4948814948814948167F4849163F484916
1F5A4A160F485B19074890CAFC19035A5BA2007F1801A34994C8FC12FFAD057FB612F012
7F7FA3003FDC0001EBF000A27F7EA26C7FA26C7F807E6C7F6C7F6D7E6D6C5D6D6C7E6D6D
5C6D01F05C010101FE143F6D903AFFF001FF9F023F90B6120F0207EDFC030201EDF000DA
001F02C01330030001FCC9FC4C467AC458>I<B7D88003B612FEA526003FFEC9EBF800B3
A791B9FCA54AC9FCB3AAB7D88003B612FEA54F447CC358>I<B76C0103B512F8A526003F
FEC93807E0004F5A4F5A077EC7FC614E5A4E5A4E5AF01F804EC8FC187E604D5AEF07F0EF
0FC04D5A4DC9FC177E4C5AEE03F04C5A4C5A4C7EEE7FF04C7E5D4B7F4B7F4B7FED3F3FDB
7E1F7F03FC806E486C7F4B7E4B6C7F0380804B6C7F4A7F717E84717F83717F85717F8371
7F85717F187F727E86727F84727F86727F84B76C90B612FCA54E447CC358>75
D<B500FE067FB512806E95B6FCA26F5EA2D8003F50C7FC013D6DEE03DFA2013C6DEE079F
A26E6CEE0F1FA26E6C161EA26E6C163CA36E6C1678A26E6C16F0A26E6DEC01E0A26E6DEC
03C0A36E6DEC0780A26F6CEC0F00A26F6C141EA26F6C5CA36F6C5CA26F6C5CA26F6D485A
A26F6D485AA26F6D485AA3706C48C7FCA293383FF81EA2706C5AA2706C5AA3706C5AA270
5BA2705BA2705BA2B6057FB6128071C7FCA2173E171C61447CC36A>77
D<B64BB512FE8181A281D8003F6D91C7EA780081013D7F81133C6E7E6E7F6E7F6E7F6E7F
82806E7F6E7F6F7E6F7F83816F7F6F7F6F7F6F7F6F7F8382707F707F707F707F8482707F
707F717E7113807113C019E0837113F07113F87113FC7113FE19FF847213F884848484A2
8484197F193F191FA2190F1907B61603190119001A78A24F447CC358>I<923807FFC092
B512FE0207ECFFC0021F15F091267FFE0013FC902601FFF0EB1FFF01070180010313C049
90C76C7FD91FFC6E6C7E49486F7E49486F7E01FF8348496F7E48496F1380A248496F13C0
A24890C96C13E0A24819F04982003F19F8A3007F19FC49177FA400FF19FEAD007F19FC6D
17FFA3003F19F8A26D5E6C19F0A26E5D6C19E0A26C6D4B13C06C19806E5D6C6D4B13006C
6D4B5A6D6C4B5A6D6C4B5A6D6C4A5B6D01C001075B6D01F0011F5B010101FE90B5C7FC6D
90B65A023F15F8020715C002004AC8FC030713C047467AC454>I<B9FC18F018FE727E19
E0D8001F90C7000F7F05017F716C7E727E727E721380A21AC084A21AE0A91AC0A24E1380
A21A00604E5A4E5A4D485A050F5B92B712C096C7FC18FC18C092CBFCB3A7B712E0A54344
7DC34D>I<B812F8EFFFC018F818FE727ED8001F90C7003F13E005037F05007F727E727E
727EA28684A286A762A24E90C7FCA24E5A61187F943801FFF005075B053F138092B7C8FC
18F818E018F892C77FEF3FFF050F7F717F717FA2717FA2717FA785A61B0F85A2187F7313
1F72141EB700E06DEB803E72EBE0FC72EBFFF8060114F0726C13E0CC0007138050457DC3
54>82 D<DAFFE0131C010701FE133C013F9038FF807C90B6EAE0FC4815F9489038801FFF
3907FC00014848EB007F4848143F4848140F491407007F15035B1601160012FF177CA27F
A26D153C7F7F6D92C7FC6C7EEBFFE014FE6CEBFFF015FF6C15E016FC6C816C6F7E6C826C
826C6C81011F810107811300020F80140003077FED007F82040F1380828212F082A282A2
7EA218007EA26C5D6C5E6D14036D5D6D140701F84A5A01FFEC3FF002F8EBFFE0486CB65A
D8FC1F92C7FCD8F80714FC48C614F0480107138031467AC43E>I<B600FE017FB691B512
FEA526007FFCC8D83FFEC9EA7C006E82013F701778807415F86D705F6F7014016D705FA2
6F7014036D64814E6D14076D646F70140F6D041E94C7FCA26F023E6D5C6DDC3C7F151E81
027F037C6D5CF0783F6F70147C023F4B6C1578A26F01016F13F86E4B6C5D16806E02036F
485A4E7E04C0EEE0036E4A486C5DA2DCE00FEDF0076E4B6C5D16F06E4A6F48C8FC051E7F
04F8705A6E4A027F131EA2DCFC7CEDFE3E037F0178023F133C04FE16FF033F01F85E4D80
04FF17F86F496E5BA36F496E5BA26F604D80A26F90C86C5BA36F486F90C9FCA26F48167E
A30478163C6F457EC374>87 D<903801FFE0011F13FE017F6D7E48B612E03A03FE007FF8
4848EB1FFC6D6D7E486C6D7EA26F7FA36F7F6C5A6C5AEA00F090C7FCA40203B5FC91B6FC
1307013F13F19038FFFC01000313E0000F1380381FFE00485A5B127F5B12FF5BA35DA26D
5B6C6C5B4B13F0D83FFE013EEBFFC03A1FFF80FC7F0007EBFFF86CECE01FC66CEB8007D9
0FFCC9FC322F7DAD36>97 D<EB7FC0B5FCA512037EB1ED0FF892B57E02C314E002CF14F8
9139DFC03FFC9139FF000FFE02FCEB03FF4A6D13804A15C04A6D13E05CEF7FF0A218F817
3FA318FCAC18F8A2177F18F0A3EFFFE06E15C06E5B6E491380027C491300496C495A903A
FC1FC07FFC496CB512F0D9F00314C049C691C7FCC8EA1FF036467DC43E>I<EC3FFC49B5
12C0010F14F0013F14FC90397FF003FE9039FFC001FF0003495A48494813805B120F485A
A2485A6F1300007F6E5AED00784991C7FCA212FFAC6C7EA3123F6DEC03C0A26C6C140700
0F16806D140F6C6DEB1F006C6D133E6C01F05B3A007FFC03F86DB55A010F14C0010391C7
FC9038003FF82A2F7CAD32>I<EE03FEED07FFA5ED001F160FB1EC3FE0903803FFFC010F
EBFF8F013F14CF9039FFF807FF48EBC00148903880007F4890C7123F4848141F49140F12
1F485AA3127F5BA212FFAC127FA37F123FA26C6C141FA26C6C143F0007157F6C6C91B5FC
6CD9C00314FC6C9038F01FEF6DB5128F011FEBFE0F010713F89026007FC0EBF80036467C
C43E>I<EC3FF80103B57E010F14E0013F8090397FF83FF89039FFC007FC48496C7E4849
6C7E48486D1380485A001FED7FC05B003FED3FE0A2127F5B17F0161F12FFA290B7FCA401
F0C9FCA5127FA27FA2123F17F06C7E16016C6C15E06C6C14036C6DEB07C06C6DEB0F806C
01F0EB3F0090397FFE01FE011FB55A010714F0010114C09026001FFEC7FC2C2F7DAD33>
I<DAFFE0137E010F9039FE03FF80013FEBFF8F90B812C048D9C07F133F489038001FF848
48EB0FFC4848903907FE1F80001F9238FF0F00496D90C7FCA2003F82A8001F93C7FCA26D
5B000F5D6C6C495A6C6C495A6C9038C07FF04890B55A1680D8078F49C8FC018013E0000F
90CAFCA47F7F7F90B612C016FC6CEDFF8017E06C826C16FC7E000382000F82D81FF0C77E
D83FC014074848020113808248C9FC177FA46D15FF007F17006D5C6C6C4A5A6C6C4A5AD8
0FFEEC3FF83B07FFC001FFF0000190B612C06C6C92C7FC010F14F8D9007F90C8FC32427D
AC38>103 D<EB7FC0B5FCA512037EB1ED07FE92383FFF8092B512E002C114F89139C7F0
3FFC9138CF801F9139DF000FFE14DE14FC4A6D7E5CA25CA35CB3A7B60083B512FEA53745
7CC43E>I<137C48B4FC4813804813C0A24813E0A56C13C0A26C13806C1300EA007C90C7
FCAAEB7FC0EA7FFFA512037EB3AFB6FCA518467CC520>I<EC03E0EC0FF8EC1FFCEC3FFE
A2EC7FFFA5EC3FFEA2EC1FFCEC0FF8EC03E091C7FCAAEC01FF0103B5FCA5EB000F80B3B3
A7EA1F80EA3FC0EA7FE0EAFFF0EC0FFEA215FC141F01E013F8007FEB3FF0393FC0FFE06C
B512806C1400000313FCC613C0205A86C522>I<EB7FC0B5FCA512037EB293387FFFE0A5
93380FE0004C5A4CC7FC167E5EED03F8ED07E04B5A4B5A037FC8FC15FEECC1FCECC3FE14
C7ECDFFF91B57E82A202F97F02E17F02C07FEC807F6F7E826F7E816F7F836F7F816F7F83
707E163FB60003B512F8A535457DC43B>I<EB7FC0B5FCA512037EB3B3B3A3B61280A519
457CC420>I<90277F8007FEEC0FFCB590263FFFC090387FFF8092B5D8F001B512E00281
6E4880913D87F01FFC0FE03FF8913D8FC00FFE1F801FFC0003D99F009026FF3E007F6C01
9E6D013C130F02BC5D02F86D496D7EA24A5D4A5DA34A5DB3A7B60081B60003B512FEA557
2D7CAC5E>I<90397F8007FEB590383FFF8092B512E0028114F8913987F03FFC91388F80
1F000390399F000FFE6C139E14BC02F86D7E5CA25CA35CB3A7B60083B512FEA5372D7CAC
3E>I<EC1FFC49B512C0010714F0011F14FC90397FF80FFF9026FFC0017F48496C7F4848
C7EA3FE000078248486E7E49140F001F82A2003F82491407007F82A400FF1780AA007F17
00A46C6C4A5AA2001F5E6D141F000F5E6C6C4A5AA26C6C6CEBFFE06C6D485B27007FF80F
90C7FC6DB55A010F14F8010114C09026001FFCC8FC312F7DAD38>I<90397FC00FF8B590
B57E02C314E002CF14F89139DFC03FFC9139FF001FFE000301FCEB07FF6C496D13804A15
C04A6D13E05C7013F0A2EF7FF8A4EF3FFCACEF7FF8A318F017FFA24C13E06E15C06E5B6E
4913806E4913006E495A9139DFC07FFC02CFB512F002C314C002C091C7FCED1FF092C9FC
ADB67EA536407DAC3E>I<90387F807FB53881FFE0028313F0028F13F8ED8FFC91389F1F
FE000313BE6C13BC14F8A214F0ED0FFC9138E007F8ED01E092C7FCA35CB3A5B612E0A527
2D7DAC2E>114 D<90391FFC038090B51287000314FF120F381FF003383FC00049133F48
C7121F127E00FE140FA215077EA27F01E090C7FC13FE387FFFF014FF6C14C015F06C14FC
6C800003806C15806C7E010F14C0EB003F020313E0140000F0143FA26C141F150FA27EA2
6C15C06C141FA26DEB3F8001E0EB7F009038F803FE90B55A00FC5CD8F03F13E026E007FE
C7FC232F7CAD2C>I<EB01E0A51303A41307A2130FA2131FA2133F137F13FF1203000F90
B51280B7FCA4C601E0C7FCB3A3ED01E0A9150302F013C0137F150790393FF80F8090391F
FC1F006DB5FC6D13FC01015B9038003FE023407EBE2C>I<D97FC049B4FCB50103B5FCA5
0003EC000F6C81B3A85EA25EA25E7E6E491380017FD901F713FE9138F807E76DB512C701
0F1407010313FE9026007FF0EBFC00372E7CAC3E>I<B6903803FFFCA5000101E0903800
3E006C163C80017F5D8017F8013F5D6E1301011F5D6E1303010F5D6E13076D5DED800F6D
92C7FC15C05E6DEBE01E163E6D143CEDF07C027F1378EDF8F8023F5B15FD021F5B15FF6E
5BA36E5BA26E90C8FCA26E5AA26E5AA21578362C7EAB3B>I<B5D8FE1FB539801FFFF0A5
00019027C0003FE0C7EA7C007114786E17F86C6F6C5C6E1601017F6E6C5CA26E011F1403
013F6F5C6E013F1407011F6F5CA26E0179140F010F048090C7FC6E01F95C6D02F0EBC01E
15806D902681E07F5B18E003C3157C6D9139C03FF07815E76DDA801F5B18F803FF14F96E
9039000FFDE018FF6E486D5BA36E486D5BA26E486D90C8FCA24B7F02075DA26E48147C4B
143C4C2C7EAB51>I<B500FE90383FFFF0A5C601F0903803E0006D6C495A013F4A5A6D6C
49C7FC6E5B6D6C137E6DEB807C6D6D5A6DEBC1F0EDE3E06DEBF7C06EB45A806E90C8FC5D
6E7E6E7F6E7FA24A7F4A7F8291381F3FFCEC3E1F027C7F4A6C7E49486C7F01036D7F4948
7E02C08049486C7F49C76C7E013E6E7E017E141FB500E090B512FCA5362C7EAB3B>I<B6
903803FFFCA5000101E09038003E006C163C80017F5D8017F8013F5D6E1301011F5D6E13
03010F5D6E13076D5DED800F6D92C7FC15C05E6DEBE01E163E6D143CEDF07C027F1378ED
F8F8023F5B15FD021F5B15FF6E5BA36E5BA26E90C8FCA26E5AA26E5AA21578A215F85D14
015D001F1303D83F805B387FC007D8FFE05B140F92C9FC5C143E495A387FC1F8EB07F06C
B45A6C5B000790CAFCEA01FC36407EAB3B>I<001FB71280A49026FC001F130001E0495A
5B49495A90C7485A48495B123E4A5B4A5B003C495BA24A90C7FC4A5A4A5AC7FC4A5A495B
495BA2495B499038800780491300A2495A4948130F49481400A2485B48495B485BA24849
5B4890C75A48485C15034848EB1FFEB7FCA4292C7DAB32>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff cmmi10 10 5
/Ff 5 111 df<EF0380EF0FC0173FEFFF80933803FE00EE0FF8EE3FE0EEFF80DB03FEC7
FCED0FF8ED3FE0EDFF80DA03FEC8FCEC0FF8EC3FE0ECFF80D903FEC9FCEB0FF8EB3FE0EB
FF80D803FECAFCEA0FF8EA3FE0EA7F8000FECBFCA2EA7F80EA3FE0EA0FF8EA03FEC66C7E
EB3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED3FE0ED0FF8ED03
FE923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0170FEF0380323279AD41>60
D<126012FCB4FCEA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007F
C0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE
01FF9338007F80EF1FC0A2EF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED
1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA
07FCEA3FF0EA7FC048CBFC12FC1270323279AD41>62 D<147E903803FF8090390FC1C380
90391F00EFC0017E137F49133F485A4848EB1F8012075B000F143F48481400A2485A5D00
7F147E90C7FCA215FE485C5AA214015D48150CA21403EDF01C16181407007C1538007E01
0F1330003E131F027B13706C01E113E03A0F83C0F9C03A03FF007F80D800FCEB1F002626
7DA42C>97 D<133FEA1FFFA3C67E137EA313FE5BA312015BA312035BA31207EBE0FCEBE3
FF9038E707C0390FFE03E09038F801F001F013F8EBE000485A15FC5BA2123F90C7FCA214
015A127EA2140312FE4814F8A2140715F05AEC0FE0A215C0EC1F80143F00781400007C13
7E5C383C01F86C485A380F07C06CB4C7FCEA01FC1E3B7CB924>I<D803E0137F3A07F801
FFE03A0E3C0781F03A1C3E1E00F826383F387F00305B4A137C00705B00605BA200E090C7
12FC485A137EA20000140101FE5C5BA2150300015D5B15075E120349010F133016C0031F
13700007ED80605B17E0EE00C0000F15014915801603EE0700001FEC0F0E49EB07FC0007
C7EA01F02C267EA432>110 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg cmti10 10 29
/Fg 29 122 df<133C137E13FF5AA313FE13FCEA00701300B2120EEA3F80127F12FFA313
00127E123C102477A319>58 D<0107B612FCEFFF8018C0903B000FF0001FF04BEB07F817
03021F15FC17014B14FEA2023F1400A24B1301A2147F18FC92C7120318F84A140718F04A
EC0FE0EF1FC00101ED3F80EF7F004AEB01FEEE07F849B612E05F9139F80007F0EE01FC01
076E7E177F4AEC3F80A2010F16C0171F5CA2131F173F5CA2133FEF7F805C1800017F5D4C
5A91C7485A5F49140FEE1FE0494A5A00014AB45AB748C7FC16F816C037397BB83A>66
D<DB03FE130E92393FFF801E92B5EAE03C913903FE01F0913A0FF000787CDA3FC0EB3CFC
4AC7EA1FF802FE140FEB03FC49481407494815F049481403495A5C49C813E05B485A5B00
0317C0485AA2485A1880485A94C7FCA2485AA3127F5BA312FF90CBFCA41738A217784816
707E17F06C5E16015F16036C6C4A5A94C7FC001F150E6D141E000F5D6D5C6C6C495A6C6C
EB03C0D801FEEB0F8027007F807EC8FC6DB45A010F13E0010090C9FC373D74BA3B>I<01
03B612FEEFFFC018F0903B0007F8000FF84BEB03FCEF00FE020F157FF03F804B141F19C0
021F150F19E05D1807143F19F05DA2147FA292C8FCA25C180F5CA2130119E04A151FA213
0319C04A153FA201071780187F4A1600A2010F16FEA24A4A5A60011F15034D5A4A5D4D5A
013F4B5A173F4A4AC7FC17FC017FEC03F84C5A91C7EA1FC04949B45A007F90B548C8FCB7
12F016803C397CB83F>I<0107B712FEA3903A000FF000074B1300187C021F153CA25DA2
143FA25D1838147FA292C8FCEE03804A130718004A91C7FCA201015CA24A131E163E0103
14FE91B5FC5EA2903807F800167C4A1378A2130FA24A1370A2011F14F0A24A90C8FCA213
3FA25CA2137FA291CAFCA25BA25B487EB6FCA337397BB836>70 D<0103B512F8A3903900
07F8005DA2140FA25DA2141FA25DA2143FA25DA2147FA292C7FCA25CA25CA21301A25CA2
1303A25CA21307A25CA2130FA25CA2131FA25CA2133FA25CA2137FA291C8FC497EB6FCA2
5C25397CB820>73 D<0107B512FCA25E9026000FF8C7FC5D5D141FA25DA2143FA25DA214
7FA292C8FCA25CA25CA21301A25CA21303A25CA21307A25CA2130F170C4A141CA2011F15
3C17384A1478A2013F157017F04A14E01601017F140317C091C71207160F49EC1F80163F
4914FF000102071300B8FCA25E2E397BB834>76 D<ED03FE92383FFFC09238FC07F09139
03E001F891390F80007C023FC77E027E8002F815804948EC0FC0EB07E04948EC07E0131F
4A15F049C81203137E01FE16F8485AA2485AA2485AA2120F5B001F16075B123FA34848ED
0FF0A448C9EA1FE0A3EF3FC0A21880177F18005F5F16015F6C4B5A4C5AA24C5A6C4B5A6D
4A5A001F93C7FC6D147E000F5D6C6CEB03F06C6C495A6C6CEB0F806C6C013FC8FC90383F
01FC90381FFFE0010190C9FC353D74BA40>79 D<92383FC00E913901FFF01C020713FC91
391FC07E3C91393F001F7C027CEB0FF84A130749481303495A4948EB01F0A2495AA2011F
15E091C7FCA34915C0A36E90C7FCA2806D7E14FCECFF806D13F015FE6D6D7E6D14E00100
80023F7F14079138007FFC150F15031501A21500A2167C120EA3001E15FC5EA3003E4A5A
A24B5AA2007F4A5A4B5A6D49C7FC6D133ED8F9F013FC39F8FC03F839F07FFFE0D8E01F13
8026C003FCC8FC2F3D7ABA2F>83 D<0007B812E0A25AD9F800EB001F01C049EB07C0485A
D900011403121E001C5C003C17801403123800785C00701607140700F01700485CA2140F
C792C7FC5DA2141FA25DA2143FA25DA2147FA292C9FCA25CA25CA21301A25CA21303A25C
A21307A25CA2130FA25CEB3FF0007FB512F8B6FCA2333971B83B>I<14F8EB07FE90381F
871C90383E03FE137CEBF801120148486C5A485A120FEBC001001F5CA2EA3F801403007F
5C1300A21407485C5AA2140F5D48ECC1C0A2141F15831680143F1587007C017F1300ECFF
076C485B9038038F8E391F0F079E3907FE03FC3901F000F0222677A42A>97
D<147F903803FFC090380FC1E090381F0070017E13784913383901F801F83803F0031207
13E0120FD81FC013F091C7FC485AA2127F90C8FCA35A5AA45AA3153015381578007C14F0
007EEB01E0003EEB03C0EC0F806CEB3E00380F81F83803FFE0C690C7FC1D2677A426>99
D<ED01F815FFA3150316F0A21507A216E0A2150FA216C0A2151FA21680A2153FA202F813
00EB07FE90381F877F90383E03FF017C5BEBF80112013803F00048485B120FEBC001121F
5DEA3F801403127F01005BA214075A485CA2140FA248ECC1C0A2141F15C3ED8380143F15
87007C017F1300ECFF076C485B9038038F8E391F0F079E3907FE03FC3901F000F0253B77
B92A>I<147F903803FFC090380FC1E090383F00F0017E13785B485A485A485A120F4913
F8001F14F0383F8001EC07E0EC1F80397F81FF00EBFFF891C7FC90C8FC5A5AA55AA21530
007C14381578007E14F0003EEB01E0EC03C06CEB0F806CEB3E00380781F83803FFE0C690
C7FC1D2677A426>I<ED07C0ED1FF0ED3E38ED7C3CEDF8FC15F9140115F1020313F8EDF0
F0160014075DA4140F5DA4141F5D010FB512C05B16809039003F800092C7FCA45C147EA4
14FE5CA413015CA413035CA413075CA4130F5CA3131F5CA391C8FC5B121CEA7E3EA2EAFE
3C137C1378EAF8F01278EA3FC0EA0F80264C82BA19>I<EC07C0EC3FF09138FC38E09039
01F01FF0EB03E0903807C00FEB0F80011F1307D93F0013E05B017E130F13FE4914C01201
151F1203491480A2153F1207491400A25DA249137EA215FEA25D00031301140314076C6C
485A0000131FEB787BEB3FF390380FC3F0EB00031407A25DA2140F5D121C007E131F5D00
FE49C7FC147E5C387801F8387C07E0381FFF80D803FEC8FC24367CA426>I<EB03F0EA01
FFA3EA00075CA3130F5CA3131F5CA3133F91C8FCA35B90387E07F0EC1FFCEC783E9038FF
E01F02C01380EC800F1400485A16C05B49EB1F8012035BA2153F000715005BA25D000F14
7E5B15FE5D121FD98001131C15F8163C003F01031338010013F0A216704814E0007E15F0
16E0EDE1C000FE903801E38048903800FF000038143C263B7BB92A>I<EB01C0EB07E014
F0130F14E01307EB038090C7FCAB13F0EA03FCEA071EEA0E1F121CA212385B1270A25BEA
F07E12E013FEC65AA212015B1203A25B12075BA2000F13E013C013C1001F13C01381A2EB
83801303EB0700A2130E6C5AEA07F8EA01E0143879B619>I<EB03F0EA01FFA3EA00075C
A3130F5CA3131F5CA3133F91C8FCA35B017EEB0F80ED3FE015F09039FE01C1F09038FC03
87EC0707140E0001011C13E0EBF83891383003800270C7FC00035BEBF1C0EBF38001FFC8
FCEA07FC7FEBFFC0EBE7F8380FE1FCEBC07E147F80001F809039801F81C0A21583003F01
3F138001001303A21507481500007E133EEC1E0E151E00FE6D5A48EB07F80038EB01E024
3B7BB926>107 D<EB0FC0EA07FFA3EA001F1480A2133FA21400A25BA2137EA213FEA25B
A21201A25BA21203A25BA21207A25BA2120FA25BA2121FA25BA2123FA290C7FCA25AA2EA
7E0EA212FE131EEAFC1CA2133C133812F81378EA7870EA7CE0121FEA0F80123B79B915>
I<D801E001FEEB07F03C07F803FF801FFC3C0E3C0F07C0783E3C1E3E3C03E1E01F261C1F
78D9F3C013803C383FF001F7800F02E01400007801C013FE007018C002805B4A4848EB1F
80EAF07FD8E07E5CA200000207143F01FE1700495CA2030F5C0001177E495C18FE031F5C
120349DA8001131C18F8033F153C00070403133849020013F0A24B1570000F17E049017E
15F019E003FEECE1C0001FEE01E34949903800FF000007C70038143C3E2679A444>I<D8
01E013FE3A07F803FF803A0E3C0F07C03A1E3E3C03E0261C1F787F39383FF00114E00078
13C000708114804A485AEAF07FEAE07EA20000140701FE5C5BA2150F00015D5B151F5E12
034990383F8380160316070007027F130049137EA2160E000F147C49141E161C5E001FEC
3C7849EB1FE00007C7EA0780292679A42F>I<147F903803FFC090380FC1F090381F00F8
017E137C5B4848137E4848133E0007143F5B120F485AA2485A157F127F90C7FCA215FF5A
4814FEA2140115FC5AEC03F8A2EC07F015E0140F007C14C0007EEB1F80003EEB3F00147E
6C13F8380F83F03803FFC0C648C7FC202677A42A>I<9039078007C090391FE03FF09039
3CF0787C903938F8E03E9038787FC00170497EECFF00D9F0FE148013E05CEA01E113C15C
A2D80003143FA25CA20107147FA24A1400A2010F5C5E5C4B5A131F5EEC80035E013F495A
6E485A5E6E48C7FC017F133EEC70FC90387E3FF0EC0F8001FEC9FCA25BA21201A25BA212
03A25B1207B512C0A3293580A42A>I<3903C003F0390FF01FFC391E783C0F381C7C703A
3C3EE03F8038383FC0EB7F800078150000701300151CD8F07E90C7FCEAE0FE5BA2120012
015BA312035BA312075BA3120F5BA3121F5BA3123F90C9FC120E212679A423>114
D<14FE903807FF8090380F83C090383E00E04913F00178137001F813F00001130313F0A2
15E00003EB01C06DC7FC7FEBFFC06C13F814FE6C7F6D13807F010F13C01300143F141F14
0F123E127E00FE1480A348EB1F0012E06C133E00705B6C5B381E03E06CB45AD801FEC7FC
1C267AA422>I<EB0380EB07C0130FA4131F1480A3133F1400A35B137E007FB5FCA2B6FC
3800FC00A312015BA312035BA312075BA3120F5BA3121FEB801CA2143C003F1338EB0078
147014F014E0EB01C0EA3E03381F0780380F0F00EA07FCEA01F0183579B31C>I<13F8D8
03FEEB01C0D8078FEB03E0390E0F8007121E121C0038140F131F007815C01270013F131F
00F0130000E015805BD8007E133FA201FE14005B5D120149137EA215FE120349EBFC0EA2
0201131E161C15F813E0163CD9F003133814070001ECF07091381EF8F03A00F83C78E090
393FF03FC090390FC00F00272679A42D>I<13F0D803FCEB01C0D8071EEB03E0D80E1F13
07121C123C0038140F4914C01270A249131FD8F07E148012E013FEC648133F160012015B
5D0003147E5BA215FE00075C5BA214015DA314035D14070003130FEBF01F3901F87FE038
007FF7EB1FC7EB000F5DA2141F003F5C48133F92C7FC147E147C007E13FC387001F8EB03
E06C485A383C1F80D80FFEC8FCEA03F0233679A428>121 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh cmbx12 14.4 52
/Fh 52 123 df<EEFFFC031FEBFF804AB612E0020781021F9038C00FF8913A7FFE0003FC
DAFFF0EB00FE4949EB03FF4901805B4990C7487F49485CA2495A4D7F013F6F5B5CA37190
C7FC715AEF01F894C9FCA90403B512C0BAFCA526003FFCC7120783B3B3A6003FB5D8FC03
B612C0A542547DD34B>12 D<EA07F0EA1FF8EA3FFE487EA2B5128014C0A314E0A37EA27E
EA1FFDEA07F1EA0001A2130314C0A313071480130FA214005B133EA25B5B485A1203485A
485A485A90C7FC120C132876D225>39 D<B712F0AB240B7F9F2D>45
D<EA07F0487E487E487E487EB51280A76C13006C5A6C5A6C5A6C5A1111769025>I<9138
03FFC0023F13FC91B6FC010315C0010F018113F0903A1FFC003FF849486D7E49486D7E49
486D7E48496D138048496D13C0A24817E04890C813F0A34817F8A24817FC49157FA3007F
17FEA600FF17FFB3A5007F17FEA6003F17FCA26D15FFA26C17F8A36C17F0A26C6D4913E0
A26C6D4913C06C17806E5B6C6D4913006D6C495AD91FFCEB3FF8903A0FFF81FFF06D90B5
5A01011580D9003F01FCC7FC020313C0384F7BCD43>48 D<157815FC14031407141F14FF
130F0007B5FCB6FCA2147F13F0EAF800C7FCB3B3B3A6007FB712FEA52F4E76CD43>I<EC
3FFE0103B512E0010F14FC013F14FF90B712C048D9C07F7F2703FE000F13F8D807F80103
7FD80FE06D7F48486D7F48488001F01680486C6E13C07F486C6E13E07FA27013F0A56C5A
A26C5AEA0FF0EA03C0C914E05EA218C05E1880A24C13005F4C5A4B5B5F4B5B5F4B5B4B90
C7FC4B5A5E4B5AED7FE04B5A4A5B4A48C8FC4A5A5D4A48EB01F04A5AEC3F804AC7FC02FE
EC03E0495A495A495A495AD91F80140749C8FC013E150F017FB7FC90B812C05A5A5A5A5A
5A5AB9FC1880A4344E79CD43>I<91380FFFC091B512FC0107ECFF80011F15E090263FF8
077F9026FF800113FC4848C76C7ED803F86E7E491680D807FC8048B416C080486D15E0A4
805CA36C17C06C5B6C90C75AD801FC1680C9FC4C13005FA24C5A4B5B4B5B4B13C04B5BDB
FFFEC7FC91B512F816E016FCEEFF80DA000713E0030113F89238007FFE707E7013807013
C018E07013F0A218F8A27013FCA218FEA2EA03E0EA0FF8487E487E487EB57EA318FCA25E
18F891C7FC6C17F0495C6C4816E001F04A13C06C484A1380D80FF84A13006CB44A5A6CD9
F0075BC690B612F06D5D011F1580010302FCC7FCD9001F1380374F7ACD43>I<177C17FE
A2160116031607160FA2161F163F167FA216FF5D5DA25D5DED1FBFED3F3F153E157C15FC
EC01F815F0EC03E01407EC0FC01580EC1F005C147E147C5C1301495A495A5C495A131F49
C7FC133E5B13FC485A5B485A1207485A485A90C8FC123E127E5ABA12C0A5C96C48C7FCAF
020FB712C0A53A4F7CCE43>I<D80380150ED807E0157E01FEEC03FED9FFF0137F91B65A
5F5F5F5F5F94C7FC5E5E16F016C093C8FC15F801E190C9FC01E0CAFCABEC0FFF027F13F0
01E3B512FE01E76E7E9026FFF8077FDAC0017F49C713F8496E7E49143F4981496E7E6C48
1680C9FC18C08218E0A418F0A3EA0FE0487E487E487E487EA418E0A35B6C484A13C05B49
1680003EC85A003F17006C6C4A5A6D5D6C6C4A5AD807F8495BD803FE01075B2701FFC03F
5B6C90B65A013F4AC7FC6D14F8010314C09026007FF8C8FC344F79CD43>I<ED0FFF92B5
12E0020780021F14FC91397FFE03FE903A01FFF0007F4901C0EB3F804990C7121F4948EC
7FC0494814FF49484913E049485B01FF5C485BA2485B5AA2486F13C04A6D1380486F1300
177E94C7FC5AA291CAFC5AA21508913801FFF8020713FFB54814C04A14F04AC66C7E023C
6D7E4A6D7E4A6D7E7013804A15C0A24A15E07013F05C18F8A491C714FCA37EA67EA46C17
F880A27E18F06C5D18E06C6D15C07E6E4913806C6D15006D6C495A6D6CEB7FFC6DB44848
5A6D90B55A010315C0010092C7FC023F13FC020713C0364F7ACD43>I<121F7F7FEBFF80
91B81280A45A1900606060A2606060485F0180C86CC7FC007EC95A4C5A007C4B5A5F4C5A
160F4C5A484B5A4C5A94C8FC16FEC812014B5A5E4B5A150F4B5AA24B5AA24B5A15FFA24A
90C9FCA25C5D1407A2140FA25D141FA2143FA4147F5DA314FFA55BAC6D5BA2EC3FC06E5A
395279D043>I<913807FFC0027F13FC0103B67E010F15E090261FFC0113F8903A3FE000
3FFCD97F80EB0FFE49C76C7E48488048486E1380000717C04980120F18E0177FA2121F7F
A27F7F6E14FF02E015C014F802FE4913806C7FDBC00313009238F007FE6C02F85B9238FE
1FF86C9138FFBFF06CEDFFE017806C4BC7FC6D806D81010F15E06D81010115FC01078101
1F81491680EBFFE748018115C048D9007F14E04848011F14F048487F48481303030014F8
484880161F4848020713FC1601824848157F173FA2171FA2170FA218F8A27F007F17F06D
151FA26C6CED3FE0001F17C06D157F6C6CEDFF806C6C6C010313006C01E0EB0FFE6C01FC
EBFFFC6C6CB612F06D5D010F1580010102FCC7FCD9000F13C0364F7ACD43>I<91380FFF
8091B512F8010314FE010F6E7E4901037F90267FF8007F4948EB3FF048496D7E48498048
6F7E484980824817805A91C714C05A7013E0A218F0B5FCA318F8A618FCA46C5DA37EA25E
6C7F6C5DA26C5D6C7F6C6D137B6C6D13F390387FF803011FB512E36D14C30103028313F8
9039007FFE03EC00401500A218F05EA3D801F816E0487E486C16C0487E486D491380A218
005E5F4C5A91C7FC6C484A5A494A5A49495B6C48495BD803FC010F5B9027FF807FFEC7FC
6C90B55A6C6C14F06D14C0010F49C8FC010013F0364F7ACD43>I<91B5FC010F14F8017F
14FF90B712C00003D9C00F7F2707FC00017FD80FE06D7F48486E7E48C87FD87FE06E7E7F
7F486C1680A66C5A18006C485C6C5AC9485A5F4B5B4B5B4B5B4B5B4B90C7FC16FC4B5A4B
5A16C04B5A93C8FC4A5A5D14035D5D14075DA25D140FA25DAB91CAFCAAEC1FC04A7EECFF
F8497FA2497FA76D5BA26D5BEC3FE06E5A315479D340>63 D<BA12C019FEF1FFC01AF01A
FCD8000701F0C7000313FFDE007F7F737F070F7F737F878587858785A287A84F5BA26361
6361634F5B4F5B077F90C7FC4E485A060713F892B812E097C8FC861AF003F0C7000313FE
9539003FFF80070F13E0737F07017F87737F747E1C807413C0A27413E0A31CF0A386A362
A31CE0A2621CC0A250138097B5FC1C004F5B19074F5B073F13F04EB55ABC128098C7FC1A
F81AC007F8C8FC54527CD160>66 D<932601FFFCEC01C0047FD9FFC013030307B600F813
07033F03FE131F92B8EA803F0203DAE003EBC07F020F01FCC7383FF0FF023F01E0EC0FF9
4A01800203B5FC494848C9FC4901F8824949824949824949824949824990CA7E494883A2
484983485B1B7F485B481A3FA24849181FA3485B1B0FA25AA298C7FC5CA2B5FCAE7EA280
A2F307C07EA36C7FA21B0F6C6D1980A26C1A1F6C7F1C006C6D606C6D187EA26D6C606D6D
4C5A6D6D16036D6D4C5A6D6D4C5A6D01FC4C5A6D6DEE7F806D6C6C6C4BC7FC6E01E0EC07
FE020F01FEEC1FF80203903AFFE001FFF0020091B612C0033F93C8FC030715FCDB007F14
E0040101FCC9FC525479D261>I<BA7E19FCF1FF801AF01AFCD8000701F0C7000F13FF06
0014C0071F7F070713F807017F737F747E747F747F86747F747F8886888688A2757EA31D
8087A21DC0A51DE0A387A963A31DC0A51D80A2631D00A3515AA2646264505B6264505B50
5B5090C7FCF2FFFE4F5B07075B071F5B96B512C0060F91C8FCBB5A1AF01AC007FCC9FC19
805B527CD167>I<BC1280A5D8000701F8C7000114C0F0001F19071901851A7F1A3F1A1F
A2F20FE0A21A07A31A03A318F81BF01A01A497C7FC1701A317031707170F177F92B6FCA5
9238F8007F170F170717031701A317001B3EA31B7CA395C8FCA21BFCA21BF8A21A01A31A
031BF01A071A0FA21A1F1A3FF27FE0F101FF1907191F0603B5FCBCFCA21BC0A34F517CD0
58>I<B8D8C003B8FCA5D8000701F8C9001FEBE000B3AE92BAFCA503F8C9121FB3B1B8D8
C003B8FCA560527CD169>72 D<B600FC073FB512FE6F61A26F96B6FCA2D80007F5C00070
EF01EFA202EF6DEF03CFA202E76DEF078FA202E36DEF0F0FA202E16D171EA302E06D173C
A26F6C1778A26F6C17F0A26F6DED01E0A26F6DED03C0A36F6DED0780A26F6DED0F00A26F
6D151EA26F6D5DA3706C5DA2706C5DA2706D495AA2706D495AA2706D495AA3706D49C7FC
A2706D131EA2706D5BA2716C5BA3716C5BA271EB81E0A271EBC3C0A271EBE780A27101FF
C8FCA3715BA2715BA2725AA2725AA2D93FFC6F5AB74DB712FEA2725AA2725A77527CD180
>77 D<B600FC93B7FC8181A282D800076E9239003FFC0070EE07E08282A28202EF7F02E7
7F02E380A202E18002E0806F7F6F7F6F7FA26F7F6F7F6F806F80A26F80707F707F707F70
7FA2707F7080708070808583717F717F717F717FA27114807114C07114E07213F07213F8
A27213FC7213FE7213FF721487A27214C77214E77313F77313FF85A285858585A2858686
8686A286868686A2D93FFC187FB7173F1B1F1B0F1B07755A60527CD169>I<93380FFFC0
0303B6FC031F15E092B712FC0203D9FC0013FF020F01C0010F13C0023F90C7000313F0DA
7FFC02007F494848ED7FFE4901E0ED1FFF49496F7F49496F7F4990C96C7F49854948707F
4948707FA24849717E48864A83481B804A83481BC0A2481BE04A83A2481BF0A348497113
F8A5B51AFCAF6C1BF86E5FA46C1BF0A26E5F6C1BE0A36C6D4D13C0A26C6D4D1380A26C1B
006C6D4D5A6E5E6C626D6C4C5B6D6D4B5B6D6D4B5B6D6D4B5B6D6D4B5B6D6D4B90C7FC6D
6D4B5A6D01FF02035B023F01E0011F13F0020F01FC90B512C0020390B7C8FC020016FC03
1F15E0030392C9FCDB001F13E0565479D265>I<BAFC19F819FF1AE086D8000701F0C700
1F13FC060113FF726C13807313C0070F13E01BF0857313F81BFCA27313FEA41BFFA81BFE
A31BFC61A21BF84F13F04F13E0614F13C04F13004E485A061F5B92B812F01AC04FC7FC19
E003F8CBFCB3AEB812C0A550527CD15C>I<B912F0F0FF8019F819FF1AC0D8000701F0C7
14F0060F7F060113FE727F737F737F85737F87A2737FA387A863A2616363A24F5B4F5B4F
90C8FC4F5A06035B060F13F095B512C092B8C9FC19F819E019F89226F0000313FE943900
7FFF80727F727F727F727F727F8684A28684A787A71D1C75133EA38575137E73157C7513
FC731401B86C6D9038F803F807039038FE07F07390B512E0736C14C0080F1400CEEA7FFC
5F537CD164>82 D<91260FFF80130791B500F85B010702FF5B011FEDC03F49EDF07F9026
FFFC006D5A4801E0EB0FFD4801800101B5FC4848C87E48488149150F001F824981123F49
81007F82A28412FF84A27FA26D82A27F7F6D93C7FC14C06C13F014FF15F86CECFF8016FC
6CEDFFC017F06C16FC6C16FF6C17C06C836C836D826D82010F821303010082021F168014
00030F15C0ED007F040714E01600173F050F13F08383A200788200F882A3187FA27EA219
E07EA26CEFFFC0A27F6D4B13806D17006D5D01FC4B5A01FF4B5A02C04A5A02F8EC7FF090
3B1FFFC003FFE0486C90B65AD8FC0393C7FC48C66C14FC48010F14F048D9007F90C8FC3C
5479D24B>I<003FBC1280A59126C0003F9038C0007F49C71607D87FF8060113C001E084
49197F49193F90C8171FA2007E1A0FA3007C1A07A500FC1BE0481A03A6C994C7FCB3B3AC
91B912F0A553517BD05E>I<B800C00103B612FCA5D8000701F8CAEBF000F31F80B3B3B1
1B3FA26D97C7FC81637F1B7E6D6D17FE505A6E7E505A6E6D15076E4D5A6E6D4B5A6E6D4B
5A6E01F84B5A6E6DDA03FFC8FC6E6CB46CEB0FFE6F9039F001FFF8030F90B65A030316C0
DB007F92C9FC040F14F8DC007F13805E537CD167>I<B700FC017FB600FE91B612F0A5D8
003F01C0C8001F01E0C9EBF8006F71EE0FC06D7161876F1C1F6D7196C7FC6F8373606D1E
3E6F836D7160876F1CFC6D666F4B801F016D66704A806E525A88704A17076E059F5F7002
1F80080F160F6E6570023F806EDC3E074CC8FC8870027E5F6EDC7C03163E7002FC804F6C
167E6E1C7C700101814F6C16FC6E745B70010317016E4C6D5D060716C00580496D14036F
63DDC00F16E04F6D14076F07F05BDDE01F170F6F92C76C5D1DF8DDF03E6E141F6F98C9FC
DDF87E16FC067C6E5C6FF1FE3EDDFCFC177E6F4A6E147C1DFFDDFFF06E14FC6F62A24E81
6F62A270496F5BA24E817061A295C97E7061A270487090CAFCA37048705AA24D16010403
60A27048705A84537DD18B>87 D<EC7FFF0107B512F0013F14FE90B77E48D9E00F7F2703
FE000113F0486C6D7F6EEB3FFC48826E131F83707FA36C496D7FA26C90C7FC6C5AC9FCA6
037FB5FC020FB6FC91B7FC01071487013FEBF0074913803901FFFC004813F0485B485B48
5B4890C7FC5A5BA2485AA45EA26D5C007F151D163D6C6C02797F6C6D01F113F86C9026C0
03E1EBFFE06C9026F81FC014F06C90B5487EC6ED001F011F01FC010713E0010101E090C8
FC3C387CB641>97 D<EB3FF0B5FCA51203C6FCB3A4923801FFE0030F13FE033FEBFFC092
B612F002F301017F913AF7F8003FFEDAFFE0EB0FFF03806D7F92C76C7F4A6E7F4A824A6E
7FA2727EA285A28584A31A80AC1A00A44E5AA36118FF616E4A5BA26E4A5B6E4A5B6F495B
DACFC04990C7FCDA87F0EB7FFC913A03FE03FFF849C6B612E0496D148049011F01FCC8FC
90C7000313C041547BD24B>I<913801FFF8021FEBFF8091B612F0010315FC010F9038C0
0FFE903A1FFE0001FFD97FFC491380D9FFF05B4817C048495B5C5A485BA2486F138091C7
FC486F1300705A4892C8FC5BA312FFAD127F7FA27EA2EF03E06C7F17076C6D15C07E6E14
0F6CEE1F806C6DEC3F006C6D147ED97FFE5C6D6CEB03F8010F9038E01FF0010390B55A01
001580023F49C7FC020113E033387CB63C>I<4DB47E0407B5FCA5EE001F1707B3A49138
01FFE0021F13FC91B6FC010315C7010F9038E03FE74990380007F7D97FFC0101B5FC4948
7F4849143F484980485B83485B5A91C8FC5AA3485AA412FFAC127FA36C7EA37EA26C7F5F
6C6D5C7E6C6D5C6C6D49B5FC6D6C4914E0D93FFED90FEFEBFF80903A0FFFC07FCF6D90B5
128F0101ECFE0FD9003F13F8020301C049C7FC41547CD24B>I<913803FFC0023F13FC49
B6FC010715C04901817F903A3FFC007FF849486D7E49486D7E4849130F48496D7E481780
48497F18C0488191C7FC4817E0A248815B18F0A212FFA490B8FCA318E049CAFCA6127FA2
7F7EA218E06CEE01F06E14037E6C6DEC07E0A26C6DEC0FC06C6D141F6C6DEC3F806D6CEC
FF00D91FFEEB03FE903A0FFFC03FF8010390B55A010015C0021F49C7FC020113F034387C
B63D>I<DA3FFF14FF0103B5D8F00713C0010FDAFC1F13E0013FECFF7F90267FFC0F9038
FF9FF09026FFE001EBF83F48496C13E0484990387FF01F4890C7D83FF813E0489338FC0F
C0F0078048486E6CC7FCA2003F82A9001F5EA26C6C4A5AA26C5E6C6D495A6C6D495A6C6D
485BDAFC0F5B4890B6C8FCD803EF14FC01C314F02607C03F90C9FC91CBFCA2120FA37FA2
13F813FE90B7FC6C16F817FF18C06C836C836C836D828448B9FC12074848C700031480D8
1FF8EC003F4848150748486F13C083485A83A56D5D007F18806D5D003F18006C6C4B5AD8
0FFEED1FFC6C6C6CEC7FF86C01E049485A6C01FE011F5B6C6CB71280010F03FCC7FC0101
15E0D9000F01FCC8FC3C4F7CB543>103 D<EB3FF0B5FCA51203C6FCB3A4EE1FFC93B512
C0030314F0030F8092391FE07FFC92393F001FFE037C8003F07FDAF1E081ECF3C0DAF780
7F8502FFC7FC5CA25CA45CB3ACB6D8F807B612C0A542537BD24B>I<137F497E000313E0
487FA2487FA76C5BA26C5BC613806DC7FC90C8FCADEB3FF0B5FCA512017EB3B3A6B612E0
A51B547BD325>I<EB3FF0B5FCA51203C6FCB3A54CB512F8A59339003FFE00EF1FF0EF3F
C04D5A4DC7FCEE03FEEE07F84C5A4C5AEE7FC04CC8FC4B5A4B5AED0FF8ED1FE04B7E4B7E
ECF1FF02F37F02F77F91B6FC83159F030F7F02FE80DAF8077F4A7E6F7F6F7F83707E8270
7F84707F707F82707F84707F177F717E4D13C0B6D8F003B6FCA540537CD247>107
D<EB3FF0B5FCA512017EB3B3B3B1B612F0A51C537BD225>I<D93FF0D91FFCEDFFE0B591
B500C0010713FE030302F0011F6D7E030F6E017F8092271FE07FFCD9FF037F922A3F001F
FE01F8007F0003027C9126FF03E080C602F06DD90780137FDAF1E0038FC77FDAF3C0159E
DAF7806D01BC143F07FC8102FFC75C4A5EA24A5EA44A5EB3ACB6D8F807B6D8C03FB512FE
A567367BB570>I<D93FF0EB1FFCB591B512C0030314F0030F8092391FE07FFC92393F00
1FFE0003027C80C602F07FDAF1E081ECF3C0DAF7807F8502FFC7FC5CA25CA45CB3ACB6D8
F807B612C0A542367BB54B>I<913801FFE0021F13FE91B612C0010315F0010F9038807F
FC903A1FFC000FFED97FF86D6C7E49486D7F48496D7F48496D7F4A147F48834890C86C7E
A24883A248486F7EA3007F1880A400FF18C0AC007F1880A3003F18006D5DA26C5FA26C5F
6E147F6C5F6C6D4A5A6C6D495B6C6D495B6D6C495BD93FFE011F90C7FC903A0FFF807FFC
6D90B55A010015C0023F91C8FC020113E03A387CB643>I<903A3FF001FFE0B5010F13FE
033FEBFFC092B612F002F301017F913AF7F8007FFE0003D9FFE0EB1FFFC602806D7F92C7
6C7F4A824A6E7F4A6E7FA2717FA285187F85A4721380AC1A0060A36118FFA2615F616E4A
5BA26E4A5B6E4A5B6F495B6F4990C7FC03F0EBFFFC9126FBFE075B02F8B612E06F148003
1F01FCC8FC030313C092CBFCB1B612F8A5414D7BB54B>I<90397FE003FEB590380FFF80
033F13E04B13F09238FE1FF89139E1F83FFC0003D9E3E013FEC6ECC07FECE78014EF1500
14EE02FEEB3FFC5CEE1FF8EE0FF04A90C7FCA55CB3AAB612FCA52F367CB537>114
D<903903FFF00F013FEBFE1F90B7FC120348EB003FD80FF81307D81FE0130148487F4980
127F90C87EA24881A27FA27F01F091C7FC13FCEBFFC06C13FF15F86C14FF16C06C15F06C
816C816C81C681013F1580010F15C01300020714E0EC003F030713F015010078EC007F00
F8153F161F7E160FA27E17E07E6D141F17C07F6DEC3F8001F8EC7F0001FEEB01FE9039FF
C00FFC6DB55AD8FC1F14E0D8F807148048C601F8C7FC2C387CB635>I<143EA6147EA414
FEA21301A313031307A2130F131F133F13FF5A000F90B6FCB8FCA426003FFEC8FCB3A9EE
07C0AB011FEC0F8080A26DEC1F0015806DEBC03E6DEBF0FC6DEBFFF86D6C5B021F5B0203
13802A4D7ECB34>I<D93FF8913801FFC0B50207B5FCA50003ED001FC61607B3AE5FA35F
A2017F5D173B177B6D6C14F3DC01E313F06D6CD907C3EBFFC0903A0FFFC03F836D90B512
03010114FE6D6C13F8020701E091C7FC42377BB54B>I<B600F00107B5FCA5000101F8C8
EA7FE06C6DED3F00A2017F163E6E157E013F167C6E15FC6D5E6F13016D5E8117036D5E6F
13076D5E6F130F6D5E6F131F6D93C7FC815F6E6C133E177E023F147C6F13FC6E5C16816E
5C16C3A26EEBE3E016E76E5C16FF6E5CA26E91C8FCA26F5AA36F5AA26F5AA26F5AA26F5A
6F5A40367DB447>I<B6D8E07FB5D8C003B512C0A5000101F0C701F0C7381FF8006E027F
ED07E06C715DA26E023F150F017F705DA26E181F013F4B6C92C7FC6E606D70143E94B5FC
6F177E6D4A6E137C03C001F315FC6D715B160303E001E114016D020702E05B03F013C06D
71485A160F03F8D9807F13076D05F85B93381F003F03FC160F027F4902FC5BDBFE3E011F
131F023F04FE90C8FC167EDBFF7C010F5B6E01FCECFF3E4C6D137E6E5FA24C7F6E5F4C7F
6E5FA24C7F6E5F4C147FA26E5F93C8123F6F5EA2033E6FC9FC5A367DB461>I<007FB500
F090387FFFFEA5C66C48C7000F90C7FC6D6CEC07F86D6D5C6D6D495A6D4B5A6F495A6D6D
91C8FC6D6D137E6D6D5B91387FFE014C5A6E6C485A6EEB8FE06EEBCFC06EEBFF806E91C9
FCA26E5B6E5B6F7E6F7EA26F7F834B7F4B7F92B5FCDA01FD7F03F87F4A486C7E4A486C7E
020F7FDA1FC0804A486C7F4A486C7F02FE6D7F4A6D7F495A49486D7F01076F7E49486E7E
49486E7FEBFFF0B500FE49B612C0A542357EB447>I<B600F00107B5FCA5C601F8C8EA7F
E06EED3F00A26D6C153E187E013F167C6E15FC6D5E6F13016D5E6F13036D5E8117076D6D
5C170F6D6D5C171F6D93C7FC6F5B027F143E6F137E023F147C6F13FCA26E6D5A16816EEB
C1F016C36E5C16E76E5C16FF6E5CA26E91C8FCA36F5AA26F5AA26F5AA26F5AA26F5AA35E
150F5E151F93C9FC5DD81FC0133E486C137E486C137C486C13FC5D14015D14034A5A6C48
485A49485A263FC07FCAFCEB81FE6CB45A6C13F000035BC690CBFC404D7DB447>I<001F
B8FC1880A3912680007F130001FCC7B5FC01F0495B495D49495B495B4B5B48C75C5D4B5B
5F003E4A90C7FC92B5FC4A5B5E4A5B5CC7485B5E4A5B5C4A5B93C8FC91B5FC495B5D4949
EB0F805B495B5D495B49151F4949140092C7FC495A485E485B5C485E485B4A5C48495B48
15074849495A91C712FFB8FCA37E31357CB43C>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi cmbx12 20.74 12
/Fi 12 117 df<EE01F0EE07F8160F163F167FED01FF150F153F4AB5FC143F010FB6FCB8
FCA54A7E14C0EBF000C8FCB3B3B3B3AE007FBA12F0A8447171F061>49
D<92380FFFE04AB67E020F15F0027F15FE49B87E4917E0010F17F8013F8349D9C01F14FF
9027FFFC0001814801E06D6C80480180021F804890C86C8048486F8048486F8001FF6F80
4801C06E8002F081486D18806E816E18C0B5821BE06E81A37214F0A56C5BA36C5B6C5B6C
5B000313C0C690C9FC90CA15E060A34E14C0A21B80601B0060626295B55A5F624D5C624D
5C4D91C7FC614D5B4D13F04D5B6194B55A4C49C8FC4C5B4C5B4C13E04C5B604C90C9FCEE
7FFC4C5A4B5B4B5B4B0180EC0FF04B90C8FC4B5A4B5A4B48ED1FE0EDFFE04A5B4A5B4A90
C9FC4A48163F4A5ADA3FF017C05D4A48167F4A5A4990CA12FFD903FC160749BAFC5B4919
805B5B90BBFC5A5A5A5A481A005A5ABCFCA462A44C7176F061>I<923801FFFE033FEBFF
F84AB7FC020F16E0023F16F84A16FE49B97E49DA003F80010F01F0010714F04901800101
804948C880D97FF86F7F02E081496C834801FC6F148014FF486E6E14C08181481AE081A9
6C5C1BC06C4A5C6C5C6D90C815806D5AD90FF85D90CA150062606295B55A4D5C624D5C4D
5C4D91C7FC4D13FC4D5B4CB512E0047F1480037FB548C8FC92B612F818C018F8F0FF806F
15F092C7003F13FC050713FF050114C071807213F8727F727F867214801BC07214E01BF0
A27214F81BFCA37214FEA31BFFEBFF80000313E0487F001F13FC487FA2487FA2B67EA31B
FEA3601BFCA292C8FC6C1AF84A5D4A18F06C494B14E05C6C01C04B14C06C90C915804E14
006C6D4B5B6C01F092B55A6C01FC4A5C27007FFFC001075C6D01FE013F14C0010F90B85A
6D4DC7FC010117F8D9003F16E0020F93C8FC020015F0030749C9FC507378F061>I<F10F
F04F7E193FA2197F19FF60A260606060A2606095B5FCA25F5F5FA25F5F5F5F18BFEFFF3F
5EEE03FE17FCEE07F8160FEE1FF0EE3FE017C0167FEEFF804B13005E4B5A15074B5A4B5A
5E153F4B5A4B5A93C7FC4A5A14034A5A5D4A5A141F4A5A4A5A5D4AC8FC5B495A5C495A13
0F495A495A5C137F495A4890C9FC5B485A1207485A485A5B123F485A485A90BC12FCA8CB
02F8C7FCB3A20307B912FCA856727BF161>I<0170187001FEEF01F86D6C160F02F8167F
DAFF80EC07FF03FE49B5FC92B85A6262A26297C7FC61616119E061614EC8FC18F86018C0
95C9FC17F817C0020701F8CAFC91CDFCB0923801FFFC031FEBFFE092B612FC020315FF02
0F16C04A16F0027FD9003F7FDAFFF0010F13FE038001037F4AC76C8002F86E804A6F7F4A
6F7F4A834A6F7F91C980137E017C707F90CAFC1B80A21BC0A2841BE0A51BF0A313FE3803
FF80000F7F4813F0487F5A80B5FCA41BE0A44E14C05C7E4A18805C4A5D6C90C9150001E0
606C6C5E6D606C6C4C5B7F000794B55A6C6C6C4A5C6C6D4A5C6E4A5C26007FF8021F49C7
FC6DB4027F5B6DD9F007B55A6D90B712E0010317806D4CC8FC6D6C15F8021F15C002034A
C9FCDA003F13804C7376F061>I<96267FFFE01670063FB6ED01F80503B700F01403053F
04FC14074CB96C130F040706E0131F043F72133F93BA00FC137F0303DC00076D13FF030F
03C09039003FFF814B02FCC8000713C3037F02E0030113F792B600806F6CB5FC02034ACA
121F4A02F8834A02E0834A4A1701027F4A8391B548CC7E494A85495C4C854988494A8549
4A85495C8A4991CDFC90B54886A2484A1B7FA2481E3F5D481E1F5D5A1F0FA2485CA3481E
075DA2F703F0489BC7FCA45DA2B6FCB27EA281A47EA2F703F06FF307F87EA36C80A21F0F
7E6F1CF07E6F1B1F7E20E06C6E1B3F816DF57FC06D80F7FF806D806D6E4F13006D6E616D
525A826D6E4F5A6D6E4F5A6E6D6C4E5A021F6EF0FFE06E6E4D5B6E02F84D5B6E02FE050F
90C7FC02006E6CEE3FFE6F02F0EEFFFC031F02FE03035B6FDAFFC0021F13E0030303FF01
03B55A030093B7C8FC043F18FC040718F0040118C0DC003F94C9FC050316F8DD003F1580
DE007F01F0CAFC757A75F78C>67 D<92383FFFF80207B612E0027F15FC49B87E010717E0
011F83499026F0007F13FC4948C7000F7F90B502036D7E486E6D806F6D80727F486E6E7F
8486727FA28684A26C5C72806C5C6D90C8FC6D5AEB0FF8EB03E090CAFCA70507B6FC041F
B7FC0303B8FC157F0203B9FC021FECFE0391B612800103ECF800010F14C04991C7FC017F
13FC90B512F04814C0485C4891C8FC485B5A485B5C5A5CA2B5FC5CA360A36E5DA26C5F6E
5D187E6C6D846E4A48806C6D4A4814FC6C6ED90FF0ECFFFC6C02E090263FE07F14FE0001
9139FC03FFC06C91B6487E013F4B487E010F4B1307010303F01301D9003F0280D9003F13
FC020101F8CBFC57507ACE5E>97 D<93387FFF80030FB512FC037FECFF804AB712E00207
16F8021F16FE027FD9F8077F49B5D8C000804991C7003F13E04901FC020F7F49496E7F49
498049496E7F49496E7F90B55A48727E92C914804884485B1BC048841BE0485BA27313F0
5AA25C5AA21BF885A2B5FCA391BAFCA41BF002F8CCFCA67EA3807EA47E806CF103F0F207
F86C7F1A0F6C6E17F06C191F6F17E06C6E163F6D6DEE7FC06D6D16FF6D6D4B13806D6D4B
13006D6D6CEC0FFE6D02E0EC3FFC6D02F8ECFFF86D9126FFC00F5B023F91B65A020F1780
02034CC7FC020016F8031F15E0030392C8FCDB000F13E04D507BCE58>101
D<903801FFFCB6FCA8C67E131F7FB3AD95380FFFE095B512FE05036E7E050F15E0053F15
F84D81932701FFF01F7F4CD900077FDC07FC6D80DC0FF06D80DC1FC07F4C48824CC8FC04
7E6F7F5EEDFDF85E03FF707F5EA25EA25EA293C9FCA45DB3B3A6B8D8E003B81280A86178
79F76C>104 D<902601FFFCEC7FFEB6020FB512F0057F14FE4CB712C0040716F0041F82
047F16FE93B5C66C7F92B500F0010F14C0C66C0380010380011F4AC76C806D4A6E8004F0
6F7F4C6F7F4C6F7F4C8193C915804B7014C0861DE0A27414F0A27414F8A47513FCA57513
FEAF5113FCA598B512F8A31DF0621DE0621DC0621D806F5E701800704B5B505B704B5B70
92B55A04FC4A5C704A5C706C010F5C05E0013F49C7FC9227FE7FFC01B55A70B712F0040F
16C0040393C8FC040015F8053F14C0050301F0C9FC94CCFCB3A6B812E0A85F6F7ACD6C>
112 D<902601FFF8EB07FEB691383FFFC094B512F00403804C14FE4C8093261FFC3F1380
93263FE07F13C0DC7F80B5FCC66C5D011FDAFE0114E06DEBF9FC16F815FB16F016E015FF
16C07114C05E72138095381FFE0093C76C5AF001E095C8FCA25DA65DB3B3A2B812F8A843
4E7ACD4F>114 D<15FFA75CA55CA45CA25CA25CA25CA25C91B5FCA25B5B5B131F5B90B9
FC120FBAFCA6D8000791C9FCB3B3A3F01FE0AE183F7014C07F187F7014806D16FF826D4B
13006E6D485AEEFE0F6E90B55A020F5D6E5D020115C06E6C5C031F49C7FC030113F03B6E
7CEC4B>116 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj cmr7 7 2
/Fj 2 51 df<13381378EA01F8121F12FE12E01200B3AB487EB512F8A215267BA521>49
D<13FF000313E0380E03F0381800F848137C48137E00787F12FC6CEB1F80A4127CC7FC15
005C143E147E147C5C495A495A5C495A010EC7FC5B5B903870018013E0EA018039030003
0012065A001FB5FC5A485BB5FCA219267DA521>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk cmbx12 24.88 24
/Fk 24 123 df<BA12F0B33C137DB74D>45 D[<BFFC1EFEF6FFE01FFCF7FF8020F020FC
20FF8DC7000392CA001F15E00B0181776C800C1F807814FF0C03818A78818E79808B8E8B
8E8B8EA27980A4791580AB551500A4555CA26A676A676A555C9CB65AA2545D5492C7FC54
5C5414F80C3F5C545C53B612800B0F4AC8FC0B7F14F80A1FB612E095BBC9FC1FF81F801F
F8F7FF8020F820FE95CBECFFC00C1F14F00C07807814FE0C006E7E798079807980798079
8079808E79158023C08B23E08C23F0A223F88CA223FCA38C23FEAB5614FCA55614F8A39D
B612F0A25515E06723C055158067551500555C555C9CB6FC545D0C075D0C1F15C09BB75A
0B0F93C7FCC212FC6921E021800EFCC8FC20F020800DF0C9FC0CFCCAFC>143
142 120 269 165 66 D[<0803B500C0EE01F00703B600FEEE03F8077FDBFFE015070607
B800FC150F063F05FF151F4DBA00E0143F050F07F8147F053F07FE14FF94BC5B04039326
F8000FECC003040F4BC86CEBF007043F03C0030F6D5A93B648C900036D5A4B03F0933900
7FFF3F030703C0051F90B5FC4B92CB7E033F02FC18034B02F08492B648844A0380193F4A
92CD7E4A4A864A4A864A02F0864A4A864A8991B65A494B874992CF7E4C885B494A885E49
8B494A88A2495C8D90B65A8D5A5E48217FA24892D1FC223FA25A5DA248211FA3485CFA0F
F09FC7FCA25AA45DA3B6FCB27EA381A47EA46C80FA07F0FA0FF87EA2817EA36C6F1D1F23
F07E827E223F6D6E1EE0A26D6E1D7F23C06D6E1DFF7F705213806D806D55130070646D6F
646D6F515A6E6E1B1F6E6E515A6E6E515A6E6E1BFF6E6E505B6E6E505B6E6F4F5B6E03E0
4F90C7FC6F6EF13FFE6F02FC4F5A030F02FF4E485A6F03C005075B030103F0051F5B6F03
FE057F1380043FDAFFE00303B5C8FC040F03FE033F13FC0403DBFFF80107B55A040093B8
12E0053F1A80050F4FC9FC050119F8DD003F18C0060795CAFCDE007F16F0070393CBFCDF
000314C0>141 146 115 271 168 I[<BC12C0A9C7000103E0C8FCB3B3B3B3B3B3B0BC12
C0A9>74 142 122 269 87 73 D[<B900E04EB912F884848484A2848585C700037094C7
000302FCC7FC73DF000F90C8FC7C5A85858585A270817081708170818682708170817081
87837181718171817181A2718171817181728188847281728172817281A2728172817381
73818985738173817381898573817481748174818A867481748174818A86758175817581
75818B877581758175818C887681768176817681A276817681768177158021C0897715E0
7715F07715F87715FCA27715FE7715FF7815877815C722E78A7815F77815FF8AA28A8A8B
8B8BA28B8B8B8BA28B8C8C8C8CA28C8C8C8CA28D8D8D8D8DA24A6D8849B500FE88B900FC
86227FA2223F221F220F2207A27C5A>165 142 120 269 182 78
D[<93260FFFF8163E4BB600E0153F031F03FE5D037FDBFFC05C0203B800F05B020F05FC
5B4A05FF5B027FF0C00F91B526FE000FECF01F010302C0D9007F6D5A4991C800076D5A49
01FC030090B6FC4901F0163F4949160F4901808290B5170192CBFC4849844849181F8748
4984A2484984874886A248498588A24887A388A2B58680A36E85A280A26E8580A2818103
F0725A6C6E96C7FC15FE8116E06C15FEEEFFE017FF6C17F0F0FF806C18F8F1FFC06C19FC
F2FF806C1AE01BF86C1AFE6C747E6D1AE0886D866D866D1AFF6D876D87010087806E8602
0F86020386020086153F030F851501DB001F19801601DC000F18C0EF007F060717E0F000
3F070316F0F1003F1A0F080315F81A00871B1F877514FCA287007F86486C85A288A388A3
6D86A31EF87FA37F1EF0A26D626D1CE0A27F6D5013C0A26E1B806E96B5FC6E1B0002F860
6E4E5B6E626E6C5F03E04D5B03F84D5B03FE057F5BDBFFC093B55A04F803035C496CD9FF
80021F91C7FCD9FC1F02FF49B55AD9F80792B75A496C19F049C66149011F18804901074D
C8FC90C817F848031F16C048030003FCC9FC007C04011480>102
146 115 271 129 83 D<93B512FC037FECFFF00207B8FC023F17E091B912F84918FE01
07727E499126C0007F14E04901E0C7000F80496D020380496D020014FE6F6F7F90B57080
6F6F8085486E6F807380A27380A28885886C5CA26D4982886D5B6D5B010713C0010190CA
FC90CCFCA90603B7FC050FB8FC0403B9FC167F0307BAFC153F4AB7EA807F020FEDE00002
3F02FCC7FC91B612E0010392C8FC4914FC011F14F04914C0495C90B548C9FC485C485C48
5C485C5A5D485CA24891CAFCA3B6FC5CA397B6FCA461806C60F107EF6C6E150F6F16CF6C
183F6FDB7F8F806C6EDBFF0F14E06C02FCDA03FE15FE6C6E91260FFC0791B5FC6C6E6CD9
3FF817806C923AF803FFF003013F91B6487E010FEF8000010394C77E010004FC141F021F
03F0140702010380DA007F1400DA000701F8CDFC695F79DD71>97
D[<ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B296383FFFC00607B512FE063FECFFE0
4DB712F8050716FF051F17C0057F17F094B5D8C00F8004F301FCC714FE04F701E0023F7F
93B50080020F804DC86C14E005F80301804D6F804D707F05808294CA804C717F4C7180A2
4C71808BA27680A28B88A28BA28BA3888BA52080B02000A56764A267A3676467A2525CA2
67647062704D91C7FC704D5BA2714C5B7193B55A05F04B5CDCBFF84B5CDC1FFC030F5C4B
6CB44B91C8FC7001C0027F5B4B6C01F00103B55A4BC601FF013F14F04B6D90B712C04B01
1F94C9FC4B6D16FC4B010316F092C86C15804A030F02F8CAFC90CB49CBFC>113
144 121 270 129 I<94387FFFF0041FB612E093B712FE0307707E031F17F092B97E4A18
FE020784021F9126F8000F14804A0280010014C04A49C74814E049B500F85C494A17F049
4A5C495C494A4A14F84991C8FC5D495B90B5FC5D5A485C7314F05A4B6F14E05A7314C048
7214804B93383FFE00F20FF84896C8FCA4485CA5B6FCB07EA281A37EA36C80A37E6F18FE
6CF201FFA26C6E5F1CFE6C801B076C6EEF0FFC6D7F70EE1FF86DF13FF06D6E167F6D6EEE
FFE06D02F84B13C06D6E5D6D02FF030F13806D03C0023F1300023F02F0903801FFFC6E91
26FF801F5B020792B65A6E18C0020060033F4CC7FC030716F8030016C0041F4AC8FCDC00
7F13C0585F78DD67>I[<F53FE098B6FC4FB7FCA996C77E1B0FA287B3B294383FFF80040F
B512FC93B71280030716E0031F16F8037F16FE4AB9128702074AC66C13C7021F02E00107
13F74A91C890B6FC4A01FC153F49B548150F4902E081494A81494A814991CA7E495B8749
498390B548835A5D5AA2485CA25A5D5AA35AA25D5AA5B6FCB07EA57E81A37EA27EA2817E
A26C80A26C626C6E5F636D7F6D6D94B6FC6D606D6D1607705D6D6E4B81010102F0157F6D
6E92B712FE6E01FE020301EF91B512806E6D6C011F13CF020FDAF801B5120F020391B612
FE6E17F86E6C16E0030F16800301EDFC00DB003F14E0040049C74AC8FC>113
144 120 270 129 I<94387FFFC0040FB6FC93B712E0030716FC031F16FF037F17C04AB9
12F00207DAF80380021F912680003F13FE4A49C7000F7F4A01F802038049B5486E804902
C06E6C7F494A6F7F4991C9FC49727F4949707F4B84498490B548707F5A4B198048855D48
1CC086481CE05D5A871DF05AA25D5AA21DF887A2B6FCA392BBFCA51DF00380CDFCA77EA4
817EA37EA2817EA26CF307F06FF00FF87E816C1B1F6F19F06C1B3F6D6DF07FE06D7FF4FF
C06D6E4C13806D6E5E6D02F04C13006D6EEE1FFE6D6E4C5A6D6C01FFEEFFF86E02E00203
5B6E02FC021F5B02079126FFC003B55A6E92B7C7FC020060033F17F8030F17E003011780
DB003F03FCC8FC040315C0DC000F01F8C9FC5D5F7ADD6A>I[<ED1FF0017FB5FCB7FCA9EA
003F1307A27FB3B2963803FFFC073FEBFFE096B612F8060715FE061F6F7E4E16E095B87E
4DD9FC03804DD9C000804D48C76C7FDD0FF880DD1FE0824D486E804D5A05FEC881DCF1FC
815F04F385EEF7F04D81EEFFC0A24D84A294C9FCA25EA35EA45EB3B3AFB9D8E001B912C0
A9>114 143 119 270 129 104 D[<EC3FC0ECFFF0010313FC497F497F498049804980A2
90B67EA24881A86C5DA26D5CA26D5C6D5C6D91C8FC6D5B6D5B010013F0EC3FC091CAFCB3
A3ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B3B3B0B91280A9>49
144 119 271 65 I[<ED1FF0017FB5FCB7FCA9EA003F1307A27FB3B3B3B3B3B3ACB912C0
A9>50 143 119 270 65 108 D<DB3FE0912601FFFC943801FFFC017FB5031FD9FFE004
1FEBFFE0B792B600FC93B612FC060303FF030315FF060F04C0020F16C0063F04F0023F16
F095B86C91B87E4DD9FC036E49D9FC03804DD9C0006E49D9C000804D48C7003F6D4948C7
003F7FDD0FF86EDB0FF880D8003F4B48714848830107DB3FC06E9126C03FC06E804D484E
5A6D4BC86F48C881DCE1FE6FDAE1FE814D61DCE3F8DEF3F884DCE7F0F0F7F04D6F4B81DC
EFC0F0FFC0A2DCFF804F84A294C993C9FCA24C61A34C61A44C61B3B3AFB900E090B900E0
90B912E0A9B35D77DCC2>I<DB3FE0913803FFFC017FB5033FEBFFE0B792B612F8060715
FE061F6F7E4E16E095B87E4DD9FC03804DD9C000804D48C76C7FDD0FF880D8003FDB1FE0
8201074B486E804D5A6D03FEC881DCE1FC815F04E385EEE7F04D81EEEFC0A2DCFF8084A2
94C9FCA25EA35EA45EB3B3AFB9D8E001B912C0A9725D77DC81>I<94381FFFF00407B612
C0047F15FC0303B87E030F17E0037F17FC4ABAFC4A9126FC007F80020F02C0010714E04A
49C880027F01F8033F13FC91B5486F7F4902C003077F494A6F804991C96C804949708049
49717F49874949717FA290B548717F48884B83481D80A2481DC04B83481DE0A2481DF0A3
484A7114F8A4481DFCA5B61BFEAF6C1DFCA56C6E4D14F8A36C1DF0A36C1DE06F5F6C1DC0
A26C6E4D1480A26C1D006F5F6C646D6D4D5B6F94B5FC6D636D6D4C5C6D6E4B5C6D6E4B5C
6D02F0031F5C6D6E4B91C7FC6D6C01FE92B512FC6ED9FFC001075C6E02FC017F5C020791
B812C0020196C8FC6E6C17FC031F17F003031780DB007F03FCC9FC040715C0DC001F01F0
CAFC675F7ADD74>I<DB1FF091381FFFC0017FB50203B6FCB7021F15E095B712FC050316
FF050F17C0053F17F094B912FC04F1DAC01F8004F79026FC00018093B500E06D6C14C0D8
003F93C86C8001074B030F8005F86F806D03E06F804D6F804D8194CA6C7F4C864C71805E
7680A27680A27680A28B88A28BA288A28BA4882080B0200064A467A26467A3525CA26764
676467647062704D91C7FC7094B55AA2714B5C714B5C714B5C05F84B5C71033F5C05FF4B
91C8FC06C049B55A04FB01F001075C04F801FF017F14F07190B712C0051F94C9FC7116FC
050316F0DD007F1580060F02F8CAFC060049CBFC96CDFCB3ACB912E0A9718579DC81>I<
DB7FC049B47E90B6021F13F8B7027F13FE4DB67E4D15E04D814D814D01077F94263FF00F
7F94387FC01F4D48487FD8003F16000107DAC1FE491480EEC3FC6D5DEEC7F05F16CF5F16
DF4D6D1400A204FFC76C5BA2735B4C6E5B735B070013C04C92C8FCA45EA65EB3B3AAB912
FCA9515D79DC5F>114 D<92261FFFF814F80203B638C001FC023FEDFC0791B8121F0103
17FF130F013F9038F8001F4990C8FCD9FFF8153F4801E0150F484915034849814890CAFC
197F4848173F191F485AA2007F180FA31907487EA27FA28002E0705A6E93C8FC14FC14FF
15F06CECFF8016FCEEFFF06CEEFF8018F06C17FE727E6C18E0856C18FC6C846C727E6C85
6D84011F846D841303010084023F83140F020183EC001FDB007F16801603DC000F15C017
00183F060F14E0007F1703486C82727E857F85857FA2857F1BC07FA27F1B806D5F7F1B00
6E5E6E5F6E163F6E4C5A02FC4C5A6E03035B6E6C4A5B03F0023F5B03FF0107B55A01F991
B7C7FCD9F07F16FCD9E01F16F0D9800716C0D9000193C8FC48D9003F14F8007C020349C9
FC4B5F78DD5C>I[<ED03FEA81507A5150FA4151FA3153FA2157FA215FFA25CA25C5CA25C
5C5C5C91B5FC13035B131F017F91B712F00007BAFCBBFCA7C74AC9FCB3B3AAF101FFB161
6E17FE82A219076E17FC836EEE0FF871131F6E6EEB3FF071137F6E6EEBFFE06EDAFF0313
C06E92B512806E1700033F5D6F5D03075D030015E0041F1480040001FCC7FC>72
132 124 258 90 I<DB0FF8F01FF0017FB594B6FCB74BB7FCA9D8003F94C77E0107190F
A26D85B3B3B063A463A263A27F6398B6FCA26DF001FB7015036EEF07F3E00FE3806E6D15
1FE07FC314FF6E6D6CDAFF83EDFFC06E6E010313036E02FCEB3FFE6E91B612FC020017F8
6F16E0031F16800303EDFE00DB007F14F8040102C093C8FC725E77DC81>I<007FB800C0
4AB71280A9D800034ACA000791C7FC6D080013F0775A6D6E4E5AA26E6E6064836E4F90C8
FC836E4F5A836E4F5AA26E6E4C5AA26E6E5F1C3F6E6E5F1C7F836E4F5A846F4D5B846F4D
90C9FCA26F6E4A5AA26F6E5D1B0F846F4D5A846F4D5A846F4D5AA26F6E4A5AA2706E5C62
7002C091CAFC6219E0704B5A19F0704B5AA2706E485AA2706E485AA27002FE5B1A7F19FF
704B5AA2715DA27192CBFCA2715CA2715CA3715CA2715CA2715CA2715CA2725BA27290CC
FCA3725AA2725AA24E5AA24E5AA261187FA24E5AA24D5B13FE2603FF804A90CDFC000F13
E0486D4A5A487F486D4A5AA260B56C141F4D5AA24D5A17FF604C5B4A4990CEFC6C5D4C5A
6C49EB3FFC4A495A6C4948485A9026FE80075B270FFFC03F5B6C90B6CFFC6C5D6C15F86C
6C5C011F14C0010749D0FC9038007FE071857CDB7B>121 D<0003BC12F81CFCA51CF804
80C7123F03F0C84814F048028018E04AC9B612C04A5D02F04B15804A19004E5C4A5D4A4B
5C6391C9485C604993B65A634D5D495D98C7FC4D5C4D5C000F5E62494B5C4D5C94B6FC62
4C5D4C92C8FC5EC95D4C5C5E4C5C614C5C93B6FC4B5D614B92C9FC5D4B5C604B5C5D4B4A
EC07FC6092B65A5C604A92C8EA0FF84A5C5C5F4A5C4A5C4A181F5F91B65A495D491AF094
C9123F495C5B494A167F5E494A16FF496090B65A4C5D484B5D484F13E04892C95A4B5E48
4A93B5FC481803484A151F4B0203B6FC4891BAFCBDFCA21CC0A47E565C7ADB67>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fl cmtt10 10 65
/Fl 65 127 df<003C131E007F137F481480A66C1400A6007E7FA6003E133EA3003C131E
001C131C191977B32C>34 D<143814FC13011303EB07F8EB0FF0EB1FC0EB3F80EB7F0013
FE485A485A5B12075B120F5B485AA2123F90C7FCA25A127EA312FE5AAC7E127EA3127F7E
A27F121FA26C7E7F12077F12037F6C7E6C7E137FEB3F80EB1FC0EB0FF0EB07F8EB03FC13
0113001438164272B92C>40 D<127012FC7E7E6C7E6C7EEA0FE06C7E6C7E6C7E6C7E137F
7F1480131F14C0130FEB07E0A214F01303A214F81301A314FC1300AC130114F8A3130314
F0A2130714E0A2EB0FC0131F1480133F14005B13FE485A485A485A485AEA3FC0485A48C7
FC5A5A1270164279B92C>I<147814FCAF007FB612F0B712F8A46C15F0C700FCC7FCAF14
7825267DAB2C>43 D<EA0F80EA1FE0EA3FF0EA7FF8A213FCA3123F121F120F120013F8A2
1201EA03F01207EA1FE0EA7FC0EAFF80130012FC12700E17718A2C>I<007FB6FCB71280
A46C150021067B9B2C>I<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B0B708A
2C>I<1507ED0F80151FA2153F16005D157E15FE5D14015D14035DA214075D140F5D141F
5D143F92C7FC5C147E14FE5CA213015C13035C13075C130F5C131F5CA2133F91C8FC5B13
7E13FE5B12015B12035B12075BA2120F5B121F5B123F90C9FC5A127E12FE5AA25A127821
417BB92C>I<EB03F8EB0FFE90383FFF80497F90B57E3901FE0FF03903F803F848486C7E
EBE0004848137EA248487FA248C7EA1F80A2003E140F007E15C0A3007C140700FC15E0AC
6C140F007E15C0A46CEC1F80A36C6CEB3F00A26C6C137E6D13FE00075CEBF0016C6C485A
3901FE0FF06CB55A6D5B6D5BD90FFEC7FCEB03F823357CB32C>I<1307497EA2131FA213
3F137F13FF5A1207127FB5FC13DF139FEA7C1F1200B3AE007FB512E0B612F0A36C14E01C
3477B32C>I<EB0FF890387FFF8048B512E00007804814FC391FF80FFE393FE001FF9038
80007F48C7EA3F80007E141F00FE15C0150F6C15E01507A3127E123CC8FCA2150F16C015
1F1680153F16005D15FE4A5A14034A5A4A5A4A5A4A5AECFF804948C7FC495A495A495AEB
3FE0EB7F8049C8FC485A4848EB03C04848EB07E0EA1FE0485A48B6FCB7FCA36C15C02334
7CB32C>I<EB0FFC90387FFF8048B512E0000714F84880391FF807FEEBC0004848137F6D
7F1680151FA26C5A6CC7FCC8FC153F16005D15FE14014A5AEC1FF890381FFFF0495BA215
F86D7F90380007FEEC00FF81ED3F80ED1FC0150FA216E01507A2123C127EB4FC150F16C0
A248141F007FEC3F806DEB7F006C6C5B391FF807FE6CB55A6C5C6C14E0C66C1380D90FFC
C7FC23357CB32C>I<EC07F04A7E141F143FA2147EA214FCEB01F8A2EB03F0EB07E0A2EB
0FC0EB1F80A2EB3F00137EA25B485AA2485A5B1207485AA2485A48C7FCA2127E5AB712FC
16FEA36C15FCC8EAF800AA91387FFFF091B512F8A36E13F027347EB32C>I<000FB512FE
4880A35D0180C8FCADEB83FE90389FFF8090B512E015F8819038FE03FE9038F000FF01C0
7F49EB3F8090C7121F6C15C0C8120FA2ED07E0A4123C127EB4FC150F16C0A248141F007E
EC3F80007FEC7F006C6C5B6D485A391FF80FFC6CB55A6C5C000114C06C6C90C7FCEB0FF8
23347CB22C>I<1278B712C016E0A316C000FCC7EA3F80ED7F0015FE00785CC712014A5A
4A5A5D140F5D4A5A143F92C7FC5C147E14FE5C13015CA2495AA213075CA3495AA4495AA5
133F91C8FCAA131E23357CB32C>55 D<EB07FCEB3FFF90B512C0488048803907FC07F839
0FF001FC48486C7ED83F80137E157F48C77E007EEC1F8012FE5AED0FC0A416E0A37E127E
007F141F7E6D133F6C6C137F390FF001FF3807FC0F6CB6FC6C14F76C14C7013F130FD90F
F813C090C7FCA2151F1680153F1600000F5C486C137E486C13FE4A5A4A5A14079038801F
F0391FE07FE090B55A6C91C7FC6C5B000113F838007FC023357CB32C>57
D<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F00C7FCAE121FEA3F80EA7FC0EAFFE0
A5EA7FC0EA3F80EA1F000B2470A32C>I<EA0F80EA1FC0EA3FE0EA7FF0A5EA3FE0EA1FC0
EA0F80C7FCAEEA0F80EA1FC0EA3FE0127F13F0A4123F121F120F1201120313E01207EA0F
C0A2EA3F80EA7F005A5A12F812700C3071A32C>I<007FB612F0B712F8A4003F15F0CAFC
A8003FB612F0B712F8A46C15F025147DA22C>61 D<127012FC7E6C7E13E06C7EEA1FFC6C
7E3803FF80C67FEB7FF0EB1FF8EB0FFEEB03FF6D13C06D6C7EEC3FF8EC0FFC6EB4FC0201
138080A25C02071300EC0FFCEC3FF8EC7FE049485A4990C7FCEB0FFEEB1FF8EB7FF0EBFF
C000035BD80FFEC8FC485AEA7FF0485A138048C9FC5A1270212A7BAD2C>I<14FE497EA4
497FA214EFA2130781A214C7A2010F7FA314C390381F83F0A590383F01F8A490387E00FC
A549137E90B512FEA34880A29038F8003FA34848EB1F80A4000715C049130FD87FFEEBFF
FC6D5AB514FE6C15FC497E27347EB32C>65 D<007FB512E015F8B612FE6C8016C03903F0
003FED0FE0ED07F01503A2ED01F8A6ED03F0A21507ED0FE0ED1FC0EDFF8090B612005D5D
15FF16C09039F0001FE0ED07F0ED03F81501ED00FCA216FE167EA616FE16FC1501ED03F8
150FED3FF0007FB612E016C0B712806CECFE0015F027337FB22C>I<02FF13700107EBE0
F84913F9013F13FD4913FFEBFF813901FE007F4848131FD807F0130F1507485A49130348
5A150148C7FCA25A007EEC00F01600A212FE5AAB7E127EA3007F15F06CEC01F8A26C7EA2
6C6C13036D14F06C6C130716E0D803FC131F6C6CEB3FC03A00FF81FF806DB512006D5B01
0F5B6D13F00100138025357DB32C>I<007FB5FCB612C015F0816C803907E003FEEC00FF
ED7F80153FED1FC0ED0FE0A2150716F0150316F81501A4ED00FCACED01F8A3150316F0A2
150716E0150FED1FC0153FED7F80EDFF00EC03FE007FB55AB65A5D15C06C91C7FC26337E
B22C>I<007FB612F0B712F8A37E3903F00001A7ED00F01600A4EC01E04A7EA490B5FCA5
EBF003A46E5A91C8FCA5163C167EA8007FB612FEB7FCA36C15FC27337EB22C>I<007FB6
12F8B712FCA37ED803F0C7FCA716781600A515F04A7EA490B5FCA5EBF001A46E5A92C7FC
AD387FFFE0B5FC805C7E26337EB22C>I<903901FC038090390FFF87C04913EF017F13FF
90B6FC4813073803FC01497E4848137F4848133F49131F121F5B003F140F90C7FCA2127E
ED078092C7FCA212FE5AA8913803FFF84A13FCA27E007E6D13F89138000FC0A36C141FA2
7F121F6D133F120F6D137F6C7E6C6C13FF6D5A3801FF076C90B5FC6D13EF011F13CF6DEB
0780D901FCC7FC26357DB32C>I<D87FFEEBFFFCB54813FEA36C486C13FCD807E0EB0FC0
B190B6FCA59038E0000FB3D87FFEEBFFFCB54813FEA36C486C13FC27337EB22C>I<007F
B512F8B612FCA36C14F839000FC000B3B3A5007FB512F8B612FCA36C14F81E3379B22C>
I<D87FE0EB0FFC486CEB1FFEA26D133F007F15FC000F15E001BC137BA4019E13F3A3EB9F
01A2018F13E3A21483A2018713C314C7A201831383A214EFA201811303A214FFEB80FEA3
147C14381400ACD87FF0EB1FFC486CEB3FFEA36C48EB1FFC27337EB22C>77
D<D87FF0EB7FFC486CEBFFFEA27F007FEC7FFCD807FEEB07C013DEA213DF13CFA2148013
C714C0A213C314E0A213C114F0A213C014F8A2147CA3143EA2141E141FA2140F1587A214
0715C7A2140315E71401A215F71400A215FFD87FFC137F487E153FA26C48EB1F8027337E
B22C>I<EB7FFF0003B512E0000F14F848804880EBE003EB800048C7127FA2007E80A300
FE158048141FB3A86C143FA2007E1500A3007F5CA26C6C13FEEBF00790B5FC6C5C6C5C00
0314E0C66C90C7FC21357BB32C>I<007FB512C0B612F88115FF6C15802603F00013C015
3FED0FE0ED07F0A2150316F81501A6150316F01507A2ED0FE0ED3FC015FF90B612801600
15FC5D15C001F0C8FCB0387FFF80B57EA36C5B25337EB22C>I<387FFFFCB67E15E015F8
6C803907E007FE1401EC007F6F7E151FA26F7EA64B5AA2153F4BC7FCEC01FE140790B55A
5D15E081819038E007FCEC01FE1400157F81A8160FEE1F80A5D87FFEEB1FBFB5ECFF0081
5E6C486D5AC8EA01F029347EB22C>82 D<90381FF80790B5EA0F804814CF000714FF5A38
1FF01F383FC003497E48C7FC007E147F00FE143F5A151FA46CEC0F00007E91C7FC127F7F
EA3FE0EA1FFCEBFFC06C13FC0003EBFFC06C14F06C6C7F01077F9038007FFEEC07FF0200
1380153FED1FC0A2ED0FE0A20078140712FCA56CEC0FC0A26CEC1F806D133F01E0EB7F00
9038FE01FF90B55A5D00F914F0D8F83F13C0D8700790C7FC23357CB32C>I<007FB612FC
B712FEA43AFC007E007EA70078153CC71400B3AF90383FFFFCA2497F6D5BA227337EB22C
>I<3B7FFF803FFFC0B56C4813E0A36C496C13C03B03F00001F800B3AF6D130300015DA2
6D130700005D6D130F017F495A6D6C485AECE0FF6DB5C7FC6D5B010313F86D5B9038003F
802B3480B22C>I<D87FFCEB7FFC486CEBFFFEA36C48EB7FFCD80FC0EB07E06D130F0007
15C0A36D131F00031580A36D133F00011500A36D5B0000147EA4017E5BA46D485AA49038
1F83F0A4010F5B14C7A301075BA214EFA201035BA214FFA26D90C7FCA46D5A27347EB22C
>I<D87FF0EB07FF486C491380A36C486D1300001FC8127CA46C6C5CA76C6C495AA4143E
147FA33A03E0FF83E0A214F7A201E113C3A3000101E35BA201F113C701F313E7A314C1A2
00005DA201F713F71480A301FF13FF017F91C7FC4A7EA4013E133E29347FB22C>I<007F
B6FCB71280A46C150021067B7D2C>95 D<3801FFF0000713FE001F6D7E15E048809038C0
1FF81407EC01FC381F80000006C77EC8127EA3ECFFFE131F90B5FC1203120F48EB807E38
3FF800EA7FC090C7FC12FE5AA47E007F14FEEB8003383FE01F6CB612FC6C15FE6C14BF00
01EBFE1F3A003FF007FC27247CA32C>97 D<EA7FF0487EA3127F1201AAEC1FE0ECFFF801
FB13FE90B6FC16809138F07FC09138801FE091380007F049EB03F85BED01FC491300A216
FE167EA816FE6D14FCA2ED01F86D13036DEB07F0150F9138801FE09138E07FC091B51280
160001FB5B01F813F83900F03FC027337FB22C>I<903803FFE0011F13F8017F13FE48B5
FC48804848C6FCEA0FF0485A49137E4848131890C9FC5A127EA25AA8127EA2127F6C140F
6DEB1F806C7E6D133F6C6CEB7F003907FE03FF6CB55A6C5C6C6C5B011F13E0010390C7FC
21247AA32C>I<EC0FFE4A7EA380EC003FAAEB07F8EB3FFE90B512BF4814FF5A3807FC0F
380FF00348487E497E48487F90C7FC007E80A212FE5AA87E007E5CA2007F5C6C7E5C6C6C
5A380FF0073807FC1F6CB612FC6CECBFFE6C143FEB3FFC90390FF01FFC27337DB22C>I<
EB03FE90381FFFC0017F13F048B57E48803907FE03FE390FF800FFD81FE0EB3F805B4848
EB1FC090C7120F5A007E15E015075AB7FCA416C000FCC9FC7E127EA2127F6CEC03C06DEB
07E06C7ED80FF0130F6C6CEB3FC001FF13FF000190B512806C1500013F13FC010F13F001
01138023247CA32C>I<EC0FF8EC3FFE91B5FC4914805B903807FC7F14F090390FE03F00
14C092C7FCA6007FB512FEB7FCA36C5C26000FC0C7FCB3A8003FB512F04880A36C5C2133
7DB22C>I<ED03F8903907F80FFC90391FFE3FFE017FB6FC48B7FC48ECFE7F9038FC0FF8
2607F003133E3A0FE001FC1CD9C0001300001F8049137EA66D13FE000F5CEBE0016C6C48
5A3903FC0FF048B5FC5D481480D99FFEC7FCEB87F80180C8FCA37F6C7E90B512F06C14FE
48ECFF804815E04815F03A3FC0001FF848C7EA03FC007E1400007C157C00FC157E48153E
A46C157E007E15FCD87F801303D83FE0EB0FF8D81FFCEB7FF06CB612E0000315806C1500
D8003F13F8010713C028387EA42C>I<EA7FF0487EA3127F1201AAEC1FE0EC7FFC9038F9
FFFE01FB7F90B6FC9138F03F80ECC01F02807FEC000F5B5BA25BB3267FFFE0B5FCB500F1
1480A36C01E0140029337FB22C>I<1307EB1FC0A2497EA36D5AA20107C7FC90C8FCA738
7FFFC080B5FC7EA2EA0007B3A8007FB512FCB612FEA36C14FC1F3479B32C>I<EA7FE048
7EA3127F1201AA91381FFFF04A13F8A36E13F0913800FE004A5A4A5A4A5A4A5A4A5A4A5A
4AC7FC14FEEBF1FC13F3EBF7FE90B5FCA2EC9F80EC0FC001FE7FEBFC07496C7E496C7E81
1400157E811680151F3A7FFFC0FFFCB500E113FEA36C01C013FC27337EB22C>107
D<387FFFE0B57EA37EEA0003B3B3A5007FB61280B712C0A36C158022337BB22C>I<3A7F
83F007E09039CFFC1FF83AFFDFFE3FFCD87FFF13FF91B57E3A07FE1FFC3E01FCEBF83F49
6C487E01F013E001E013C0A301C01380B33B7FFC3FF87FF0027F13FFD8FFFE6D13F8D87F
FC4913F0023F137F2D2481A32C>I<397FF01FE039FFF87FFC9038F9FFFE01FB7F6CB6FC
00019038F03F80ECC01F02807FEC000F5B5BA25BB3267FFFE0B5FCB500F11480A36C01E0
140029247FA32C>I<EB07FCEB1FFF017F13C048B512F048803907FC07FC390FF001FE48
486C7E0180133F003F158090C7121F007EEC0FC0A348EC07E0A76C140F007E15C0A2007F
141F6C15806D133F6C6CEB7F006D5B6C6C485A3907FC07FC6CB55A6C5C6C6C13C0011F90
C7FCEB07FC23247CA32C>I<397FF01FE039FFF8FFF801FB13FE90B6FC6C158000019038
F07FC09138801FE091380007F049EB03F85BED01FC491300A216FE167EA816FE6D14FCA2
ED01F86D13036DEB07F0150F9138801FE09138E07FC091B51280160001FB5B01F813F8EC
3FC091C8FCAD387FFFE0B57EA36C5B27367FA32C>I<D87FFEEB3FC0B53801FFF0020713
F8021F13FC6C5B39003F7FE1ECFF019138FC00F84A13704A13005CA25C5CA391C8FCAF00
7FB512E0B67EA36C5C26247EA32C>114 D<90387FF8700003B512F8120F5A5A387FC00F
387E00034813015AA36CEB00F0007F140013F0383FFFC06C13FE6CEBFF80000314E0C66C
13F8010113FCEB0007EC00FE0078147F00FC143F151F7EA26C143F6D133E6D13FE9038F0
07FC90B5FC15F815E000F8148039701FFC0020247AA32C>I<131E133FA9007FB6FCB712
80A36C1500D8003FC8FCB1ED03C0ED07E0A5EC800F011FEB1FC0ECE07F6DB51280160001
035B6D13F89038003FE0232E7EAD2C>I<3A7FF003FF80486C487FA3007F7F0001EB000F
B3A3151FA2153F6D137F3900FE03FF90B7FC6D15807F6D13CF902603FE07130029247FA3
2C>I<3A7FFF01FFFCB514FE148314016C15FC3A03E0000F80A26D131F00011500A26D5B
0000143EA26D137E017C137CA2017E13FC013E5BA2EB3F01011F5BA21483010F5BA214C7
01075BA214EF01035BA214FF6D90C7FCA26D5A147C27247EA32C>I<D87FFFEB7FFF6EB5
FCB515806C16004A7ED807C0EB01F0A66C6C495AA3143E147FA2D801F0495AECFF87A214
F7A201F113C700005D9038F9E3CFA201FB13EFA3D97BC190C7FC017F13FFA21480A2013F
5B90381F007C29247FA32C>I<3A3FFF03FFF048018713F8A36C010313F03A00FC007E00
5D90387E01F8013F5BEB1F83EC87E090380FCFC0903807EF80EB03FF6D90C7FC5C6D5A14
7C14FE130180903803EF80903807CFC0EB0FC7EC83E090381F01F0013F7FEB7E00017C13
7C49137E0001803A7FFF01FFFC1483B514FE6C15FC140127247EA32C>I<3A7FFF01FFFC
B5008113FE148314816C010113FC3A03E0000F806C7E151F6D140012005D6D133E137C01
7E137E013E137CA2013F13FC6D5BA2EB0F815DA2EB07C1ECC3E0A2EB03E3ECE7C0130114
F75DEB00FFA292C7FC80A2143EA2147E147CA214FC5CA2EA0C01003F5BEA7F83EB87E0EA
7E0F495A387FFF806C90C8FC6C5A6C5AEA07E027367EA32C>I<003FB612E04815F0A400
7EC7EA1FE0ED3FC0ED7F80EDFF004A5A003C495AC7485A4A5A4A5A4A5A4A5A4AC7FCEB01
FC495AEB0FF0495A495A495A49C8FC4848EB01E04848EB03F0485A485A485A485A485AB7
FCA46C15E024247DA32C>I<01F81370D803FE13F8380FFF0148138748EBCFF0397F9FFF
E0D8FF0F13C0D8FC07138039F803FE00387000F81D0A79B22C>126
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmr10 10 80
/Fm 80 125 df<DA0FF813FC91397FFF07FF903B01F807DF83C0903A07E001FF0F903B1F
8007FE1FE090393F000FFC137E16F85B9338F007804848010790C7FC1503ACB812F8A328
01F80003F0C7FCB3AB486C497E267FFFE0B512F0A3333B7FBA30>11
D<EC0FF8EC7FFE903901F80780903907E001C090391F8000E090383F0007017E497EA25B
A2485A6F5AED018092C8FCA9ED03F0B7FCA33901F8000F1503B3AA486C497E267FFFE0B5
12C0A32A3B7FBA2E>I<EC0FFC91387FFF70903901F803F0903807E00790381F800FEB3F
00137EA25B150748481303ADB7FCA33901F80003B3AB486C497E267FFFE0B512C0A32A3B
7FBA2E>I<DA0FF0EB1FF0DA7FFEEBFFFC903B01F80F83F00F903C07E001CFC00380903C
1F8000FF0001C090273F0007FE130F017E4948497EA2495CA248485C03076E5A03030203
C7FC95C8FCA9F007E0BAFCA33C01F80003F0001F1807B3AA486C496C497E267FFFE0B500
C1B51280A3413B7FBA45>I<121C127FEAFF80A8EA7F00AB123EAB121CABC7FCA8121C12
7FEAFF80A5EA7F00121C093C79BB17>33 D<001C131C007F137F39FF80FF80A26D13C0A3
007F137F001C131C00001300A40001130101801380A20003130301001300485B00061306
000E130E485B485B485B006013601A197DB92A>I<030C1303031E497EA2033E130FA203
3C91C7FCA2037C5BA20378131EA303F8133EA24B133CA20201147CA24B1378A2020314F8
A24B5BA302071301007FB91280BA12C0A26C1880C7271F0007C0C7FC021E5CA3023E130F
A2023C91C8FCA2027C5BA20278131EA302F8133E007FB91280BA12C0A26C1880280003E0
00F8C8FC4A5BA301071301A202805BA2010F1303A202005BA2491307A2011E5CA3013E13
0FA2013C91C9FCA2017C5BA20178131EA20130130C3A4A7BB945>I<121C127FEAFF80A2
13C0A3127F121C1200A412011380A2120313005A1206120E5A5A5A12600A1979B917>39
D<146014E0EB01C0EB0380EB0700130E131E5B5BA25B485AA2485AA212075B120F90C7FC
A25A121EA2123EA35AA65AB2127CA67EA3121EA2121F7EA27F12077F1203A26C7EA26C7E
1378A27F7F130E7FEB0380EB01C0EB00E01460135278BD20>I<12C07E12707E7E7E120F
6C7E6C7EA26C7E6C7EA21378A2137C133C133E131EA2131F7FA21480A3EB07C0A6EB03E0
B2EB07C0A6EB0F80A31400A25B131EA2133E133C137C1378A25BA2485A485AA2485A48C7
FC120E5A5A5A5A5A13527CBD20>I<121C127FEAFF80A213C0A3127F121C1200A4120113
80A2120313005A1206120E5A5A5A12600A19798817>44 D<B512FCA516057F941C>I<12
1C127FEAFF80A5EA7F00121C0909798817>I<EB03F8EB1FFF90387E0FC09038F803E039
01E000F0484813780007147C48487FA248C77EA2481580A3007EEC0FC0A600FE15E0B300
7E15C0A4007F141F6C1580A36C15006D5B000F143EA26C6C5B6C6C5B6C6C485A6C6C485A
90387E0FC0D91FFFC7FCEB03F8233A7DB72A>48 D<EB01C013031307131F13FFB5FCA213
1F1200B3B3A8497E007FB512F0A31C3879B72A>I<EB0FF0EB7FFE48B57E3903E03FE039
0F000FF0000E6D7E486D7E486D7E123000706D7E126012FCB4EC7F807FA56CC7FC121CC8
FCEDFF00A34A5A5D14035D4A5A5D140F4A5A4A5A92C7FC147C5C495A495A495A495A91C8
FC011EEB01805B5B49130348481400485A485A000EC75A000FB6FC5A5A485CB6FCA32138
7CB72A>I<EB07F8EB3FFF4913C03901F80FF03903C007F848486C7E380E0001000F8038
1FE0006D7FA56C5A6C5AC85A1401A25D4A5AA24A5A5DEC0F80027EC7FCEB1FFCECFF8090
38000FE06E7EEC01FC816E7EED7F80A216C0A2153F16E0A2121EEA7F80487EA416C04913
7F007F1580007EC7FC0070ECFF006C495A121E390F8003F83907F00FF00001B512C06C6C
90C7FCEB0FF8233A7DB72A>I<1538A2157815F8A2140114031407A2140F141F141B1433
1473146314C313011483EB030313071306130C131C131813301370136013C01201EA0380
13005A120E120C5A123812305A12E0B712F8A3C73803F800AB4A7E0103B512F8A325397E
B82A>I<0006140CD80780133C9038F003F890B5FC5D5D158092C7FC14FC38067FE090C9
FCABEB07F8EB3FFE9038780F803907E007E090388003F0496C7E12066E7EC87EA28181A2
1680A4123E127F487EA490C71300485C12E000605C12700030495A00385C6C1303001E49
5A6C6C485A3907E03F800001B5C7FC38007FFCEB1FE0213A7CB72A>I<EC3FC0903801FF
F0010713FC90380FE03E90383F800790387E001F49EB3F804848137F485AA2485A000FEC
3F0049131E001F91C7FCA2485AA3127F90C9FCEB01FC903807FF8039FF1E07E090383801
F0496C7E01607F01E0137E497FA249148016C0151FA290C713E0A57EA56C7E16C0A2121F
ED3F807F000F15006C6C5B15FE6C6C5B6C6C485A3900FE07F090383FFFC06D90C7FCEB03
FC233A7DB72A>I<12301238123E003FB612E0A316C05A168016000070C712060060140E
5D151800E01438485C5D5DC712014A5A92C7FC5C140E140C141C5CA25CA214F0495AA213
03A25C1307A2130FA3495AA3133FA5137FA96DC8FC131E233B7BB82A>I<EB03F8EB1FFF
017F13C09038FC07F03901E001F848486C7E4848137C90C77E48141E000E141F001E80A3
121FA27F5D01E0131E6C6C133E01FC133C6D5B6C6C6C5AECC1E06CEBF3C06C01FFC7FC6C
5BEB3FFF6D13C081017F13F801F07F3903E07FFE3907801FFF48486C1380481303003E6D
13C0003CEB007F007C143F0078EC0FE000F814075A1503A21501A36C15C012781503007C
15806CEC07006C5C6C6C131ED807E0137C3903F803F0C6B55A013F1380D907FCC7FC233A
7DB72A>I<EB03F8EB1FFF017F13C09038FC07E03903F803F048486C7E48486C7E49137E
121F48487FA2007F158090C7FCA248EC1FC0A616E0A56C143FA27F123F001F147FA26C6C
13FF3907E001DF0003149F3801F0033900FC0F1FD93FFC13C0EB07F090C7FC153F1680A3
16005D000F147E487E486C5BA24A5A4A5A49485A6C48485A001C495A260F807FC7FC3807
FFFC000113F038003FC0233A7DB72A>I<121C127FEAFF80A5EA7F00121CC7FCB2121C12
7FEAFF80A5EA7F00121C092479A317>I<121C127FEAFF80A5EA7F00121CC7FCB2121C12
7F5A1380A4127F121D1201A412031300A25A1206A2120E5A121812385A1260093479A317
>I<007FB812F8B912FCA26C17F8CCFCAE007FB812F8B912FCA26C17F836167B9F41>61
D<EB3FE03801FFFE3907C03F80390E000FC0003CEB07F000301303007014F8007C130100
FE14FC7EA4127E003CEB03F8C7FCEC07F0A2EC0FE0EC1F80EC3F00147E147C5C495A5C49
5A5CA249C7FCA31306AA90C8FCA8130EEB3F80497EA56D5A010EC7FC1E3B7CBA27>63
D<1538A3157CA315FEA34A7EA34A6C7EA202077FEC063FA2020E7FEC0C1FA2021C7FEC18
0FA202387FEC3007A202707FEC6003A202C07F1501A2D901807F81A249C77F167FA20106
810107B6FCA24981010CC7121FA2496E7EA3496E7EA3496E7EA213E0707E1201486C81D8
0FFC02071380B56C90B512FEA3373C7DBB3E>65 D<B712E016FC16FF0001903980007FC0
6C90C7EA1FE0707E707E707EA2707EA283A75F16035F4C5A4C5A4C5A4C5AEEFF8091B500
FCC7FCA291C7EA7F80EE1FE0EE07F0707E707E83707EA21880177F18C0A7188017FFA24C
13005F16034C5AEE1FF8486DEB7FF0B812C094C7FC16F832397DB83B>I<913A01FF8001
80020FEBE003027F13F8903A01FF807E07903A03FC000F0FD90FF0EB039F4948EB01DFD9
3F80EB00FF49C8127F01FE153F12014848151F4848150FA248481507A2485A1703123F5B
007F1601A35B00FF93C7FCAD127F6DED0180A3123F7F001F160318006C7E5F6C7E17066C
6C150E6C6C5D00001618017F15386D6C5CD91FE05C6D6CEB03C0D903FCEB0F80902701FF
803FC7FC9039007FFFFC020F13F002011380313D7BBA3C>I<B712C016F816FE00019039
8001FF806C90C7EA3FE0EE0FF0EE03F8707E707E177FA2EF3F8018C0171F18E0170F18F0
A3EF07F8A418FCAC18F8A4EF0FF0A218E0A2171F18C0EF3F80A2EF7F0017FE4C5A4C5AEE
0FF0EE3FE0486DEBFF80B8C7FC16F816C036397DB83F>I<B812FCA30001903880000F6C
90C71201EE007E173E171E170EA31706A317078316C0A394C7FCA31501A21503150F91B5
FCA3EC000F15031501A21500A21860A318E093C712C0A41701A3EF0380A21707A2170F17
3F177F486D903807FF00B9FCA333397DB839>I<B812F8A30001903880001F6C90C71201
EE00FC177C173C171CA2170CA4170E1706A2ED0180A21700A41503A21507151F91B5FCA3
EC001F15071503A21501A692C8FCAD4813C0B612C0A32F397DB836>I<DBFF8013C0020F
EBF001023F13FC9139FF803F03903A03FC000787D90FF0EB03CF4948EB00EF4948147F49
48143F49C8121F485A4848150F48481507A248481503A2485A1701123F5B007F1600A448
481600AB93B6FCA26C7E9338007FE0EF3FC0A2123F7F121FA26C7EA26C7EA26C7E6C7E6C
6C157F6D7E6D6C14FF6D6C14EFD90FF8EB03C7D903FEEB0783903A00FFC03F0191393FFF
FC00020F01F0130002001380383D7CBA41>I<B648B512FEA30001902680000313006C90
C76C5AB3A491B6FCA391C71201B3A6486D497EB648B512FEA337397DB83E>I<B612C0A3
C6EBC0006D5AB3B3AD497EB612C0A31A397EB81E>I<013FB512E0A39039001FFC00EC07
F8B3B3A3123FEA7F80EAFFC0A44A5A1380D87F005B0070131F6C5C6C495A6C49C7FC3807
81FC3801FFF038007F80233B7DB82B>I<B649B5FCA3000101809038007FF06C90C8EA3F
80053EC7FC173C17385F5F4C5A4C5A4CC8FC160E5E5E5E5E4B5AED0780030EC9FC5D153E
157E15FF5C4A7F4A6C7E140E4A6C7E4A6C7E14704A6C7E4A6C7E14804A6C7E6F7EA26F7F
707EA2707E707EA2707EA2707E707EA2707E707F8484486D497FB6011FEBFF80A339397D
B841>I<B612E0A3000101C0C8FC6C90C9FCB3AD1718A517381730A31770A317F0A21601
1603160FEE1FE0486D13FFB8FCA32D397DB834>I<B5933807FFF86E5DA20001F0FC0026
00DFC0ED1BF8A2D9CFE01533A3D9C7F01563A3D9C3F815C3A2D9C1FCEC0183A3D9C0FEEC
0303A2027F1406A36E6C130CA36E6C1318A26E6C1330A36E6C1360A26E6C13C0A3913901
FC0180A3913900FE0300A2ED7F06A3ED3F8CA2ED1FD8A3ED0FF0A3486C6D5A487ED80FFC
6D48497EB500C00203B512F8A2ED018045397DB84C>I<B5913807FFFE8080C69238007F
E06EEC1F80D9DFF0EC0F001706EBCFF8EBC7FCA2EBC3FEEBC1FFA201C07F6E7EA26E7E6E
7E81140F6E7E8114036E7E168080ED7FC016E0153FED1FF0ED0FF8A2ED07FCED03FEA2ED
01FF6F1386A2EE7FC6EE3FE6A2EE1FF6EE0FFEA216071603A216011600A2177E486C153E
487ED80FFC151EB500C0140EA2170637397DB83E>I<EC03FF021F13E09138FE01FC9039
01F8007ED907E0EB1F8049486D7ED93F80EB07F049C76C7E01FE6E7E48486E7E49157E00
03167F4848ED3F80A24848ED1FC0A2001F17E049150F003F17F0A3007F17F8491507A300
FF17FCAC007F17F86D150FA3003F17F0A26C6CED1FE0A36C6CED3FC0000717806D157F00
0317006C6C15FEA26C6C4A5A017F4A5A6D6C495A6D6C495AD907E0EB1F80D903F8017FC7
FC903900FE01FC91381FFFE0020390C8FC363D7BBA41>I<B712C016F816FE0001903980
01FF806C90C7EA3FC0EE0FE0EE07F0EE03F817FC17FE1601A217FFA717FEA2EE03FCA2EE
07F817F0EE0FE0EE3FC0923801FF0091B512FC16F091C9FCB3A5487FB6FCA330397DB839
>I<B612FEEDFFE016F8000190388007FE6C90C76C7EEE3FC0707E707E707EA2707EA283
A65FA24C5AA24C5A4C5AEE3F8004FFC8FCED07FC91B512E05E9138000FF0ED03F8ED00FE
82707E707EA2161F83A583A6F00180A217F8160F1803486D01071400B66D6C5A04011306
933800FE0ECAEA3FFCEF07F0393B7DB83D>82 D<D90FF813C090383FFE0190B512813903
F807E33907E000F74848137F4848133F48C7121F003E140F007E1407A2007C140312FC15
01A36C1400A37E6D14006C7E7F13F86CB47E6C13F8ECFF806C14E06C14F86C14FEC68001
3F1480010714C0EB007F020713E0EC007FED3FF0151F150FED07F8A200C01403A21501A3
7EA216F07E15036C15E06C14076C15C06C140F6DEB1F80D8FBF0EB3F00D8F0FE13FE39E0
3FFFF8010F13E0D8C00190C7FC253D7CBA2E>I<003FB812E0A3D9C003EB001F273E0001
FE130348EE01F00078160000701770A300601730A400E01738481718A4C71600B3B09138
07FF80011FB612E0A335397DB83C>I<B6903807FFFEA3000101809038007FE06C90C8EA
1F80EF0F001706B3B2170E6D150C80171C133F17186D6C14385F6D6C14F06D6C5C6D6C49
5A6D6CEB07806D6C49C7FC91387F807E91381FFFF8020713E09138007F80373B7DB83E>
I<B500FC91387FFF80A30003018091380FFC006C90C8EA07E0715A6C705A6E1403017F93
C7FCA280013F1506A26E140E011F150C80010F5DA28001075DA26E147001031560A26D6C
5CA2806D4A5AA2ED8003027F91C8FCA291383FC006A215E0021F5BA2EDF01C020F1318A2
6E6C5AA215FC02035BA2EDFEE002015BA26E6C5AA36FC9FCA3153EA2151CA3393B7EB83E
>I<B5D8FC07B5D8F001B5FCA30007902780001FFEC7EA1FF86C48C7D80FF8EC07E00001
0307ED03C01B807F6C6F6C1500A26E5F017F6E6C1406A280013F4A6C5CA280011F4A6D5B
EE067FA26D6C010E6D5BEE0C3FA26D6C011C6D5BEE181FA26D6C6F5BEE300FA26D6C6F48
5AEE6007A26D6C4CC7FC9338C003FCA203805D913B7F818001FE06A203C1150EDA3FC3C7
EAFF0CA203E3151CDA1FE6EC7F98A215F6DA0FFCEC3FF0A302075E4B141FA202035E4B14
0FA202015E4B1407A2020093C8FC4B80503B7EB855>I<007FB590383FFFFCA3C601F801
071380D97FE0D903FCC7FC013FEC01F06D6C5C5F6D6C5C6D6C13034CC8FC6D6C1306160E
6D6C5B6DEB8018163891387FC0306E6C5A16E06E6C5A91380FF18015FB6EB4C9FC5D1403
6E7EA26E7F6F7EA24B7E15DF9138019FF09138038FF8150F91380607FC91380E03FE140C
4A6C7EEC38000230804A6D7E14E04A6D7E49486D7E130391C76C7E01066E7E130E010C6E
7E011C1401013C8101FE822607FF80010713E0B500E0013FEBFF80A339397EB83E>I<B5
00FE91383FFFE0A3000301E0913807FE00C649EC03F0017F6F5A606D6C5D6D6C140395C7
FC6D6C1406A26D6C5C6D6C141C17186D6C143817306D6D5B6E6C13E05F91383FE0015F91
381FF003DA0FF890C8FC1606913807FC0E160C913803FE1C913801FF185E6E13B016E015
7F6F5AB3A24B7E023FB512C0A33B397FB83E>I<3901800180000313033907000700000E
130E485B0018131800381338003013300070137000601360A200E013E0485BA400CE13CE
39FF80FF806D13C0A3007F137FA2393F803F80390E000E001A1974B92A>92
D<EB1FE0EBFFFC3803E03F3907000F80390F8007E0486C6C7E13E06E7EA26E7E6C5A6C5A
C8FCA4147FEB07FFEB3FE0EBFE00EA03F8EA0FF0EA1FC0123F485A90C7FC160C12FEA314
01A26C13036CEB077C903980063E18383FC01E3A0FE0781FF03A03FFF00FE03A007F8007
C026277DA52A>97 D<EA03F012FFA3120F1203B0EC1FE0EC7FF89038F1E03E9039F3801F
809039F7000FC001FEEB07E049EB03F049EB01F85BED00FCA216FEA2167E167FAA167E16
FEA216FC15016D14F8ED03F07F01EEEB07E001C6EB0FC09039C7801F00903881E07E9038
00FFF8C7EA1FC0283B7EB92E>I<EB03FC90381FFF8090387E03E03901F80070484813F8
3907E001FC380FC003A2EA1F80123F90380001F848EB00F01500A2127E12FEAA127E127F
A26C14067F001F140E6D130C000F141C6C6C13386C6C13706C6C13E039007C07C090381F
FF00EB07F81F277DA525>I<ED0FC0EC03FFA3EC003F150FB0EB03F8EB1FFF90387E078F
9038F801EF3903F0007F4848133F4848131FA24848130F123F90C7FC5AA2127E12FEAA12
7E127FA27EA26C6C131FA26C6C133F6C6C137F6C6CEBEFF03A01F801CFFF39007C078F90
381FFE0FD907F813C0283B7DB92E>I<EB07F8EB1FFF90387C0FC03901F803E03903F001
F0D807E013F8380FC0004848137CA248C7127E153E5A153F127E12FEA3B7FCA248C8FCA5
127EA2127FA26C14037F001F14076C6C13060007140E6D131CD801F013386C6C13709038
7E03E090381FFF80903803FC0020277EA525>I<147E903803FF8090380FC1E0EB1F8790
383F0FF0137EA213FCA23901F803C091C7FCADB512FCA3D801F8C7FCB3AB487E387FFFF8
A31C3B7FBA19>I<ED03F090390FF00FF890393FFC3C3C9039F81F707C3901F00FE03903
E007C03A07C003E010000FECF000A248486C7EA86C6C485AA200075C6C6C485A6D485A6D
48C7FC38073FFC38060FF0000EC9FCA4120FA213C06CB512C015F86C14FE6CECFF804815
C03A0F80007FE048C7EA0FF0003E140348140116F8481400A56C1401007C15F06CEC03E0
003F1407D80F80EB0F80D807E0EB3F003901FC01FC39007FFFF0010790C7FC26387EA52A
>I<EA03F012FFA3120F1203B0EC0FF0EC3FFCECF03F9039F1C01F809039F3800FC0EBF7
0013FE496D7EA25BA35BB3A3486C497EB500C1B51280A3293A7EB92E>I<EA0380EA0FE0
487EA56C5AEA0380C8FCAAEA03F012FFA312071203B3AA487EB512C0A312387EB717>I<
EB01C0EB07F0EB0FF8A5EB07F0EB01C090C7FCAAEB01F813FFA313071301B3B3A2123C12
7E00FF13F01303A214E038FE07C0127C383C0F00EA0FFEEA03F8154984B719>I<EA03F0
12FFA3120F1203B1913801FFFCA39138007FC01600157C15705D4A5A4A5A4AC7FC141E14
38147814FC13F1EBF3FEEBF73F01FE7FEBF81F496C7E8114076E7E6E7E811400157E157F
811680ED1FC0486CEB3FF0B500C0B5FCA3283A7EB92C>I<EA03F012FFA3120F1203B3B3
AD487EB512C0A3123A7EB917>I<2703F00FF0EB1FE000FFD93FFCEB7FF8913AF03F01E0
7E903BF1C01F83803F3D0FF3800FC7001F802603F70013CE01FE14DC49D907F8EB0FC0A2
495CA3495CB3A3486C496CEB1FE0B500C1B50083B5FCA340257EA445>I<3903F00FF000
FFEB3FFCECF03F9039F1C01F803A0FF3800FC03803F70013FE496D7EA25BA35BB3A3486C
497EB500C1B51280A329257EA42E>I<EB03FE90380FFF8090383E03E09038F800F84848
137C48487F48487F4848EB0F80001F15C090C712074815E0A2007EEC03F0A400FE15F8A9
007E15F0A2007F14076C15E0A26C6CEB0FC0000F15806D131F6C6CEB3F006C6C137EC66C
13F890387E03F090381FFFC0D903FEC7FC25277EA52A>I<3903F01FE000FFEB7FF89038
F1E07E9039F3801F803A0FF7000FC0D803FEEB07E049EB03F04914F849130116FC150016
FEA3167FAA16FEA3ED01FCA26DEB03F816F06D13076DEB0FE001F614C09039F7803F0090
38F1E07E9038F0FFF8EC1FC091C8FCAB487EB512C0A328357EA42E>I<D903F813C09038
1FFE0190387E07819038FC01C33903F000E3000714774848133749133F001F141F485A15
0F48C7FCA312FEAA127FA37E6D131F121F6D133F120F6C6C137F6C6C13EF3901F801CF39
007E078F90381FFE0FEB07F890C7FCABED1FE00203B5FCA328357DA42C>I<3807E01F00
FFEB7FC09038E1E3E09038E387F0380FE707EA03E613EE9038EC03E09038FC0080491300
A45BB3A2487EB512F0A31C257EA421>I<EBFF03000313E7380F80FF381E003F487F487F
00707F12F0A2807EA27EB490C7FCEA7FE013FF6C13E06C13F86C7F00037FC67F01071380
EB007F141F00C0EB0FC01407A26C1303A37E15806C13077EEC0F00B4131E38F3C07C38E1
FFF038C03F801A277DA521>I<1318A51338A31378A313F8120112031207001FB5FCB6FC
A2D801F8C7FCB215C0A93800FC011580EB7C03017E13006D5AEB0FFEEB01F81A347FB220
>I<D803F0EB07E000FFEB01FFA3000FEB001F00031407B3A4150FA3151F12016D133F00
00EC77F86D9038E7FF8090383F03C790381FFF87903A03FC07E00029267EA42E>I<B538
803FFEA33A0FF8000FF06C48EB07E00003EC03C06D148000011500A26C6C1306A26D130E
017E130CA26D5BA2EC8038011F1330A26D6C5AA214E001075BA2903803F180A3D901FBC7
FCA214FF6D5AA2147CA31438A227257EA32C>I<B53A1FFFE03FFEA3260FF8009038000F
F86C48017EEB03E018C00003023EEB0180A26C6C013FEB0300A36C6CEC8006156FA2017E
9038EFC00C15C7A2D93F016D5A15830281EBF038D91F831430150102C3EBF87090260FC6
001360A2D907E66D5A02EC137CA2D903FCEB7F804A133FA2010192C7FC4A7FA20100141E
4A130E0260130C37257EA33C>I<B538807FFFA33A03FE003FF00001EC1F80000092C7FC
017E131C6D13186D6C5AECC070010F5B6D6C5AECF180EB03FB6DB4C8FC6D5AA2147F804A
7E8114CF903801C7E090380383F090380703F8EB0601496C7E011C137E49137F01787F49
6D7E486C80000FEC3FF0D8FFFE90B51280A329247FA32C>I<B538803FFEA33A0FF8000F
F06C48EB07C00003EC03806C7E16007F00001406A2017E5BA2137F6D5BA26D6C5AA2ECC0
70010F1360A26D6C5AA214F101035BA2D901FBC7FCA214FF6D5AA2147CA31438A21430A2
14701460A25CA2EA7C0100FE5B130391C8FC1306EAFC0EEA701C6C5AEA1FF0EA0FC02735
7EA32C>I<003FB512FCA2EB8003D83E0013F8003CEB07F00038EB0FE012300070EB1FC0
EC3F800060137F150014FE495AA2C6485A495AA2495A495A495AA290387F000613FEA248
5A485A0007140E5B4848130C4848131CA24848133C48C7127C48EB03FC90B5FCA21F247E
A325>I<B81280A2290280962A>I<BD12C0A25202809653>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fn cmr12 14.4 17
/Fn 17 117 df<B812FEEFFFC018F818FE26007FF8C73807FF806D4802017F011F6F6C7E
727E727E727E727EA2727EA2721380A21AC0A384A360A21A80A2601A00A24E5A180F614E
5A4E5AF0FFE04D1380050790C7FCEF7FFC91B712E08418FE02F0C73801FF809438007FE0
F01FF8727EF003FE857213807213C0F17FE0A2F13FF0A21AF8191FA21AFCA81AF8193FA2
1AF0197FF1FFE0A24E13C04E1380604E1300F03FFC013FEEFFF8496C02075BBA12C096C7
FC18FC18C046527AD153>66 D<B712E0A4C66C90CAFCEB3FFC6D5AB3B3A9191CA51938A6
1978A319F819F0A218011803A21807180F181F183F18FF013F1503496C023F13E0BAFCA4
3E527BD149>76 D<DA3FF0130349B55B010714C0011FECF00F903A7FE00FF81F49C712FE
D801FCEC3F3F4848EC1FBF48486EB4FC48481403485A4980003F8190C97E5A83127E8312
FEA283A37E837FA27F007F93C7FC7F7FEA3FFC7F6C6C7E14F86CEBFF806C14F8EDFF806C
15F06C15FE6C6C806D15C0010F81010315F8D9007F80140F020080030F7F03001480161F
040713C0160182EF7FE0A2173FEF1FF0A200E0160FA31707A37EA318E07E170F7E18C06C
161F6C17806D153F6D16006D157E6D15FED8FCFC4A5A017F4A5A26F83FC0EB0FF0D90FFE
EB7FC0D8F003B65A48C64AC7FC023F13F848010113C034567AD341>83
D<003FBB12C0A449C79038F0000701F06E48130001C0183F48C8EE0FE0007E1907007C19
03A200781901A400701900A500F01AF0481A70A6C91700B3B3AC4C7E030313FC027FB712
E0A44C517CD055>I<ECFFC0010F13F8013F13FE9039FF00FF80D801F0EB3FE0D803C0EB
0FF0486C6D7E01F86D7E000F816D13016F7EA3707E6C5AEA01E0C9FCA6ED3FFF020FB5FC
9138FFFC7F01071300EB1FF0EB7FC04848C7FCEA03FC485A485A485A123F5B485A187012
FF90C8FCA216FFA35D6D14BF007F14036DEB073F6C6C90390F1FC0E06C6C131E6C6C9039
3C0FE1C02707FE01F013FF0001B5486C13806C6C90398003FE00D907FCC712F834367BB4
3B>97 D<EC0FF891B5FC010314C090390FF80FF090391FC003FC90397F8001FE49C77E48
48EC7F804848143F49EC1FC0485A000FED0FE05B001F16F01607485AA2007F16F8A25B16
0312FF90B7FCA30180C9FCA8127F7FA2123FA26D1538121F17786C6C1570000716F06D15
E06C6C14016C6CEC03C06C6C15806D6C130F6D6CEB1F00D90FF0133C903907FE01F80101
B512E06D6C1380DA07FCC7FC2D367DB434>101 D<157F913803FFE0020F13F091383FC0
F891387F01FC903901FE03FE903803FC0714F81307EB0FF0A290391FE003FCED01F892C7
FC495AB3B612FEA426003FC0C7FCB3B3A580EBFFF0007FEBFFF8A427547DD324>I<EB7F
80B5FCA41203C6FC137FB3A6ED07FC92383FFF8092B512E0913981F00FF8913983C007FC
9139870003FE028E1301029C6D7E14B814B002F06E7E5CA25CA35CB3AD2601FFE0903801
FFE0B600C0B612C0A43A537CD241>104 D<1378EA01FE487E487FA66C90C7FC6C5AEA00
7890C8FCB0EB7F80B5FCA41203C6FC137FB3B3A43801FFE0B61280A419507CCF21>I<EB
FF80B5FCA41203C6FC137FB3A793B512F8A4043F138093381FFC0017F017C094C7FC163E
5E5E4B5A4B5AED07804BC8FC151E5D15FC1481EC83FEEC87FF148F029E7F9138BC7FC0EC
F83F02F07F4A6C7EECC00F02807F4A6C7E6F7EA26F7E6F7F167F83707E161F83707E1607
83707E8318802601FFC04913E0B6D8803F13FFA438537DD23E>107
D<EB7F80B5FCA41203C6FC137FB3B3B3B13801FFE0B612C0A41A537CD221>I<01FFD907
FEEC03FFB590261FFFC0010F13E0037F01F0013F13F8912701F80FFC9038FC07FE913D03
C003FE01E001FF000390260700019038038000C6010E6D6C48C76C7E6D48DA7F8E6E7E4A
159CA24ADA3FF86E7E02605D14E04A5DA34A5DB3AD2601FFE0DAFFF0EC7FF8B6D8C07F90
26FFE03FB512F0A45C347CB363>I<EC0FFC91387FFF8049B512E0903907F807F890391F
E001FE90393F80007F017EC7EA1F80496E7E48486E7E00038248486E7EA248486E7EA248
486E7EA2003F82A24848ED7F80A400FF17C0AB007F1780A26D15FFA2003F1700A2001F5E
6D1401000F5E6D140300075E6C6C4A5A6C6C4A5AA2D8007FEC3F806D6C49C7FC90391FE0
01FE903907F807F86DB55AD9007F1380DA0FFCC8FC32367CB43B>111
D<90397F8007FCB590387FFF800281B512E0913987F00FF891398F8003FC000390399E00
01FFC601BC6D7FD97FF86E7E4A6E7E4A6E7E4A140F844A6E7EA2717EA3717EA4711380AB
4D1300A44D5AA24D5AA2606E140F4D5A6E5D6E4A5A6E4A5A02BC4AC7FC029E495A028FEB
07FC913987E01FF00281B512C0DA807F90C8FCED0FF892CAFCB13801FFE0B612C0A4394B
7DB341>I<01FFEB1F80B5EB7FF0913801FFF8913803E1FC91380783FE0003EB0F07C613
1EEB7F1C1438143091387003FC91386000F0160014E05CA45CB3AA8048487EB612F0A427
347DB32E>114 D<D907FE13C090387FFF8148B512E33907F803FF390FC0007F4848133F
48C7121F003E140F007E1407127C00FC1403A315017EA27E7F6C6C90C7FC13F013FF6C13
F86CEBFF806C14E06C14F86C14FEC680013F1480010714C0D9003F13E014039138007FF0
151F00E0140FED07F8A26C1403A215017EA36C15F0A26C14036C15E015076DEB0FC06DEB
1F80D8FDF0EB3F0039F8FC01FE39F07FFFF8D8E01F13E0D8C00390C7FC25367CB42E>I<
EB01C0A71303A41307A3130FA2131FA2133F137F13FF5A5A001F90B512E0B7FCA326003F
C0C7FCB3A71638AC6E1378011F1470A26D6C13F016E0903807F801903903FC03C0903901
FE07806DB51200EC3FFCEC07F0254B7EC92E>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fo cmbx10 10 54
/Fo 54 123 df<EA0F80EA3FE0EA7FF0A2EAFFF8A213FCA3127FA2123FEA0F9CEA001C13
3C1338A31378137013F0EA01E0A2EA03C0EA0780EA0F005A121C12180E1D79B91B>39
D<B61280A819087F9620>45 D<EA0F80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F
800D0D798C1B>I<49B4FC010F13E0017F13FC9038FF83FE4848C67E4848EB7F804848EB
3FC04848EB1FE0A2001F15F0A24848EB0FF8A3007F15FCA500FF15FEB3007F15FCA4003F
15F8A26D131F001F15F0A2000F15E06D133F000715C06C6CEB7F806C6CEBFF003900FF83
FE6DB45A011F13F0010190C7FC27387CB630>48 D<141E143E14FE1307133FB5FCA313CF
EA000FB3B3A6007FB61280A4213779B630>I<EB0FFC90387FFFC048B512F0000714FC39
0FF03FFF261F800F1380263F000313C05AD9C00113E0486C6C13F07FA2ED7FF8A46C5A6C
5A000FC7FCC8FCEDFFF0A216E05C16C04A138016004A5A5D4A5A4A5A4A5AEC7F8092C7FC
14FEEB01F849481378495A495A495A013EC712F84914F05B4848130148B6FCA25A5A5A5A
4815E0B7FCA425377BB630>I<EB03FF011F13F0017F13FC3901FC07FF2603F003138048
486C13C0496C13E0EA0FF001FC14F0121F7FA56C4814E0A23803F001C714C04A13801600
4A5A4A5AEC3FF090380FFFC092C7FC15F090380007FE913801FF806E13C016E0ED7FF016
F816FC153FA216FEEA1FC0487E487E487EA416FCA249EB7FF8127F01C0EBFFF06C4814E0
6C6C4813C0260FFC0713806CB61200000114FC6C6C13F0010790C7FC27387CB630>I<ED
07C0150FA2151F153F157F15FFA25C5C5C5CA2141E5C147C5C5C495A495A1307495A5C13
1E5B137C5B5B485A485A1207485A90C7FC121E5A127C5AB81280A4C70001EBC000AA0103
B61280A429377DB630>I<001C15C0D81F80130701F8137F90B61280A216005D5D15F05D
15804AC7FC14F090C9FCA8EB07FE90383FFFE090B512F89038FC07FC9038E003FFD98001
138090C713C0120EC813E0157F16F0A216F8A21206EA3F80EA7FE012FF7FA44914F0A26C
4813FF90C713E0007C15C06C5B6C491380D9C0071300390FF01FFE6CB512F8000114E06C
6C1380D90FF8C7FC25387BB630>I<EC0FF8ECFFFE0103EBFF8090390FF80FC090393FE0
03E090397FC001F09038FF000F48EC1FF84848133F485A120F5B121FA2003FEC1FF0ED0F
E04990C7FC127FA21408EC7FF039FFF1FFFC01F313FFD9F78013809039FF007FC049EB3F
E04914F0ED1FF85B16FCA34914FEA5127FA5123F16FCA26C7E16F8000F143F6C6C14F0ED
7FE06C6C14C03A01FF81FF806C90B51200013F13FC010F13F00101138027387CB630>I<
123C123EEA3FE090B71280A41700485D5E5E5EA25E007CC7EA0FC000784A5A4BC7FC00F8
147E48147C15FC4A5A4A5AC7485A5D140F4A5A143F92C8FC5C147E14FE1301A2495AA313
07A2130F5CA2131FA5133FA96D5A6D5A6D5A293A7BB830>I<49B47E010F13F0013F13FC
9038FE01FF3A01F8007F804848EB3FC04848EB1FE0150F485AED07F0121FA27FA27F7F01
FEEB0FE0EBFF809138E01FC06CEBF03F02FC13809138FF7F006C14FC6C5C7E6C14FE6D7F
6D14C04914E048B612F0EA07F848486C13F8261FE01F13FC383FC007EB8001007F6D13FE
90C7123F48140F48140715031501A21500A216FC7E6C14016D14F86C6CEB03F06D13076C
6CEB0FE0D80FFEEB7FC00003B61200C614FC013F13F00103138027387CB630>I<EB03FF
011F13E0017F13F83901FF03FE4848C67E4848EB7F80484814C0001FEC3FE0123F49EB1F
F0127F16F8A212FF16FCA516FEA5007F143FA3123F157F6C7E000F14FF6C6C5A3903FE03
DF6CB5129F6C6C131FD91FFC13FCEB00201400A216F8D80FE0133F487E486C14F0A216E0
157F16C0EDFF80495A6C4848130090388007FE390FE01FF86CB55A6C14C0C691C7FCEB1F
F027387CB630>I<EA0F80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F80C7FCABEA
0F80EA3FE0EA7FF0A2EAFFF8A5EA7FF0A2EA3FE0EA0F800D2579A41B>I<EB1FFE48B512
E0000714F8390FE00FFE393F0003FF4815806D7ED8FFC014C013E0A5EA7FC06C48481380
EA1F00C7481300EC0FFC4A5AEC3FE04A5A92C7FC14FE5C495AA25C495AA25CA990C9FCA7
EB07C0EB1FF0497EA2497EA56D5AA26D5AEB07C0223A7BB92D>63
D<B812C017FC17FF18C028007FF000037F04007F717E717E171F84A2717EA74D5AA26017
3F4D5A4D5A4C13C0040F5B91B600FCC7FCA2EFFF8002F0C713F0EF3FF8717E717E717E19
807113C0A319E0A719C0A25F4D138019005FEF7FFE4C485AB912F018C095C7FC17F03B39
7DB844>66 D<DB3FFCEB01C00203B5EAC003021FECF00791B6EAFC0F01039039FC00FF3F
4901C0EB1FFFD91FFEC77E49481403D97FF080494880485B48177F4849153F4890C9FC18
1F485A180F123F5B1807127FA24993C7FC12FFAD127F7FF003C0123FA27F001F1707A26C
6C1780180F6C6D16006C6D5D6C173E6C6D157ED97FF85D6D6C4A5A6DB44A5A010701C0EB
0FE06D01FCEBFF80010090B548C7FC021F14F8020314E09126003FFEC8FC3A3B7BB945>
I<B87E17F817FF18C028007FF8000713F09338007FF8EF1FFE717E050313807113C0A271
13E0F07FF0A2F03FF8A219FC181FA219FEA419FFAC19FEA419FC183FA219F8187F19F0F0
FFE0A24D13C04D13804D1300EF1FFEEF7FFC933807FFF0B912C095C7FC17FC178040397D
B849>I<B912F0A426007FF8C7FCEF1FF8170717031701A21700A21878A3043C137C183C
A41800167CA216FC150391B5FCA4ECF8031500167CA2163C180FA3181EA293C7FCA2183E
A2183C187CA218FCA2EF01F81703170F173FEE01FFB9FC18F0A338397DB83F>I<B6D8FC
03B612F0A426007FF8C70001EBE000B3A391B8FCA402F8C71201B3A6B6D8FC03B612F0A4
44397DB84B>72 D<B612FCA439007FF800B3B3ADB612FCA41E397DB824>I<B500F80403
B512F06E5EA26E5ED8007FF1E000A2D97BFF161EA201796D5DA201786D5DA26E6C5DA36E
6C4A5AA26E6C4A5AA26E6C4A5AA26E6C4A5AA26E6C141EA36E6D5BA26E6D5BA26F6C5BA2
6F6C485AA36F6C485AA26F6C485AA26F6C48C7FCA2923803FF1EA36F13BCA26F13F8A270
5AA2705AA213FCB500FC6D4848B612F0A2EE0F80EE070054397DB85B>77
D<B500FC0203B512F0A28080C66C6D90390003F0006F6E5A81017B7F13798101787F6E7E
6E7E6E7F6E7FA26E7F6E7F6E7F6E7F6F7E153F826F13806F13C06F13E06F13F06F13F881
17FCEE7FFEEE3FFF7013817013C17013E18218F17013F97013FDEF7FFF8383A283838383
83187FA2183F181F01FC160FB500FC150718031801A244397DB84B>I<EDFFF8020FEBFF
80027F14F0903A01FFC01FFC010790380007FFD91FFC010113C0D93FF06D6C7E49486E7E
49486E7E48496E7E48834890C86C7EA248486F1380A248486F13C0A2003F18E0A348486F
13F0A400FF18F8AC007F18F06D5DA3003F18E0A26D5D001F18C0A26C6C4B13806C18006E
5C6C6D4A5A6C5F6C6D4A5A6D6C4A5AD93FFC49485A6DB401075B0107D9C01F90C7FC0101
90B512FC6D6C14F0020F1480020001F8C8FC3D3B7BB948>I<B8FC17F017FEEFFF802800
7FF8000F13C0040113E07013F0EF7FF8EF3FFCA2EF1FFEA218FFA818FEA2EF3FFCA2EF7F
F8EFFFF04C13E0040F13C091B7120017FC17E002F8C9FCB3A4B612FCA438397DB841>I<
B712FCEEFFE017FC17FF28007FF8000F13C004017F707F717E717EA2717EA284A760A24D
5A604D5A4D5A04035B041F90C8FC91B612FC17E0839139F8003FFCEE0FFF707F707F8284
A2707FA584A51A601AF084177F1901DD3FFE13E0B600FC011F130394390FFF87C071EBFF
8005011400CBEA1FFC443A7DB848>82 D<D907FF130E013FEBE01E90B5EAF83E0003ECFE
7E3A07FC01FFFE390FF0001F4848130F48481303491301007F140090C8FC167E5A163EA2
7F161E7F7F6D91C7FC13FC387FFFE014FEECFFF06C14FE6F7E6C816C15F06C816C81C681
133F010F801301D9000F1480EC007F030F13C01503818100F0157FA3163FA27E17807E16
7F6C16007E6D14FE01E0495A01F813039039FF801FF800FC90B512E0D8F83F5CD8F00749
C7FC39E0007FF02A3B7BB935>I<003FB91280A4D9F800EBF003D87FC09238007FC04916
1F007EC7150FA2007C1707A200781703A400F818E0481701A4C892C7FCB3AE010FB7FCA4
3B387DB742>I<B600FC011FB512C0A426007FF8C8381FC000725AB3B3181F013F94C7FC
8060011F163E6D6C157E187C6D6C15FC6D6D495A6D6DEB07F06D01F0EB1FE0DA7FFEEBFF
C0021FB6C8FC02075C020014F0030F1380423A7DB849>I<B6D8E01FB500FC90383FFFFC
A4000101F0C7D83FFCC8EA7E006C71153C171F6E197C017F701578836E7014F8013F6F5E
6E1801011F4B6D5CA26E18036D4B6D5CA26D6D496D495A173C6F170F6D037C6D91C7FCEF
787F6F5F6D4B6C6C131E816D02016E5BEFE01F03F8177C027F01036E13784D7E03FCEE80
F8023F49486C5C15FE021F010FEDC1E04D7E03FF16C36E49EDE3C0041E7F049E15F76E01
BC6D5C04FC15FF6E95C8FC4C80A26E5F4C143F6E5F4C141FA2037F5E4C140FA26F486E5A
A2031F5E93C812036F5E5E3A7EB863>87 D<EB3FFE0003B512E0000F14F8391FF00FFE00
3FEB03FF6D6C7F6E7FA26F7EA26C5A6C5AEA0380C8FCA2EC3FFF010FB5FC137F3901FFF8
7F00071380380FFE00EA3FF85B485A12FF5BA415FF6D5A127F263FF00713F83B1FFC1FBF
FFC0390FFFFE1F0003EBF80F39003FE0032A257DA42E>97 D<13FFB5FCA412077EAF4AB4
7E020F13F0023F13FC9138FE03FFDAF00013804AEB7FC00280EB3FE091C713F0EE1FF8A2
17FC160FA217FEAA17FCA3EE1FF8A217F06E133F6EEB7FE06E14C0903AFDF001FF80903A
F8FC07FE009039F03FFFF8D9E00F13E0D9C00390C7FC2F3A7EB935>I<903801FFC0010F
13FC017F13FFD9FF8013802603FE0013C048485AEA0FF8121F13F0123F6E13804848EB7F
00151C92C7FC12FFA9127FA27F123FED01E06C7E15036C6CEB07C06C6C14806C6C131FC6
9038C07E006DB45A010F13F00101138023257DA42A>I<EE7F80ED7FFFA4150381AF9038
01FF81010F13F1013F13FD9038FFC07F0003EB001FD807FC1307000F8048487F5B123FA2
485AA312FFAA127FA27F123FA26C6C5B000F5C6C6C5B6C6C4913C02701FF80FD13FE3900
7FFFF9011F13E1010313012F3A7DB935>I<903803FF80011F13F0017F13FC3901FF83FE
3A03FE007F804848133F484814C0001FEC1FE05B003FEC0FF0A2485A16F8150712FFA290
B6FCA301E0C8FCA4127FA36C7E1678121F6C6C14F86D14F000071403D801FFEB0FE06C90
38C07FC06DB51200010F13FC010113E025257DA42C>I<161FD907FEEBFFC090387FFFE3
48B6EAEFE02607FE07138F260FF801131F48486C138F003F15CF4990387FC7C0EEC00000
7F81A6003F5DA26D13FF001F5D6C6C4890C7FC3907FE07FE48B512F86D13E0261E07FEC8
FC90CAFCA2123E123F7F6C7E90B512F8EDFF8016E06C15F86C816C815A001F81393FC000
0F48C8138048157F5A163FA36C157F6C16006D5C6C6C495AD81FF0EB07FCD807FEEB3FF0
0001B612C06C6C91C7FC010713F02B377DA530>103 D<13FFB5FCA412077EAFED7FC091
3803FFF8020F13FE91381F03FFDA3C01138014784A7E4A14C05CA25CA291C7FCB3A3B5D8
FC3F13FFA4303A7DB935>I<EA01F0EA07FC487EA2487EA56C5AA26C5AEA01F0C8FCA913
FF127FA412077EB3A9B512F8A4153B7DBA1B>I<13FFB5FCA412077EAF92380FFFE0A492
3803FC0016F0ED0FE0ED1F804BC7FC157E5DEC03F8EC07E04A5A141FEC7FE04A7E8181A2
ECCFFEEC0FFF496C7F806E7F6E7F82157F6F7E6F7E82150F82B5D8F83F13F8A42D3A7EB9
32>107 D<13FFB5FCA412077EB3B3ACB512FCA4163A7DB91B>I<01FED97FE0EB0FFC00FF
902601FFFC90383FFF80020701FF90B512E0DA1F81903983F03FF0DA3C00903887801F00
0749DACF007F00034914DE6D48D97FFC6D7E4A5CA24A5CA291C75BB3A3B5D8FC1FB50083
B512F0A44C257DA451>I<01FEEB7FC000FF903803FFF8020F13FE91381F03FFDA3C0113
80000713780003497E6D4814C05CA25CA291C7FCB3A3B5D8FC3F13FFA430257DA435>I<
903801FFC0010F13F8017F13FFD9FF807F3A03FE003FE048486D7E48486D7E48486D7EA2
003F81491303007F81A300FF1680A9007F1600A3003F5D6D1307001F5DA26C6C495A6C6C
495A6C6C495A6C6C6CB45A6C6CB5C7FC011F13FC010113C029257DA430>I<9039FF01FF
80B5000F13F0023F13FC9138FE07FFDAF00113800007496C13C06C0180EB7FE091C713F0
EE3FF8A2EE1FFCA3EE0FFEAA17FC161FA217F8163F17F06E137F6E14E06EEBFFC0DAF003
13809139FC07FE0091383FFFF8020F13E0020390C7FC91C9FCACB512FCA42F357EA435>
I<49B4EB0780010FEBE00F013FEBF81F9039FFC07C3F0003EB803E3A07FE000F7F4848EB
07FF121F497F123F497F127FA25B12FFAA6C7EA36C7E5D6C7E000F5C6C6C5B6C6C133F6C
EBC0FD39007FFFF1011F13C10101130190C7FCAC037F13FEA42F357DA432>I<9038FE03
F000FFEB0FFEEC3FFF91387C7F809138F8FFC000075B6C6C5A5CA29138807F80ED3F0015
0C92C7FC91C8FCB3A2B512FEA422257EA427>I<90383FF0383903FFFEF8000F13FF381F
C00F383F0003007E1301007C130012FC15787E7E6D130013FCEBFFE06C13FCECFF806C14
C06C14F06C14F81203C614FC131F9038007FFE140700F0130114007E157E7E157C6C14FC
6C14F8EB80019038F007F090B512C000F8140038E01FF81F257DA426>I<130FA55BA45B
A25B5BA25A1207001FEBFFE0B6FCA3000390C7FCB21578A815F86CEB80F014816CEBC3E0
90383FFFC06D1380903803FE001D357EB425>I<01FFEC3FC0B5EB3FFFA4000714016C80
B3A35DA25DA26C5C6E4813E06CD9C03E13FF90387FFFFC011F13F00103138030257DA435
>I<B539F001FFF8A4000390C7EA3F00161E6E133E6C153C6E137C6C15786E13F8017F5C
ECF001013F5C14F8011F495AA2ECFC07010F5CECFE0F010791C7FC6E5A6D131E15BE6D13
BC15FC6D5BA36E5AA26E5AA26E5AA26E5AA22D257EA432>I<B500F1B538803FFFA43D07
FE000FF80003E06C6C010715C082028015076C6E6C148015076C01C0ED0F00826E485C01
7FED801E5D90273FF01E7F5B17C0DAF83E147C011F90393C3FE078037C14F8903B0FFC78
1FF0F0A29139FEF00FF10107EDF9E002FF14FB6D496CB45AA24B7E6D5EA26D496C90C7FC
A292C7FC6E5CA2023E147C023C143C40257EA445>I<B539F01FFFF0A4000390398003F8
006C01C013E06C1407D97FE05B6D6C485A6E48C7FC90381FFC3E010F5B903807FEFC6D6C
5A5D6D5B6D5B6E7E6E7E814A7EA24A7E903801F3FFD903E37FD907C17FEB0FC049486C7E
4A6C7E013E80496D7E49130F00016E7EB590383FFFF8A42D257EA432>I<B539F001FFF8
A4000390C7EA3F00161E6E133E6C153C6E137C6C15786E13F8017F5CECF001013F5C14F8
011F495AA2ECFC07010F5CECFE0F010791C7FC6E5A6D131E15BE6D13BC15FC6D5BA36E5A
A26E5AA26E5AA26E5AA292C8FCA25C141E003F133E387F803C38FFC07C147814F8EBC1F0
EBC3E06C485A387D1F80D83FFFC9FCEA1FFCEA07F02D357EA432>I<003FB612C0A3D9F0
031380EB800749481300003E5C003C495A007C133F5D0078495A14FF5D495B5BC6485B92
C7FC495A131F5C495A017FEB03C0EBFFF014E04813C05AEC80074813005A49EB0F80485A
003F141F4848133F9038F001FFB7FCA322257DA42A>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fp cmr12 12 10
/Fp 10 122 df<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A78891B>46
D<16C04B7EA34B7EA34B7EA34B7EA3ED19FEA3ED30FFA203707FED607FA203E07FEDC03F
A2020180ED801FA2DA03007F160FA20206801607A24A6D7EA34A6D7EA34A6D7EA2027081
0260147FA202E08191B7FCA249820280C7121FA249C87F170FA20106821707A2496F7EA3
496F7EA3496F7EA201788313F8486C83D80FFF03037FB500E0027FEBFFC0A342477DC649
>65 D<B8FC17E017FC00019039C00003FF6C6C4801007FEF3FC0717E717E717E84170384
170184A760A21703601707604D5A4D5AEF7FC04DC7FCEE03FEEE3FF091B65A17FC0280C7
B47EEF1FC0EF0FF0717E717E717E717E1980187F19C0A2183F19E0A8F07FC0A2198018FF
4D1300A24D5AEF0FFC4D5AEF7FE048486C903803FFC0B9C7FC17FC17C03B447CC345>I<
B8FC17F017FC00019039C00007FF6C499038007FC0017FED1FE0EF07F0EF03FC717E717E
84727E727E727EA2727E85180385A2180185A38584A31A80AD1A00A36061A36118036118
0761180F614E5A183F614EC7FC18FEEF03FC4D5AEF1FE001FFED7FC0486DD907FFC8FCB8
12FC17F094C9FC41447CC34B>68 D<EB01FE903807FFC090381F03F090387E00FC49137E
48487F485A4848EB1F80000F15C049130F121F484814E01507A2007F15F090C7FCA25AA3
90B6FCA290C9FCA67EA27FA2123F16306C7E1670000F15606D14E06C6C14C0000314016C
6CEB03806C6CEB0700013E131E90381F80F8903803FFE0010090C7FC242E7DAC2B>101
D<EA01FC12FFA3120712031201B3B3B3A5487EB512F8A315457DC41C>108
D<3901FC01FE00FF903807FFC091381E07F091383801F8000701707F0003EBE0002601FD
C07F5C01FF147F91C7FCA25BA35BB3A8486CECFF80B5D8F83F13FEA32F2C7DAB36>110
D<EC7F80903803FFF090380FC0FC90383E001F496D7E496D7E48486D7E48486D7E48486D
7E000F81A24848147E003F157FA290C87E481680A44816C0AA6C1680A26D147F003F1600
A2001F157E6D14FE000F5D6D130100075D6C6C495A6C6C495A6C6C495A013E49C7FC9038
1FC0FE903807FFF89038007F802A2E7DAC31>I<B500E0B539E03FFF80A30007903C000F
FE000FFC00D803FCD903F8EB03F8F001E0120103015D6D80000060A26D6E13036DD9037E
91C7FCA20280017F5B013FD9063F1306A2D91FC06E5AED0C1FA2D90FE06E5AED180FA2D9
07F06E5AED3007A2D903F86E5AED6003A2902601FCE06D5AEDC00117FCD900FFECFD80ED
800017FF027F92C8FC92C77EA26E147E023E143EA2021E143C021C141CA2412C7EAA46>
119 D<B539F001FFFCA3000790C7EA7FE06C48EC1F8000011600160E0000150C6D141C6D
1418A26E1338013F1430A26D6C5BA26E13E0010F5CA26D6C485AA2ECF803010391C7FCA2
903801FC06A2ECFE0E0100130CA2EC7F18A215B8EC3FB0A2EC1FE0A36E5AA26E5AA36EC8
FCA21406A35CA25CA2123C007E5BB4FC5CA25CEAFE01387C0380D87007C9FCEA3C1EEA0F
FCEA03F02E3F7EAA33>121 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fq cmr17 17.28 17
/Fq 17 117 df<B912F018FF19E019FCC601FCC8EA3FFED93FF8923807FF80011F04017F
9538007FF0737E737E737E1907737E1B80857313C0A21BE01A7FA21BF0A91BE01AFFA21B
C0611B804F1300614F5A62F13FF84F5AF1FFC006035BDE0FFEC7FCF07FF894380FFFE091
B8C8FC19E019FC02F8C83803FF8006007FF13FF0F10FFC737E737E7313807313C0F27FE0
1BF01A3FF21FF8A21BFC1A0F1BFEA21A071BFFA91BFE1A0FA3F21FFCA2F23FF8A2F27FF0
F2FFE0614F13C04F13804F1300F13FFE4F5A013F933803FFF0D9FFFC031F5BBB12804FC7
FC19F096C8FC506279E15E>66 D<B712E0A4C60280CAFCD93FFCCBFC131F5CB3B3B21A1C
A61A3C1A38A61A78A41AF8A21AF01901A219031907A2190F191F193F197FF001FF180701
3F043F13E0D9FFFC0203B5FCBBFCA4466279E153>76 D<DA07FF1403023F01F05B49B512
FC010702FF5B90260FFC0013C0D93FE090380FF01FD97F80EB03F801FEC86C5A4848157E
4848ED1F7F48486F5A4848815B001F824981003F8290CAFC4883A2007E83A212FE84A384
A27EA36D82A26C7EA26D93C7FC6C7E7F7F6C7E6D7E6C13E06C13FCECFFC06C14F86CECFF
806C15F86DECFF80011F15E06D15F8010315FE01006F7E021F81020181DA003F80030380
DB003F7F04037FEE007FEF1FFF71138017037113C083A2F07FE0183FA2181F00E018F018
0FA41807A27EA47E19E0180F7E19C07E6C171F19806D163F6D17006D5E6D16FE486C5E6D
4B5AD8FC7F1503D91F80EC0FF026F80FE04A5AD907FCEC7F8029F001FFE003FFC7FC6D6C
B512FC48011F14F0020314C0489026001FFEC8FC3C667AE349>83
D<003FBC12F8A49126C000039038C0000301FCC76C49EB007F01F0190F01C019074848F1
03FC90C81701007E1A00007C1B7CA300781B3CA400701B1CA600F01B1E481B0EA7C91800
B3B3B3A54C7FA2041F13F84AB87EA457627CE160>I<EC3FF0903803FFFE010F6D7E9039
3FC03FE090397E0007F801F86D7ED801E06D7E48486D7E48486E7E48C86C7E7F01F06E7E
487E6D6E7EA3707EA36C5AEA03E0C9FCA6167FED7FFF020FB5FC91387FF807903801FF80
903807FC00EB1FF0EB7FC0495AD803FEC7FC485A120F5B485A485AA2484817E0A312FF5B
A2160FA3161F6D141B007F153B16736D913971FC01C06C6C14E1001FEC01C1D80FFC903A
0780FE03806C6C903A0F00FF07002701FF807E6DB4FC27007FFFF86D5A011F01E0EB1FF8
010190C7EA07E03B417ABF42>97 D<EC03FE91381FFFE091B512F8903901FE03FE903A07
F0007F8049486D7ED93FC06D7E49C76C7E496E7E49140348488148481401000782491400
000F8283485A1880123F49153FA2007F17C0A35BA212FF90B8FCA30180CAFCA9127F7FA3
123FA27F121FEF01C06C7E17036C6C1680A26C6C15070001EE0F006D150E6C6C151E6D6C
5C6D6C5C6D6C5CD907F0EB03E0D903FC495A902700FF803FC7FC91383FFFFC020F13F002
01138032417CBF3A>101 D<ED0FF0ED7FFC4AB5FC913907F81F8091390FE00FC091381F
C03F91393F807FE0EC7F005C495A5C0103EC3FC0A24948EB0F0093C7FCA2495AB3A5B712
F0A426000FF0C8FCB3B3B0497EEB3FFE003FB6FCA42B657EE428>I<EB03C0EA07FFB5FC
A41201EA007FA2133FB3AAEE7FE0923803FFFC030F13FFDB3F0013C00378EB1FE04B6D7E
DAC1C06D7EDAC3808002C7C7120302CE81170114DC14D802F86E7E5CA35CA35CB3B3496C
4A7F496C4A7FB6D8F003B612C0A442647DE349>104 D<133C13FF487F487FA66C5B6C90
C7FC133C90C8FCB3A2EB03C0EA07FF127FA41201EA007FA2133FB3B3AC497E497EB612E0
A41B5F7DDE23>I<EB03C0EA07FFB5FCA41201EA007FA2133FB3AB0403B512F8A4040014
8094387FFC0018E06095C7FC177E5F17F04C5A4C5A4C5A4CC8FC163E5E5E4B5A4B5A4B5A
4B5A151F4B7E4B7E15FF02C17F9138C3CFF8ECC7879138CF07FC9138FE03FEECFC0102F8
7F4A6C7F4A137F4A80707E161F83707E160783707E160183707F177F84717E171F84717E
84A284496CEDFF80496C4A13E0B600F090B6FCA440647CE346>107
D<EB03C0EA07FFB5FCA41201EA007FA2133FB3B3B3B3AD497E497EB612F0A41C647DE323
>I<D903C0D9FFC0EC07FED807FF010301F891381FFFC0B5010F01FE027F13F0923D3F00
FF8001F807FC0378903B3FC003C001FEDAC1E090261FE00FC77E0001D9C3C090260FF01E
6E7ED8007F49902607F81C6E7E02C7C75CD93FCE6E6C486E7E02CC166002DC16E002D85E
02F8DA01FF6F7E4A5EA24A93C8FCA44A5DB3B3496C4A6C4B7E496C4A6D4A7EB6D8F007B6
D8803FB512FCA4663F7CBE6F>I<EDFF80020F13F8023F13FE9139FF007F80D903FCEB1F
E0D907F0EB07F0D90FC0EB01F8D93F80EB00FE49C8127F017E81496F7E48486F7E000383
49150700078348486F7EA2001F83491501A2003F83A348486F7EA400FF1880AC007F1800
A26D5DA2003F5FA36C6C4B5AA36C6C4B5A00075FA26C6C4B5A6C6C4B5AA26C6C4B5A017F
4BC7FC6D6C14FE6D6C495AD90FF0EB07F8D903FCEB1FE0D900FFEB7F806EB5C8FC020F13
F8020113C039417CBF42>111 D<D903C0EB7FC0D807FF903807FFFCB5011F13FFDB7F00
13C003F8EB1FF0DAC3E0EB07F80001D9C7806D7E26007FCFC76C7E02DE6E7ED93FFC6F7E
4A6F7E4A82181F4A82727E5C727EA2727EA3727EA41A8084AC4E1300A54E5AA2611807A2
4E5A6E5E181F6E4B5A6E5E187F6E4B5A02DE4A90C7FC02CF4A5ADAC780495ADAC3C0EB0F
F0DAC1F0EB3FE0913AC07E01FF806FB448C8FC030F13F80300138093CAFCB3A3497E497E
B612F0A4415B7DBE49>I<9039078003F8D807FFEB0FFFB5013F13C092387C0FE0913881
F01F9238E03FF00001EB838039007F8700148FEB3F8E029CEB1FE0EE0FC00298EB030002
B890C7FCA214B014F0A25CA55CB3B0497EEBFFF8B612FCA42C3F7CBE33>114
D<9139FFE00180010FEBFC03017FEBFF073A01FF001FCFD803F8EB03EFD807E0EB01FF48
487F4848147F48C8123F003E151F007E150F127CA200FC1507A316037EA27E7F6C7E6D91
C7FC13F8EA3FFE381FFFF06CEBFF806C14F86C14FF6C15C06C6C14F0011F80010714FED9
007F7F02031480DA003F13C01503030013E0167F00E0ED1FF0160F17F86C15071603A36C
1501A37EA26C16F016037E17E06D14076DEC0FC06D1580D8FDF0141FD8F8F8EC7F00013E
14FC3AF01FC00FF80107B512E0D8E001148027C0003FF8C7FC2D417DBF34>I<1438A714
78A414F8A31301A31303A21307130F131FA2137F13FF1203000F90B6FCB8FCA3260007F8
C8FCB3AE17E0AE6D6CEB01C0A316036D6C148016076D6C14006E6C5A91383FC01E91381F
F07C6EB45A020313E09138007F802B597FD733>I E
%EndDVIPSBitmapFont
end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop Black Black Black Black 823 2267 a Fq(The)43
b(Little)i(Bo)t(ok)d(of)h(Semaphores)1360 2632 y Fp(Allen)31
b(B.)i(Do)m(wney)p Black Black eop
%%Page: 2 2
2 1 bop Black 739 252 a Fo(2)p 739 286 2865 4 v Black
Black Black 1369 515 a Fn(The)39 b(Little)e(Bo)s(ok)h(of)g(Semaphores)
1922 615 y Fm(First)27 b(Edition)1494 865 y(Cop)n(yrigh)n(t)f(\(C\))i
(2001)e(Allen)i(B.)g(Do)n(wney)863 1197 y(This)39 b(b)r(o)r(ok)f(is)g
(an)g(Op)r(en)g(Source)g(T)-7 b(extb)r(o)r(ok)38 b(\(OST\).)h(P)n
(ermission)d(is)i(gran)n(ted)f(to)739 1297 y(repro)r(duce,)k(store)c
(or)h(transmit)h(the)g(text)g(of)g(this)g(b)r(o)r(ok)f(b)n(y)h(an)n(y)f
(means,)j(electrical,)739 1396 y(mec)n(hanical,)c(or)f(biological,)g
(in)h(accordance)d(with)j(the)f(terms)g(of)g(the)h(GNU)g(General)739
1496 y(Public)27 b(License)h(as)e(published)j(b)n(y)e(the)h(F)-7
b(ree)27 b(Soft)n(w)n(are)f(F)-7 b(oundation)28 b(\(v)n(ersion)e(2\).)
863 1596 y(This)k(b)r(o)r(ok)f(is)h(distributed)f(in)h(the)g(hop)r(e)g
(that)g(it)g(will)f(b)r(e)h(useful,)h(but)f(WITHOUT)739
1695 y(ANY)d(W)-9 b(ARRANTY;)27 b(without)g(ev)n(en)f(the)g(implied)h
(w)n(arran)n(t)n(y)c(of)j(MER)n(CHANT)-7 b(ABIL-)739
1795 y(ITY)36 b(or)e(FITNESS)i(F)n(OR)f(A)h(P)-7 b(AR)g(TICULAR)36
b(PURPOSE.)e(See)i(the)g(GNU)g(General)739 1895 y(Public)27
b(License)h(for)f(more)f(details.)863 1994 y(The)f(original)e(form)i
(of)f(this)h(b)r(o)r(ok)g(is)f(LaT)-7 b(eX)25 b(source)e(co)r(de.)36
b(Compiling)25 b(this)g(LaT)-7 b(eX)739 2094 y(source)39
b(has)h(the)h(e\013ect)g(of)g(generating)e(a)h(device-indep)r(enden)n
(t)g(represen)n(tation)f(of)i(a)739 2193 y(textb)r(o)r(ok,)21
b(whic)n(h)e(can)g(b)r(e)h(con)n(v)n(erted)e(to)i(other)f(formats)f
(and)i(prin)n(ted.)34 b(All)20 b(in)n(termediate)739
2293 y(represen)n(tations)34 b(\(including)i(D)n(VI)h(and)f(P)n
(ostscript\),)h(and)f(all)f(prin)n(ted)h(copies)g(of)g(the)739
2393 y(textb)r(o)r(ok)27 b(are)g(also)g(co)n(v)n(ered)e(b)n(y)j(the)g
(GNU)g(General)f(Public)g(License.)863 2492 y(The)40
b(LaT)-7 b(eX)38 b(source)g(for)g(this)i(b)r(o)r(ok,)h(and)e(more)f
(information)h(ab)r(out)g(the)g(Op)r(en)739 2592 y(Source)27
b(T)-7 b(extb)r(o)r(ok)27 b(pro)5 b(ject,)27 b(is)g(a)n(v)-5
b(ailable)27 b(from)p Black Black 957 2775 a Fl(http://rocky.wel)o(le)o
(sle)o(y.)o(ed)o(u/~)o(do)o(wne)o(y/)o(ost)739 2957 y
Fm(or)36 b(b)n(y)g(writing)g(to)h(Allen)g(B.)f(Do)n(wney)-7
b(,)39 b(Computer)d(Science)g(Departmen)n(t,)j(W)-7 b(ellesley)739
3057 y(College,)27 b(106)f(Cen)n(tral)g(St.,)j(W)-7 b(ellesley)g(,)27
b(MA)h(02481.)863 3157 y(The)e(GNU)g(General)f(Public)g(License)g(is)g
(a)n(v)-5 b(ailable)24 b(from)i(www.gn)n(u.org)d(or)i(b)n(y)g(writ-)739
3256 y(ing)g(to)f(the)i(F)-7 b(ree)24 b(Soft)n(w)n(are)g(F)-7
b(oundation,)25 b(Inc.,)h(59)e(T)-7 b(emple)25 b(Place)f(-)g(Suite)i
(330,)e(Boston,)739 3356 y(MA)k(02111-1307,)23 b(USA.)863
3455 y(This)g(b)r(o)r(ok)f(w)n(as)f(t)n(yp)r(eset)h(b)n(y)g(the)h
(author)e(using)h(LaT)-7 b(eX)22 b(and)g(dvips,)h(whic)n(h)g(are)e(b)r
(oth)739 3555 y(free,)27 b(op)r(en-source)f(programs.)p
Black Black eop
%%Page: 1 3
1 2 bop Black Black 291 1181 a Fk(Con)-6 b(ten)g(ts)291
1698 y Fo(1)76 b(In)m(tro)s(duction)2166 b(1)415 1799
y Fm(1.1)84 b(Sync)n(hronization)26 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)p Black 131 w(1)p Black 415 1900 a(1.2)84
b(Execution)27 b(mo)r(del)64 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
p Black 131 w(1)p Black 415 2001 a(1.3)84 b(Serialization)26
b(with)i(messages)71 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 131 w(3)p
Black 415 2102 a(1.4)84 b(Non-determinism)48 b(.)41 b(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)p Black 131 w(3)p Black 415 2203 a(1.5)84
b(Shared)27 b(v)-5 b(ariables)79 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)p Black 131 w(4)p Black 606 2304 a(1.5.1)94 b(Concurren)n(t)26
b(writes)77 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 131 w(4)p Black
606 2405 a(1.5.2)94 b(Concurren)n(t)26 b(up)r(dates)75
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)p Black 131 w(5)p Black 606 2506 a(1.5.3)94
b(Mutual)28 b(exclusion)f(with)h(messages)81 b(.)42 b(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 131 w(6)p
Black 291 2691 a Fo(2)76 b(Semaphores)2193 b(7)415 2792
y Fm(2.1)84 b(De\014nition)58 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)p Black 131 w(7)p Black 415 2893 a(2.2)84
b(Syn)n(tax)34 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)p Black 131 w(8)p Black 415 2994 a(2.3)84 b(Wh)n(y)28
b(semaphores?)80 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 131 w(9)p Black 291 3179 a Fo(3)76 b(Basic)32 b(sync)m
(hronization)h(patterns)1358 b(11)415 3281 y Fm(3.1)84
b(Signaling)f(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(11)p Black 415 3382 a(3.2)84 b(Rendezv)n(ous)53
b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(12)p Black 606 3483 a(3.2.1)94 b(Rendezv)n(ous)26
b(hin)n(t)68 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(13)p
Black 606 3584 a(3.2.2)94 b(Rendezv)n(ous)26 b(solution)55
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)p Black 90 w(15)p Black 606 3685 a(3.2.3)94
b(Deadlo)r(c)n(k)27 b(#1)65 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(15)p Black 415 3786 a(3.3)84 b(Mutex)51 b(.)42
b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(16)p Black 606 3887 a(3.3.1)94 b(Mutual)28
b(exclusion)f(hin)n(t)64 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(17)p
Black 606 3988 a(3.3.2)94 b(Mutual)28 b(exclusion)f(solution)51
b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)p Black 90 w(19)p Black 415 4089 a(3.4)84 b(Multiplex)66
b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(19)p Black 606 4190 a(3.4.1)94 b(Multiplex)28
b(solution)66 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(21)p
Black 415 4291 a(3.5)84 b(Barrier)26 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(21)p Black
606 4392 a(3.5.1)94 b(Barrier)25 b(hin)n(t)42 b(.)g(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)p Black 90 w(23)p Black 606 4493 a(3.5.2)94 b(Barrier)25
b(non-solution)61 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(25)p
Black 606 4594 a(3.5.3)94 b(Deadlo)r(c)n(k)27 b(#2)65
b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(27)p Black
606 4695 a(3.5.4)94 b(Barrier)25 b(solution)30 b(.)41
b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(29)p Black 606 4796
a(3.5.5)94 b(Deadlo)r(c)n(k)27 b(#3)65 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
p Black 90 w(31)p Black 415 4897 a(3.6)84 b(Reusable)27
b(barrier)75 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 90 w(31)p Black 606 4998 a(3.6.1)94 b(Reusable)27
b(barrier)f(hin)n(t)f(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 90 w(33)p
Black Black Black eop
%%Page: 2 4
2 3 bop Black 739 252 a Fo(ii)2271 b(CONTENTS)p 739 286
2865 4 v Black 1054 515 a Fm(3.6.2)94 b(Reusable)27 b(barrier)f
(non-solution)h(#1)36 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)p Black 90 w(35)p Black 1054 616 a(3.6.3)94
b(Reusable)27 b(barrier)f(problem)h(#1)60 b(.)41 b(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(37)p
Black 1054 716 a(3.6.4)94 b(Reusable)27 b(barrier)f(non-solution)h(#2)
36 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(39)p Black 1054 816 a(3.6.5)94 b(Reusable)27
b(barrier)f(hin)n(t)g(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(41)p
Black 1054 917 a(3.6.6)94 b(Reusable)27 b(barrier)f(solution)77
b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)p Black 90 w(43)p Black 1054 1017 a(3.6.7)94 b(Barrier)26
b(ob)5 b(jects)59 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black
90 w(44)p Black 1054 1118 a(3.6.8)94 b(Kingmak)n(er)74
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(44)p
Black 739 1301 a Fo(4)76 b(Classical)31 b(sync)m(hronization)i
(problems)1185 b(47)863 1402 y Fm(4.1)84 b(Pro)r(ducer-consumer)25
b(problem)37 b(.)k(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(47)p Black 1054
1502 a(4.1.1)94 b(Pro)r(ducer-consumer)25 b(hin)n(t)51
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)p Black 90 w(49)p Black 1054 1603 a(4.1.2)94
b(Pro)r(ducer-consumer)25 b(solution)38 b(.)k(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(51)p
Black 1054 1703 a(4.1.3)94 b(Deadlo)r(c)n(k)27 b(#4)65
b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(53)p Black
1054 1803 a(4.1.4)94 b(Pro)r(ducer-consumer)25 b(with)j(a)f(\014nite)h
(bu\013er)k(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(53)p Black 1054 1904 a(4.1.5)94 b(Finite)28
b(bu\013er)g(pro)r(ducer-consumer)d(hin)n(t)33 b(.)41
b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90
w(55)p Black 1054 2004 a(4.1.6)94 b(Finite)28 b(bu\013er)g(pro)r
(ducer-consumer)d(solution)85 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(57)p Black 863 2104 a(4.2)84 b(Readers)27
b(and)g(writers)75 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(57)p Black 1054 2205 a(4.2.1)94 b(Readers-writers)25
b(hin)n(t)58 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(59)p Black
1054 2305 a(4.2.2)94 b(Readers-writers)25 b(solution)45
b(.)c(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)p Black 90 w(61)p Black 1054 2406 a(4.2.3)94 b(Starv)-5
b(ation)31 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(63)p Black 1054 2506 a(4.2.4)94 b(No-starv)n(e)26
b(readers-writers)e(hin)n(t)33 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(65)p Black 1054
2606 a(4.2.5)94 b(No-starv)n(e)26 b(readers-writers)e(solution)84
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(67)p Black 1054 2707 a(4.2.6)94 b(W)-7 b(riter-priorit)n(y)
26 b(readers-writers)e(hin)n(t)39 b(.)j(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)p Black 90 w(69)p Black 1054 2807 a(4.2.7)94
b(W)-7 b(riter-priorit)n(y)26 b(readers-writers)e(solution)i(.)42
b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(71)p
Black 863 2907 a(4.3)84 b(Mutex)28 b(without)g(starv)-5
b(ation)61 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(72)p Black
1054 3008 a(4.3.1)94 b(No-starv)n(e)26 b(m)n(utex)h(hin)n(t)85
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)p Black 90 w(73)p Black 1054 3108 a(4.3.2)94
b(No-starv)n(e)26 b(m)n(utex)h(solution)72 b(.)42 b(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black
90 w(73)p Black 863 3209 a(4.4)84 b(Cigarette)27 b(smok)n(er's)f
(problem)63 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(74)p Black 1054
3309 a(4.4.1)94 b(Smok)n(er)26 b(problem)i(non-solution)51
b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(77)p Black 1054 3409 a(4.4.2)94 b(Smok)n(er)26
b(problem)i(hin)n(t)k(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(79)p
Black 1054 3510 a(4.4.3)94 b(Smok)n(er)26 b(problem)i(solution)83
b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)p Black 90 w(81)p Black 1054 3610 a(4.4.4)94 b(Generalized)27
b(Smok)n(er's)f(Problem)72 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)p Black 90 w(83)p Black 863 3710 a(4.5)84
b(Dining)28 b(philosophers)82 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(83)p Black 739 3894 a Fo(5)76 b(Not-so-classical)30
b(sync)m(hronization)j(problems)903 b(85)863 3995 y Fm(5.1)84
b(Building)28 b(H)1452 4007 y Fj(2)1489 3995 y Fm(O)45
b(.)d(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black
90 w(85)p Black 1054 4095 a(5.1.1)94 b(H)1382 4107 y
Fj(2)1420 4095 y Fm(O)27 b(hin)n(t)71 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)p Black 90 w(87)p Black 1054 4195 a(5.1.2)94
b(H)1382 4207 y Fj(2)1420 4195 y Fm(O)27 b(solution)58
b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(89)p Black
863 4296 a(5.2)84 b(Riv)n(er)27 b(crossing)33 b(.)42
b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90
w(90)p Black 863 4396 a(5.3)84 b(Riv)n(er)27 b(crossing)f(hin)n(t)56
b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(91)p
Black 863 4497 a(5.4)84 b(Riv)n(er)27 b(crossing)f(solution)43
b(.)f(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(93)p Black 863
4597 a(5.5)84 b(The)28 b(unisex)f(bathro)r(om)g(problem)22
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)p Black 90 w(94)p Black 863 4697 a(5.6)84
b(Unisex)28 b(bathro)r(om)f(hin)n(t)69 b(.)42 b(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p
Black 90 w(95)p Black 863 4798 a(5.7)84 b(Unisex)28 b(bathro)r(om)f
(solution)56 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 90 w(97)p
Black 863 4898 a(5.8)84 b(No-starv)n(e)26 b(unisex)h(bathro)r(om)g
(problem)75 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)p Black 90 w(99)p Black 863 4998 a(5.9)84 b(No-starv)n(e)26
b(unisex)h(bathro)r(om)g(solution)84 b(.)41 b(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)p Black 49 w(101)p
Black Black Black eop
%%Page: 3 5
3 4 bop Black 291 252 a Fo(CONTENTS)2245 b(iii)p 291
286 2865 4 v Black 606 515 a Fm(5.9.1)94 b(E\016cien)n(t)27
b(no-starv)n(e)f(unisex)h(bathro)r(om)g(problem)79 b(.)42
b(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(101)p Black 606
615 a(5.9.2)94 b(E\016cien)n(t)27 b(no-starv)n(e)f(unisex)h(bathro)r
(om)g(hin)n(t)101 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(103)p Black 606 715 a(5.9.3)94 b(E\016cien)n(t)27
b(unisex)h(bathro)r(om)e(solution)62 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(105)p Black 415 814
a(5.10)g(Bab)r(o)r(on)27 b(crossing)77 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)p Black 48 w(106)p Black 415 914 a(5.11)g(The)28
b(barb)r(ershop)e(problem)33 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(107)p Black 606 1013 a(5.11.1)52 b(Barb)r(ershop)26
b(hin)n(t)76 b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(109)p
Black 606 1113 a(5.11.2)52 b(Barb)r(ershop)26 b(solution)63
b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)p Black 48 w(111)p Black 606 1213 a(5.11.3)52
b(Hilzer's)27 b(Barb)r(ershop)78 b(.)42 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(111)p Black 606 1312 a(5.11.4)52 b(Hilzer's)27
b(barb)r(ershop)f(hin)n(t)49 b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(112)p
Black 606 1412 a(5.11.5)52 b(Hilzer's)27 b(barb)r(ershop)f(solution)37
b(.)k(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(112)p Black 606 1512 a(5.11.6)52 b(Hilzer's)27
b(barb)r(ershop)f(b)r(etter)i(hin)n(t)61 b(.)41 b(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(112)p
Black 606 1611 a(5.11.7)52 b(Hilzer's)27 b(barb)r(ershop)f(b)r(etter)i
(solution)48 b(.)41 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(112)p Black 415 1711 a(5.12)g(The)28 b(ro)r(om)e(part)n(y)h
(problem)i(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(113)p
Black 606 1810 a(5.12.1)52 b(Ro)r(om)27 b(part)n(y)g(hin)n(t)56
b(.)42 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(115)p Black 606
1910 a(5.12.2)52 b(Ro)r(om)27 b(part)n(y)g(solution)43
b(.)f(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)p Black 48 w(117)p Black 415 2010 a(5.13)g(The)28
b(San)n(ta)f(Claus)g(problem)66 b(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p
Black 48 w(118)p Black 606 2109 a(5.13.1)52 b(San)n(ta)27
b(problem)g(hin)n(t)j(.)41 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)p Black 48 w(121)p
Black 606 2209 a(5.13.2)52 b(San)n(ta)27 b(problem)g(solution)81
b(.)42 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)p Black 48 w(123)p Black Black Black eop
%%Page: 4 6
4 5 bop Black Black Black Black eop
%%Page: 1 7
1 6 bop Black Black 291 1142 a Fi(Chapter)64 b(1)291
1561 y Fk(In)-6 b(tro)6 b(duction)291 2046 y Fh(1.1)135
b(Sync)l(hronization)291 2235 y Fm(In)39 b(common)g(use,)j(\\sync)n
(hronization")36 b(means)j(making)g(t)n(w)n(o)f(things)i(happ)r(en)f
(at)h(the)291 2334 y(same)33 b(time.)57 b(In)34 b(computer)g(systems,)h
(sync)n(hronization)d(is)i(a)g(little)h(more)e(general|it)291
2434 y(refers)h(to)h(relationships)f(among)g(ev)n(en)n(ts:)51
b(an)n(y)35 b(n)n(um)n(b)r(er)g(of)g(ev)n(en)n(ts,)h(and)f(an)n(y)g
(kind)g(of)291 2533 y(relationship)26 b(\(b)r(efore,)i(during,)f
(after\).)415 2637 y(Computer)35 b(programmers)e(are)i(often)h
(concerned)f(with)h Fo(sync)m(hronization)42 b(con-)291
2736 y(strain)m(ts)p Fm(,)32 b(whic)n(h)f(are)f(requiremen)n(ts)f(p)r
(ertaining)i(to)g(the)g(order)f(of)h(ev)n(en)n(ts.)46
b(Examples)291 2836 y(include:)p Black 291 3034 a Fo(Serialization:)p
Black 40 w Fm(Ev)n(en)n(t)27 b(A)h(m)n(ust)f(happ)r(en)h(b)r(efore)f
(Ev)n(en)n(t)g(B.)p Black 291 3215 a Fo(Mutual)k(exclusion:)p
Black 40 w Fm(Ev)n(en)n(ts)c(A)h(and)f(B)h(m)n(ust)f(not)h(happ)r(en)g
(at)f(the)h(same)f(time.)415 3412 y(In)33 b(real)f(life)i(w)n(e)e
(often)i(c)n(hec)n(k)e(and)h(enforce)f(sync)n(hronization)f(constrain)n
(ts)h(using)g(a)291 3512 y(clo)r(c)n(k.)49 b(Ho)n(w)31
b(do)h(w)n(e)g(kno)n(w)f(if)h(A)h(happ)r(ened)f(b)r(efore)g(B?)g(If)g
(w)n(e)g(kno)n(w)f(what)h(time)g(b)r(oth)291 3611 y(ev)n(en)n(ts)26
b(o)r(ccurred,)h(w)n(e)g(can)g(just)i(compare)d(the)i(times.)415
3715 y(In)38 b(computer)f(systems,)i(w)n(e)e(often)h(need)f(to)g
(satisfy)g(sync)n(honization)f(constrain)n(ts)291 3814
y(without)h(the)h(b)r(ene\014t)g(of)f(a)g(clo)r(c)n(k,)h(either)f(b)r
(ecause)g(there)g(is)g(no)g(univ)n(ersal)f(clo)r(c)n(k,)j(or)291
3914 y(b)r(ecause)27 b(w)n(e)g(don't)h(kno)n(w)f(with)h(\014ne)f
(enough)g(resolution)g(when)h(ev)n(en)n(ts)f(o)r(ccur.)415
4017 y(That's)j(what)g(this)g(b)r(o)r(ok)g(is)g(ab)r(out:)41
b(soft)n(w)n(are)28 b(tec)n(hniques)i(for)g(enforcing)f(sync)n(hro-)291
4117 y(nization)e(constrain)n(ts.)291 4411 y Fh(1.2)135
b(Execution)46 b(mo)t(del)291 4600 y Fm(In)31 b(order)e(to)i
(understand)f(soft)n(w)n(are)f(sync)n(hronization,)h(y)n(ou)g(ha)n(v)n
(e)f(to)i(ha)n(v)n(e)f(a)g(mo)r(del)h(of)291 4700 y(ho)n(w)k(computer)h
(programs)e(run.)64 b(In)36 b(the)h(simplest)f(mo)r(del,)j(computers)d
(execute)g(one)291 4799 y(instruction)28 b(after)g(another)g(in)h
(sequence.)39 b(In)29 b(this)g(mo)r(del,)g(sync)n(hronization)e(is)h
(trivial;)291 4899 y(w)n(e)22 b(can)h(tell)h(the)f(order)f(of)h(ev)n
(en)n(ts)f(b)n(y)h(lo)r(oking)f(at)h(the)h(program.)33
b(If)24 b(Statemen)n(t)f(A)h(comes)291 4998 y(b)r(efore)j(Statemen)n(t)
h(B,)f(it)h(will)g(b)r(e)g(executed)g(\014rst.)p Black
Black eop
%%Page: 2 8
2 7 bop Black 739 252 a Fo(2)2290 b(In)m(tro)s(duction)p
739 286 2865 4 v Black 863 515 a Fm(There)36 b(are)f(t)n(w)n(o)g(w)n(a)
n(ys)f(things)i(get)g(more)f(complicated.)61 b(One)36
b(p)r(ossibilit)n(y)f(is)h(that)739 615 y(the)24 b(computer)g(is)g
(parallel,)g(meaning)g(that)g(it)h(has)e(m)n(ultiple)i(pro)r(cessors)d
(running)i(at)g(the)739 715 y(same)k(time.)42 b(In)29
b(that)h(case)e(it)h(is)g(not)g(easy)g(to)f(kno)n(w)h(if)g(a)g
(statemen)n(t)g(on)g(one)f(pro)r(cessor)739 814 y(is)f(executed)h(b)r
(efore)f(a)g(statemen)n(t)h(on)f(another.)863 914 y(Another)i(p)r
(ossibilit)n(y)f(is)h(that)g(a)f(single)g(pro)r(cessor)e(is)j(running)f
(m)n(ultiple)h(threads)f(of)739 1013 y(execution.)47
b(A)31 b(thread)f(is)h(a)g(sequence)f(of)h(instructions)g(that)g
(execute)g(sequen)n(tially)-7 b(.)46 b(If)739 1113 y(there)24
b(are)f(m)n(ultiple)i(threads,)f(then)h(the)f(pro)r(cessor)e(can)i(w)n
(ork)f(on)h(one)f(for)h(a)g(while,)h(then)739 1213 y(switc)n(h)i(to)h
(another,)f(and)g(so)g(on.)863 1312 y(In)j(general)e(the)i(programmer)e
(has)h(no)g(con)n(trol)f(o)n(v)n(er)g(when)i(eac)n(h)e(thread)i(runs;)g
(the)739 1412 y(op)r(erating)21 b(system)g(\(sp)r(eci\014cally)-7
b(,)23 b(the)f(sc)n(heduler\))f(mak)n(es)g(those)g(decisions.)34
b(As)22 b(a)f(result,)739 1512 y(again,)33 b(the)g(programmer)d(can't)j
(tell)g(when)g(statemen)n(ts)f(in)h(di\013eren)n(t)g(threads)f(will)h
(b)r(e)739 1611 y(executed.)863 1711 y(F)-7 b(or)29 b(purp)r(oses)g(of)
g(sync)n(hronization,)f(there)h(is)h(no)f(di\013erence)g(b)r(et)n(w)n
(een)h(the)f(parallel)739 1810 y(mo)r(del)c(and)g(the)g(m)n(ultithread)
g(mo)r(del.)37 b(The)25 b(issue)f(is)h(the)h(same|within)f(one)f(pro)r
(cessor)739 1910 y(\(or)37 b(one)g(thread\))g(w)n(e)g(kno)n(w)f(the)i
(order)e(of)h(execution,)j(but)e(b)r(et)n(w)n(een)f(pro)r(cessors)e
(\(or)739 2010 y(threads\))27 b(it)h(is)g(imp)r(ossible)f(to)h(tell.)
863 2109 y(A)j(real)f(w)n(orld)g(example)g(migh)n(t)g(mak)n(e)g(this)h
(clearer.)44 b(Imagine)30 b(that)h(y)n(ou)f(and)g(y)n(our)739
2209 y(friend)c(Bob)f(liv)n(e)g(in)g(di\013eren)n(t)h(cities,)g(and)f
(one)g(da)n(y)-7 b(,)25 b(around)g(dinner)g(time,)i(y)n(ou)d(start)h
(to)739 2309 y(w)n(onder)h(who)i(ate)f(lunc)n(h)h(\014rst)f(that)h(da)n
(y)-7 b(,)27 b(y)n(ou)g(or)f(Bob.)37 b(Ho)n(w)27 b(w)n(ould)g(y)n(ou)g
(\014nd)h(out?)863 2408 y(Ob)n(viously)g(y)n(ou)g(could)h(call)g(him)g
(and)g(ask)f(what)h(time)h(he)f(ate)g(lunc)n(h.)41 b(But)30
b(what)f(if)739 2508 y(y)n(ou)d(started)h(lunc)n(h)g(at)g(11:59)e(b)n
(y)i(y)n(our)f(clo)r(c)n(k)g(and)h(Bob)g(started)f(lunc)n(h)h(at)g
(12:01)e(b)n(y)i(his)739 2607 y(clo)r(c)n(k?)41 b(Can)29
b(y)n(ou)f(b)r(e)i(sure)e(who)h(started)g(\014rst?)41
b(Unless)29 b(y)n(ou)g(are)f(b)r(oth)i(v)n(ery)e(careful)g(to)739
2707 y(k)n(eep)f(accurate)f(clo)r(c)n(ks,)h(y)n(ou)g(can't.)863
2807 y(Computer)f(systems)f(face)h(the)g(same)f(problem)h(b)r(ecause,)f
(ev)n(en)h(though)f(their)h(clo)r(c)n(ks)739 2906 y(are)37
b(usually)h(accurate,)i(there)e(is)g(alw)n(a)n(ys)e(a)i(limit)h(to)f
(their)g(precision.)68 b(In)38 b(addition,)739 3006 y(most)24
b(of)h(the)g(time)g(the)f(computer)h(do)r(es)f(not)g(k)n(eep)g(trac)n
(k)g(of)g(what)g(time)h(things)g(happ)r(en.)739 3106
y(There)g(are)f(just)j(to)r(o)e(man)n(y)g(things)g(happ)r(ening,)h(to)r
(o)g(fast,)g(to)f(record)f(the)i(exact)f(time)h(of)739
3205 y(ev)n(erything.)863 3305 y(Puzzle:)39 b(Assuming)28
b(that)h(Bob)f(is)h(willing)f(to)h(follo)n(w)f(simple)g(instructions,)h
(is)f(there)739 3404 y(an)n(y)f(w)n(a)n(y)f(y)n(ou)h(can)g
Fg(guar)l(ante)l(e)h Fm(that)f(tomorro)n(w)f(y)n(ou)h(will)g(eat)h
(lunc)n(h)f(b)r(efore)h(Bob?)p Black Black eop
%%Page: 3 9
3 8 bop Black 291 252 a Fo(1.3)30 b(Serialization)i(with)f(messages)
1521 b(3)p 291 286 2865 4 v Black 291 515 a Fh(1.3)135
b(Serialization)47 b(with)e(messages)291 697 y Fm(One)35
b(solution)g(is)g(to)h(instruct)f(Bob)g(not)h(to)f(eat)g(lunc)n(h)h(un)
n(til)g(y)n(ou)f(call.)60 b(Then,)38 b(mak)n(e)291 797
y(sure)30 b(y)n(ou)f(don't)i(call)f(un)n(til)h(after)g(lunc)n(h.)46
b(This)30 b(approac)n(h)f(ma)n(y)h(seem)g(trivial,)h(but)h(the)291
896 y(underlying)h(idea,)j(message)d(passing,)i(is)f(a)f(real)h
(solution)f(for)h(man)n(y)g(sync)n(hronization)291 996
y(problems.)415 1096 y(A)n(t)28 b(the)g(risk)f(of)g(b)r(elab)r(oring)g
(the)h(ob)n(vious,)e(consider)h(this)h(timeline.)415
1195 y(Y)-7 b(ou)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1282 1257 29 v 0.9 TeXcolorgray Black 387 1282 4
29 v 387 1257 29 4 v 415 1257 208 4 v 623 1257 993 4
v 1616 1257 29 4 v 1642 1282 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 415 1381 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 1381 29 100
v 0.9 TeXcolorgray Black 387 1381 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 1381 29 100 v 0.9 TeXcolorgray
Black 1640 1381 4 100 v 457 1351 a(a1)82 b Fl(Eat)42
b(breakfast)p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 1481
1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 387 1481 29 100 v 0.9 TeXcolorgray Black
387 1481 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
1481 29 100 v 0.9 TeXcolorgray Black 1640 1481 4 100
v 457 1451 a Fm(a2)82 b Fl(Work)p 0.9 TeXcolorgray 0.9
TeXcolorgray 415 1580 1200 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 387 1580 29 100 v 0.9
TeXcolorgray Black 387 1580 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 1580 29 100 v 0.9 TeXcolorgray
Black 1640 1580 4 100 v 457 1551 a Fm(a3)g Fl(Eat)42
b(lunch)p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 1680
1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 387 1680 29 100 v 0.9 TeXcolorgray Black
387 1680 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
1680 29 100 v 0.9 TeXcolorgray Black 1640 1680 4 100
v 457 1650 a Fm(a4)82 b Fl(Call)42 b(Bob)p 0.9 TeXcolorgray
0.9 TeXcolorgray 387 1708 1257 29 v 0.9 TeXcolorgray
Black 387 1708 4 29 v 388 1708 29 4 v 415 1708 208 4
v 623 1708 993 4 v 1616 1708 29 4 v 1642 1708 4 29 v
1955 1195 a Fm(Bob)p 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1282 1257 29 v 0.9 TeXcolorgray Black 1927 1282
4 29 v 1927 1257 29 4 v 1955 1257 208 4 v 2163 1257 993
4 v 3156 1257 29 4 v 3182 1282 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 1381 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1381 29
100 v 0.9 TeXcolorgray Black 1927 1381 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1381 29 100 v 0.9 TeXcolorgray
Black 3180 1381 4 100 v 1992 1351 a(b1)82 b Fl(Eat)43
b(breakfast)p 0.9 TeXcolorgray 0.9 TeXcolorgray 1955
1481 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 1481 29 100 v 0.9 TeXcolorgray
Black 1927 1481 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 1481 29 100 v 0.9 TeXcolorgray Black 3180 1481 4
100 v 1992 1451 a Fm(b2)82 b Fl(Get)43 b(a)g(phone)e(call)p
0.9 TeXcolorgray 0.9 TeXcolorgray 1955 1580 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1580 29 100 v 0.9 TeXcolorgray Black 1927 1580 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1580 29
100 v 0.9 TeXcolorgray Black 3180 1580 4 100 v 1992 1551
a Fm(b3)82 b Fl(Eat)43 b(lunch)p 0.9 TeXcolorgray 0.9
TeXcolorgray 1927 1609 1257 29 v 0.9 TeXcolorgray Black
1927 1609 4 29 v 1928 1609 29 4 v 1955 1609 208 4 v 2163
1609 993 4 v 3156 1609 29 4 v 3182 1609 4 29 v 415 1824
a Fm(The)24 b(\014rst)f(column)h(is)f(a)g(list)h(of)f(actions)g(y)n(ou)
g(p)r(erform;)h(in)g(other)f(w)n(ords,)g(y)n(our)f(thread)291
1924 y(of)h(execution.)35 b(The)23 b(second)f(column)h(is)g(Bob's)f
(thread)h(of)g(execution.)35 b(Within)24 b(a)e(thread,)291
2023 y(w)n(e)g(can)h(alw)n(a)n(ys)e(tell)j(what)f(order)e(things)j
(happ)r(en.)35 b(W)-7 b(e)24 b(can)e(denote)h(the)h(order)e(of)h(ev)n
(en)n(ts)1303 2174 y Ff(a)p Fm(1)f Ff(<)h(a)p Fm(2)f
Ff(<)h(a)p Fm(3)f Ff(<)h(a)p Fm(4)p Black 1007 w(\(1.1\))p
Black 1524 2299 a Ff(b)p Fm(1)f Ff(<)h(b)p Fm(2)f Ff(<)g(b)p
Fm(3)p Black 1007 w(\(1.2\))p Black 291 2450 a(where)27
b(the)h(relation)e Ff(a)p Fm(1)d Ff(<)f(a)p Fm(2)27 b(means)h(that)f
(a1)g(happ)r(ened)h(b)r(efore)f(a2.)415 2549 y(In)c(general,)f(though,)
i(there)e(is)g(no)h(w)n(a)n(y)e(to)h(compare)g(ev)n(en)n(ts)g(from)g
(di\013eren)n(t)h(threads;)291 2649 y(for)k(example,)g(w)n(e)g(ha)n(v)n
(e)g(no)g(idea)g(who)g(ate)h(breakfast)e(\014rst)i(\(is)f
Ff(a)p Fm(1)c Ff(<)f(b)p Fm(1?\).)415 2749 y(But)34 b(with)f(message)f
(passing)h(\(the)g(phone)h(call\))f(w)n(e)g Fg(c)l(an)g
Fm(tell)h(who)f(ate)g(lunc)n(h)g(\014rst)291 2848 y(\()p
Ff(a)p Fm(3)25 b Ff(<)g(b)p Fm(3\).)42 b(W)-7 b(e)29
b(kno)n(w)g(that)g(Bob)g(can't)g(get)g(a)g(phone)g(call)g(un)n(til)h(y)
n(ou)e(call,)i(so)e Ff(b)p Fm(2)d Ff(>)g(a)p Fm(4)291
2948 y(\(assume)i(that)h(Bob)f(has)g(no)g(other)g(friends\).)37
b(Com)n(bining)27 b(all)h(the)g(relations,)e(w)n(e)h(get)1311
3099 y Ff(b)p Fm(3)22 b Ff(>)h(b)p Fm(2)f Ff(>)h(a)p
Fm(4)f Ff(>)h(a)p Fm(3)p Black 1015 w(\(1.3\))p Black
291 3250 a(whic)n(h)k(pro)n(v)n(es)f(that)i(y)n(ou)e(had)i(lunc)n(h)g
(b)r(efore)f(Bob.)415 3349 y(In)21 b(this)g(case,)g(w)n(e)f(w)n(ould)g
(sa)n(y)f(that)i(y)n(ou)f(and)g(Bob)g(ate)g(lunc)n(h)h
Fo(sequen)m(tially)p Fm(,)g(b)r(ecause)291 3449 y(w)n(e)27
b(kno)n(w)g(the)h(order)e(of)i(ev)n(en)n(ts,)f(and)g(y)n(ou)g(ate)g
(breakfast)g Fo(concurren)m(tly)p Fm(,)i(b)r(ecause)e(w)n(e)291
3548 y(don't.)415 3648 y(When)19 b(w)n(e)f(talk)g(ab)r(out)h(concurren)
n(t)e(ev)n(en)n(ts,)i(it)g(is)g(tempting)g(to)f(sa)n(y)f(that)i(they)g
(happ)r(en)291 3748 y(at)25 b(the)h(same)f(time,)h(or)f(sim)n
(ultaneously)-7 b(.)35 b(As)25 b(a)h(shorthand,)f(that's)g(\014ne,)h
(as)f(long)g(as)g(y)n(ou)291 3847 y(remem)n(b)r(er)h(the)i(strict)g
(de\014nition:)p Black Black 498 3998 a(Tw)n(o)18 b(ev)n(en)n(ts)f(are)
h(concurren)n(t)f(if)i(w)n(e)f(cannot)g(tell)h(b)n(y)f(lo)r(oking)f(at)
i(the)f(program)498 4098 y(whic)n(h)28 b(will)f(happ)r(en)h(\014rst.)
415 4249 y(Sometimes)34 b(w)n(e)f(can)g(tell,)j(after)d(the)h(program)e
(runs,)j(whic)n(h)e(happ)r(ened)h(\014rst,)h(but)291
4348 y(often)30 b(not,)i(and)e(ev)n(en)g(if)h(w)n(e)f(can,)h(there)f
(is)g(no)g(guaran)n(tee)f(that)i(w)n(e)f(will)g(get)h(the)f(same)291
4448 y(result)d(the)h(next)g(time.)291 4717 y Fh(1.4)135
b(Non-determinism)291 4899 y Fm(Concurren)n(t)23 b(programs)g(are)h
(often)i Fo(non-deterministic)p Fm(,)c(whic)n(h)j(means)g(it)g(is)g
(not)g(p)r(os-)291 4998 y(sible)36 b(to)g(tell,)j(b)n(y)d(lo)r(oking)g
(at)g(the)h(program,)f(what)h(will)f(happ)r(en)h(when)f(it)h(executes.)
p Black Black eop
%%Page: 4 10
4 9 bop Black 739 252 a Fo(4)2290 b(In)m(tro)s(duction)p
739 286 2865 4 v Black 739 515 a Fm(Here)27 b(is)h(a)f(v)n(ery)f
(simple)i(example)f(of)h(a)f(non-deterministic)g(program:)863
619 y(Thread)g(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
835 705 1257 29 v 0.9 TeXcolorgray Black 835 705 4 29
v 835 680 29 4 v 863 680 208 4 v 1071 680 993 4 v 2064
680 29 4 v 2090 705 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
863 805 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 835 805 29 100 v 0.9 TeXcolorgray Black
835 805 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 2063
805 29 100 v 0.9 TeXcolorgray Black 2088 805 4 100 v
905 775 a(a1)82 b Fl(print)42 b(")o(yes)o(")p 0.9 TeXcolorgray
0.9 TeXcolorgray 835 833 1257 29 v 0.9 TeXcolorgray Black
835 833 4 29 v 836 833 29 4 v 863 833 208 4 v 1071 833
993 4 v 2064 833 29 4 v 2090 833 4 29 v 2403 619 a Fm(Thread)27
b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray 2375 705 1257
29 v 0.9 TeXcolorgray Black 2375 705 4 29 v 2375 680
29 4 v 2403 680 208 4 v 2611 680 993 4 v 3604 680 29
4 v 3630 705 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
2403 805 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 805 29 100 v 0.9 TeXcolorgray Black
2375 805 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
805 29 100 v 0.9 TeXcolorgray Black 3628 805 4 100 v
2440 775 a(b1)83 b Fl(print)41 b("no)o(")p 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 833 1257 29 v 0.9 TeXcolorgray
Black 2375 833 4 29 v 2376 833 29 4 v 2403 833 208 4
v 2611 833 993 4 v 3604 833 29 4 v 3630 833 4 29 v 863
953 a Fm(Because)33 b(the)g(t)n(w)n(o)g(threads)f(run)i(concurren)n
(tly)-7 b(,)33 b(the)h(order)e(of)h(execution)g(dep)r(ends)739
1052 y(on)e(the)g(sc)n(heduler.)47 b(During)31 b(an)n(y)f(giv)n(en)h
(run)g(of)g(this)g(program,)f(the)i(output)g(migh)n(t)f(b)r(e)739
1152 y(\\y)n(es)26 b(no")h(or)g(\\no)g(y)n(es".)863 1256
y(Non-determinism)g(is)f(one)g(of)h(the)g(things)f(that)h(mak)n(es)e
(concurren)n(t)h(programs)e(hard)739 1355 y(to)h(debug.)37
b(A)25 b(program)f(migh)n(t)i(w)n(ork)e(correctly)g(1000)g(times)i(in)g
(a)f(ro)n(w,)g(and)g(then)h(crash)739 1455 y(on)h(the)h(1001st)e(run,)h
(dep)r(ending)h(on)g(the)g(particular)e(decisions)h(of)g(the)h(sc)n
(heduler.)863 1558 y(These)g(kinds)g(of)h(bugs)e(are)h(almost)f(imp)r
(ossible)h(to)g(\014nd)h(b)n(y)f(testing;)g(they)h(can)f(only)739
1658 y(b)r(e)g(a)n(v)n(oided)e(b)n(y)h(careful)g(programming.)739
1954 y Fh(1.5)135 b(Shared)45 b(v)-7 b(ariables)739 2143
y Fm(Most)28 b(of)g(the)g(time,)h(most)f(v)-5 b(ariables)27
b(in)i(most)f(threads)f(are)g Fo(lo)s(cal)p Fm(,)h(meaning)g(that)g
(they)739 2242 y(b)r(elong)35 b(to)g(a)g(single)g(thread)g(and)h(no)f
(other)g(threads)f(can)h(access)g(them.)61 b(As)35 b(long)g(as)739
2342 y(that's)j(true,)k(there)c(tend)h(to)f(b)r(e)h(few)g(sync)n
(hronization)d(problems,)41 b(b)r(ecause)d(threads)739
2442 y(just)28 b(don't)g(in)n(teract.)863 2545 y(But)38
b(usually)f(some)g(v)-5 b(ariables)36 b(are)g Fo(shared)i
Fm(among)e(t)n(w)n(o)g(or)h(more)f(threads;)42 b(this)739
2645 y(is)d(one)f(of)h(the)g(w)n(a)n(ys)f(threads)g(in)n(teract)g(with)
h(eac)n(h)f(other.)70 b(F)-7 b(or)39 b(example,)i(one)d(w)n(a)n(y)739
2744 y(to)29 b(comm)n(unicate)g(information)g(b)r(et)n(w)n(een)h
(threads)e(is)i(for)f(one)g(thread)g(to)h(read)e(a)h(v)-5
b(alue)739 2844 y(written)28 b(b)n(y)f(another)g(thread.)863
2948 y(If)38 b(the)g(threads)f(are)f(unsync)n(hronized,)j(then)f(w)n(e)
f(cannot)g(tell)h(b)n(y)f(lo)r(oking)g(at)g(the)739 3047
y(program)22 b(whether)j(the)g(reader)e(will)h(see)g(the)h(old)g(v)-5
b(alue)24 b(or)f(the)i(new)g(v)-5 b(alue.)36 b(Th)n(us)24
b(man)n(y)739 3147 y(applications)e(enforce)f(the)i(con)n(train)n(t)f
(that)h(the)g(reader)e(should)h(not)h(read)f(un)n(til)h(after)f(the)739
3246 y(writer)27 b(has)g(written.)37 b(This)28 b(is)f(exactly)g(the)h
(serialization)e(problem)h(in)h(Section)f(1.3.)863 3350
y(Other)32 b(w)n(a)n(ys)e(that)i(threads)f(in)n(teract)g(are)f
(concurren)n(t)h(writes)g(\(t)n(w)n(o)g(or)g(more)g(writ-)739
3450 y(ers\))h(and)f(concurren)n(t)g(up)r(dates)i(\(t)n(w)n(o)e(or)g
(more)h(threads)f(p)r(erforming)g(a)h(read)f(follo)n(w)n(ed)739
3549 y(b)n(y)37 b(a)g(write\).)67 b(The)38 b(next)f(t)n(w)n(o)g
(sections)g(deal)g(with)h(these)g(in)n(teractions.)65
b(The)38 b(other)739 3649 y(p)r(ossible)29 b(use)g(of)g(a)f(shared)g(v)
-5 b(ariable,)29 b(concurren)n(t)f(reads,)g(do)r(es)h(not)g(generally)e
(create)i(a)739 3749 y(sync)n(hronization)d(problem.)739
4002 y Fe(1.5.1)112 b(Concurren)m(t)37 b(writes)739 4162
y Fm(In)28 b(the)g(follo)n(wing)e(example,)h Fl(x)h Fm(is)f(a)g(shared)
g(v)-5 b(ariable)27 b(accessed)f(b)n(y)h(t)n(w)n(o)g(writers.)863
4266 y(Thread)g(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
835 4352 1257 29 v 0.9 TeXcolorgray Black 835 4352 4
29 v 835 4328 29 4 v 863 4328 208 4 v 1071 4328 993 4
v 2064 4328 29 4 v 2090 4352 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 863 4452 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 835 4452 29 100
v 0.9 TeXcolorgray Black 835 4452 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 2063 4452 29 100 v 0.9 TeXcolorgray
Black 2088 4452 4 100 v 905 4422 a(a1)82 b Fl(x)43 b(=)g(5)p
0.9 TeXcolorgray 0.9 TeXcolorgray 863 4552 1200 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
835 4552 29 100 v 0.9 TeXcolorgray Black 835 4552 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 2063 4552 29 100
v 0.9 TeXcolorgray Black 2088 4552 4 100 v 905 4522 a
Fm(a2)82 b Fl(print)42 b(x)p 0.9 TeXcolorgray 0.9 TeXcolorgray
835 4580 1257 29 v 0.9 TeXcolorgray Black 835 4580 4
29 v 836 4580 29 4 v 863 4580 208 4 v 1071 4580 993 4
v 2064 4580 29 4 v 2090 4580 4 29 v 2403 4266 a Fm(Thread)27
b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray 2375 4352 1257
29 v 0.9 TeXcolorgray Black 2375 4352 4 29 v 2375 4328
29 4 v 2403 4328 208 4 v 2611 4328 993 4 v 3604 4328
29 4 v 3630 4352 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
2403 4452 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 4452 29 100 v 0.9 TeXcolorgray
Black 2375 4452 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3603 4452 29 100 v 0.9 TeXcolorgray Black 3628 4452 4
100 v 2440 4422 a(b1)83 b Fl(x)43 b(=)g(7)p 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 4480 1257 29 v 0.9 TeXcolorgray
Black 2375 4480 4 29 v 2376 4480 29 4 v 2403 4480 208
4 v 2611 4480 993 4 v 3604 4480 29 4 v 3630 4480 4 29
v 863 4700 a Fm(What)33 b(v)-5 b(alue)32 b(of)g Fl(x)g
Fm(gets)f(prin)n(ted?)51 b(What)33 b(is)f(the)g(\014nal)g(v)-5
b(alue)32 b(of)g Fl(x)g Fm(when)g(all)g(these)739 4799
y(statemen)n(ts)25 b(ha)n(v)n(e)e(executed?)36 b(It)26
b(dep)r(ends)f(on)g(the)g(order)e(in)i(whic)n(h)g(the)h(statemen)n(ts)e
(are)739 4899 y(executed,)33 b(called)f(the)g Fo(execution)37
b(path)p Fm(.)51 b(One)32 b(p)r(ossible)f(path)i(is)f
Ff(a)p Fm(1)d Ff(<)i(a)p Fm(2)e Ff(<)i(b)p Fm(1,)h(in)739
4998 y(whic)n(h)27 b(case)g(the)h(output)g(of)g(the)g(program)d(is)j
Fl(5)p Fm(,)f(but)h(the)g(\014nal)g(v)-5 b(alue)27 b(is)h
Fl(7)p Fm(.)p Black Black eop
%%Page: 5 11
5 10 bop Black 291 252 a Fo(1.5)30 b(Shared)j(v)-5 b(ariables)1977
b(5)p 291 286 2865 4 v Black 415 515 a Fm(Puzzle:)36
b(What)28 b(path)g(yields)f(output)i Fl(5)e Fm(and)g(\014nal)h(v)-5
b(alue)27 b Fl(5)p Fm(?)415 619 y(Puzzle:)36 b(What)28
b(path)g(yields)f(output)i Fl(7)e Fm(and)g(\014nal)h(v)-5
b(alue)27 b Fl(7)p Fm(?)415 722 y(Puzzle:)53 b(Is)35
b(there)g(a)h(path)f(that)h(yields)g(output)g Fl(7)f
Fm(and)h(\014nal)f(v)-5 b(alue)36 b Fl(5)p Fm(?)60 b(Can)36
b(y)n(ou)291 822 y(pro)n(v)n(e)26 b(it?)415 925 y(Answ)n(ering)g
(questions)g(lik)n(e)h(these)g(is)g(an)g(imp)r(ortan)n(t)f(part)h(of)g
(concurren)n(t)e(program-)291 1025 y(ming:)35 b(What)24
b(paths)g(are)f(p)r(ossible)g(and)h(what)g(are)f(the)i(p)r(ossible)e
(e\013ects?)36 b(Can)24 b(w)n(e)g(pro)n(v)n(e)291 1124
y(that)39 b(a)g(giv)n(en)g(\(desirable\))g(e\013ect)h(is)f(necessary)f
(or)g(that)i(an)f(\(undesirable\))g(e\013ect)h(is)291
1224 y(imp)r(ossible?)291 1477 y Fe(1.5.2)112 b(Concurren)m(t)37
b(up)s(dates)291 1637 y Fm(An)31 b(up)r(date)g(is)f(an)h(op)r(eration)e
(that)i(reads)f(the)h(v)-5 b(alue)31 b(of)f(a)h(v)-5
b(ariable,)30 b(computes)h(a)f(new)291 1737 y(v)-5 b(alue)23
b(based)h(on)g(the)g(old)g(v)-5 b(alue,)24 b(and)g(writes)g(the)g(new)g
(v)-5 b(alue.)35 b(The)24 b(most)g(common)g(kind)291
1836 y(of)f(up)r(date)h(is)f(an)h(incremen)n(t,)g(in)g(whic)n(h)f(the)h
(new)g(v)-5 b(alue)23 b(is)g(the)h(old)g(v)-5 b(alue)23
b(plus)h(one.)35 b(The)291 1936 y(follo)n(wing)27 b(example)i(sho)n(ws)
f(a)g(shared)g(v)-5 b(ariable,)28 b Fl(count)p Fm(,)g(b)r(eing)h(up)r
(dated)g(concurren)n(tly)291 2035 y(b)n(y)e(t)n(w)n(o)g(threads.)415
2139 y(Thread)g(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 2225 1257 29 v 0.9 TeXcolorgray Black 387 2225 4
29 v 387 2200 29 4 v 415 2200 208 4 v 623 2200 993 4
v 1616 2200 29 4 v 1642 2225 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 415 2325 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 2325 29 100
v 0.9 TeXcolorgray Black 387 2325 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 2325 29 100 v 0.9 TeXcolorgray
Black 1640 2325 4 100 v 457 2295 a(a1)82 b Fl(count)41
b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 2353 1257 29 v 0.9 TeXcolorgray Black 387 2353 4
29 v 388 2353 29 4 v 415 2353 208 4 v 623 2353 993 4
v 1616 2353 29 4 v 1642 2353 4 29 v 1955 2139 a Fm(Thread)27
b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 2225 1257
29 v 0.9 TeXcolorgray Black 1927 2225 4 29 v 1927 2200
29 4 v 1955 2200 208 4 v 2163 2200 993 4 v 3156 2200
29 4 v 3182 2225 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 2325 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 2325 29 100 v 0.9 TeXcolorgray
Black 1927 2325 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 2325 29 100 v 0.9 TeXcolorgray Black 3180 2325 4
100 v 1992 2295 a(b1)82 b Fl(count)42 b(=)h(count)f(+)h(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 1927 2353 1257 29 v
0.9 TeXcolorgray Black 1927 2353 4 29 v 1928 2353 29
4 v 1955 2353 208 4 v 2163 2353 993 4 v 3156 2353 29
4 v 3182 2353 4 29 v 415 2473 a Fm(A)n(t)22 b(\014rst)f(glance,)g(it)h
(is)f(not)g(ob)n(vious)f(that)h(there)g(is)h(a)e(sync)n(hronization)g
(problem)g(here.)291 2572 y(There)27 b(are)f(only)h(t)n(w)n(o)g
(execution)h(paths,)f(and)h(they)f(yield)h(the)g(same)f(result.)415
2676 y(The)j(problem)f(is)h(that)g(these)g(op)r(erations)f(are)g
(translated)g(in)n(to)g(mac)n(hine)h(language)291 2775
y(b)r(efore)g(execution,)i(and)f(in)g(mac)n(hine)f(language)g(the)h(up)
r(date)g(tak)n(es)f(t)n(w)n(o)h(steps,)g(a)g(read)291
2875 y(and)25 b(a)h(write.)36 b(The)26 b(problem)f(is)h(more)f(ob)n
(vious)f(if)j(w)n(e)e(rewrite)g(the)h(co)r(de)g(with)g(a)g(temp)r(o-)
291 2975 y(rary)g(v)-5 b(ariable,)26 b Fl(temp)p Fm(.)415
3078 y(Thread)h(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 3164 1257 29 v 0.9 TeXcolorgray Black 387 3164 4
29 v 387 3139 29 4 v 415 3139 208 4 v 623 3139 993 4
v 1616 3139 29 4 v 1642 3164 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 415 3264 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 3264 29 100
v 0.9 TeXcolorgray Black 387 3264 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 3264 29 100 v 0.9 TeXcolorgray
Black 1640 3264 4 100 v 457 3234 a(a1)82 b Fl(temp)42
b(=)h(count)p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 3364
1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 387 3364 29 100 v 0.9 TeXcolorgray Black
387 3364 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
3364 29 100 v 0.9 TeXcolorgray Black 1640 3364 4 100
v 457 3334 a Fm(a2)82 b Fl(count)41 b(=)i(temp)f(+)h(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 387 3392 1257 29 v
0.9 TeXcolorgray Black 387 3392 4 29 v 388 3392 29 4
v 415 3392 208 4 v 623 3392 993 4 v 1616 3392 29 4 v
1642 3392 4 29 v 1955 3078 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 3164 1257 29 v 0.9 TeXcolorgray
Black 1927 3164 4 29 v 1927 3139 29 4 v 1955 3139 208
4 v 2163 3139 993 4 v 3156 3139 29 4 v 3182 3164 4 29
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1955 3264 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 3264 29 100 v 0.9 TeXcolorgray Black 1927 3264 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3264 29
100 v 0.9 TeXcolorgray Black 3180 3264 4 100 v 1992 3234
a(b1)82 b Fl(temp)42 b(=)h(count)p 0.9 TeXcolorgray 0.9
TeXcolorgray 1955 3364 1200 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 1927 3364 29 100 v
0.9 TeXcolorgray Black 1927 3364 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3364 29 100 v 0.9 TeXcolorgray
Black 3180 3364 4 100 v 1992 3334 a Fm(b2)82 b Fl(count)42
b(=)h(temp)f(+)h(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 3392 1257 29 v 0.9 TeXcolorgray Black 1927 3392
4 29 v 1928 3392 29 4 v 1955 3392 208 4 v 2163 3392 993
4 v 3156 3392 29 4 v 3182 3392 4 29 v 415 3516 a Fm(No)n(w)28
b(consider)f(the)h(follo)n(wing)f(execution)h(path)g(\(assume)g(that)g
(the)h(initial)f(v)-5 b(alue)28 b(of)291 3616 y Fl(x)f
Fm(is)g Fl(0)p Fm(\):)1394 3830 y Ff(a)p Fm(1)c Ff(<)f(b)p
Fm(1)g Ff(<)h(b)p Fm(2)f Ff(<)h(a)p Fm(2)p Black 932
w(\(1.4\))p Black 415 3995 a(What)35 b(is)g(the)g(\014nal)g(v)-5
b(alue)35 b(of)g Fl(x)p Fm(?)59 b(Because)33 b(b)r(oth)j(threads)e
(read)g(the)h(same)g(initial)291 4094 y(v)-5 b(alue,)26
b(they)i(write)e(the)h(same)g(v)-5 b(alue.)36 b(The)27
b(v)-5 b(ariable)26 b(is)g(only)h(incremen)n(ted)f(once,)h(whic)n(h)291
4194 y(is)g(probably)g(not)g(what)h(w)n(e)f(had)g(in)h(mind.)415
4297 y(This)e(kind)f(of)h(problem)f(is)g(subtle)h(b)r(ecause)f(it)h(is)
f(not)h(alw)n(a)n(ys)d(p)r(ossible)i(to)h(tell,)g(lo)r(ok-)291
4397 y(ing)c(at)h(a)g(high-lev)n(el)f(program,)g(whic)n(h)h(op)r
(erations)f(are)g(p)r(erformed)g(in)i(a)e(single)h(step)g(and)291
4497 y(whic)n(h)35 b(can)f(b)r(e)i(in)n(terrupted.)59
b(In)35 b(fact,)i(some)e(computers)f(pro)n(vide)g(an)h(incremen)n(t)g
(in-)291 4596 y(struction)23 b(that)h(is)g(implemen)n(ted)h(in)f(hardw)
n(are)e(cannot)h(b)r(e)h(in)n(terrupted.)36 b(An)24 b(op)r(eration)291
4696 y(that)j(cannot)h(b)r(e)g(in)n(terrupted)f(is)g(said)h(to)f(b)r(e)
h Fo(atomic)p Fm(.)415 4799 y(So)22 b(ho)n(w)g(can)h(w)n(e)f(write)g
(concurren)n(t)f(programs)g(if)i(w)n(e)f(don't)h(kno)n(w)f(whic)n(h)g
(op)r(erations)291 4899 y(are)k(atomic?)37 b(One)27 b(p)r(ossibilit)n
(y)g(is)h(to)f(collect)g(sp)r(eci\014c)h(information)f(ab)r(out)h(eac)n
(h)e(op)r(era-)291 4998 y(tion)h(on)h(eac)n(h)e(hardw)n(are)g
(platform.)36 b(The)28 b(dra)n(wbac)n(ks)d(of)j(this)g(approac)n(h)d
(are)i(ob)n(vious.)p Black Black eop
%%Page: 6 12
6 11 bop Black 739 252 a Fo(6)2290 b(In)m(tro)s(duction)p
739 286 2865 4 v Black 863 515 a Fm(The)29 b(most)g(common)g
(alternativ)n(e)e(is)i(to)g(mak)n(e)f(the)h(conserv)-5
b(ativ)n(e)28 b(assumption)g(that)739 615 y(all)22 b(up)r(dates)g(and)g
(all)g(writes)g(are)f(not)h(atomic,)h(and)f(to)g(use)g(sync)n
(hronization)f(constrain)n(ts)739 715 y(to)27 b(con)n(trol)g(concurren)
n(t)f(access)g(to)i(shared)e(v)-5 b(ariables.)863 814
y(The)32 b(most)f(common)f(constrain)n(t)g(is)i(m)n(utual)f(exclusion,)
g(or)g(m)n(utex,)h(whic)n(h)f(I)g(men-)739 914 y(tioned)21
b(in)g(Section)f(1.1.)34 b(Mutual)21 b(exclusion)f(guaran)n(tees)e
(that)j(only)f(one)h(thread)f(accesses)739 1013 y(a)31
b(shared)f(v)-5 b(ariable)30 b(at)h(a)g(time,)i(eliminating)e(the)h
(kinds)f(of)h(sync)n(hronization)d(errors)g(in)739 1113
y(this)f(section.)739 1345 y Fe(1.5.3)112 b(Mutual)38
b(exclusion)e(with)h(messages)739 1499 y Fm(Lik)n(e)24
b(serialization,)g(m)n(utual)h(exclusion)g(can)f(b)r(e)i(implemen)n
(ted)f(using)g(message)e(passing.)739 1598 y(F)-7 b(or)38
b(example,)k(imagine)c(that)h(y)n(ou)g(and)f(Bob)h(op)r(erate)f(a)h(n)n
(uclear)f(reactor)f(that)i(y)n(ou)739 1698 y(monitor)29
b(from)h(remote)g(stations.)44 b(Most)29 b(of)i(the)f(time,)h(b)r(oth)g
(of)f(y)n(ou)g(are)f(w)n(atc)n(hing)g(for)739 1798 y(w)n(arning)g(ligh)
n(ts,)i(but)g(y)n(ou)f(are)g(b)r(oth)h(allo)n(w)n(ed)e(to)h(tak)n(e)g
(a)h(break)e(for)h(lunc)n(h.)46 b(It)31 b(do)r(esn't)739
1897 y(matter)f(who)h(eats)f(lunc)n(h)h(\014rst,)h(but)f(it)g(is)g(v)n
(ery)f(imp)r(ortan)n(t)g(that)h(y)n(ou)g(don't)g(eat)f(lunc)n(h)739
1997 y(at)d(the)h(same)f(time,)i(lea)n(ving)d(the)i(reactor)e(un)n(w)n
(atc)n(hed!)863 2096 y(Puzzle:)40 b(Figure)29 b(out)g(a)g(system)g(of)h
(message)e(passing)g(\(phone)i(calls\))f(that)g(enforces)739
2196 y(these)21 b(restrain)n(ts.)33 b(Assume)21 b(there)g(are)f(no)h
(clo)r(c)n(ks,)g(and)g(y)n(ou)f(cannot)h(predict)g(when)g(lunc)n(h)739
2296 y(will)32 b(start)g(or)f(ho)n(w)h(long)f(it)i(will)f(last.)50
b(What)33 b(is)f(the)g(minim)n(um)h(n)n(um)n(b)r(er)f(of)g(messages)739
2395 y(that)c(is)f(required?)p Black Black eop
%%Page: 7 13
7 12 bop Black Black 291 1144 a Fi(Chapter)64 b(2)291
1565 y Fk(Semaphores)291 2002 y Fm(In)35 b(real)g(life)h(a)f(semaphore)
f(is)h(a)g(system)g(of)h(signals)e(used)h(to)h(comm)n(unicate)e
(visually)-7 b(,)291 2102 y(usually)23 b(with)h(\015ags,)f(ligh)n(ts,)h
(or)f(some)g(other)f(mec)n(hanism.)35 b(In)24 b(soft)n(w)n(are,)f(a)g
(semaphore)f(is)291 2202 y(a)h(data)h(structure)f(that)h(is)g(useful)h
(for)e(solving)g(a)h(v)-5 b(ariet)n(y)23 b(of)h(sync)n(hronization)e
(problems.)415 2307 y(Semaphores)35 b(w)n(ere)g(in)n(v)n(en)n(ted)h(b)n
(y)g(Edsgar)e(Dijkstra,)39 b(a)c(famously)h(eccen)n(tric)g(com-)291
2407 y(puter)28 b(scien)n(tist.)38 b(Some)28 b(of)g(the)g(details)g(ha)
n(v)n(e)f(c)n(hanged)g(since)h(the)g(original)f(design,)g(but)291
2507 y(the)h(basic)f(idea)g(is)g(the)h(same.)291 2812
y Fh(2.1)135 b(De\014nition)291 3005 y Fm(A)28 b(semaphore)e(is)h(lik)n
(e)g(an)h(in)n(teger,)e(with)j(three)e(di\013erences:)p
Black 392 3211 a(1.)p Black 41 w(When)22 b(y)n(ou)f(create)g(the)i
(semaphore,)e(y)n(ou)g(can)h(initialize)f(its)h(v)-5
b(alue)22 b(to)g(an)n(y)f(in)n(teger,)498 3311 y(but)f(after)e(that)i
(the)f(only)f(op)r(erations)g(y)n(ou)g(are)g(allo)n(w)n(ed)g(to)h(p)r
(erform)f(are)g(incremen)n(t)498 3411 y(\(increase)28
b(b)n(y)g(one\))h(and)f(decremen)n(t)h(\(decrease)e(b)n(y)i(one\).)40
b(Y)-7 b(ou)28 b(cannot)h(read)f(the)498 3510 y(curren)n(t)f(v)-5
b(alue)27 b(of)h(the)g(semaphore.)p Black 392 3700 a(2.)p
Black 41 w(When)35 b(a)e(thread)h(decremen)n(ts)f(the)h(semaphore,)h
(if)f(the)g(result)g(is)g(negativ)n(e,)h(the)498 3800
y(thread)30 b(blo)r(c)n(ks)f(itself)h(and)g(cannot)f(con)n(tin)n(ue)h
(un)n(til)g(another)f(thread)g(incremen)n(ts)498 3899
y(the)f(semaphore.)p Black 392 4089 a(3.)p Black 41 w(If)h(the)g(v)-5
b(alue)29 b(of)f(the)h(semaphore)f(is)g(negativ)n(e)g(and)g(a)h(thread)
f(incremen)n(ts)g(it,)h(one)498 4189 y(of)f(the)g(threads)f(that)g(is)h
(w)n(aiting)f(gets)g(w)n(ok)n(en)f(up.)415 4395 y(T)-7
b(o)40 b(sa)n(y)f(that)i(a)f(thread)g(blo)r(c)n(ks)f(itself)i(\(or)f
(simply)g(\\blo)r(c)n(ks"\))f(is)h(to)h(sa)n(y)e(that)h(it)291
4494 y(noti\014es)34 b(the)i(sc)n(heduler)e(that)h(it)g(cannot)f(pro)r
(ceed.)58 b(The)35 b(sc)n(heduler)f(will)i(prev)n(en)n(t)e(the)291
4594 y(thread)j(from)h(running)g(un)n(til)g(is)g(it)h(noti\014ed)f
(otherwise.)67 b(Since)39 b(the)f(blo)r(c)n(k)n(ed)f(thread)291
4694 y(cannot)f(run,)k(some)d(other)f(thread)h(has)g(to)g(un)n(blo)r(c)
n(k)g(it.)66 b(In)38 b(the)g(tradition)e(of)i(mixed)291
4793 y(computer)27 b(science)g(metaphors,)g(un)n(blo)r(c)n(king)f(is)i
(often)g(called)f(\\w)n(aking".)415 4899 y(That's)h(all)g(there)g(is)g
(to)f(the)i(de\014nition,)g(but)f(there)g(are)f(some)h(consequences)f
(of)h(the)291 4998 y(de\014nition)g(y)n(ou)e(migh)n(t)i(w)n(an)n(t)f
(to)g(think)h(ab)r(out.)p Black Black eop
%%Page: 8 14
8 13 bop Black 739 252 a Fo(8)2319 b(Semaphores)p 739
286 2865 4 v Black Black 863 515 a Fd(\017)p Black 41
w Fm(In)52 b(general,)k(there)51 b(is)g(no)g(w)n(a)n(y)f(to)i(kno)n(w)e
(b)r(efore)h(a)g(thread)g(decremen)n(ts)g(a)946 615 y(semaphore)36
b(whether)h(it)g(will)h(blo)r(c)n(k)e(or)g(not)h(\(in)h(sp)r(eci\014c)f
(cases)f(y)n(ou)g(migh)n(t)h(b)r(e)946 715 y(able)28
b(to)f(pro)n(v)n(e)f(that)i(it)g(will)g(or)f(will)g(not\).)p
Black 863 874 a Fd(\017)p Black 41 w Fm(After)37 b(a)f(thread)f
(incremen)n(ts)h(a)g(semaphore)e(and)i(another)f(thread)h(gets)f(w)n
(ok)n(en)946 973 y(up,)27 b(b)r(oth)e(threads)g(con)n(tin)n(ue)g
(running)g(concurren)n(tly)-7 b(.)35 b(There)24 b(is)i(no)f(w)n(a)n(y)f
(to)h(kno)n(w)946 1073 y(whic)n(h)j(thread,)f(if)h(either,)g(will)g
(con)n(tin)n(ue)f(immediately)-7 b(.)863 1238 y(Finally)g(,)38
b(y)n(ou)d(migh)n(t)h(w)n(an)n(t)f(to)h(think)g(ab)r(out)f(what)h(the)g
(v)-5 b(alue)36 b(of)g(the)g(semaphore)739 1338 y(means.)51
b(If)32 b(the)h(v)-5 b(alue)32 b(is)h(p)r(ositiv)n(e,)g(then)g(it)f
(represen)n(ts)f(the)i(n)n(um)n(b)r(er)f(of)g(threads)g(that)739
1437 y(can)24 b(decremen)n(t)f(without)i(blo)r(c)n(king.)35
b(If)24 b(it)h(is)f(negativ)n(e,)f(then)i(it)f(represen)n(ts)f(the)h(n)
n(um)n(b)r(er)739 1537 y(of)f(threads)f(that)h(ha)n(v)n(e)f(blo)r(c)n
(k)n(ed)g(and)g(are)g(w)n(aiting.)35 b(If)23 b(the)g(v)-5
b(alue)23 b(is)g(zero,)g(it)g(means)f(there)739 1637
y(are)k(no)i(threads)f(w)n(aiting,)g(but)h(if)g(a)f(thread)g(tries)g
(to)h(decremen)n(t,)f(it)h(will)g(blo)r(c)n(k.)739 1908
y Fh(2.2)135 b(Syn)l(tax)739 2090 y Fm(In)26 b(most)g(programming)e(en)
n(vironmen)n(ts,)i(an)f(implemen)n(tation)i(of)f(semaphores)e(is)i(a)n
(v)-5 b(ail-)739 2190 y(able)33 b(as)f(part)g(of)h(the)h(programming)c
(language)i(or)g(the)h(op)r(erating)f(system.)53 b(Di\013eren)n(t)739
2289 y(implemen)n(tations)31 b(sometimes)g(o\013er)g(sligh)n(tly)g
(di\013eren)n(t)g(capabilities,)h(and)f(usually)g(re-)739
2389 y(quire)c(di\013eren)n(t)h(syn)n(tax.)863 2488 y(In)50
b(this)f(b)r(o)r(ok)g(I)g(will)h(use)f(a)f(simple)i(pseudo-language)c
(to)k(demonstrate)e(ho)n(w)739 2588 y(semaphores)35 b(w)n(ork.)62
b(The)37 b(syn)n(tax)e(for)i(creating)e(a)h(new)h(semaphore)e(and)h
(initializing)739 2688 y(it)28 b(is)p Black 1375 2852
a(Listing)g(2.1:)36 b(Semaphore)26 b(initialization)i(syn)n(tax)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2909 2921
29 v 0.9 TeXcolorgray Black 711 2909 4 29 v 711 2885
29 4 v 739 2885 250 4 v 989 2885 2616 4 v 3605 2885 29
4 v 3631 2909 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 3009 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 3009 29 100 v 0.9 TeXcolorgray Black
711 3009 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
3009 29 100 v 0.9 TeXcolorgray Black 3628 3009 4 100
v 863 2979 a(1)240 b Fl(Semaphore)40 b(fred)i(=)h(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 711 3037 2921 29 v
0.9 TeXcolorgray Black 711 3037 4 29 v 712 3037 29 4
v 739 3037 250 4 v 989 3037 2616 4 v 3605 3037 29 4 v
3631 3037 4 29 v 739 3152 a Fm(When)33 b Fl(Semaphore)28
b Fm(app)r(ears)j(with)i(a)f(capital)g(letter)g(it)h(indicates)f(a)g(t)
n(yp)r(e)g(of)g(v)-5 b(ariable.)739 3251 y(In)28 b(this)g(case,)e
Fl(fred)g Fm(is)i(the)g(name)f(of)h(the)g(new)f(semaphore)g(and)g
Fl(1)g Fm(is)h(its)g(initial)f(v)-5 b(alue.)863 3351
y(Later,)27 b(w)n(e)g(use)h(the)g(name)f(of)h(the)g(v)-5
b(ariable)26 b(to)i(p)r(erform)f(op)r(erations.)p Black
1548 3515 a(Listing)h(2.2:)36 b(Semaphore)26 b(op)r(erations)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 3573 2921
29 v 0.9 TeXcolorgray Black 711 3573 4 29 v 711 3548
29 4 v 739 3548 250 4 v 989 3548 2616 4 v 3605 3548 29
4 v 3631 3573 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 3672 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 3672 29 100 v 0.9 TeXcolorgray Black
711 3672 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
3672 29 100 v 0.9 TeXcolorgray Black 3628 3672 4 100
v 863 3642 a(1)240 b Fl(fred)n(.increment)40 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 3772 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 3772 29 100 v 0.9 TeXcolorgray Black 711 3772 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 3772 29 100
v 0.9 TeXcolorgray Black 3628 3772 4 100 v 863 3742 a
Fm(2)240 b Fl(fred)n(.decrement)40 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 3800 2921 29 v 0.9 TeXcolorgray
Black 711 3800 4 29 v 712 3800 29 4 v 739 3800 250 4
v 989 3800 2616 4 v 3605 3800 29 4 v 3631 3800 4 29 v
739 3914 a Fm(These)35 b(op)r(erations)g(go)g(b)n(y)g(di\013eren)n(t)h
(names)f(in)h(di\013eren)n(t)g(en)n(vironmen)n(ts.)61
b(The)35 b(most)739 4014 y(common)27 b(alternativ)n(es)f(are)p
Black 1548 4178 a(Listing)i(2.3:)36 b(Semaphore)26 b(op)r(erations)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 4236 2921
29 v 0.9 TeXcolorgray Black 711 4236 4 29 v 711 4211
29 4 v 739 4211 250 4 v 989 4211 2616 4 v 3605 4211 29
4 v 3631 4236 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4335 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4335 29 100 v 0.9 TeXcolorgray Black
711 4335 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4335 29 100 v 0.9 TeXcolorgray Black 3628 4335 4 100
v 863 4305 a(1)240 b Fl(fred)n(.signal)41 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 4435 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4435 29 100 v 0.9 TeXcolorgray Black 711 4435 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4435 29 100
v 0.9 TeXcolorgray Black 3628 4435 4 100 v 863 4405 a
Fm(2)240 b Fl(fred)n(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4463 2921 29 v 0.9 TeXcolorgray
Black 711 4463 4 29 v 712 4463 29 4 v 739 4463 250 4
v 989 4463 2616 4 v 3605 4463 29 4 v 3631 4463 4 29 v
739 4577 a Fm(and)p Black 1548 4741 a(Listing)28 b(2.4:)36
b(Semaphore)26 b(op)r(erations)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4799 2921 29 v 0.9 TeXcolorgray
Black 711 4799 4 29 v 711 4774 29 4 v 739 4774 250 4
v 989 4774 2616 4 v 3605 4774 29 4 v 3631 4799 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 739 4899 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4899 29 100 v 0.9 TeXcolorgray Black 711 4899 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4899 29 100
v 0.9 TeXcolorgray Black 3628 4899 4 100 v 863 4869 a(1)240
b Fl(fred)n(.V)43 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4998 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4998 29 100 v 0.9 TeXcolorgray Black
711 4998 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4998 29 100 v 0.9 TeXcolorgray Black 3628 4998 4 100
v 863 4969 a Fm(2)240 b Fl(fred)n(.P)43 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 5027 2921 29 v 0.9
TeXcolorgray Black 711 5027 4 29 v 712 5027 29 4 v 739
5027 250 4 v 989 5027 2616 4 v 3605 5027 29 4 v 3631
5027 4 29 v Black Black eop
%%Page: 9 15
9 14 bop Black 291 252 a Fo(2.3)30 b(Wh)m(y)j(semaphores?)1902
b(9)p 291 286 2865 4 v Black 291 515 a Fm(It)24 b(ma)n(y)f(b)r(e)h
(surprising)f(that)h(there)g(are)f(so)g(man)n(y)h(names,)g(but)h(there)
e(is)h(a)g(reason)e(for)i(the)291 615 y(pluralit)n(y)-7
b(.)40 b Fl(increment)25 b Fm(and)j Fl(decrement)e Fm(describ)r(e)i
(what)h(the)g(op)r(erations)f Fl(do)p Fm(.)39 b Fl(signal)291
715 y Fm(and)27 b Fl(wait)e Fm(describ)r(e)i(what)g(they)h(are)e(often)
i(used)f(for.)36 b(And)28 b Fl(V)f Fm(and)g Fl(P)g Fm(w)n(ere)f(the)h
(original)291 814 y(names)34 b(prop)r(osed)g(b)n(y)h(Dijkstra,)i(who)e
(wisely)g(realized)f(that)h(a)g(meaningless)f(name)h(is)291
914 y(b)r(etter)28 b(than)f(a)g(misleading)g(name.)415
1013 y(I)39 b(consider)f(the)i(other)e(pairs)g(misleading)h(b)r(ecause)
f Fl(increment)e Fm(and)j Fl(decrement)291 1113 y Fm(neglect)28
b(to)h(men)n(tion)g(the)h(p)r(ossibilit)n(y)e(of)h(blo)r(c)n(king)g
(and)f(w)n(aking,)h(and)g(semaphores)e(are)291 1213 y(often)g(used)h
(in)g(w)n(a)n(ys)e(that)i(ha)n(v)n(e)e(nothing)i(to)f(do)g(with)i
Fl(signal)c Fm(and)i Fl(wait)p Fm(.)415 1312 y(If)h(y)n(ou)f(insist)h
(on)f(meaningful)h(names,)f(then)h(I)g(w)n(ould)f(suggest)f(these:)p
Black 1100 1487 a(Listing)h(2.5:)36 b(Semaphore)27 b(op)r(erations)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1548 2921
29 v 0.9 TeXcolorgray Black 262 1548 4 29 v 262 1523
29 4 v 291 1523 250 4 v 541 1523 2616 4 v 3157 1523 29
4 v 3183 1548 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1648 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1648 29 100 v 0.9 TeXcolorgray Black
262 1648 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1648 29 100 v 0.9 TeXcolorgray Black 3180 1648 4 100
v 415 1618 a(1)240 b Fl(fred)n(.)o(increment_and_wak)o(e_a)o(_w)o(ait)o
(in)o(g_)o(pro)o(ce)o(ss_)o(if)o(_th)o(er)o(e_)o(are)o(_a)o(ny)37
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1747 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1747 29 100 v 0.9 TeXcolorgray Black 262 1747 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1747 29 100
v 0.9 TeXcolorgray Black 3180 1747 4 100 v 415 1717 a
Fm(2)240 b Fl(fred)n(.)o(decrement_and_blo)o(ck_)o(if)o(_th)o(e_)o(re)o
(sul)o(t_)o(is_)o(ne)o(gat)o(iv)o(e)37 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1776 2921 29 v 0.9 TeXcolorgray
Black 262 1776 4 29 v 263 1776 29 4 v 291 1776 250 4
v 541 1776 2616 4 v 3157 1776 29 4 v 3183 1776 4 29 v
415 1897 a Fm(I)31 b(don't)g(think)g(the)g(w)n(orld)e(is)i(lik)n(ely)f
(to)g(em)n(brace)g(either)g(of)h(these)f(names)h(so)r(on.)45
b(In)291 1996 y(the)31 b(mean)n(time,)g(the)h(most)e(standard)g(c)n
(hoice)g(is)h Fl(signal)d Fm(and)j Fl(wait)p Fm(,)f(so)g(that's)h(what)
g(I)291 2096 y(will)c(use.)291 2371 y Fh(2.3)135 b(Wh)l(y)45
b(semaphores?)291 2552 y Fm(Lo)r(oking)19 b(at)h(the)h(de\014nition)g
(of)f(semaphores,)h(it)g(is)f(not)g(at)h(all)f(ob)n(vious)f(wh)n(y)h
(they)h(are)e(use-)291 2652 y(ful.)37 b(It's)26 b(true)h(that)g(w)n(e)f
(don't)h Fg(ne)l(e)l(d)f Fm(semaphores)f(to)i(solv)n(e)e(sync)n
(hronization)g(problems,)291 2752 y(but)j(there)f(are)g(some)g(adv)-5
b(an)n(tages)26 b(to)h(using)g(them:)p Black 415 2934
a Fd(\017)p Black 41 w Fm(Semaphores)34 b(imp)r(ose)i(delib)r(erate)f
(constrain)n(ts)g(that)h(help)f(programmers)e(a)n(v)n(oid)498
3034 y(errors.)p Black 415 3200 a Fd(\017)p Black 41
w Fm(Solutions)21 b(using)g(semaphores)e(are)h(often)i(clean)e(and)h
(organized,)g(making)g(it)g(easier)498 3300 y(to)28 b(demonstrate)e
(their)i(correctness.)p Black 415 3466 a Fd(\017)p Black
41 w Fm(Semaphores)c(can)g(b)r(e)h(implemen)n(ted)h(e\016cien)n(tly)f
(on)f(man)n(y)h(systems,)f(so)h(solutions)498 3565 y(that)j(use)f
(semaphores)f(are)h(p)r(ortable)g(and)g(usually)h(e\016cien)n(t.)p
Black Black eop
%%Page: 10 16
10 15 bop Black Black Black Black eop
%%Page: 11 17
11 16 bop Black Black 291 1143 a Fi(Chapter)64 b(3)291
1564 y Fk(Basic)77 b(sync)-6 b(hronization)291 1813 y(patterns)291
2250 y Fm(This)21 b(c)n(hapter)g(presen)n(ts)g(a)h(series)e(of)i(basic)
f(sync)n(hronization)f(problems)h(and)h(sho)n(ws)e(w)n(a)n(ys)291
2349 y(of)34 b(using)g(semaphores)f(to)h(solv)n(e)f(them.)58
b(These)34 b(problems)g(include)g(serialization)f(and)291
2449 y(m)n(utual)27 b(exclusion,)g(whic)n(h)h(w)n(e)f(ha)n(v)n(e)f
(already)h(seen,)g(along)f(with)i(others.)291 2752 y
Fh(3.1)135 b(Signaling)291 2943 y Fm(P)n(ossibly)28 b(the)i(simplest)g
(use)f(for)g(a)h(semaphore)e(is)i Fo(signaling)p Fm(,)e(whic)n(h)i
(means)f(that)h(one)291 3043 y(thread)18 b(sends)g(a)h(signal)e(to)i
(another)f(thread)g(to)g(indicate)h(that)g(something)f(has)h(happ)r
(ened.)415 3148 y(Signaling)24 b(mak)n(es)f(it)h(p)r(ossible)g(to)g
(guaran)n(tee)f(that)h(a)g(section)g(of)g(co)r(de)g(in)h(one)e(thread)
291 3247 y(will)j(run)g(b)r(efore)f(a)h(section)f(of)h(co)r(de)g(in)g
(another)f(thread;)h(in)g(other)g(w)n(ords,)f(it)h(solv)n(es)f(the)291
3347 y(serialization)h(problem.)415 3452 y(Assume)g(that)h(w)n(e)f(ha)n
(v)n(e)f(a)h(semaphore)f(named)h Fl(sem)f Fm(with)i(initial)f(v)-5
b(alue)26 b(0,)h(and)f(that)291 3552 y(b)r(oth)i(threads)e(ha)n(v)n(e)h
(shared)f(access)h(to)g(it.)415 3656 y(Thread)g(A)p 0.9
TeXcolorgray 0.9 TeXcolorgray 387 3743 1257 29 v 0.9
TeXcolorgray Black 387 3743 4 29 v 387 3718 29 4 v 415
3718 208 4 v 623 3718 993 4 v 1616 3718 29 4 v 1642 3743
4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 415 3842 1200
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 3842 29 100 v 0.9 TeXcolorgray Black 387 3842 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 3842 29 100
v 0.9 TeXcolorgray Black 1640 3842 4 100 v 457 3812 a(a1)82
b Fl(statement)p 0.9 TeXcolorgray 0.9 TeXcolorgray 415
3942 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 3942 29 100 v 0.9 TeXcolorgray Black
387 3942 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
3942 29 100 v 0.9 TeXcolorgray Black 1640 3942 4 100
v 457 3912 a Fm(a2)g Fl(sem)n(.signal)41 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 387 3970 1257 29 v 0.9
TeXcolorgray Black 387 3970 4 29 v 388 3970 29 4 v 415
3970 208 4 v 623 3970 993 4 v 1616 3970 29 4 v 1642 3970
4 29 v 1955 3656 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 3743 1257 29 v 0.9 TeXcolorgray
Black 1927 3743 4 29 v 1927 3718 29 4 v 1955 3718 208
4 v 2163 3718 993 4 v 3156 3718 29 4 v 3182 3743 4 29
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1955 3842 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 3842 29 100 v 0.9 TeXcolorgray Black 1927 3842 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3842 29
100 v 0.9 TeXcolorgray Black 3180 3842 4 100 v 1992 3812
a(b1)82 b Fl(sem)o(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 3942 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 3942 29
100 v 0.9 TeXcolorgray Black 1927 3942 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3942 29 100 v 0.9 TeXcolorgray
Black 3180 3942 4 100 v 1992 3912 a Fm(b2)82 b Fl(statement)p
0.9 TeXcolorgray 0.9 TeXcolorgray 1927 3970 1257 29 v
0.9 TeXcolorgray Black 1927 3970 4 29 v 1928 3970 29
4 v 1955 3970 208 4 v 2163 3970 993 4 v 3156 3970 29
4 v 3182 3970 4 29 v 415 4091 a Fm(The)30 b(w)n(ord)e
Fl(statement)e Fm(represen)n(ts)i(an)i(arbitrary)d(program)h(statemen)n
(t.)43 b(T)-7 b(o)29 b(mak)n(e)291 4191 y(the)f(example)g(concrete,)g
(imagine)g(that)h Fl(a1)f Fm(reads)f(a)h(line)h(from)f(a)g(\014le,)h
(and)f Fl(b2)g Fm(displa)n(ys)291 4291 y(the)f(line)g(on)g(the)h
(screen.)36 b(The)27 b(semaphore)e(in)j(this)f(program)e(guaran)n(tees)
g(that)j(Thread)291 4390 y(A)g(has)f(completed)g Fl(a1)g
Fm(b)r(efore)g(Thread)g(B)h(b)r(egins)f Fl(b2)p Fm(.)415
4495 y(The)g(reasoning)e(should)h(b)r(e)h(clear.)36 b(If)27
b(thread)f(B)h(gets)f(to)h(the)g Fl(wait)e Fm(statemen)n(t)i(\014rst,)
291 4595 y(it)21 b(will)g(\014nd)h(the)f(initial)h(v)-5
b(alue,)22 b(zero,)f(and)g(it)g(will)h(blo)r(c)n(k.)34
b(Then)21 b(when)g(Thread)g(A)g(signals,)291 4694 y(Thread)26
b(B)i(pro)r(ceeds.)415 4799 y(Similarly)-7 b(,)23 b(if)f(Thread)g(A)g
(gets)g(to)g(the)g(signal)f(\014rst)h(then)h(the)f(v)-5
b(alue)22 b(of)g(the)g(semaphore)291 4899 y(will)32 b(b)r(e)g(incremen)
n(ted,)g(and)g(when)g(Thread)f(B)g(gets)h(to)f(the)h(w)n(ait,)h(it)f
(will)g(pro)r(ceed)f(im-)291 4998 y(mediately)-7 b(.)36
b(Either)28 b(w)n(a)n(y)-7 b(,)26 b(the)i(order)e(of)i
Fl(a1)f Fm(and)g Fl(b2)g Fm(is)g(guaran)n(teed.)p Black
Black eop
%%Page: 12 18
12 17 bop Black 739 252 a Fo(12)1482 b(Basic)32 b(sync)m(hronization)h
(patterns)p 739 286 2865 4 v Black 863 515 a Fm(This)k(use)f(of)g
(semaphores)f(is)h(the)h(basis)f(on)g(the)g(names)g Fl(signal)e
Fm(and)i Fl(wait)p Fm(,)h(and)739 615 y(in)31 b(this)h(case)e(the)i
(names)f(are)f(con)n(v)n(enien)n(tly)g(mnemonic.)48 b(Unfortunately)-7
b(,)32 b(w)n(e)f(will)h(see)739 715 y(other)27 b(cases)f(where)h(the)h
(names)g(are)e(less)h(helpful.)863 814 y(Sp)r(eaking)32
b(of)h(meaningful)f(names,)h Fl(sem)f Fm(isn't)g(one.)51
b(When)33 b(p)r(ossible,)h(it)f(is)f(a)g(go)r(o)r(d)739
914 y(idea)27 b(to)f(giv)n(e)g(a)h(semaphore)f(a)g(name)h(that)g
(indicates)g(what)g(it)g(represen)n(ts.)36 b(In)27 b(this)g(case)739
1013 y(a)j(name)g(lik)n(e)g Fl(a1Done)e Fm(migh)n(t)i(b)r(e)g(go)r(o)r
(d,)h(where)e Fl(a1Done)42 b(=)h(0)30 b Fm(means)f(that)i
Fl(a1)f Fm(has)f(not)739 1113 y(executed)f(and)f Fl(a1Done)41
b(=)i(1)27 b Fm(means)h(it)g(has.)739 1388 y Fh(3.2)135
b(Rendezv)l(ous)739 1569 y Fm(Puzzle:)34 b(Generalize)23
b(the)i(signal)e(pattern)g(so)g(that)i(it)f(w)n(orks)e(b)r(oth)i(w)n(a)
n(ys.)34 b(Thread)24 b(A)g(has)739 1669 y(to)j(w)n(ait)h(for)f(Thread)f
(B)i(and)f(vice)h(v)n(ersa.)35 b(In)28 b(other)f(w)n(ords,)f(giv)n(en)h
(this)h(co)r(de)863 1769 y(Thread)f(A)p 0.9 TeXcolorgray
0.9 TeXcolorgray 835 1855 1257 29 v 0.9 TeXcolorgray
Black 835 1855 4 29 v 835 1830 29 4 v 863 1830 208 4
v 1071 1830 993 4 v 2064 1830 29 4 v 2090 1855 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 863 1955 1200 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
835 1955 29 100 v 0.9 TeXcolorgray Black 835 1955 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 2063 1955 29 100
v 0.9 TeXcolorgray Black 2088 1955 4 100 v 905 1925 a(a1)82
b Fl(statement)p 0.9 TeXcolorgray 0.9 TeXcolorgray 863
2054 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 835 2054 29 100 v 0.9 TeXcolorgray Black
835 2054 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 2063
2054 29 100 v 0.9 TeXcolorgray Black 2088 2054 4 100
v 905 2024 a Fm(a2)g Fl(statement)p 0.9 TeXcolorgray
0.9 TeXcolorgray 835 2083 1257 29 v 0.9 TeXcolorgray
Black 835 2083 4 29 v 836 2083 29 4 v 863 2083 208 4
v 1071 2083 993 4 v 2064 2083 29 4 v 2090 2083 4 29 v
2403 1769 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray
2375 1855 1257 29 v 0.9 TeXcolorgray Black 2375 1855
4 29 v 2375 1830 29 4 v 2403 1830 208 4 v 2611 1830 993
4 v 3604 1830 29 4 v 3630 1855 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 2403 1955 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 2375 1955 29
100 v 0.9 TeXcolorgray Black 2375 1955 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1955 29 100 v 0.9 TeXcolorgray
Black 3628 1955 4 100 v 2440 1925 a(b1)83 b Fl(statement)p
0.9 TeXcolorgray 0.9 TeXcolorgray 2403 2054 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
2375 2054 29 100 v 0.9 TeXcolorgray Black 2375 2054 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2054 29
100 v 0.9 TeXcolorgray Black 3628 2054 4 100 v 2440 2024
a Fm(b2)g Fl(statement)p 0.9 TeXcolorgray 0.9 TeXcolorgray
2375 2083 1257 29 v 0.9 TeXcolorgray Black 2375 2083
4 29 v 2376 2083 29 4 v 2403 2083 208 4 v 2611 2083 993
4 v 3604 2083 29 4 v 3630 2083 4 29 v 739 2198 a Fm(w)n(e)27
b(w)n(an)n(t)g(to)g(guaran)n(tee)f(that)h Fl(a1)g Fm(happ)r(ens)h(b)r
(efore)f Fl(b2)f Fm(and)i Fl(b1)e Fm(happ)r(ens)i(b)r(efore)f
Fl(a2)p Fm(.)36 b(In)739 2298 y(writing)d(y)n(our)g(solution,)i(b)r(e)g
(sure)e(to)h(sp)r(ecify)g(the)g(names)g(and)g(initial)g(v)-5
b(alues)34 b(of)f(y)n(our)739 2398 y(semaphores)26 b(\(little)i(hin)n
(t)g(there\).)863 2497 y(Y)-7 b(our)37 b(solution)f(should)g(not)g
(enforce)g(to)r(o)g(man)n(y)g(constrain)n(ts.)62 b(F)-7
b(or)36 b(example,)j(w)n(e)739 2597 y(don't)30 b(care)f(ab)r(out)h(the)
g(order)f(of)g Fl(a1)h Fm(and)f Fl(b1)p Fm(.)43 b(In)30
b(y)n(our)f(solution,)h(either)g(order)e(should)739 2696
y(b)r(e)g(p)r(ossible.)863 2796 y(This)36 b(sync)n(hronization)d
(problem)i(has)f(a)h(name;)k(it's)c(a)g(rendezv)n(ous.)58
b(The)35 b(idea)g(is)739 2896 y(that)30 b(t)n(w)n(o)g(threads)f
(rendezv)n(ous)g(at)h(a)g(p)r(oin)n(t)g(of)h(execution,)f(and)g
(neither)g(is)h(allo)n(w)n(ed)d(to)739 2995 y(pro)r(ceed)f(un)n(til)h
(b)r(oth)g(ha)n(v)n(e)e(arriv)n(ed.)p Black Black eop
%%Page: 13 19
13 18 bop Black 291 252 a Fo(3.2)30 b(Rendezv)m(ous)2121
b(13)p 291 286 2865 4 v Black 291 515 a Fe(3.2.1)112
b(Rendezv)m(ous)38 b(hin)m(t)291 669 y Fm(The)33 b(c)n(hances)f(are)h
(go)r(o)r(d)g(that)g(y)n(ou)g(w)n(ere)f(able)h(to)h(\014gure)e(out)i(a)
f(solution,)h(but)g(if)g(not,)291 768 y(here)g(is)g(a)h(hin)n(t.)58
b(Create)34 b(t)n(w)n(o)g(semaphores,)h(named)g Fl(aArrived)c
Fm(and)k Fl(bArrived)p Fm(,)e(and)291 868 y(initialize)27
b(them)h(b)r(oth)g(to)g(zero.)415 967 y(As)e(the)g(names)f(suggest,)g
Fl(aArrived)e Fm(indicates)i(whether)h(Thread)f(A)h(has)f(arriv)n(ed)f
(at)291 1067 y(the)k(rendezv)n(ous,)e(and)h Fl(bArrived)d
Fm(lik)n(ewise.)p Black Black eop
%%Page: 14 20
14 19 bop Black Black Black Black eop
%%Page: 15 21
15 20 bop Black 291 252 a Fo(3.2)30 b(Rendezv)m(ous)2121
b(15)p 291 286 2865 4 v Black 291 515 a Fe(3.2.2)112
b(Rendezv)m(ous)38 b(solution)291 706 y Fm(Here)27 b(is)g(m)n(y)h
(solution,)f(based)g(on)g(the)h(previous)f(hin)n(t:)415
826 y(Thread)g(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 912 1257 29 v 0.9 TeXcolorgray Black 387 912 4 29
v 387 887 29 4 v 415 887 208 4 v 623 887 993 4 v 1616
887 29 4 v 1642 912 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
415 1012 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 1012 29 100 v 0.9 TeXcolorgray Black
387 1012 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
1012 29 100 v 0.9 TeXcolorgray Black 1640 1012 4 100
v 623 982 a Fl(statement)40 b(a1)p 0.9 TeXcolorgray 0.9
TeXcolorgray 415 1112 1200 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 387 1112 29 100 v 0.9
TeXcolorgray Black 387 1112 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 1112 29 100 v 0.9 TeXcolorgray
Black 1640 1112 4 100 v 623 1082 a(aArrived)l(.signal)h(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 415 1211 1200 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1211 29 100 v 0.9 TeXcolorgray Black 387 1211 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 1211 29 100
v 0.9 TeXcolorgray Black 1640 1211 4 100 v 623 1181 a(bArrived)l(.wait)
h(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 1311 1200
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1311 29 100 v 0.9 TeXcolorgray Black 387 1311 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 1311 29 100
v 0.9 TeXcolorgray Black 1640 1311 4 100 v 623 1281 a(statement)e(a2)p
0.9 TeXcolorgray 0.9 TeXcolorgray 387 1339 1257 29 v
0.9 TeXcolorgray Black 387 1339 4 29 v 388 1339 29 4
v 415 1339 208 4 v 623 1339 993 4 v 1616 1339 29 4 v
1642 1339 4 29 v 1955 826 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 912 1257 29 v 0.9 TeXcolorgray
Black 1927 912 4 29 v 1927 887 29 4 v 1955 887 208 4
v 2163 887 993 4 v 3156 887 29 4 v 3182 912 4 29 v 0.9
TeXcolorgray 0.9 TeXcolorgray 1955 1012 1200 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1012 29 100 v 0.9 TeXcolorgray Black 1927 1012 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1012 29
100 v 0.9 TeXcolorgray Black 3180 1012 4 100 v 2162 982
a Fl(statement)40 b(b1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 1112 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 1112 29 100 v 0.9 TeXcolorgray
Black 1927 1112 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 1112 29 100 v 0.9 TeXcolorgray Black 3180 1112 4
100 v 2162 1082 a(bArrived)m(.signal)h(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 1211 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1211 29
100 v 0.9 TeXcolorgray Black 1927 1211 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1211 29 100 v 0.9 TeXcolorgray
Black 3180 1211 4 100 v 2162 1181 a(aArrived)m(.wait)h(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 1955 1311 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1311 29 100 v 0.9 TeXcolorgray Black 1927 1311 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1311 29
100 v 0.9 TeXcolorgray Black 3180 1311 4 100 v 2162 1281
a(statement)e(b2)p 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1339 1257 29 v 0.9 TeXcolorgray Black 1927 1339
4 29 v 1928 1339 29 4 v 1955 1339 208 4 v 2163 1339 993
4 v 3156 1339 29 4 v 3182 1339 4 29 v 415 1475 a Fm(While)23
b(w)n(orking)e(on)h(the)g(previous)f(problem,)i(y)n(ou)f(migh)n(t)g(ha)
n(v)n(e)f(tried)h(something)g(lik)n(e)291 1575 y(this:)415
1694 y(Thread)27 b(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1781 1257 29 v 0.9 TeXcolorgray Black 387 1781 4
29 v 387 1756 29 4 v 415 1756 208 4 v 623 1756 993 4
v 1616 1756 29 4 v 1642 1781 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 415 1880 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 1880 29 100
v 0.9 TeXcolorgray Black 387 1880 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 1880 29 100 v 0.9 TeXcolorgray
Black 1640 1880 4 100 v 623 1851 a Fl(statement)40 b(a1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 415 1980 1200 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1980 29 100 v 0.9 TeXcolorgray Black 387 1980 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 1980 29 100
v 0.9 TeXcolorgray Black 1640 1980 4 100 v 623 1950 a(bArrived)l(.wait)
i(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 2080 1200
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 2080 29 100 v 0.9 TeXcolorgray Black 387 2080 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 2080 29 100
v 0.9 TeXcolorgray Black 1640 2080 4 100 v 623 2050 a(aArrived)l
(.signal)f(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 415
2179 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 2179 29 100 v 0.9 TeXcolorgray Black
387 2179 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
2179 29 100 v 0.9 TeXcolorgray Black 1640 2179 4 100
v 623 2149 a(statement)f(a2)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 2208 1257 29 v 0.9 TeXcolorgray Black 387 2208 4
29 v 388 2208 29 4 v 415 2208 208 4 v 623 2208 993 4
v 1616 2208 29 4 v 1642 2208 4 29 v 1955 1694 a Fm(Thread)27
b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1781 1257
29 v 0.9 TeXcolorgray Black 1927 1781 4 29 v 1927 1756
29 4 v 1955 1756 208 4 v 2163 1756 993 4 v 3156 1756
29 4 v 3182 1781 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 1880 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 1880 29 100 v 0.9 TeXcolorgray
Black 1927 1880 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 1880 29 100 v 0.9 TeXcolorgray Black 3180 1880 4
100 v 2162 1851 a Fl(statement)40 b(b1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 1980 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1980 29
100 v 0.9 TeXcolorgray Black 1927 1980 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1980 29 100 v 0.9 TeXcolorgray
Black 3180 1980 4 100 v 2162 1950 a(bArrived)m(.signal)h(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 1955 2080 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 2080 29 100 v 0.9 TeXcolorgray Black 1927 2080 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2080 29
100 v 0.9 TeXcolorgray Black 3180 2080 4 100 v 2162 2050
a(aArrived)m(.wait)h(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 2179 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 2179 29 100 v 0.9 TeXcolorgray
Black 1927 2179 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 2179 29 100 v 0.9 TeXcolorgray Black 3180 2179 4
100 v 2162 2149 a(statement)e(b2)p 0.9 TeXcolorgray 0.9
TeXcolorgray 1927 2208 1257 29 v 0.9 TeXcolorgray Black
1927 2208 4 29 v 1928 2208 29 4 v 1955 2208 208 4 v 2163
2208 993 4 v 3156 2208 29 4 v 3182 2208 4 29 v 415 2343
a Fm(This)25 b(solution)g(also)f(w)n(orks,)g(although)g(it)h(is)g
(probably)f(less)h(e\016cien)n(t,)h(since)e(it)i(migh)n(t)291
2443 y(ha)n(v)n(e)g(to)h(switc)n(h)h(b)r(et)n(w)n(een)f(A)h(and)g(B)f
(one)h(time)g(more)e(than)i(necessary)-7 b(.)415 2563
y(If)39 b(A)g(arriv)n(es)d(\014rst,)41 b(it)d(w)n(aits)g(for)g(B.)g
(When)h(B)g(arriv)n(es,)f(it)h(w)n(ak)n(es)e(A)i(and)f(migh)n(t)291
2663 y(pro)r(ceed)25 b(immediately)g(to)h(its)g Fl(wait)e
Fm(in)i(whic)n(h)f(case)g(it)h(blo)r(c)n(ks,)g(allo)n(wing)e(A)i(to)f
(reac)n(h)g(its)291 2762 y Fl(signal)p Fm(,)g(after)i(whic)n(h)h(b)r
(oth)g(threads)f(can)g(pro)r(ceed.)415 2882 y(Think)20
b(ab)r(out)f(the)h(other)f(p)r(ossible)h(paths)f(through)g(this)h(co)r
(de)f(and)g(con)n(vince)g(y)n(ourself)291 2982 y(that)27
b(in)h(all)g(cases)e(neither)i(thread)f(can)g(pro)r(ceed)g(un)n(til)h
(b)r(oth)g(ha)n(v)n(e)e(arriv)n(ed.)291 3321 y Fe(3.2.3)112
b(Deadlo)s(c)m(k)37 b(#1)291 3512 y Fm(Again,)25 b(while)h(w)n(orking)e
(on)h(the)i(previous)d(problem,)i(y)n(ou)f(migh)n(t)g(ha)n(v)n(e)g
(tried)g(something)291 3612 y(lik)n(e)i(this:)415 3731
y(Thread)g(A)p 0.9 TeXcolorgray 0.9 TeXcolorgray 387
3818 1257 29 v 0.9 TeXcolorgray Black 387 3818 4 29 v
387 3793 29 4 v 415 3793 208 4 v 623 3793 993 4 v 1616
3793 29 4 v 1642 3818 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
415 3917 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 3917 29 100 v 0.9 TeXcolorgray Black
387 3917 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
3917 29 100 v 0.9 TeXcolorgray Black 1640 3917 4 100
v 623 3888 a Fl(statement)40 b(a1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 415 4017 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 4017 29 100
v 0.9 TeXcolorgray Black 387 4017 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 4017 29 100 v 0.9 TeXcolorgray
Black 1640 4017 4 100 v 623 3987 a(bArrived)l(.wait)i(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 415 4117 1200 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 4117 29 100 v 0.9 TeXcolorgray Black 387 4117 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 4117 29 100
v 0.9 TeXcolorgray Black 1640 4117 4 100 v 623 4087 a(aArrived)l
(.signal)f(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 415
4216 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 4216 29 100 v 0.9 TeXcolorgray Black
387 4216 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
4216 29 100 v 0.9 TeXcolorgray Black 1640 4216 4 100
v 623 4186 a(statement)f(a2)p 0.9 TeXcolorgray 0.9 TeXcolorgray
387 4245 1257 29 v 0.9 TeXcolorgray Black 387 4245 4
29 v 388 4245 29 4 v 415 4245 208 4 v 623 4245 993 4
v 1616 4245 29 4 v 1642 4245 4 29 v 1955 3731 a Fm(Thread)27
b(B)p 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 3818 1257
29 v 0.9 TeXcolorgray Black 1927 3818 4 29 v 1927 3793
29 4 v 1955 3793 208 4 v 2163 3793 993 4 v 3156 3793
29 4 v 3182 3818 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 3917 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 3917 29 100 v 0.9 TeXcolorgray
Black 1927 3917 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 3917 29 100 v 0.9 TeXcolorgray Black 3180 3917 4
100 v 2162 3888 a Fl(statement)40 b(b1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 4017 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 4017 29
100 v 0.9 TeXcolorgray Black 1927 4017 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4017 29 100 v 0.9 TeXcolorgray
Black 3180 4017 4 100 v 2162 3987 a(aArrived)m(.wait)i(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 1955 4117 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 4117 29 100 v 0.9 TeXcolorgray Black 1927 4117 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4117 29
100 v 0.9 TeXcolorgray Black 3180 4117 4 100 v 2162 4087
a(bArrived)m(.signal)f(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 4216 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 4216 29 100 v 0.9 TeXcolorgray
Black 1927 4216 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 4216 29 100 v 0.9 TeXcolorgray Black 3180 4216 4
100 v 2162 4186 a(statement)f(b2)p 0.9 TeXcolorgray 0.9
TeXcolorgray 1927 4245 1257 29 v 0.9 TeXcolorgray Black
1927 4245 4 29 v 1928 4245 29 4 v 1955 4245 208 4 v 2163
4245 993 4 v 3156 4245 29 4 v 3182 4245 4 29 v 415 4381
a Fm(If)32 b(so,)f(I)h(hop)r(e)f(y)n(ou)g(rejected)g(it)h(quic)n(kly)-7
b(,)31 b(b)r(ecause)g(it)h(has)f(a)g(serious)f(problem.)47
b(As-)291 4480 y(suming)23 b(that)g(A)h(arriv)n(es)d(\014rst,)j(it)g
(will)f(blo)r(c)n(k)g(at)g(its)h Fl(wait)p Fm(.)34 b(When)23
b(B)h(arriv)n(es,)e(it)h(will)h(also)291 4580 y(blo)r(c)n(k,)g(since)f
(A)i(w)n(asn't)e(able)h(to)f(signal)g Fl(aArrived)p Fm(.)33
b(A)n(t)24 b(this)g(p)r(oin)n(t,)h(neither)f(thread)f(can)291
4679 y(pro)r(ceed,)k(and)g(nev)n(er)g(will.)415 4799
y(This)38 b(situation)f(is)g(called)h(a)f Fo(deadlo)s(c)m(k)h
Fm(and,)h(ob)n(viously)-7 b(,)39 b(it)f(is)g(not)f(a)g(successful)291
4899 y(solution)28 b(of)h(the)g(sync)n(hronization)e(problem.)41
b(In)29 b(this)g(case,)f(the)i(error)d(is)h(ob)n(vious,)g(but)291
4998 y(often)21 b(the)h(p)r(ossibilit)n(y)e(of)h(deadlo)r(c)n(k)g(is)g
(more)f(subtle.)35 b(W)-7 b(e)22 b(will)f(see)g(more)f(examples)g
(later.)p Black Black eop
%%Page: 16 22
16 21 bop Black 739 252 a Fo(16)1482 b(Basic)32 b(sync)m(hronization)h
(patterns)p 739 286 2865 4 v Black 739 515 a Fh(3.3)135
b(Mutex)739 697 y Fm(A)19 b(second)f(common)g(use)h(for)f(semaphores)f
(is)i(to)f(enforce)g(m)n(utual)h(exclusion.)33 b(W)-7
b(e)19 b(ha)n(v)n(e)f(al-)739 797 y(ready)23 b(seen)g(one)h(use)f(for)g
(m)n(utual)h(exclusion,)g(con)n(trolling)f(concurren)n(t)f(access)h(to)
g(shared)739 896 y(v)-5 b(ariables.)35 b(The)26 b(m)n(utex)h(guaran)n
(tees)d(that)j(only)f(one)g(thread)f(accesses)g(the)i(shared)e(v)-5
b(ari-)739 996 y(able)27 b(at)h(a)f(time.)863 1096 y(A)d(m)n(utex)g(is)
f(lik)n(e)h(a)f(tok)n(en)g(that)h(passes)e(from)h(one)g(thread)h(to)f
(another,)g(allo)n(wing)g(one)739 1195 y(thread)29 b(at)h(a)f(time)h
(to)f(pro)r(ceed.)43 b(F)-7 b(or)29 b(example,)g(in)h
Fg(The)j(L)l(or)l(d)f(of)g(the)g(Flies)f Fm(a)e(group)f(of)739
1295 y(c)n(hildren)d(use)g(a)f(conc)n(h)h(as)f(a)h(m)n(utex.)36
b(In)26 b(order)e(to)h(sp)r(eak,)g(y)n(ou)f(ha)n(v)n(e)g(to)h(hold)g
(the)h(conc)n(h.)739 1395 y(As)i(long)e(as)h(only)h(one)f(c)n(hild)g
(holds)h(the)g(conc)n(h,)f(only)g(one)g(can)g(sp)r(eak.)863
1494 y(Similarly)-7 b(,)33 b(in)e(order)f(for)h(a)g(thread)g(to)h
(access)e(a)h(shared)g(v)-5 b(ariable,)31 b(it)h(has)f(to)g(\\get")739
1594 y(the)e(m)n(utex;)g(when)f(it)h(is)g(done,)f(it)h(\\releases")d
(the)j(m)n(utex.)39 b(Only)28 b(one)g(thread)g(can)g(hold)739
1693 y(the)g(m)n(utex)g(at)f(a)g(time.)863 1793 y(Puzzle:)39
b(Add)30 b(semaphores)d(to)i(the)g(follo)n(wing)f(example)g(to)h
(enforce)f(m)n(utual)h(exclu-)739 1893 y(sion)e(to)g(the)h(shared)f(v)
-5 b(ariable)27 b Fl(count)p Fm(.)863 1992 y(Thread)g(A)p
0.9 TeXcolorgray 0.9 TeXcolorgray 835 2079 1257 29 v
0.9 TeXcolorgray Black 835 2079 4 29 v 835 2054 29 4
v 863 2054 208 4 v 1071 2054 993 4 v 2064 2054 29 4 v
2090 2079 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 863
2178 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 835 2178 29 100 v 0.9 TeXcolorgray Black
835 2178 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 2063
2178 29 100 v 0.9 TeXcolorgray Black 2088 2178 4 100
v 905 2148 a(a1)82 b Fl(count)42 b(=)h(count)e(+)i(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 835 2206 1257 29 v
0.9 TeXcolorgray Black 835 2206 4 29 v 836 2206 29 4
v 863 2206 208 4 v 1071 2206 993 4 v 2064 2206 29 4 v
2090 2206 4 29 v 2403 1992 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 2079 1257 29 v 0.9 TeXcolorgray
Black 2375 2079 4 29 v 2375 2054 29 4 v 2403 2054 208
4 v 2611 2054 993 4 v 3604 2054 29 4 v 3630 2079 4 29
v 0.9 TeXcolorgray 0.9 TeXcolorgray 2403 2178 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
2375 2178 29 100 v 0.9 TeXcolorgray Black 2375 2178 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2178 29
100 v 0.9 TeXcolorgray Black 3628 2178 4 100 v 2440 2148
a(b1)83 b Fl(count)41 b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 2375 2206 1257 29 v 0.9 TeXcolorgray
Black 2375 2206 4 29 v 2376 2206 29 4 v 2403 2206 208
4 v 2611 2206 993 4 v 3604 2206 29 4 v 3630 2206 4 29
v Black Black eop
%%Page: 17 23
17 22 bop Black 291 252 a Fo(3.3)30 b(Mutex)2340 b(17)p
291 286 2865 4 v Black 291 515 a Fe(3.3.1)112 b(Mutual)37
b(exclusion)g(hin)m(t)291 669 y Fm(Create)25 b(a)g(semaphore)f(named)i
Fl(mutex)e Fm(that)i(is)g(initialized)g(to)f(1.)36 b(A)26
b(v)-5 b(alue)26 b(of)g(one)f(means)291 768 y(that)e(a)f(thread)h(ma)n
(y)f(pro)r(ceed)h(and)f(access)g(the)i(shared)e(v)-5
b(ariable;)23 b(a)g(v)-5 b(alue)23 b(of)f(zero)g(means)291
868 y(that)27 b(it)h(has)g(to)f(w)n(ait)g(for)g(another)g(thread)g(to)h
(release)e(the)i(m)n(utex.)p Black Black eop
%%Page: 18 24
18 23 bop Black Black Black Black eop
%%Page: 19 25
19 24 bop Black 291 252 a Fo(3.4)30 b(Multiplex)2206
b(19)p 291 286 2865 4 v Black 291 515 a Fe(3.3.2)112
b(Mutual)37 b(exclusion)g(solution)291 675 y Fm(Here)27
b(is)g(a)h(solution:)415 778 y(Thread)f(A)p 0.9 TeXcolorgray
0.9 TeXcolorgray 387 864 1257 29 v 0.9 TeXcolorgray Black
387 864 4 29 v 387 839 29 4 v 415 839 208 4 v 623 839
993 4 v 1616 839 29 4 v 1642 864 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 415 964 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 964 29 100
v 0.9 TeXcolorgray Black 387 964 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 964 29 100 v 0.9 TeXcolorgray Black
1640 964 4 100 v 457 934 a(a1)82 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 415 1063 1200
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
387 1063 29 100 v 0.9 TeXcolorgray Black 387 1063 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615 1063 29 100
v 0.9 TeXcolorgray Black 1640 1063 4 100 v 457 1033 a
Fm(a2)239 b Fl(//)42 b(critical)f(section)p 0.9 TeXcolorgray
0.9 TeXcolorgray 415 1163 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 387 1163 29 100
v 0.9 TeXcolorgray Black 387 1163 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 1615 1163 29 100 v 0.9 TeXcolorgray
Black 1640 1163 4 100 v 457 1133 a Fm(a3)239 b Fl(count)41
b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
415 1263 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 387 1263 29 100 v 0.9 TeXcolorgray Black
387 1263 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 1615
1263 29 100 v 0.9 TeXcolorgray Black 1640 1263 4 100
v 457 1233 a Fm(a4)82 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 387 1291 1257 29 v
0.9 TeXcolorgray Black 387 1291 4 29 v 388 1291 29 4
v 415 1291 208 4 v 623 1291 993 4 v 1616 1291 29 4 v
1642 1291 4 29 v 1955 778 a Fm(Thread)27 b(B)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 864 1257 29 v 0.9 TeXcolorgray
Black 1927 864 4 29 v 1927 839 29 4 v 1955 839 208 4
v 2163 839 993 4 v 3156 839 29 4 v 3182 864 4 29 v 0.9
TeXcolorgray 0.9 TeXcolorgray 1955 964 1200 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 964 29 100 v 0.9 TeXcolorgray Black 1927 964 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 964 29 100 v
0.9 TeXcolorgray Black 3180 964 4 100 v 1992 934 a(b1)82
b Fl(mutex)n(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
1955 1063 1200 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 1927 1063 29 100 v 0.9 TeXcolorgray
Black 1927 1063 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray
3155 1063 29 100 v 0.9 TeXcolorgray Black 3180 1063 4
100 v 1992 1033 a Fm(b2)239 b Fl(//)43 b(critical)d(section)p
0.9 TeXcolorgray 0.9 TeXcolorgray 1955 1163 1200 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
1927 1163 29 100 v 0.9 TeXcolorgray Black 1927 1163 4
100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1163 29
100 v 0.9 TeXcolorgray Black 3180 1163 4 100 v 1992 1133
a Fm(b3)239 b Fl(count)42 b(=)h(count)f(+)h(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 1955 1263 1200 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1263 29
100 v 0.9 TeXcolorgray Black 1927 1263 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1263 29 100 v 0.9 TeXcolorgray
Black 3180 1263 4 100 v 1992 1233 a Fm(b4)82 b Fl(mutex)n(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 1927 1291
1257 29 v 0.9 TeXcolorgray Black 1927 1291 4 29 v 1928
1291 29 4 v 1955 1291 208 4 v 2163 1291 993 4 v 3156
1291 29 4 v 3182 1291 4 29 v 415 1410 a Fm(Since)24 b
Fl(mutex)d Fm(is)i(initially)g(1,)h(whic)n(hev)n(er)e(thread)h(gets)g
(to)g(the)g Fl(wait)f Fm(\014rst)h(will)h(b)r(e)f(able)291
1509 y(to)34 b(pro)r(ceed)h(immediately)-7 b(.)59 b(Of)35
b(course,)g(the)g(act)g(of)g(w)n(aiting)f(on)h(the)g(semaphore)e(has)
291 1609 y(the)24 b(e\013ect)h(of)g(decremen)n(ting)f(it)h(\(making)f
(it)h(zero\))e(so)h(the)h(second)f(thread)g(to)g(arriv)n(e)f(will)291
1709 y(ha)n(v)n(e)j(to)h(w)n(ait)h(un)n(til)g(the)g(\014rst)f(signals.)
415 1812 y(I)d(ha)n(v)n(e)f(inden)n(ted)i(the)f(up)r(date)h(op)r
(eration)e(to)h(sho)n(w)f(that)i(it)f(is)g(con)n(tained)g(within)h(the)
291 1911 y(m)n(utex.)415 2014 y(In)g(this)f(example,)h(b)r(oth)g
(threads)e(are)h(running)g(the)g(same)g(co)r(de.)36 b(This)24
b(is)g(sometimes)291 2114 y(called)d(a)g Fo(symmetric)e
Fm(solution.)34 b(If)22 b(the)g(threads)f(ha)n(v)n(e)f(to)h(run)h
(di\013eren)n(t)f(co)r(de,)i(the)f(solu-)291 2214 y(tion)i(is)g
Fo(asymmetric)p Fm(.)34 b(Symmetric)24 b(solutions)g(are)f(often)i
(easier)e(to)h(generalize.)34 b(In)25 b(this)291 2313
y(case,)h(the)h(m)n(utex)g(solution)f(can)g(handle)h(an)n(y)f(n)n(um)n
(b)r(er)g(of)h(concurren)n(t)e(threads)h(without)291
2413 y(mo)r(di\014cation.)48 b(As)31 b(long)g(as)g(ev)n(ery)f(thread)h
(w)n(aits)g(b)r(efore)g(p)r(erforming)g(an)g(up)r(date)h(and)291
2512 y(signals)26 b(after,)h(then)h(no)g(t)n(w)n(o)f(threads)f(will)i
(access)f Fl(count)e Fm(concurren)n(tly)-7 b(.)415 2615
y(In)25 b(the)h(tradition)e(of)h(computer)g(science)f(and)h(mixed)g
(metaphors,)g(there)g(are)f(sev)n(eral)291 2715 y(other)32
b(w)n(a)n(ys)g(p)r(eople)i(sometimes)f(talk)g(ab)r(out)g(m)n(utexes.)55
b(Often)33 b(the)h(co)r(de)f(that)h(needs)291 2815 y(to)27
b(b)r(e)h(protected)f(is)h(called)f(the)h Fo(critical)33
b(section)p Fm(,)27 b(I)g(supp)r(ose)h(b)r(ecause)f(it)h(is)g
(critically)291 2914 y(imp)r(ortan)n(t)d(to)g(prev)n(en)n(t)g
(concurren)n(t)f(access.)35 b(In)26 b(the)g(alternate)e(metaphor,)i(w)n
(e)f(think)h(of)291 3014 y(the)g(critical)g(section)g(as)f(a)h(ro)r
(om,)g(and)g(only)g(one)g(thread)g(is)g(allo)n(w)n(ed)f(to)h(b)r(e)h
(in)f(the)h(ro)r(om)291 3113 y(at)g(a)g(time.)415 3216
y(In)i(this)g(metaphor,)f(m)n(utexes)g(are)f(called)h(lo)r(c)n(ks,)g
(and)h(a)f(thread)g(is)g(said)g(to)h(lo)r(c)n(k)f(the)291
3316 y(m)n(utex)e(b)r(efore)h(en)n(tering)f(and)g(unlo)r(c)n(k)g(it)i
(after)e(exiting.)36 b(Occasionally)-7 b(,)25 b(though,)i(p)r(eople)291
3416 y(mix)21 b(the)h(metaphors)f(and)g(talk)g(ab)r(out)h(\\getting")e
(or)h(\\releasing")e(a)i(lo)r(c)n(k,)h(whic)n(h)g(do)r(esn't)291
3515 y(mak)n(e)k(m)n(uc)n(h)i(sense.)415 3618 y(Both)33
b(metaphors)f(are)g(p)r(oten)n(tially)g(useful)i(and)f(p)r(oten)n
(tially)f(misleading.)53 b(As)33 b(y)n(ou)291 3718 y(w)n(ork)g(on)i
(the)h(next)f(problem,)h(try)f(out)g(b)r(oth)h(w)n(a)n(ys)d(of)i
(thinking)h(and)f(see)f(whic)n(h)h(one)291 3818 y(leads)27
b(y)n(ou)f(to)i(a)f(solution.)291 4110 y Fh(3.4)135 b(Multiplex)291
4298 y Fm(Puzzle:)47 b(Generalize)32 b(the)i(previous)e(solution)h(so)f
(that)h(it)h(allo)n(ws)e(m)n(ultiple)i(threads)e(to)291
4397 y(run)f(in)h(the)g(critical)f(section)g(at)h(the)g(same)f(time,)i
(but)g(it)f(enforces)f(an)g(upp)r(er)h(limit)g(on)291
4497 y(the)27 b(n)n(um)n(b)r(er)g(of)g(concurren)n(t)e(threads.)36
b(In)27 b(other)g(w)n(ords,)e(no)i(more)f(than)h Fl(n)g
Fm(threads)f(can)291 4597 y(run)h(in)h(the)g(critical)f(section)g(at)h
(the)f(same)g(time.)415 4700 y(This)21 b(pattern)g(is)f(called)h(a)f
Fo(m)m(ultiplex)p Fm(.)33 b(In)21 b(real)e(life,)k(the)e(m)n(ultiplex)h
(problem)e(o)r(ccurs)291 4799 y(at)28 b(busy)g(nigh)n(tclubs)g(where)g
(there)g(is)g(a)g(maxim)n(um)g(n)n(um)n(b)r(er)g(of)h(p)r(eople)f(allo)
n(w)n(ed)f(in)i(the)291 4899 y(building)38 b(at)g(a)f(time,)k(either)d
(to)g(main)n(tain)g(\014re)f(safet)n(y)h(or)f(to)h(create)f(the)h
(illusion)g(of)291 4998 y(exclusivit)n(y)-7 b(.)p Black
Black eop
%%Page: 20 26
20 25 bop Black 739 252 a Fo(20)1482 b(Basic)32 b(sync)m(hronization)h
(patterns)p 739 286 2865 4 v Black 863 515 a Fm(A)n(t)27
b(suc)n(h)f(places)f(a)h(b)r(ouncer)f(usually)h(enforces)f(the)h(sync)n
(hronization)f(constrain)n(t)g(b)n(y)739 615 y(k)n(eeping)c(trac)n(k)g
(of)h(the)h(n)n(um)n(b)r(er)e(of)h(p)r(eople)g(inside)h(and)f(barring)e
(arriv)-5 b(als)20 b(when)j(the)f(ro)r(om)739 715 y(is)27
b(at)h(capacit)n(y)-7 b(.)36 b(Then,)28 b(whenev)n(er)e(one)h(p)r
(erson)g(lea)n(v)n(es)f(another)h(is)g(allo)n(w)n(ed)g(to)g(en)n(ter.)
863 814 y(Enforcing)40 b(this)i(constrain)n(t)e(with)h(semaphores)f(ma)
n(y)g(sound)h(di\016cult,)k(but)d(it)f(is)739 914 y(almost)27
b(trivial.)p Black Black eop
%%Page: 21 27
21 26 bop Black 291 252 a Fo(3.5)30 b(Barrier)2313 b(21)p
291 286 2865 4 v Black 291 515 a Fe(3.4.1)112 b(Multiplex)36
b(solution)291 673 y Fm(T)-7 b(o)24 b(allo)n(w)g(m)n(ultiple)h(threads)
g(to)f(run)h(in)g(the)h(critical)e(section,)h(just)h(initialize)f(the)g
(m)n(utex)291 773 y(to)i Fl(n)p Fm(,)g(whic)n(h)h(is)f(the)h(maxim)n
(um)g(n)n(um)n(b)r(er)f(of)h(threads)f(that)g(should)h(b)r(e)g(allo)n
(w)n(ed.)415 875 y(A)n(t)c(an)n(y)e(time,)j(the)f(v)-5
b(alue)23 b(of)g(the)h(semaphore)e(represen)n(ts)f(the)j(n)n(um)n(b)r
(er)f(of)g(additional)291 974 y(threads)33 b(that)i(ma)n(y)f(en)n(ter.)
57 b(If)35 b(the)g(v)-5 b(alue)35 b(is)f(zero,)i(then)f(the)g(next)g
(thread)f(will)g(blo)r(c)n(k)291 1074 y(un)n(til)29 b(one)g(of)g(the)h
(threads)e(inside)i(exits)f(and)g(signals.)40 b(When)30
b(all)f(threads)g(ha)n(v)n(e)f(exited)291 1174 y(the)g(v)-5
b(alue)27 b(of)h(the)g(semaphore)e(is)h(restored)f(to)i
Fl(n)p Fm(.)415 1276 y(Since)19 b(the)h(solution)f(is)g(symmetric,)h
(it's)f(con)n(v)n(en)n(tional)f(to)h(sho)n(w)f(only)h(one)f(cop)n(y)g
(of)i(the)291 1375 y(co)r(de,)28 b(but)h(y)n(ou)e(should)h(imagine)g(m)
n(ultiple)h(copies)e(of)i(the)f(co)r(de)g(running)g(concurren)n(tly)291
1475 y(in)f(m)n(ultiple)i(threads.)p Black 1168 1656
a(Listing)f(3.1:)36 b(Multiplex)28 b(solution)p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1720 2921 29 v
0.9 TeXcolorgray Black 262 1720 4 29 v 262 1695 29 4
v 291 1695 250 4 v 541 1695 2616 4 v 3157 1695 29 4 v
3183 1720 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1820 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1820 29 100 v 0.9 TeXcolorgray Black
262 1820 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1820 29 100 v 0.9 TeXcolorgray Black 3180 1820 4 100
v 415 1790 a(1)83 b Fl(multiplex)l(.wait)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1919 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1919 29 100 v 0.9 TeXcolorgray Black 262 1919 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1919 29 100
v 0.9 TeXcolorgray Black 3180 1919 4 100 v 415 1889 a
Fm(2)240 b Fl(critical)40 b(section)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2019 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2019 29 100
v 0.9 TeXcolorgray Black 262 2019 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2019 29 100 v 0.9 TeXcolorgray
Black 3180 2019 4 100 v 415 1989 a Fm(3)83 b Fl(multiplex)l(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2047 2921
29 v 0.9 TeXcolorgray Black 262 2047 4 29 v 263 2047
29 4 v 291 2047 250 4 v 541 2047 2616 4 v 3157 2047 29
4 v 3183 2047 4 29 v 415 2176 a Fm(What)31 b(happ)r(ens)f(if)g(the)h
(critical)e(section)h(is)g(o)r(ccupied)g(and)g(more)f(than)i(one)e
(thread)291 2275 y(arriv)n(es?)45 b(Of)31 b(course,)g(what)g(w)n(e)g(w)
n(an)n(t)g(is)g(for)f(all)h(the)h(arriv)-5 b(als)29 b(to)i(w)n(ait.)47
b(This)31 b(solution)291 2375 y(do)r(es)23 b(exactly)g(that.)36
b(Eac)n(h)22 b(time)i(an)g(arriv)-5 b(al)22 b(joins)h(the)i(queue,)f
(the)g(semaphore)e(is)i(decre-)291 2474 y(men)n(ted,)i(so)g(that)g(the)
h(v)-5 b(alue)26 b(of)g(the)h(semaphore)e(\(negated\))h(represen)n(ts)e
(the)j(n)n(um)n(b)r(er)f(of)291 2574 y(threads)g(in)i(queue.)415
2676 y(When)i(a)e(thread)h(lea)n(v)n(es,)e(it)j(signals)d(the)j
(semaphore,)e(incremen)n(ting)g(its)h(v)-5 b(alue)29
b(and)291 2776 y(allo)n(wing)d(one)h(of)h(the)f(w)n(aiting)g(threads)g
(to)h(pro)r(ceed.)415 2878 y(Lik)n(e)35 b(a)g(m)n(utex,)j(it)e(is)f
(useful)h(to)g(think)g(of)f(a)g(m)n(ultiplex)h(as)f(a)g(ro)r(om)g(that)
h(threads)291 2977 y(en)n(ter)29 b(and)h(lea)n(v)n(e.)43
b(In)31 b(this)f(case,)g(I)g(\014nd)h(it)f(more)g(natural)f(to)h(think)
h(of)f(the)g(semaphore)291 3077 y(as)d(a)g(set)g(of)h(tok)n(ens)f
(\(rather)f(than)i(a)f(lo)r(c)n(k\).)415 3179 y(As)h(eac)n(h)g(thread)g
(in)n(v)n(ok)n(es)e Fl(wait)p Fm(,)h(it)i(pic)n(ks)e(up)i(one)f(of)g
(the)h(tok)n(ens;)f(when)g(it)h(in)n(v)n(ok)n(es)291
3279 y Fl(signal)g Fm(it)i(releases)f(one.)48 b(Only)31
b(a)g(thread)g(that)h(holds)f(a)g(tok)n(en)g(can)g(en)n(ter)g(the)h(ro)
r(om.)291 3378 y(If)g(no)f(tok)n(ens)g(are)f(a)n(v)-5
b(ailable)30 b(when)i(a)f(thread)g(arriv)n(es,)g(it)h(w)n(aits)f(un)n
(til)h(another)e(thread)291 3478 y(releases)c(one.)415
3580 y(In)36 b(real)g(life,)i(tic)n(k)n(et)e(windo)n(ws)f(sometimes)h
(use)g(a)g(system)g(lik)n(e)f(this.)63 b(They)36 b(hand)291
3680 y(out)25 b(tok)n(ens)f(\(sometimes)h(p)r(ok)n(er)f(c)n(hips\))h
(to)g(customers)f(in)i(line.)36 b(Eac)n(h)24 b(tok)n(en)h(allo)n(ws)e
(one)291 3779 y(p)r(erson)j(to)i(en)n(ter.)291 4066 y
Fh(3.5)135 b(Barrier)291 4253 y Fm(Consider)29 b(again)h(the)h(Rendezv)
n(ous)f(problem)g(from)g(Section)h(3.2.)46 b(A)31 b(limitation)g(of)g
(the)291 4352 y(solution)c(w)n(e)g(presen)n(ted)g(is)g(that)h(it)g(do)r
(es)g(not)f(w)n(ork)f(with)i(more)f(than)h(t)n(w)n(o)f(threads.)415
4454 y(Puzzle:)51 b(Generalize)34 b(the)i(rendezv)n(ous)d(solution.)59
b(Ev)n(ery)33 b(thread)i(should)g(run)g(the)291 4554
y(follo)n(wing)26 b(co)r(de:)p Black 1276 4735 a(Listing)h(3.2:)36
b(Barrier)26 b(co)r(de)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4799 2921 29 v 0.9 TeXcolorgray Black 262 4799 4
29 v 262 4774 29 4 v 291 4774 250 4 v 541 4774 2616 4
v 3157 4774 29 4 v 3183 4799 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4899 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4899 29 100
v 0.9 TeXcolorgray Black 262 4899 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4899 29 100 v 0.9 TeXcolorgray
Black 3180 4899 4 100 v 415 4869 a(1)83 b Fl(rendezvous)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4998 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4998 29 100 v 0.9 TeXcolorgray Black 262 4998 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4998 29 100
v 0.9 TeXcolorgray Black 3180 4998 4 100 v 415 4969 a
Fm(2)g Fl(critical)40 b(point)p 0.9 TeXcolorgray 0.9
TeXcolorgray 262 5027 2921 29 v 0.9 TeXcolorgray Black
262 5027 4 29 v 263 5027 29 4 v 291 5027 250 4 v 541
5027 2616 4 v 3157 5027 29 4 v 3183 5027 4 29 v Black
Black eop
%%Page: 22 28
22 27 bop Black 739 252 a Fo(22)1482 b(Basic)32 b(sync)m(hronization)h
(patterns)p 739 286 2865 4 v Black 863 515 a Fm(The)19
b(sync)n(hronization)e(requiremen)n(t)h(is)h(that)g(no)f(thread)h
(executes)f Fl(critical)40 b(point)739 615 y Fm(un)n(til)28
b(after)f(all)g(threads)g(ha)n(v)n(e)g(executed)g Fl(rendezvous)p
Fm(.)863 715 y(Y)-7 b(ou)31 b(can)e(assume)g(that)i(there)f(are)f
Ff(n)h Fm(threads)f(and)h(that)g(this)g(v)-5 b(alue)30
b(is)g(stored)f(in)i(a)739 814 y(v)-5 b(ariable,)27 b
Fl(n)p Fm(,)g(that)h(is)f(accessible)g(from)g(all)g(threads.)863
914 y(When)k(the)f(\014rst)g Ff(n)20 b Fd(\000)f Fm(1)30
b(threads)f(arriv)n(e)f(they)i(should)g(blo)r(c)n(k)g(un)n(til)g(the)g
Ff(n)p Fm(th)h(thread)739 1013 y(arriv)n(es,)25 b(at)j(whic)n(h)f(p)r
(oin)n(t)h(all)f(the)h(threads)f(ma)n(y)g(pro)r(ceed.)p
Black Black eop
%%Page: 23 29
23 28 bop Black 291 252 a Fo(3.5)30 b(Barrier)2313 b(23)p
291 286 2865 4 v Black 291 515 a Fe(3.5.1)112 b(Barrier)36
b(hin)m(t)291 669 y Fm(F)-7 b(or)33 b(man)n(y)g(of)h(the)g(problems)f
(in)h(this)g(b)r(o)r(ok)f(I)h(will)g(pro)n(vide)e(hin)n(ts)i(b)n(y)g
(presen)n(ting)f(the)291 768 y(v)-5 b(ariables)26 b(I)i(used)f(in)h(m)n
(y)f(solution)g(and)h(explaining)f(their)g(roles.)p Black
1285 943 a(Listing)g(3.3:)37 b(Barrier)25 b(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 2921
29 v 0.9 TeXcolorgray Black 262 1004 4 29 v 262 979 29
4 v 291 979 250 4 v 541 979 2616 4 v 3157 979 29 4 v
3183 1004 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1104 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1104 29 100 v 0.9 TeXcolorgray Black
262 1104 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1104 29 100 v 0.9 TeXcolorgray Black 3180 1104 4 100
v 415 1074 a(1)83 b Fl(int)42 b(count)g(=)h(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(2)83 b Fl(Semaphore)40
b(mutex)h(=)i(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1273 a Fm(3)83 b Fl(Semaphore)40 b(barrier)g(=)j(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1331 2921 29 v
0.9 TeXcolorgray Black 262 1331 4 29 v 263 1331 29 4
v 291 1331 250 4 v 541 1331 2616 4 v 3157 1331 29 4 v
3183 1331 4 29 v 415 1452 a(count)23 b Fm(k)n(eeps)i(trac)n(k)f(of)i
(ho)n(w)e(man)n(y)h(threads)g(ha)n(v)n(e)f(arriv)n(ed.)34
b Fl(mutex)23 b Fm(pro)n(vides)h(exclu-)291 1552 y(siv)n(e)i(access)h
(to)g Fl(count)f Fm(so)h(that)h(threads)f(can)g(incremen)n(t)g(it)h
(safely)-7 b(.)415 1652 y Fl(barrier)27 b Fm(is)j(lo)r(c)n(k)n(ed)e
(\(zero)h(or)g(negativ)n(e\))g(un)n(til)h(all)g(threads)f(arriv)n(e;)g
(then)h(it)g(should)291 1751 y(b)r(e)e(unlo)r(c)n(k)n(ed)f(\(1)g(or)g
(more\).)p Black Black eop
%%Page: 24 30
24 29 bop Black Black Black Black eop
%%Page: 25 31
25 30 bop Black 291 252 a Fo(3.5)30 b(Barrier)2313 b(25)p
291 286 2865 4 v Black 291 515 a Fe(3.5.2)112 b(Barrier)36
b(non-solution)291 669 y Fm(First)h(I)g(will)g(presen)n(t)f(a)h
(solution)g(that)g(is)g(not)g(quite)h(righ)n(t,)g(b)r(ecause)f(it)h(is)
f(useful)g(to)291 768 y(examine)27 b(incorrect)f(solutions)h(and)g
(\014gure)g(out)h(what)f(is)h(wrong.)p Black 1134 943
a(Listing)f(3.4:)36 b(Barrier)26 b(non-solution)p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 2921 29 v
0.9 TeXcolorgray Black 262 1004 4 29 v 262 979 29 4 v
291 979 250 4 v 541 979 2616 4 v 3157 979 29 4 v 3183
1004 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 1104 29 100 v 0.9 TeXcolorgray Black
262 1104 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1104 29 100 v 0.9 TeXcolorgray Black 3180 1104 4 100
v 415 1074 a(1)83 b Fl(rendezvous)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(2)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a(3)g Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(4)240 b Fl(count)41 b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1502 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1502 29 100
v 0.9 TeXcolorgray Black 262 1502 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1502 29 100 v 0.9 TeXcolorgray
Black 3180 1502 4 100 v 415 1472 a Fm(5)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1602 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1602 29 100 v 0.9 TeXcolorgray Black 262 1602 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1602 29 100
v 0.9 TeXcolorgray Black 3180 1602 4 100 v 415 1572 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1701 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1701 29 100 v 0.9 TeXcolorgray Black 262 1701 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1701 29 100
v 0.9 TeXcolorgray Black 3180 1701 4 100 v 415 1671 a(7)83
b Fl(if)42 b(\(count)g(==)g(n\))h(barrier)m(.signal)e(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1801 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1801 29 100 v 0.9 TeXcolorgray Black 262 1801 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1801 29 100
v 0.9 TeXcolorgray Black 3180 1801 4 100 v 415 1771 a
Fm(8)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1901 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1901 29 100 v 0.9 TeXcolorgray Black 262 1901 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1901 29 100
v 0.9 TeXcolorgray Black 3180 1901 4 100 v 415 1871 a(9)83
b Fl(barrier)m(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2000 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2000 29 100
v 0.9 TeXcolorgray Black 262 2000 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2000 29 100 v 0.9 TeXcolorgray
Black 3180 2000 4 100 v 374 1970 a Fm(10)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2100 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2100 29 100
v 0.9 TeXcolorgray Black 262 2100 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2100 29 100 v 0.9 TeXcolorgray
Black 3180 2100 4 100 v 374 2070 a(11)82 b Fl(critical)40
b(point)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2128
2921 29 v 0.9 TeXcolorgray Black 262 2128 4 29 v 263
2128 29 4 v 291 2128 250 4 v 541 2128 2616 4 v 3157 2128
29 4 v 3183 2128 4 29 v 415 2249 a Fm(Since)30 b Fl(count)e
Fm(is)i(protected)g(b)n(y)f(a)h(m)n(utex,)h(it)f(coun)n(ts)f(the)i(n)n
(um)n(b)r(er)e(of)h(threads)g(that)291 2349 y(pass.)k(The)24
b(\014rst)f Ff(n)10 b Fd(\000)g Fm(1)22 b(threads)h(w)n(ait)g(when)h
(they)f(get)h(to)f(the)h(barrier,)e(whic)n(h)h(is)h(initially)291
2449 y(lo)r(c)n(k)n(ed.)36 b(When)28 b(the)g Ff(n)p Fm(th)g(thread)f
(arriv)n(es,)e(it)j(unlo)r(c)n(ks)f(the)h(barrier.)415
2548 y(Puzzle:)36 b(What)28 b(is)g(wrong)e(with)i(this)g(solution?)p
Black Black eop
%%Page: 26 32
26 31 bop Black Black Black Black eop
%%Page: 27 33
27 32 bop Black 291 252 a Fo(3.5)30 b(Barrier)2313 b(27)p
291 286 2865 4 v Black 291 515 a Fe(3.5.3)112 b(Deadlo)s(c)m(k)37
b(#2)291 669 y Fm(The)27 b(problem)g(is)h(a)f(deadlo)r(c)n(k.)415
768 y(An)32 b(an)g(example,)g(imagine)f(that)h Ff(n)d
Fm(=)h(5)h(and)g(that)h(4)g(threads)e(are)h(w)n(aiting)g(at)h(the)291
868 y(barrier.)h(The)23 b(v)-5 b(alue)23 b(of)g(the)g(semaphore)f(is)h
(the)g(n)n(um)n(b)r(er)g(of)g(threads)f(in)i(queue,)f(negated,)291
967 y(whic)n(h)k(is)h(-4.)415 1067 y(When)21 b(the)g(5th)f(thread)g
(signals)f(the)i(barrier,)f(one)g(of)g(the)h(w)n(aiting)e(threads)h(is)
g(allo)n(w)n(ed)291 1167 y(to)27 b(pro)r(ceed,)g(and)g(the)h(semaphore)
f(is)g(incremen)n(ted)h(to)f(-3.)415 1266 y(But)g(then)h(no)e(one)h
(signals)f(the)h(semaphore)f(again)g(and)g(none)h(of)g(the)g(other)g
(threads)291 1366 y(can)g(pass)g(the)h(barrier.)35 b(This)27
b(is)h(a)f(second)g(example)g(of)h(a)f(deadlo)r(c)n(k.)415
1466 y(Puzzle:)36 b(Fix)28 b(this)g(problem.)p Black
Black eop
%%Page: 28 34
28 33 bop Black Black Black Black eop
%%Page: 29 35
29 34 bop Black 291 252 a Fo(3.5)30 b(Barrier)2313 b(29)p
291 286 2865 4 v Black 291 515 a Fe(3.5.4)112 b(Barrier)36
b(solution)291 669 y Fm(Finally)-7 b(,)27 b(here)g(is)h(a)f(w)n(orking)
f(barrier:)p Black 1215 843 a(Listing)h(3.5:)36 b(Barrier)25
b(solution)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 904 2921 29 v 0.9 TeXcolorgray Black 262 904 4 29
v 262 879 29 4 v 291 879 250 4 v 541 879 2616 4 v 3157
879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(rendezvous)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1104 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 29 100 v 0.9
TeXcolorgray Black 262 1104 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1104 29 100 v 0.9 TeXcolorgray
Black 3180 1104 4 100 v 415 1074 a Fm(2)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a(3)g Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1303 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a
Fm(4)240 b Fl(count)41 b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1402 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1402 29 100
v 0.9 TeXcolorgray Black 262 1402 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1402 29 100 v 0.9 TeXcolorgray
Black 3180 1402 4 100 v 415 1373 a Fm(5)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1602 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1602 29 100 v 0.9 TeXcolorgray Black 262 1602 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1602 29 100
v 0.9 TeXcolorgray Black 3180 1602 4 100 v 415 1572 a(7)83
b Fl(if)42 b(\(count)g(==)g(n\))h(barrier)m(.signal)e(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1701 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1701 29 100 v 0.9 TeXcolorgray Black 262 1701 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1701 29 100
v 0.9 TeXcolorgray Black 3180 1701 4 100 v 415 1671 a
Fm(8)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1801 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1801 29 100 v 0.9 TeXcolorgray Black 262 1801 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1801 29 100
v 0.9 TeXcolorgray Black 3180 1801 4 100 v 415 1771 a(9)83
b Fl(barrier)m(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1901 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1901 29 100
v 0.9 TeXcolorgray Black 262 1901 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1901 29 100 v 0.9 TeXcolorgray
Black 3180 1901 4 100 v 374 1871 a Fm(10)82 b Fl(barrier)m(.)o(signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2000
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2000 29 100 v 0.9 TeXcolorgray Black
262 2000 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2000 29 100 v 0.9 TeXcolorgray Black 3180 2000 4 100
v 374 1970 a Fm(11)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2100 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2100 29 100 v 0.9 TeXcolorgray Black
262 2100 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2100 29 100 v 0.9 TeXcolorgray Black 3180 2100 4 100
v 374 2070 a(12)82 b Fl(critical)40 b(point)p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2128 2921 29 v 0.9 TeXcolorgray
Black 262 2128 4 29 v 263 2128 29 4 v 291 2128 250 4
v 541 2128 2616 4 v 3157 2128 29 4 v 3183 2128 4 29 v
415 2249 a Fm(The)23 b(only)g(c)n(hange)f(is)h(another)g
Fl(signal)e Fm(after)h(w)n(aiting)h(at)g(the)h(barrier.)33
b(No)n(w)23 b(as)g(eac)n(h)291 2349 y(thread)k(passes,)f(it)i(signals)f
(the)h(semaphore)e(so)h(that)h(the)g(next)f(thread)h(can)f(pass.)415
2449 y(This)f(pattern,)h(a)f Fl(wait)f Fm(and)h(a)g Fl(signal)e
Fm(in)i(rapid)g(succession,)g(o)r(ccurs)f(often)i(enough)291
2548 y(that)f(it)h(has)f(a)g(name;)h(it's)g(called)f(a)g
Fo(turnstile)p Fm(,)g(b)r(ecause)g(it)h(allo)n(ws)e(one)h(thread)g(to)h
(pass)291 2648 y(at)g(a)g(time,)h(and)g(it)g(can)f(b)r(e)h(lo)r(c)n(k)n
(ed)f(to)g(bar)g(all)g(threads.)415 2747 y(In)j(its)f(initial)h(state)f
(\(zero\),)g(the)h(turnstile)f(is)g(lo)r(c)n(k)n(ed.)41
b(The)29 b Ff(n)p Fm(th)h(thread)f(unlo)r(c)n(ks)f(it)291
2847 y(and)f(then)h(all)f Ff(n)h Fm(threads)f(go)g(through.)415
2947 y(After)33 b(the)g Ff(n)p Fm(th)g(thread,)g(what)f(state)h(is)f
(the)h(turnstile)f(in?)52 b(Is)32 b(there)h(an)n(y)e(w)n(a)n(y)h(the)
291 3046 y(barrier)25 b(migh)n(t)j(b)r(e)g(signalled)f(more)f(than)i
(once?)p Black Black eop
%%Page: 30 36
30 35 bop Black Black Black Black eop
%%Page: 31 37
31 36 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(31)p 291 286 2865 4 v Black 291 515 a Fe(3.5.5)112
b(Deadlo)s(c)m(k)37 b(#3)291 669 y Fm(Since)h(only)g(one)g(thread)h(at)
f(a)g(time)h(can)f(pass)g(through)g(the)g(m)n(utex,)k(and)c(only)g(one)
291 768 y(thread)24 b(at)h(a)f(time)i(can)e(pass)g(through)g(the)h
(turnstile,)h(it)f(migh)n(t)g(seen)g(reasonable)e(to)h(put)291
868 y(the)k(turnstile)f(inside)h(the)g(m)n(utex,)g(lik)n(e)f(this:)p
Black 1134 1042 a(Listing)g(3.6:)36 b(Bad)27 b(barrier)f(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 2921
29 v 0.9 TeXcolorgray Black 262 1104 4 29 v 262 1079
29 4 v 291 1079 250 4 v 541 1079 2616 4 v 3157 1079 29
4 v 3183 1104 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1203 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1203 29 100 v 0.9 TeXcolorgray Black
262 1203 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1203 29 100 v 0.9 TeXcolorgray Black 3180 1203 4 100
v 415 1173 a(1)83 b Fl(rendezvous)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(2)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1402 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1402 29 100
v 0.9 TeXcolorgray Black 262 1402 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1402 29 100 v 0.9 TeXcolorgray
Black 3180 1402 4 100 v 415 1373 a(3)g Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(4)240 b Fl(count)41 b(=)i(count)f(+)h(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1602 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 29 100
v 0.9 TeXcolorgray Black 262 1602 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1602 29 100 v 0.9 TeXcolorgray
Black 3180 1602 4 100 v 415 1572 a Fm(5)240 b Fl(if)42
b(\(count)f(==)i(n\))g(barrier)m(.signal)e(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1701 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1701 29 100 v 0.9 TeXcolorgray Black 262 1701 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1701 29 100
v 0.9 TeXcolorgray Black 3180 1701 4 100 v 415 1671 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1801 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1801 29 100 v 0.9 TeXcolorgray Black 262 1801 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1801 29 100
v 0.9 TeXcolorgray Black 3180 1801 4 100 v 415 1771 a(7)240
b Fl(barrier)m(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1901 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1901 29 100
v 0.9 TeXcolorgray Black 262 1901 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1901 29 100 v 0.9 TeXcolorgray
Black 3180 1901 4 100 v 415 1871 a Fm(8)240 b Fl(barrier)m(.)o(signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2000
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2000 29 100 v 0.9 TeXcolorgray Black
262 2000 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2000 29 100 v 0.9 TeXcolorgray Black 3180 2000 4 100
v 415 1970 a Fm(9)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2100 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2100 29 100 v 0.9 TeXcolorgray Black 262 2100 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2100 29 100
v 0.9 TeXcolorgray Black 3180 2100 4 100 v 374 2070 a
Fm(10)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2199 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2199 29 100 v 0.9 TeXcolorgray Black 262 2199 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2199 29 100
v 0.9 TeXcolorgray Black 3180 2199 4 100 v 374 2170 a(11)82
b Fl(critical)40 b(point)p 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2228 2921 29 v 0.9 TeXcolorgray Black 262 2228 4
29 v 263 2228 29 4 v 291 2228 250 4 v 541 2228 2616 4
v 3157 2228 29 4 v 3183 2228 4 29 v 415 2349 a Fm(This)28
b(turns)f(out)h(to)f(b)r(e)h(a)f(bad)h(idea)f(b)r(ecause)g(it)h(can)g
(cause)e(a)i(deadlo)r(c)n(k.)415 2449 y(Imagine)40 b(that)g(the)h
(\014rst)f(thread)g(en)n(ters)f(the)i(m)n(utex)g(and)f(then)g(blo)r(c)n
(ks)g(when)g(it)291 2548 y(reac)n(hes)33 b(the)j(turnstile.)59
b(Since)36 b(the)f(m)n(utex)g(is)h(lo)r(c)n(k)n(ed,)g(no)f(other)f
(threads)h(can)f(en)n(ter,)291 2648 y(so)e(the)g(condition)h
Fl(count==n)c Fm(will)k(nev)n(er)f(b)r(e)h(true)f(and)h(no)f(one)g
(will)h(ev)n(er)e(unlo)r(c)n(k)i(the)291 2747 y(turnstile.)415
2847 y(In)h(this)f(case)g(the)h(deadlo)r(c)n(k)e(is)h(fairly)g(ob)n
(vious,)g(but)h(it)g(demonstrates)e(a)h(common)291 2947
y(source)26 b(of)i(deadlo)r(c)n(ks:)35 b(blo)r(c)n(king)27
b(on)g(a)g(semaphore)g(while)g(holding)h(a)f(m)n(utex.)415
3046 y(Do)r(es)34 b(this)h(co)r(de)f(alw)n(a)n(ys)f(create)g(a)h
(deadlo)r(c)n(k?)57 b(Puzzle:)50 b(\014nd)35 b(an)f(execution)g(path)
291 3146 y(through)26 b(this)i(co)r(de)g(that)g(do)r(es)f
Fg(not)g Fm(cause)g(a)g(deadlo)r(c)n(k.)291 3420 y Fh(3.6)135
b(Reusable)46 b(barrier)291 3602 y Fm(Often)30 b(a)g(set)h(of)f(co)r
(op)r(erating)f(threads)h(will)g(p)r(erform)g(a)g(series)g(of)g(steps)g
(in)h(a)f(lo)r(op)g(and)291 3702 y(sync)n(honize)c(at)h(a)f(barrier)f
(after)i(eac)n(h)f(step.)37 b(F)-7 b(or)27 b(this)g(application)f(w)n
(e)h(need)g(a)g(reusable)291 3802 y(barrier)e(that)j(lo)r(c)n(ks)f
(itself)h(after)f(all)h(the)g(threads)f(ha)n(v)n(e)f(passed)h(through.)
415 3901 y(Puzzle:)34 b(Rewrite)22 b(the)i(barrier)c(solution)j(so)f
(that)h(after)f(all)g(the)h(threads)f(ha)n(v)n(e)g(passed)291
4001 y(through,)27 b(the)g(turnstile)h(is)g(lo)r(c)n(k)n(ed)e(again.)p
Black Black eop
%%Page: 32 38
32 37 bop Black Black Black Black eop
%%Page: 33 39
33 38 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(33)p 291 286 2865 4 v Black 291 515 a Fe(3.6.1)112
b(Reusable)38 b(barrier)e(hin)m(t)291 669 y Fm(Here's)26
b(a)g(hin)n(t)h(ab)r(out)g(ho)n(w)f(to)h(do)f(it.)37
b(Just)27 b(as)f(the)h Ff(n)p Fm(th)g(thread)f(unlo)r(c)n(k)n(ed)h(the)
g(turnstile)291 768 y(on)g(the)h(w)n(a)n(y)e(in,)i(it)g(should)g(b)r(e)
g(the)g Ff(n)p Fm(th)f(thread)h(that)f(lo)r(c)n(ks)g(it)h(on)f(the)h(w)
n(a)n(y)f(out.)415 868 y(Here)g(are)g(the)h(v)-5 b(ariables)26
b(I)i(used:)p Black 1115 1042 a(Listing)g(3.7:)36 b(Reusable)27
b(barrier)f(hin)n(t)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 2921 29 v 0.9 TeXcolorgray Black 262 1104 4
29 v 262 1079 29 4 v 291 1079 250 4 v 541 1079 2616 4
v 3157 1079 29 4 v 3183 1104 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a(1)83 b Fl(int)42 b(count)g(=)h(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1303 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a
Fm(2)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1402 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1402 29 100
v 0.9 TeXcolorgray Black 262 1402 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1402 29 100 v 0.9 TeXcolorgray
Black 3180 1402 4 100 v 415 1373 a Fm(3)83 b Fl(Semaphore)40
b(turnstile)f(=)44 b(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1431 2921 29 v 0.9 TeXcolorgray Black 262 1431 4
29 v 263 1431 29 4 v 291 1431 250 4 v 541 1431 2616 4
v 3157 1431 29 4 v 3183 1431 4 29 v Black Black eop
%%Page: 34 40
34 39 bop Black Black Black Black eop
%%Page: 35 41
35 40 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(35)p 291 286 2865 4 v Black 291 515 a Fe(3.6.2)112
b(Reusable)38 b(barrier)e(non-solution)h(#1)291 669 y
Fm(Once)e(again,)i(w)n(e)e(will)h(start)f(with)i(a)e(simple)h(attempt)h
(at)e(a)h(solution)f(and)h(gradually)291 768 y(impro)n(v)n(e)26
b(it:)p Black 964 943 a(Listing)h(3.8:)36 b(Reusable)28
b(barrier)d(non-solution)p Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 1004 2921 29 v 0.9 TeXcolorgray Black
262 1004 4 29 v 262 979 29 4 v 291 979 250 4 v 541 979
2616 4 v 3157 979 29 4 v 3183 1004 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1104 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 29 100
v 0.9 TeXcolorgray Black 262 1104 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1104 29 100 v 0.9 TeXcolorgray
Black 3180 1104 4 100 v 415 1074 a(1)83 b Fl(rendezvous)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1303 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a(3)g
Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1402 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1402 29 100 v 0.9
TeXcolorgray Black 262 1402 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1402 29 100 v 0.9 TeXcolorgray
Black 3180 1402 4 100 v 415 1373 a Fm(4)240 b Fl(count)m(++)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(5)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1602 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 29 100
v 0.9 TeXcolorgray Black 262 1602 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1602 29 100 v 0.9 TeXcolorgray
Black 3180 1602 4 100 v 415 1572 a Fm(6)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1701 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1701 29 100
v 0.9 TeXcolorgray Black 262 1701 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1701 29 100 v 0.9 TeXcolorgray
Black 3180 1701 4 100 v 415 1671 a(7)83 b Fl(if)42 b(\(count)g(==)g
(n\))h(turnstile)l(.signal)e(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1801 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1801 29 100
v 0.9 TeXcolorgray Black 262 1801 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1801 29 100 v 0.9 TeXcolorgray
Black 3180 1801 4 100 v 415 1771 a Fm(8)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1901 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1901 29 100
v 0.9 TeXcolorgray Black 262 1901 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1901 29 100 v 0.9 TeXcolorgray
Black 3180 1901 4 100 v 415 1871 a(9)83 b Fl(turnstile)l(.wait)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2000 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2000 29 100 v 0.9 TeXcolorgray Black 262 2000 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2000 29 100
v 0.9 TeXcolorgray Black 3180 2000 4 100 v 374 1970 a
Fm(10)82 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2100 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2100 29 100
v 0.9 TeXcolorgray Black 262 2100 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2100 29 100 v 0.9 TeXcolorgray
Black 3180 2100 4 100 v 374 2070 a Fm(11)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2199 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2199 29 100
v 0.9 TeXcolorgray Black 262 2199 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2199 29 100 v 0.9 TeXcolorgray
Black 3180 2199 4 100 v 374 2170 a(12)82 b Fl(critical)40
b(point)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2299
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2299 29 100 v 0.9 TeXcolorgray Black
262 2299 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2299 29 100 v 0.9 TeXcolorgray Black 3180 2299 4 100
v 374 2269 a Fm(13)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2399 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2399 29 100 v 0.9 TeXcolorgray Black
262 2399 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2399 29 100 v 0.9 TeXcolorgray Black 3180 2399 4 100
v 374 2369 a(14)82 b Fl(mutex)n(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2498 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2498 29 100 v 0.9 TeXcolorgray Black 262 2498 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2498 29 100
v 0.9 TeXcolorgray Black 3180 2498 4 100 v 374 2468 a
Fm(15)239 b Fl(count)m(--)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2598 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2598 29 100 v 0.9 TeXcolorgray Black
262 2598 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2598 29 100 v 0.9 TeXcolorgray Black 3180 2598 4 100
v 374 2568 a Fm(16)82 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2698 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2698 29 100 v 0.9 TeXcolorgray Black 262 2698 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2698 29 100
v 0.9 TeXcolorgray Black 3180 2698 4 100 v 374 2668 a
Fm(17)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2797 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2797 29 100 v 0.9 TeXcolorgray Black 262 2797 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2797 29 100
v 0.9 TeXcolorgray Black 3180 2797 4 100 v 374 2767 a(18)82
b Fl(if)42 b(\(count)g(==)g(0\))h(turnstile)l(.wait)f(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 2825 2921 29 v
0.9 TeXcolorgray Black 262 2825 4 29 v 263 2825 29 4
v 291 2825 250 4 v 541 2825 2616 4 v 3157 2825 29 4 v
3183 2825 4 29 v 415 2947 a(count++)c Fm(is)k(shorthand)e(for)g
Fl(count)i(=)h(count)f(+)h(1)e Fm(and)g Fl(count--)d
Fm(for)j Fl(count)g(=)291 3046 y(count)g(-)i(1)415 3146
y Fm(Notice)26 b(that)h(the)f(co)r(de)g(after)g(the)g(turnstile)h(is)e
(prett)n(y)h(m)n(uc)n(h)g(the)h(same)e(as)h(the)g(co)r(de)291
3246 y(b)r(efore)37 b(it.)68 b(Again,)40 b(w)n(e)d(ha)n(v)n(e)g(to)h
(use)f(the)i(m)n(utex)e(to)h(protect)f(access)g(to)h(the)g(shared)291
3345 y(v)-5 b(ariable)26 b Fl(count)p Fm(.)415 3445 y(T)-7
b(ragically)g(,)43 b(though,)i(this)c(co)r(de)h(is)f(not)g(quite)h
(correct.)77 b(Puzzle:)64 b(What)41 b(is)h(the)291 3544
y(problem?)p Black Black eop
%%Page: 36 42
36 41 bop Black Black Black Black eop
%%Page: 37 43
37 42 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(37)p 291 286 2865 4 v Black 291 515 a Fe(3.6.3)112
b(Reusable)38 b(barrier)e(problem)h(#1)291 669 y Fm(There)27
b(is)g(a)g(problem)g(sp)r(ot)h(at)g(Line)f(6)g(of)h(the)g(previous)e
(co)r(de.)415 768 y(If)31 b(the)g Ff(n)20 b Fd(\000)g
Fm(1th)31 b(thread)f(is)h(in)n(terrupted)f(at)g(this)h(p)r(oin)n(t,)h
(and)e(then)h(the)g Ff(n)p Fm(th)g(thread)291 868 y(comes)43
b(through)g(the)i(m)n(utex,)j(b)r(oth)c(threads)g(will)g(\014nd)g(that)
h Fl(count==n)c Fm(and)i(b)r(oth)291 967 y(threads)27
b(will)g(signal)g(the)h(turnstile.)38 b(In)28 b(fact,)f(it)i(is)e(ev)n
(en)g(p)r(ossible)h(that)g Fg(al)t(l)h Fm(the)f(threads)291
1067 y(will)f(signal)g(the)h(turnstile.)415 1167 y(If)33
b(this)f(barrier)f(isn't)h(reused,)h(then)g(m)n(ultiple)g(signals)e
(are)g(not)h(a)g(problem.)51 b(F)-7 b(or)31 b(a)291 1266
y(reusable)26 b(barrier,)g(they)i(are.)415 1366 y(Puzzle:)36
b(Fix)28 b(the)g(problem.)p Black Black eop
%%Page: 38 44
38 43 bop Black Black Black Black eop
%%Page: 39 45
39 44 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(39)p 291 286 2865 4 v Black 291 515 a Fe(3.6.4)112
b(Reusable)38 b(barrier)e(non-solution)h(#2)291 669 y
Fm(This)27 b(attempt)h(\014xes)g(the)g(previous)e(error,)g(but)i(a)f
(subtle)h(problem)f(remains.)p Black 964 843 a(Listing)g(3.9:)36
b(Reusable)28 b(barrier)d(non-solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 2921 29 v 0.9 TeXcolorgray Black
262 904 4 29 v 262 879 29 4 v 291 879 250 4 v 541 879
2616 4 v 3157 879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1004 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 29 100
v 0.9 TeXcolorgray Black 262 1004 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1004 29 100 v 0.9 TeXcolorgray
Black 3180 1004 4 100 v 415 974 a(1)83 b Fl(rendezvous)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a(3)g
Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100 v 0.9
TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(4)240 b Fl(count)m(++)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(5)g Fl(if)42 b(\(count)f(==)i(n\))g(turnstile)l(.signal)e(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(6)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1602 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 29 100
v 0.9 TeXcolorgray Black 262 1602 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1602 29 100 v 0.9 TeXcolorgray
Black 3180 1602 4 100 v 415 1572 a Fm(7)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1701 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1701 29 100
v 0.9 TeXcolorgray Black 262 1701 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1701 29 100 v 0.9 TeXcolorgray
Black 3180 1701 4 100 v 415 1671 a(8)83 b Fl(turnstile)l(.wait)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1801 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1801 29 100 v 0.9 TeXcolorgray Black 262 1801 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1801 29 100
v 0.9 TeXcolorgray Black 3180 1801 4 100 v 415 1771 a
Fm(9)83 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1901 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1901 29 100
v 0.9 TeXcolorgray Black 262 1901 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1901 29 100 v 0.9 TeXcolorgray
Black 3180 1901 4 100 v 374 1871 a Fm(10)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2000 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2000 29 100
v 0.9 TeXcolorgray Black 262 2000 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2000 29 100 v 0.9 TeXcolorgray
Black 3180 2000 4 100 v 374 1970 a(11)82 b Fl(critical)40
b(point)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2100
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2100 29 100 v 0.9 TeXcolorgray Black
262 2100 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2100 29 100 v 0.9 TeXcolorgray Black 3180 2100 4 100
v 374 2070 a Fm(12)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2199 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2199 29 100 v 0.9 TeXcolorgray Black
262 2199 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2199 29 100 v 0.9 TeXcolorgray Black 3180 2199 4 100
v 374 2170 a(13)82 b Fl(mutex)n(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2299 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2299 29 100 v 0.9 TeXcolorgray Black 262 2299 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2299 29 100
v 0.9 TeXcolorgray Black 3180 2299 4 100 v 374 2269 a
Fm(14)239 b Fl(count)m(--)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2399 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2399 29 100 v 0.9 TeXcolorgray Black
262 2399 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2399 29 100 v 0.9 TeXcolorgray Black 3180 2399 4 100
v 374 2369 a Fm(15)g Fl(if)42 b(\(count)f(==)i(0\))g(turnstile)l(.wait)
f(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2498 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2498 29 100 v 0.9 TeXcolorgray Black 262 2498 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2498 29 100
v 0.9 TeXcolorgray Black 3180 2498 4 100 v 374 2468 a
Fm(16)82 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2527 2921 29 v 0.9 TeXcolorgray
Black 262 2527 4 29 v 263 2527 29 4 v 291 2527 250 4
v 541 2527 2616 4 v 3157 2527 29 4 v 3183 2527 4 29 v
415 2648 a Fm(In)g(b)r(oth)f(cases)f(the)i(c)n(hec)n(k)e(is)i(inside)f
(the)h(m)n(utex)f(so)g(that)g(a)g(thread)g(cannot)g(b)r(e)291
2747 y(in)n(terrupted)27 b(after)g(c)n(hanging)f(the)i(coun)n(ter)f
(and)h(b)r(efore)f(c)n(hec)n(king)f(it.)415 2847 y(T)-7
b(ragically)g(,)27 b(this)h(co)r(de)g(is)g Fg(stil)t(l)h
Fm(not)f(correct.)37 b(Remem)n(b)r(er)28 b(that)g(this)h(barrier)d
(will)j(b)r(e)291 2947 y(inside)g(a)g(lo)r(op.)42 b(So,)29
b(after)g(executing)g(the)h(last)f(line,)h(eac)n(h)f(thread)g(will)g
(go)g(bac)n(k)f(to)i(the)291 3046 y(rendezv)n(ous.)415
3146 y(Puzzle:)36 b(Iden)n(tify)28 b(and)g(\014x)g(the)g(problem.)p
Black Black eop
%%Page: 40 46
40 45 bop Black Black Black Black eop
%%Page: 41 47
41 46 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(41)p 291 286 2865 4 v Black 291 515 a Fe(3.6.5)112
b(Reusable)38 b(barrier)e(hin)m(t)291 669 y Fm(As)27
b(it)h(is)g(curren)n(tly)e(written,)i(this)g(co)r(de)g(allo)n(ws)e(a)h
(preco)r(cious)f(thread)h(to)h(pass)f(through)291 768
y(the)i(second)g(m)n(utex,)h(then)g(lo)r(op)f(around)f(and)h(pass)g
(through)f(the)i(\014rst)f(m)n(utex)g(and)h(the)291 868
y(turnstile,)d(e\013ectiv)n(ely)h(getting)f(ahead)g(of)h(the)g(other)f
(threads)f(b)n(y)i(a)f(lap.)415 967 y(T)-7 b(o)27 b(solv)n(e)g(this)h
(problem)f(w)n(e)g(can)g(use)h(t)n(w)n(o)e(turnstiles.)p
Black 1095 1142 a(Listing)h(3.10:)36 b(Reusable)27 b(barrier)f(hin)n(t)
p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 2921
29 v 0.9 TeXcolorgray Black 262 1203 4 29 v 262 1178
29 4 v 291 1178 250 4 v 541 1178 2616 4 v 3157 1178 29
4 v 3183 1203 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1273 a(1)83 b Fl(Semaphore)40 b(turnstile)f(=)44
b(0;)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(2)83 b Fl(Semaphore)40 b(turnstile2)f(=)k(1;)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1502 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(3)83 b Fl(Semaphore)40 b(mutex)h(=)i(1;)p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1530 2921 29 v 0.9 TeXcolorgray
Black 262 1530 4 29 v 263 1530 29 4 v 291 1530 250 4
v 541 1530 2616 4 v 3157 1530 29 4 v 3183 1530 4 29 v
415 1652 a Fm(Initally)37 b(the)g(\014rst)g(is)g(lo)r(c)n(k)n(ed)f(and)
h(the)g(second)f(is)h(op)r(en.)65 b(When)38 b(all)e(the)i(threads)291
1751 y(arriv)n(e)21 b(at)i(the)h(\014rst,)g(w)n(e)g(lo)r(c)n(k)e(the)i
(second)f(and)g(unlo)r(c)n(k)g(the)h(\014rst.)36 b(When)24
b(all)f(the)h(threads)291 1851 y(arriv)n(e)k(at)i(the)h(second)e(w)n(e)
h(relo)r(c)n(k)f(the)i(\014rst,)f(whic)n(h)h(mak)n(es)e(it)h(safe)g
(for)g(the)h(threads)e(to)291 1950 y(lo)r(op)e(around)f(to)i(the)g(b)r
(eginning,)f(and)h(then)g(op)r(en)g(the)g(second.)p Black
Black eop
%%Page: 42 48
42 47 bop Black Black Black Black eop
%%Page: 43 49
43 48 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(43)p 291 286 2865 4 v Black 291 515 a Fe(3.6.6)112
b(Reusable)38 b(barrier)e(solution)p Black 1024 763 a
Fm(Listing)27 b(3.11:)36 b(Reusable)27 b(barrier)f(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 830 2921
29 v 0.9 TeXcolorgray Black 262 830 4 29 v 262 805 29
4 v 291 805 250 4 v 541 805 2616 4 v 3157 805 29 4 v
3183 830 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
929 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 929 29 100 v 0.9 TeXcolorgray Black
262 929 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
929 29 100 v 0.9 TeXcolorgray Black 3180 929 4 100 v
415 899 a(1)83 b Fl(rendezvous)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1029 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1029 29 100 v 0.9
TeXcolorgray Black 262 1029 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1029 29 100 v 0.9 TeXcolorgray
Black 3180 1029 4 100 v 415 999 a Fm(2)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1128 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1128 29 100
v 0.9 TeXcolorgray Black 262 1128 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1128 29 100 v 0.9 TeXcolorgray
Black 3180 1128 4 100 v 415 1099 a(3)g Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1228 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1228 29 100 v 0.9 TeXcolorgray Black 262 1228 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1228 29 100
v 0.9 TeXcolorgray Black 3180 1228 4 100 v 415 1198 a
Fm(4)240 b Fl(count)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1328 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1328 29 100 v 0.9 TeXcolorgray Black
262 1328 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1328 29 100 v 0.9 TeXcolorgray Black 3180 1328 4 100
v 415 1298 a Fm(5)g Fl(if)42 b(\(count)f(==)i(n\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1427 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1427 29 100 v 0.9 TeXcolorgray Black 262 1427 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1427 29 100
v 0.9 TeXcolorgray Black 3180 1427 4 100 v 415 1397 a
Fm(6)396 b Fl(turnstile2)l(.wait)42 b(\(\))195 b(//)43
b(lock)f(the)g(second)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1527 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1527 29 100 v 0.9 TeXcolorgray Black
262 1527 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1527 29 100 v 0.9 TeXcolorgray Black 3180 1527 4 100
v 415 1497 a Fm(7)396 b Fl(turnstile)m(.)o(signal)41
b(\(\))152 b(//)43 b(unlock)e(the)h(first)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1627 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1627 29 100
v 0.9 TeXcolorgray Black 262 1627 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1627 29 100 v 0.9 TeXcolorgray
Black 3180 1627 4 100 v 415 1597 a Fm(8)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1726 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1726 29 100 v 0.9 TeXcolorgray Black 262 1726 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1726 29 100
v 0.9 TeXcolorgray Black 3180 1726 4 100 v 415 1696 a
Fm(9)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1826 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1826 29 100 v 0.9 TeXcolorgray Black 262 1826 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1826 29 100
v 0.9 TeXcolorgray Black 3180 1826 4 100 v 374 1796 a(10)82
b Fl(turnstile)l(.wait)41 b(\(\))553 b(//)43 b(first)e(turnstile)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1925 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1925 29 100 v 0.9 TeXcolorgray Black 262 1925 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1925 29 100
v 0.9 TeXcolorgray Black 3180 1925 4 100 v 374 1896 a
Fm(11)82 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2025 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2025 29 100
v 0.9 TeXcolorgray Black 262 2025 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2025 29 100 v 0.9 TeXcolorgray
Black 3180 2025 4 100 v 374 1995 a Fm(12)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2125 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2125 29 100
v 0.9 TeXcolorgray Black 262 2125 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2125 29 100 v 0.9 TeXcolorgray
Black 3180 2125 4 100 v 374 2095 a(13)82 b Fl(critical)40
b(point)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2224
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2224 29 100 v 0.9 TeXcolorgray Black
262 2224 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2224 29 100 v 0.9 TeXcolorgray Black 3180 2224 4 100
v 374 2194 a Fm(14)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2324 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2324 29 100 v 0.9 TeXcolorgray Black
262 2324 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2324 29 100 v 0.9 TeXcolorgray Black 3180 2324 4 100
v 374 2294 a(15)82 b Fl(mutex)n(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2424 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2424 29 100 v 0.9 TeXcolorgray Black 262 2424 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2424 29 100
v 0.9 TeXcolorgray Black 3180 2424 4 100 v 374 2394 a
Fm(16)239 b Fl(count)m(--)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2523 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2523 29 100 v 0.9 TeXcolorgray Black
262 2523 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2523 29 100 v 0.9 TeXcolorgray Black 3180 2523 4 100
v 374 2493 a Fm(17)g Fl(if)42 b(\(count)f(==)i(0\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2623 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2623 29 100 v 0.9 TeXcolorgray Black 262 2623 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2623 29 100
v 0.9 TeXcolorgray Black 3180 2623 4 100 v 374 2593 a
Fm(18)395 b Fl(turnstile)m(.)o(wait)42 b(\(\))239 b(//)43
b(lock)f(the)g(first)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2722 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2722 29 100 v 0.9 TeXcolorgray Black
262 2722 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2722 29 100 v 0.9 TeXcolorgray Black 3180 2722 4 100
v 374 2693 a Fm(19)395 b Fl(signal)42 b(\()o(turnstile2)l(\))152
b(//)43 b(unlock)e(the)h(second)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 2822 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 2822 29 100 v 0.9
TeXcolorgray Black 262 2822 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2822 29 100 v 0.9 TeXcolorgray
Black 3180 2822 4 100 v 374 2792 a Fm(20)82 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2922 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2922 29 100 v 0.9 TeXcolorgray Black 262 2922 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2922 29 100
v 0.9 TeXcolorgray Black 3180 2922 4 100 v 374 2892 a
Fm(21)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3021 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3021 29 100 v 0.9 TeXcolorgray Black 262 3021 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3021 29 100
v 0.9 TeXcolorgray Black 3180 3021 4 100 v 374 2991 a(22)82
b Fl(wait)42 b(\()o(turnstile2)l(\))553 b(//)43 b(second)e(turnstile)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3121 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3121 29 100 v 0.9 TeXcolorgray Black 262 3121 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3121 29 100
v 0.9 TeXcolorgray Black 3180 3121 4 100 v 374 3091 a
Fm(23)82 b Fl(signal)41 b(\()o(turnstile2)l(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 262 3149 2921 29 v 0.9
TeXcolorgray Black 262 3149 4 29 v 263 3149 29 4 v 291
3149 250 4 v 541 3149 2616 4 v 3157 3149 29 4 v 3183
3149 4 29 v 415 3286 a Fm(This)33 b(example)f(is,)h(unfortunately)-7
b(,)34 b(t)n(ypical)e(of)g(man)n(y)g(sync)n(hronization)f(problems:)291
3385 y(it)f(is)h(v)n(ery)e(di\016cult)i(to)f(b)r(e)h(sure)e(that)i(a)f
(solution)g(is)g(correct.)44 b(Often)30 b(there)g(is)h(a)f(subtle)291
3485 y(w)n(a)n(y)c(that)i(a)f(particular)f(path)i(through)f(the)h
(program)d(can)j(cause)e(an)i(error.)415 3590 y(T)-7
b(o)35 b(mak)n(e)g(matters)g(w)n(orse,)h(testing)g(an)f(implemen)n
(tation)h(of)f(the)h(program)d(is)j(not)291 3689 y(m)n(uc)n(h)k(help.)
78 b(The)41 b(error)e(migh)n(t)i(o)r(ccur)g(v)n(ery)e(rarely)h(b)r
(ecause)h(the)g(particular)f(path)291 3789 y(that)e(causes)f(it)i(migh)
n(t)f(require)f(a)h(sp)r(ectacularly)f(unluc)n(ky)h(com)n(bination)f
(of)h(circum-)291 3889 y(stances.)h(Suc)n(h)29 b(errors)d(are)i(almost)
g(imp)r(ossible)h(to)f(repro)r(duce)g(and)g(debug)h(b)n(y)f(con)n(v)n
(en-)291 3988 y(tional)f(means.)415 4093 y(The)h(only)f(alternativ)n(e)
g(is)h(to)f(examine)h(the)g(co)r(de)g(carefully)f(and)g(\\pro)n(v)n(e")
f(that)i(it)g(is)291 4193 y(correct.)55 b(I)35 b(put)g(\\pro)n(v)n(e")c
(in)k(quotation)f(marks)f(b)r(ecause)h(I)g(don't)h(mean,)g(necessarily)
-7 b(,)291 4292 y(that)23 b(y)n(ou)f(ha)n(v)n(e)f(to)i(write)g(a)f
(formal)g(pro)r(of)h(\(although)f(there)h(are)e(zealots)h(who)h
(encourage)291 4392 y(suc)n(h)k(lunacy\).)415 4497 y(The)i(kind)g(of)g
(pro)r(of)f(I)h(ha)n(v)n(e)f(in)h(mind)g(is)g(more)f(informal.)40
b(W)-7 b(e)29 b(can)f(tak)n(e)g(adv)-5 b(an)n(tage)291
4596 y(of)29 b(the)i(structure)e(of)h(the)g(co)r(de,)h(and)f(the)g
(idioms)g(w)n(e)f(ha)n(v)n(e)g(dev)n(elop)r(ed,)h(to)g(assert,)f(and)
291 4696 y(then)36 b(demonstrate,)h(a)f(n)n(um)n(b)r(er)f(of)h(in)n
(termediate-lev)n(el)e(claims)i(ab)r(out)g(the)g(program.)291
4795 y(F)-7 b(or)27 b(example:)p Black 392 4998 a(1.)p
Black 41 w(Only)g(the)h Ff(n)p Fm(th)g(thread)f(can)h(lo)r(c)n(k)f(or)f
(unlo)r(c)n(k)h(the)h(turnstiles.)p Black Black eop
%%Page: 44 50
44 49 bop Black 739 252 a Fo(44)1482 b(Basic)32 b(sync)m(hronization)h
(patterns)p 739 286 2865 4 v Black Black 840 515 a Fm(2.)p
Black 41 w(Before)d(a)g(thread)g(can)h(unlo)r(c)n(k)f(the)h(\014rst)f
(turnstile,)i(it)f(has)f(to)g(close)g(the)h(second,)946
615 y(and)j(vice)f(v)n(ersa;)i(therefore)e(it)h(is)g(imp)r(ossible)g
(for)f(one)g(thread)g(to)h(get)f(ahead)g(of)946 715 y(the)28
b(others)f(b)n(y)h(more)e(than)i(one)f(turnstile.)863
897 y(By)g(\014nding)g(the)h(righ)n(t)e(kinds)h(of)g(statemen)n(ts)g
(to)g(assert)f(and)h(pro)n(v)n(e,)e(y)n(ou)h(can)h(some-)739
997 y(times)c(\014nd)g(a)g(concise)f(w)n(a)n(y)f(to)i(con)n(vince)f(y)n
(ourself)f(\(or)h(a)h(sk)n(eptical)f(colleague\))f(that)i(y)n(our)739
1096 y(co)r(de)k(is)h(bulletpro)r(of.)739 1329 y Fe(3.6.7)112
b(Barrier)36 b(ob)6 b(jects)739 1482 y Fm(It)42 b(is)g(natural)f(to)h
(encapsulate)g(a)f(barrier)g(in)h(an)g(ob)5 b(ject.)80
b(The)42 b(instance)g(v)-5 b(ariables)739 1582 y(are)32
b Fl(n)p Fm(,)j(the)f(n)n(um)n(b)r(er)f(of)g(threads)g(that)h(ha)n(v)n
(e)e(to)h(arriv)n(e,)g(and)h Fl(count)p Fm(,)f Fl(turnstile)c
Fm(and)739 1681 y Fl(turnstile2)p Fm(.)863 1781 y(Here)f(is)f(the)h(co)
r(de)g(to)f(initialize)h(and)f(use)h(a)f Fl(Barrier)e
Fm(ob)5 b(ject:)p Black 1631 1955 a(Listing)27 b(3.12:)36
b(Barrier)25 b(in)n(terface)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2017 2921 29 v 0.9 TeXcolorgray
Black 711 2017 4 29 v 711 1992 29 4 v 739 1992 250 4
v 989 1992 2616 4 v 3605 1992 29 4 v 3631 2017 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 739 2116 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2116 29 100 v 0.9 TeXcolorgray Black 711 2116 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2116 29 100
v 0.9 TeXcolorgray Black 3628 2116 4 100 v 863 2086 a(1)83
b Fl(Barrier)41 b(barrier)f(=)k(12)265 b(//)42 b(initialize)e(a)j(new)f
(barrier)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2216
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 711 2216 29 100 v 0.9 TeXcolorgray Black
711 2216 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2216 29 100 v 0.9 TeXcolorgray Black 3628 2216 4 100
v 863 2186 a Fm(2)83 b Fl(barrier)m(.wait)42 b(\(\))483
b(//)42 b(wait)g(at)h(a)g(barrier)p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2244 2921 29 v 0.9 TeXcolorgray
Black 711 2244 4 29 v 712 2244 29 4 v 739 2244 250 4
v 989 2244 2616 4 v 3605 2244 29 4 v 3631 2244 4 29 v
863 2365 a Fm(In)24 b(this)h(case)e(the)h(\014rst)f(11)g(threads)h
(will)g(blo)r(c)n(k)f(when)h(they)g(in)n(v)n(ok)n(e)e
Fl(wait)p Fm(.)34 b(When)25 b(the)739 2465 y(12th)32
b(thread)h(arriv)n(es,)f(all)h(threads)f(un)n(blo)r(c)n(k.)52
b(If)34 b(the)f(barrier)e(ob)5 b(ject)33 b(is)g(implemen)n(ted)739
2565 y(using)j(the)h(co)r(de)g(in)g(Section)73 b(3.5.4,)38
b(the)f(barrier)e(ob)5 b(ject)36 b(will)h(b)r(e)g(reusable;)j(that)d
(is,)739 2664 y(after)25 b(the)g(\014rst)g(batc)n(h)g(of)h(12)e(thread)
h(pass,)g(the)g(next)h(batc)n(h)f(has)f(to)i(w)n(ait)e(un)n(til)i(the)g
(24th)739 2764 y(thread)h(arriv)n(es.)739 2996 y Fe(3.6.8)112
b(Kingmak)m(er)739 3150 y Fm(As)39 b(threads)f(pass)g(a)g(barrier,)i
(it)f(is)g(sometimes)f(useful)i(to)e(assign)g(iden)n(ti\014ers)g(to)h
(the)739 3249 y(threads)33 b(or)f(to)i(c)n(ho)r(ose)e(one)h(of)h(them)g
(to)g(p)r(erform)f(a)g(sp)r(ecial)g(function.)55 b(The)34
b(coun)n(ter)739 3349 y(inside)28 b(the)g(barrier)d(pro)n(vides)i(an)g
(ob)n(vious)f(w)n(a)n(y)g(to)i(solv)n(e)e(this)i(problem.)863
3448 y(All)f(w)n(e)f(need)g(is)g(the)g(abilit)n(y)g(to)g(store)f(a)h(v)
-5 b(alue)26 b(in)g(eac)n(h)g(thread.)36 b(F)-7 b(or)25
b(example,)h(eac)n(h)739 3548 y(thread)e(migh)n(t)g(ha)n(v)n(e)g(a)g(v)
-5 b(ariable)23 b(named)h Fl(threadNum)d Fm(that)k(records)e(a)h
(di\013eren)n(t)g(n)n(um)n(b)r(er)739 3648 y(for)31 b(eac)n(h)f
(thread.)48 b(This)32 b(kind)f(of)h(v)-5 b(ariable)30
b(is)i(called)f(a)g Fo(thread)37 b(v)-5 b(ariable)31
b Fm(or)g(a)g Fo(lo)s(cal)739 3747 y(v)-5 b(ariable)28
b Fm(to)f(distinguish)h(it)g(from)f(the)h(shared)f(v)-5
b(ariables)26 b(w)n(e)h(ha)n(v)n(e)g(b)r(een)h(using.)863
3847 y(The)d(follo)n(wing)f(example)g(assigns)f(a)h(di\013eren)n(t)h
(in)n(teger)e(to)i(eac)n(h)e(thread)h(that)h(passes.)739
3947 y(Here)i(are)g(the)h(v)-5 b(ariable)26 b(declarations:)p
Black 1487 4121 a(Listing)i(3.13:)35 b(Kingmak)n(er)26
b(initialization)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4182 2921 29 v 0.9 TeXcolorgray Black 711 4182 4
29 v 711 4157 29 4 v 739 4157 250 4 v 989 4157 2616 4
v 3605 4157 29 4 v 3631 4182 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 739 4282 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 4282 29 100
v 0.9 TeXcolorgray Black 711 4282 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 4282 29 100 v 0.9 TeXcolorgray
Black 3628 4282 4 100 v 863 4252 a(1)83 b Fl(Semaphore)40
b(mutex)h(=)j(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
4382 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4382 29 100 v 0.9 TeXcolorgray Black
711 4382 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4382 29 100 v 0.9 TeXcolorgray Black 3628 4382 4 100
v 863 4352 a Fm(2)83 b Fl(int)42 b(count)g(=)h(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 4481 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4481 29 100 v 0.9 TeXcolorgray Black 711 4481 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4481 29 100
v 0.9 TeXcolorgray Black 3628 4481 4 100 v 863 4451 a
Fm(3)83 b Fl(local)41 b(int)i(threadNum)p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4510 2921 29 v 0.9 TeXcolorgray
Black 711 4510 4 29 v 712 4510 29 4 v 739 4510 250 4
v 989 4510 2616 4 v 3605 4510 29 4 v 3631 4510 4 29 v
Black Black eop
%%Page: 45 51
45 50 bop Black 291 252 a Fo(3.6)30 b(Reusable)h(barrier)1920
b(45)p 291 286 2865 4 v Black 415 515 a Fm(And)28 b(here)f(is)h(the)g
(co)r(de:)p Black 1186 690 a(Listing)f(3.14:)36 b(Kingmak)n(er)25
b(co)r(de)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262
751 2921 29 v 0.9 TeXcolorgray Black 262 751 4 29 v 262
726 29 4 v 291 726 250 4 v 541 726 2616 4 v 3157 726
29 4 v 3183 751 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 851 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 851 29 100 v 0.9 TeXcolorgray Black
262 851 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
851 29 100 v 0.9 TeXcolorgray Black 3180 851 4 100 v
415 821 a(1)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 950 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 950 29 100 v 0.9 TeXcolorgray Black 262 950 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 950 29 100 v
0.9 TeXcolorgray Black 3180 950 4 100 v 415 920 a Fm(2)240
b Fl(count)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1050 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1050 29 100 v 0.9 TeXcolorgray Black
262 1050 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1050 29 100 v 0.9 TeXcolorgray Black 3180 1050 4 100
v 415 1020 a Fm(3)g Fl(threadNum)39 b(=)44 b(count)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1150 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1150 29 100 v 0.9 TeXcolorgray Black 262 1150 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1150 29 100
v 0.9 TeXcolorgray Black 3180 1150 4 100 v 415 1120 a
Fm(4)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1178 2921 29 v 0.9 TeXcolorgray
Black 262 1178 4 29 v 263 1178 29 4 v 291 1178 250 4
v 541 1178 2616 4 v 3157 1178 29 4 v 3183 1178 4 29 v
415 1299 a Fm(Because)d Fl(count)e Fm(is)j(a)f(shared)g(v)-5
b(ariable,)41 b(an)n(y)d(thread)g(can)g(incremen)n(t)h(it)g(and)f(all)
291 1399 y(threads)d(see)g(the)h(c)n(hanged)f(v)-5 b(alue.)62
b(On)36 b(the)g(other)f(hand,)j(when)e(a)g(thread)f(assigns)f(a)291
1498 y(v)-5 b(alue)34 b(to)g Fl(threadNum)p Fm(,)e(only)i(the)h(lo)r
(cal)e(v)n(ersion)g(of)h Fl(threadNum)d Fm(c)n(hanges.)55
b(The)34 b(other)291 1598 y(threads)26 b(are)h(una\013ected.)p
Black Black eop
%%Page: 46 52
46 51 bop Black Black Black Black eop
%%Page: 47 53
47 52 bop Black Black 291 1139 a Fi(Chapter)64 b(4)291
1555 y Fk(Classical)75 b(sync)-6 b(hronization)291 1804
y(problems)291 2237 y Fm(In)39 b(this)g(c)n(hapter)f(w)n(e)g(will)i
(examine)e(three)h(problems)f(that)h(are)f(a)h(standard)f(part)g(of)291
2337 y(nearly)33 b(ev)n(ery)f(op)r(erating)h(systems)h(class.)55
b(They)33 b(are)g(usually)h(presen)n(ted)f(in)h(terms)g(of)291
2436 y(real-w)n(orld)27 b(problems,)i(so)g(that)h(the)g(statemen)n(t)g
(of)f(the)h(problem)f(is)h(clear)e(and)i(so)f(that)291
2536 y(studen)n(ts)e(can)g(bring)g(their)h(in)n(tuition)g(to)g(b)r
(ear.)415 2637 y(F)-7 b(or)19 b(the)g(most)g(part,)h(though,)h(these)e
(problems)f(do)h(not)g(happ)r(en)g(in)h(the)f(real)f(w)n(orld,)i(or)291
2736 y(if)i(they)h(do,)g(the)f(real-w)n(orld)e(solutions)i(are)f(not)h
(m)n(uc)n(h)g(lik)n(e)g(the)g(kind)h(of)f(sync)n(hronization)291
2836 y(co)r(de)27 b(w)n(e)g(are)g(w)n(orking)f(with.)415
2937 y(The)33 b(reason)d(w)n(e)j(are)e(in)n(terested)h(in)h(these)f
(problems)g(is)g(that)h(they)g(are)e(analogous)291 3036
y(to)h(common)h(problems)f(that)h(op)r(erating)e(systems)i(\(and)g
(some)f(applications\))g(need)h(to)291 3136 y(solv)n(e.)53
b(F)-7 b(or)34 b(eac)n(h)e(classical)h(problem)g(I)h(will)f(presen)n(t)
g(the)i(classical)d(form)n(ulation,)i(and)291 3236 y(also)26
b(explain)h(the)h(analogy)e(to)i(the)g(corresp)r(onding)d(OS)j
(problem.)291 3516 y Fh(4.1)135 b(Pro)t(ducer-consumer)44
b(problem)291 3700 y Fm(In)22 b(m)n(ultithreaded)h(programs)d(there)i
(is)g(often)h(a)f(division)g(of)g(lab)r(or)g(b)r(et)n(w)n(een)g
(threads.)35 b(In)291 3800 y(one)21 b(common)f(pattern,)j(some)e
(threads)f(are)h(pro)r(ducers)f(and)h(some)g(are)f(consumers.)34
b(Pro-)291 3899 y(ducers)27 b(create)f(items)i(of)g(some)f(kind)h(and)f
(add)h(them)g(to)f(a)h(data)f(structure;)g(consumers)291
3999 y(remo)n(v)n(e)e(the)j(items)g(and)g(pro)r(cess)e(them.)415
4100 y(Ev)n(en)n(t-driv)n(en)j(programs)g(are)h(a)h(go)r(o)r(d)g
(example.)47 b(An)31 b(\\ev)n(en)n(t")f(is)h(something)g(that)291
4199 y(happ)r(ens)26 b(that)h(requires)e(the)i(program)e(to)h(resp)r
(ond:)36 b(the)27 b(user)f(presses)f(a)i(k)n(ey)f(or)f(mo)n(v)n(es)291
4299 y(the)38 b(mouse,)j(a)d(blo)r(c)n(k)g(of)h(data)f(arriv)n(es)e
(from)i(the)h(disk,)i(a)e(pac)n(k)n(et)e(arriv)n(es)f(from)j(the)291
4399 y(net)n(w)n(ork,)26 b(a)h(p)r(ending)h(op)r(eration)e(completes.)
415 4499 y(Whenev)n(er)32 b(an)h(ev)n(en)n(t)f(o)r(ccurs,)h(a)f(pro)r
(ducer)g(thread)g(creates)g(an)g(ev)n(en)n(t)h(ob)5 b(ject)32
b(and)291 4599 y(adds)k(it)g(to)h(the)g(ev)n(en)n(t)e(bu\013er.)64
b(Concurren)n(tly)-7 b(,)37 b(consumer)f(threads)g(tak)n(e)f(ev)n(en)n
(ts)h(out)291 4698 y(of)c(the)h(bu\013er)g(and)g(pro)r(cess)e(them.)53
b(In)32 b(this)h(case,)g(the)h(consumers)d(are)h(called)g(\\ev)n(en)n
(t)291 4798 y(handlers.")415 4899 y(There)39 b(are)f(sev)n(eral)f(sync)
n(hronization)g(constrain)n(ts)h(that)h(w)n(e)g(need)g(to)g(enforce)f
(to)291 4998 y(mak)n(e)26 b(this)i(system)g(w)n(ork)e(correctly:)p
Black Black eop
%%Page: 48 54
48 53 bop Black 739 252 a Fo(48)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black Black
863 515 a Fd(\017)p Black 41 w Fm(While)28 b(an)e(item)i(is)e(b)r(eing)
h(added)g(to)f(or)g(remo)n(v)n(ed)f(from)i(the)g(bu\013er,)g(the)g
(bu\013er)g(is)946 615 y(in)h(an)e(inconsisten)n(t)h(state.)36
b(Therefore,)26 b(threads)g(m)n(ust)h(ha)n(v)n(e)f(exclusiv)n(e)g
(access)f(to)946 715 y(the)j(bu\013er.)p Black 863 881
a Fd(\017)p Black 41 w Fm(If)35 b(a)e(consumer)f(thread)i(arriv)n(es)d
(while)j(the)g(bu\013er)g(is)f(empt)n(y)-7 b(,)36 b(it)e(blo)r(c)n(ks)f
(un)n(til)h(a)946 980 y(pro)r(ducer)27 b(adds)g(a)h(new)f(item.)863
1163 y(Assume)h(that)g(pro)r(ducers)e(p)r(erform)h(the)h(follo)n(wing)f
(op)r(erations)f(o)n(v)n(er)g(and)i(o)n(v)n(er:)p Black
1582 1337 a(Listing)g(4.1:)36 b(Basic)26 b(pro)r(ducer)h(co)r(de)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1399 2921
29 v 0.9 TeXcolorgray Black 711 1399 4 29 v 711 1374
29 4 v 739 1374 250 4 v 989 1374 2616 4 v 3605 1374 29
4 v 3631 1399 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1498 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1498 29 100 v 0.9 TeXcolorgray Black
711 1498 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1498 29 100 v 0.9 TeXcolorgray Black 3628 1498 4 100
v 863 1468 a(1)83 b Fl(event)41 b(=)j(waitForEvent)38
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1598 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1598 29 100 v 0.9 TeXcolorgray Black 711 1598 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1598 29 100
v 0.9 TeXcolorgray Black 3628 1598 4 100 v 863 1568 a
Fm(2)83 b Fl(addEventToBuffer)37 b(\(event)m(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 1626 2921 29 v 0.9
TeXcolorgray Black 711 1626 4 29 v 712 1626 29 4 v 739
1626 250 4 v 989 1626 2616 4 v 3605 1626 29 4 v 3631
1626 4 29 v 863 1747 a Fm(Also,)28 b(assume)f(that)h(consumers)e(p)r
(erform)h(the)h(follo)n(wing)f(op)r(erations:)p Black
1572 1922 a(Listing)g(4.2:)36 b(Basic)27 b(consumer)g(co)r(de)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1983 2921
29 v 0.9 TeXcolorgray Black 711 1983 4 29 v 711 1958
29 4 v 739 1958 250 4 v 989 1958 2616 4 v 3605 1958 29
4 v 3631 1983 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 2083 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2083 29 100 v 0.9 TeXcolorgray Black
711 2083 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2083 29 100 v 0.9 TeXcolorgray Black 3628 2083 4 100
v 863 2053 a(1)83 b Fl(event)41 b(=)j(getEventFromBuf)o(fer)37
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2182 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2182 29 100 v 0.9 TeXcolorgray Black 711 2182 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2182 29 100
v 0.9 TeXcolorgray Black 3628 2182 4 100 v 863 2152 a
Fm(2)83 b Fl(processEvent)39 b(\()o(event)n(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 2211 2921 29 v 0.9
TeXcolorgray Black 711 2211 4 29 v 712 2211 29 4 v 739
2211 250 4 v 989 2211 2616 4 v 3605 2211 29 4 v 3631
2211 4 29 v 863 2332 a Fm(As)27 b(sp)r(eci\014ed)g(ab)r(o)n(v)n(e,)f
(the)h(bu\013er)g(op)r(erations)f(ha)n(v)n(e)g(to)g(b)r(e)i(p)r
(erformed)e(sequen)n(tially)-7 b(,)739 2431 y(but)28
b Fl(waitForEvent)23 b Fm(and)k Fl(processEvent)c Fm(can)k(run)h
(concurren)n(tly)-7 b(.)863 2531 y(Puzzle:)34 b(Add)24
b(sync)n(hronization)d(statemen)n(ts)h(to)h(the)g(pro)r(ducer)f(and)h
(consumer)e(co)r(de)739 2631 y(to)27 b(enforce)g(the)h(sync)n
(hronization)e(constrain)n(ts.)p Black Black eop
%%Page: 49 55
49 54 bop Black 291 252 a Fo(4.1)30 b(Pro)s(ducer-consumer)h(problem)
1423 b(49)p 291 286 2865 4 v Black 291 515 a Fe(4.1.1)112
b(Pro)s(ducer-consumer)37 b(hin)m(t)291 669 y Fm(Here)27
b(are)f(the)i(v)-5 b(ariables)27 b(y)n(ou)g(migh)n(t)g(w)n(an)n(t)g(to)
g(use:)p Black 908 843 a(Listing)g(4.3:)36 b(Pro)r(ducer-consumer)25
b(initialization)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 904 2921 29 v 0.9 TeXcolorgray Black 262 904 4 29
v 262 879 29 4 v 291 879 250 4 v 541 879 2616 4 v 3157
879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)83 b Fl(Semaphore)40 b(length)h(=)i(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(3)83 b Fl(local)41
b(Event)h(event)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262
1231 2921 29 v 0.9 TeXcolorgray Black 262 1231 4 29 v
263 1231 29 4 v 291 1231 250 4 v 541 1231 2616 4 v 3157
1231 29 4 v 3183 1231 4 29 v 415 1353 a Fm(Not)19 b(surprisingly)-7
b(,)20 b Fl(mutex)d Fm(pro)n(vides)h(exclusiv)n(e)g(access)g(to)h(the)g
(bu\013er.)35 b(When)19 b Fl(length)291 1452 y Fm(is)28
b(p)r(ositiv)n(e,)h(it)g(indicates)f(the)i(n)n(um)n(b)r(er)e(of)h
(items)g(in)g(the)g(bu\013er.)40 b(When)29 b(it)g(is)g(negativ)n(e,)291
1552 y(it)f(indicates)f(the)h(n)n(um)n(b)r(er)f(of)h(consumer)f
(threads)f(in)i(queue.)415 1652 y Fl(event)e Fm(is)i(a)f(lo)r(cal)g(v)
-5 b(ariable)27 b(\(eac)n(h)h(thread)f(has)g(its)h(o)n(wn)f(v)-5
b(ariable)27 b(with)i(this)f(name\).)291 1751 y(Let's)f(assume)g(that)h
(capital-E)e Fl(Event)g Fm(is)h(some)g(t)n(yp)r(e)h(of)g(ob)5
b(ject.)p Black Black eop
%%Page: 50 56
50 55 bop Black Black Black Black eop
%%Page: 51 57
51 56 bop Black 291 252 a Fo(4.1)30 b(Pro)s(ducer-consumer)h(problem)
1423 b(51)p 291 286 2865 4 v Black 291 515 a Fe(4.1.2)112
b(Pro)s(ducer-consumer)37 b(solution)291 669 y Fm(Here)27
b(is)g(the)h(pro)r(ducer)f(co)r(de)g(from)h(m)n(y)f(solution.)p
Black 1178 841 a(Listing)g(4.4:)36 b(Pro)r(ducer)26 b(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 901 2921
29 v 0.9 TeXcolorgray Black 262 901 4 29 v 262 876 29
4 v 291 876 250 4 v 541 876 2616 4 v 3157 876 29 4 v
3183 901 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1001 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1001 29 100 v 0.9 TeXcolorgray Black
262 1001 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1001 29 100 v 0.9 TeXcolorgray Black 3180 1001 4 100
v 415 971 a(1)83 b Fl(event)41 b(=)i(waitForEvent)c(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1101 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1101 29 100 v 0.9 TeXcolorgray Black 262 1101 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1101 29 100
v 0.9 TeXcolorgray Black 3180 1101 4 100 v 415 1071 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1200 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1200 29 100
v 0.9 TeXcolorgray Black 262 1200 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1200 29 100 v 0.9 TeXcolorgray
Black 3180 1200 4 100 v 415 1170 a Fm(3)240 b Fl(addEventToBuffe)o(r)38
b(\()o(event)n(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1300 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1300 29 100 v 0.9 TeXcolorgray Black
262 1300 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1300 29 100 v 0.9 TeXcolorgray Black 3180 1300 4 100
v 415 1270 a Fm(4)240 b Fl(length)m(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1399 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1399 29 100 v 0.9 TeXcolorgray Black 262 1399 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1399 29 100
v 0.9 TeXcolorgray Black 3180 1399 4 100 v 415 1370 a
Fm(5)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1428 2921 29 v 0.9 TeXcolorgray
Black 262 1428 4 29 v 263 1428 29 4 v 291 1428 250 4
v 541 1428 2616 4 v 3157 1428 29 4 v 3183 1428 4 29 v
415 1547 a Fm(The)28 b(pro)r(ducer)f(do)r(esn't)h(ha)n(v)n(e)e(to)i
(get)f(exclusiv)n(e)g(access)g(to)g(the)h(bu\013er)g(un)n(til)g(it)g
(gets)291 1647 y(an)f(ev)n(en)n(t.)36 b(Sev)n(eral)26
b(threads)h(can)h(run)f Fl(waitForEvent)c Fm(concurren)n(tly)-7
b(.)415 1747 y(The)37 b Fl(length)c Fm(semaphore)i(k)n(eeps)h(trac)n(k)
f(of)i(the)f(n)n(um)n(b)r(er)g(of)h(items)f(in)h(the)g(bu\013er.)291
1846 y(Eac)n(h)22 b(time)i(the)g(pro)r(ducer)f(adds)g(an)g(item,)i(it)f
(signals)f Fl(length)p Fm(,)f(incremen)n(ting)h(it)h(b)n(y)f(one.)415
1946 y(The)28 b(consumer)e(co)r(de)i(is)f(similar.)p
Black 1161 2118 a(Listing)g(4.5:)36 b(Consumer)27 b(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2179 2921
29 v 0.9 TeXcolorgray Black 262 2179 4 29 v 262 2154
29 4 v 291 2154 250 4 v 541 2154 2616 4 v 3157 2154 29
4 v 3183 2179 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2278 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2278 29 100 v 0.9 TeXcolorgray Black
262 2278 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2278 29 100 v 0.9 TeXcolorgray Black 3180 2278 4 100
v 415 2248 a(1)83 b Fl(length)m(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2378 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2378 29 100 v 0.9 TeXcolorgray Black 262 2378 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2378 29 100
v 0.9 TeXcolorgray Black 3180 2378 4 100 v 415 2348 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2477 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2477 29 100
v 0.9 TeXcolorgray Black 262 2477 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2477 29 100 v 0.9 TeXcolorgray
Black 3180 2477 4 100 v 415 2448 a Fm(3)240 b Fl(event)41
b(=)i(getEventFromBuffe)o(r)37 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2577 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2577 29 100
v 0.9 TeXcolorgray Black 262 2577 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2577 29 100 v 0.9 TeXcolorgray
Black 3180 2577 4 100 v 415 2547 a Fm(4)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2677 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2677 29 100 v 0.9 TeXcolorgray Black 262 2677 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2677 29 100
v 0.9 TeXcolorgray Black 3180 2677 4 100 v 415 2647 a
Fm(5)83 b Fl(processEvent)38 b(\(event)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2705 2921 29 v 0.9 TeXcolorgray
Black 262 2705 4 29 v 263 2705 29 4 v 291 2705 250 4
v 541 2705 2616 4 v 3157 2705 29 4 v 3183 2705 4 29 v
415 2825 a Fm(Again,)22 b(the)f(bu\013er)g(op)r(eration)f(is)h
(protected)f(b)n(y)h(a)f(m)n(utex,)j(but)e(b)r(efore)g(the)g(consumer)
291 2924 y(gets)d(to)i(it,)h(it)f(has)f(to)g(decremen)n(t)g
Fl(length)p Fm(.)32 b(If)19 b Fl(length)e Fm(is)i(zero)g(or)f(negativ)n
(e,)i(the)g(pro)r(ducer)291 3024 y(blo)r(c)n(ks)26 b(un)n(til)i(a)g
(consumer)e(signals.)415 3123 y(Although)g(this)h(solution)e(is)h
(correct,)g(there)g(is)g(an)f(opp)r(ortunit)n(y)h(to)g(mak)n(e)g(one)f
(small)291 3223 y(impro)n(v)n(emen)n(t)30 b(to)j(its)f(p)r(erformance.)
49 b(Imagine)32 b(that)g(there)g(is)g(at)g(least)g(one)g(consumer)291
3323 y(in)26 b(queue)g(when)h(a)e(pro)r(ducer)h(signals)f
Fl(length)p Fm(.)34 b(If)26 b(the)h(sc)n(heduler)e(allo)n(ws)g(the)i
(consumer)291 3422 y(to)i(run,)h(what)g(happ)r(ens)f(next?)43
b(It)30 b(immediately)g(blo)r(c)n(ks)f(on)g(the)h(m)n(utex)g(that)g(is)
f(\(still\))291 3522 y(held)e(b)n(y)h(the)g(pro)r(ducer.)415
3622 y(Blo)r(c)n(king)34 b(and)h(w)n(aking)f(up)h(are)f(mo)r(derately)h
(exp)r(ensiv)n(e)f(op)r(erations;)k(p)r(erforming)291
3721 y(them)j(unnecessarily)e(can)i(impair)f(the)h(p)r(erformance)f(of)
g(a)h(program.)74 b(So)40 b(it)h(w)n(ould)291 3821 y(probably)26
b(b)r(e)i(b)r(etter)g(to)g(rearrange)c(the)k(pro)r(ducer)f(lik)n(e)g
(this:)p Black 998 3993 a(Listing)h(4.6:)36 b(Impro)n(v)n(ed)26
b(pro)r(ducer)h(solution)p Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 4054 2921 29 v 0.9 TeXcolorgray Black
262 4054 4 29 v 262 4029 29 4 v 291 4029 250 4 v 541
4029 2616 4 v 3157 4029 29 4 v 3183 4054 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4153 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4153 29 100
v 0.9 TeXcolorgray Black 262 4153 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4153 29 100 v 0.9 TeXcolorgray
Black 3180 4153 4 100 v 415 4123 a(1)83 b Fl(event)41
b(=)i(waitForEvent)c(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 4253 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4253 29 100 v 0.9 TeXcolorgray Black
262 4253 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
4253 29 100 v 0.9 TeXcolorgray Black 3180 4253 4 100
v 415 4223 a Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4352 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4352 29 100 v 0.9 TeXcolorgray Black 262 4352 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4352 29 100
v 0.9 TeXcolorgray Black 3180 4352 4 100 v 415 4323 a
Fm(3)240 b Fl(addEventToBuffe)o(r)38 b(\()o(event)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4452 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4452 29 100 v 0.9 TeXcolorgray Black 262 4452 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4452 29 100
v 0.9 TeXcolorgray Black 3180 4452 4 100 v 415 4422 a
Fm(4)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4552 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4552 29 100
v 0.9 TeXcolorgray Black 262 4552 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4552 29 100 v 0.9 TeXcolorgray
Black 3180 4552 4 100 v 415 4522 a Fm(5)83 b Fl(length)m(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4580 2921
29 v 0.9 TeXcolorgray Black 262 4580 4 29 v 263 4580
29 4 v 291 4580 250 4 v 541 4580 2616 4 v 3157 4580 29
4 v 3183 4580 4 29 v 415 4700 a Fm(No)n(w)30 b(w)n(e)h(don't)g(b)r
(other)f(un)n(blo)r(c)n(king)g(a)h(consumer)e(un)n(til)j(w)n(e)e(kno)n
(w)g(it)h(can)g(pro)r(ceed)291 4799 y(\(except)c(in)h(the)g(rare)e
(case)h(that)h(another)f(pro)r(ducer)f(b)r(eats)i(it)g(to)f(the)h(m)n
(utex\).)415 4899 y(There's)f(one)g(other)f(thing)i(ab)r(out)f(this)h
(solution)f(that)g(migh)n(t)h(b)r(other)f(a)g(stic)n(kler.)36
b(In)291 4998 y(the)23 b(hin)n(t)g(section)g(I)g(claimed)f(that)i(the)f
Fl(length)e Fm(semaphore)g(k)n(eeps)h(trac)n(k)g(of)h(the)g(n)n(um)n(b)
r(er)p Black Black eop
%%Page: 52 58
52 57 bop Black 739 252 a Fo(52)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 739
515 a Fm(of)24 b(items)g(in)g(queue.)35 b(But)24 b(lo)r(oking)f(at)h
(the)g(consumer)f(co)r(de,)h(w)n(e)g(see)f(the)h(p)r(ossibilit)n(y)g
(that)739 615 y(sev)n(eral)k(consumers)h(could)h(decremen)n(t)f
Fl(length)f Fm(b)r(efore)i(an)n(y)f(of)h(them)g(gets)g(the)g(m)n(utex)
739 715 y(and)f(remo)n(v)n(es)d(an)j(item)g(from)g(the)g(bu\013er.)41
b(A)n(t)29 b(least)g(for)f(a)g(little)i(while,)f Fl(length)e
Fm(w)n(ould)739 814 y(b)r(e)h(inaccurate.)863 914 y(W)-7
b(e)28 b(migh)n(t)g(try)f(to)h(address)e(that)i(b)n(y)f(c)n(hec)n(king)
g(the)h(bu\013er)f(inside)h(the)g(m)n(utex:)p Black 1478
1088 a(Listing)g(4.7:)36 b(Brok)n(en)26 b(consumer)g(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1150 2921
29 v 0.9 TeXcolorgray Black 711 1150 4 29 v 711 1125
29 4 v 739 1125 250 4 v 989 1125 2616 4 v 3605 1125 29
4 v 3631 1150 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1249 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1249 29 100 v 0.9 TeXcolorgray Black
711 1249 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1249 29 100 v 0.9 TeXcolorgray Black 3628 1249 4 100
v 863 1219 a(1)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 1349 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1349 29 100 v 0.9 TeXcolorgray Black 711 1349 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1349 29 100
v 0.9 TeXcolorgray Black 3628 1349 4 100 v 863 1319 a
Fm(2)240 b Fl(length)m(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1448 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1448 29 100
v 0.9 TeXcolorgray Black 711 1448 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1448 29 100 v 0.9 TeXcolorgray
Black 3628 1448 4 100 v 863 1419 a Fm(3)240 b Fl(event)41
b(=)j(getEventFromBuf)o(fer)37 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1548 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1548 29 100
v 0.9 TeXcolorgray Black 711 1548 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1548 29 100 v 0.9 TeXcolorgray
Black 3628 1548 4 100 v 863 1518 a Fm(4)83 b Fl(mutex)n(.)o(signal)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1648 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1648 29 100 v 0.9 TeXcolorgray Black 711 1648 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1648 29 100
v 0.9 TeXcolorgray Black 3628 1648 4 100 v 863 1618 a
Fm(5)83 b Fl(processEvent)39 b(\()o(event)n(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 1676 2921 29 v 0.9
TeXcolorgray Black 711 1676 4 29 v 712 1676 29 4 v 739
1676 250 4 v 989 1676 2616 4 v 3605 1676 29 4 v 3631
1676 4 29 v 863 1797 a Fm(This)28 b(is)f(a)h(bad)f(idea.)863
1897 y(Puzzle:)37 b(wh)n(y?)p Black Black eop
%%Page: 53 59
53 58 bop Black 291 252 a Fo(4.1)30 b(Pro)s(ducer-consumer)h(problem)
1423 b(53)p 291 286 2865 4 v Black 291 515 a Fe(4.1.3)112
b(Deadlo)s(c)m(k)37 b(#4)291 669 y Fm(If)28 b(the)g(consumer)e(is)i
(running)f(this)h(co)r(de)p Black 1030 843 a(Listing)f(4.8:)36
b(Brok)n(en)26 b(consumer)h(solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 2921 29 v 0.9 TeXcolorgray Black
262 904 4 29 v 262 879 29 4 v 291 879 250 4 v 541 879
2616 4 v 3157 879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1004 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 29 100
v 0.9 TeXcolorgray Black 262 1004 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1004 29 100 v 0.9 TeXcolorgray
Black 3180 1004 4 100 v 415 974 a(1)83 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)240 b Fl(length)m(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(3)240 b Fl(event)41
b(=)i(getEventFromBuffe)o(r)37 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(4)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(5)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a(6)83
b Fl(processEvent)38 b(\(event)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1530 2921 29 v 0.9 TeXcolorgray
Black 262 1530 4 29 v 263 1530 29 4 v 291 1530 250 4
v 541 1530 2616 4 v 3157 1530 29 4 v 3183 1530 4 29 v
415 1652 a Fm(it)h(can)e(cause)g(a)h(deadlo)r(c)n(k.)67
b(Imagine)37 b(that)i(the)f(bu\013er)g(is)g(empt)n(y)-7
b(.)68 b(A)39 b(consumer)291 1751 y(arriv)n(es,)21 b(gets)h(the)h(m)n
(utex,)h(and)e(then)h(blo)r(c)n(ks)f(on)g Fl(length)p
Fm(.)33 b(When)23 b(the)g(pro)r(ducer)f(arriv)n(es,)291
1851 y(it)28 b(will)f(blo)r(c)n(k)h(on)f Fl(mutex)e Fm(and)j(the)g
(system)f(will)h(come)f(to)h(a)f(griding)f(halt.)415
1950 y(This)34 b(is)g(a)g(common)g(error)e(in)i(sync)n(hronization)f
(co)r(de:)49 b(an)n(y)34 b(time)h(y)n(ou)e(w)n(ait)h(for)f(a)291
2050 y(semaphore)24 b(while)i(holding)f(a)g(m)n(utex,)i(there)e(is)h(a)
f(danger)g(of)g(deadlo)r(c)n(k.)36 b(When)26 b(y)n(ou)f(are)291
2150 y(c)n(hec)n(king)32 b(a)h(solution)h(to)f(a)h(sync)n(hronization)d
(problem,)k(y)n(ou)e(should)h(alw)n(a)n(ys)d(lo)r(ok)i(for)291
2249 y(p)r(ossible)27 b(deadlo)r(c)n(ks.)291 2482 y Fe(4.1.4)112
b(Pro)s(ducer-consumer)37 b(with)g(a)h(\014nite)e(bu\013er)291
2635 y Fm(In)30 b(the)g(example)g(I)g(describ)r(ed)g(ab)r(o)n(v)n(e,)g
(ev)n(en)n(t-handling)f(threads,)h(the)h(shared)e(bu\013er)h(is)291
2735 y(usually)22 b(in\014nite)h(\(more)g(accurately)-7
b(,)22 b(it)h(is)g(b)r(ounded)g(b)n(y)f(system)h(resources)d(lik)n(e)j
(ph)n(ysical)291 2834 y(memory)j(and)i(sw)n(ap)f(space\).)415
2934 y(In)j(the)g(k)n(ernel)f(of)g(the)h(op)r(erating)f(system,)h
(though,)g(there)f(are)g(limits)h(on)f(a)n(v)-5 b(ailable)291
3033 y(space.)34 b(Bu\013ers)21 b(for)h(things)g(lik)n(e)f(disk)h
(requests)f(and)h(net)n(w)n(ork)f(pac)n(k)n(ets)f(are)h(usually)h
(\014xed)291 3133 y(size.)36 b(In)28 b(situations)f(lik)n(e)g(these,)h
(w)n(e)f(ha)n(v)n(e)g(an)g(additional)g(sync)n(hronization)f(constrain)
n(t:)p Black 415 3316 a Fd(\017)p Black 41 w Fm(If)35
b(a)g(pro)r(ducer)f(arriv)n(es)e(when)j(the)h(bu\013er)f(is)f(full,)k
(it)d(blo)r(c)n(ks)f(un)n(til)h(a)g(consumer)498 3415
y(remo)n(v)n(es)26 b(an)h(item.)415 3598 y(Assume)j(that)g(w)n(e)g(kno)
n(w)f(the)h(size)g(of)g(the)g(bu\013er.)44 b(Call)30
b(it)g Fl(bufferSize)p Fm(.)40 b(Since)30 b(w)n(e)291
3698 y(ha)n(v)n(e)f(a)h(semaphore)g(that)g(is)h(k)n(eeping)f(trac)n(k)f
(of)i(the)g(n)n(um)n(b)r(er)f(of)h(items,)h(it)f(is)f(tempting)291
3797 y(to)d(write)g(something)h(lik)n(e)p Black 990 3972
a(Listing)f(4.9:)36 b(Brok)n(en)26 b(\014nite)i(bu\013er)g(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4033 2921
29 v 0.9 TeXcolorgray Black 262 4033 4 29 v 262 4008
29 4 v 291 4008 250 4 v 541 4008 2616 4 v 3157 4008 29
4 v 3183 4033 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 4133 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4133 29 100 v 0.9 TeXcolorgray Black
262 4133 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
4133 29 100 v 0.9 TeXcolorgray Black 3180 4133 4 100
v 415 4103 a(1)83 b Fl(if)42 b(\(length)f(>=)i(bufferSize)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4232 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4232 29 100 v 0.9 TeXcolorgray Black 262 4232 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4232 29 100
v 0.9 TeXcolorgray Black 3180 4232 4 100 v 415 4202 a
Fm(2)240 b Fl(block)41 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 262 4260 2921 29 v 0.9 TeXcolorgray Black
262 4260 4 29 v 263 4260 29 4 v 291 4260 250 4 v 541
4260 2616 4 v 3157 4260 29 4 v 3183 4260 4 29 v 415 4382
a Fm(But)48 b(w)n(e)f(can't.)97 b(Remem)n(b)r(er)48 b(that)g(w)n(e)f
(can't)h(c)n(hec)n(k)e(the)i(curren)n(t)f(v)-5 b(alue)48
b(of)f(a)291 4481 y(semaphore;)26 b(the)i(only)f(op)r(erations)f(are)h
Fl(wait)f Fm(and)h Fl(signal)p Fm(.)415 4581 y(Puzzle:)58
b(write)38 b(pro)r(ducer-consumer)e(co)r(de)i(that)g(handles)g(the)h
(\014nite-bu\013er)g(con-)291 4681 y(strain)n(t.)p Black
Black eop
%%Page: 54 60
54 59 bop Black Black Black Black eop
%%Page: 55 61
55 60 bop Black 291 252 a Fo(4.1)30 b(Pro)s(ducer-consumer)h(problem)
1423 b(55)p 291 286 2865 4 v Black 291 515 a Fe(4.1.5)112
b(Finite)36 b(bu\013er)i(pro)s(ducer-consumer)g(hin)m(t)291
669 y Fm(Add)27 b(a)f(second)g(semaphore)g(to)g(k)n(eep)h(trac)n(k)e
(of)i(the)g(n)n(um)n(b)r(er)g(of)f(a)n(v)-5 b(ailable)26
b(spaces)g(in)h(the)291 768 y(bu\013er.)p Black 652 943
a(Listing)g(4.10:)36 b(Finite-bu\013er)28 b(pro)r(ducer-consumer)d
(initialization)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1004 2921 29 v 0.9 TeXcolorgray Black 262 1004 4
29 v 262 979 29 4 v 291 979 250 4 v 541 979 2616 4 v
3157 979 29 4 v 3183 1004 4 29 v 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1104 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 29 100 v 0.9
TeXcolorgray Black 262 1104 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1104 29 100 v 0.9 TeXcolorgray
Black 3180 1104 4 100 v 415 1074 a(1)83 b Fl(Semaphore)40
b(mutex)h(=)i(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1203 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1203 29 100 v 0.9 TeXcolorgray Black
262 1203 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1203 29 100 v 0.9 TeXcolorgray Black 3180 1203 4 100
v 415 1173 a Fm(2)83 b Fl(Semaphore)40 b(length)h(=)i(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1303 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a
Fm(3)83 b Fl(Semaphore)40 b(spaces)h(=)i(bufferSize)p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1331 2921 29 v
0.9 TeXcolorgray Black 262 1331 4 29 v 263 1331 29 4
v 291 1331 250 4 v 541 1331 2616 4 v 3157 1331 29 4 v
3183 1331 4 29 v 415 1452 a Fm(When)20 b(a)e(consumer)g(remo)n(v)n(es)f
(an)i(item)g(it)h(should)e(signal)g Fl(spaces)p Fm(.)32
b(When)19 b(a)g(pro)r(ducer)291 1552 y(arriv)n(es)i(it)i(should)g
(decremen)n(t)g Fl(spaces)p Fm(,)f(at)h(whic)n(h)g(p)r(oin)n(t)h(it)f
(migh)n(t)h(blo)r(c)n(k)e(un)n(til)i(the)g(next)291 1652
y(consumer)i(signals.)p Black Black eop
%%Page: 56 62
56 61 bop Black Black Black Black eop
%%Page: 57 63
57 62 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(57)p 291 286 2865 4 v Black 291 515 a Fe(4.1.6)112
b(Finite)36 b(bu\013er)i(pro)s(ducer-consumer)g(solution)291
669 y Fm(Here)27 b(is)g(a)h(solution.)p Black 911 841
a(Listing)g(4.11:)35 b(Finite)28 b(bu\013er)g(consumer)f(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 901 2921
29 v 0.9 TeXcolorgray Black 262 901 4 29 v 262 876 29
4 v 291 876 250 4 v 541 876 2616 4 v 3157 876 29 4 v
3183 901 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1001 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1001 29 100 v 0.9 TeXcolorgray Black
262 1001 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1001 29 100 v 0.9 TeXcolorgray Black 3180 1001 4 100
v 415 971 a(1)83 b Fl(length)m(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1101 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1101 29 100 v 0.9 TeXcolorgray Black 262 1101 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1101 29 100
v 0.9 TeXcolorgray Black 3180 1101 4 100 v 415 1071 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1200 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1200 29 100
v 0.9 TeXcolorgray Black 262 1200 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1200 29 100 v 0.9 TeXcolorgray
Black 3180 1200 4 100 v 415 1170 a Fm(3)240 b Fl(event)41
b(=)i(getEventFromBuffe)o(r)37 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1300 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1300 29 100
v 0.9 TeXcolorgray Black 262 1300 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1300 29 100 v 0.9 TeXcolorgray
Black 3180 1300 4 100 v 415 1270 a Fm(4)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1399 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1399 29 100 v 0.9 TeXcolorgray Black 262 1399 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1399 29 100
v 0.9 TeXcolorgray Black 3180 1399 4 100 v 415 1370 a
Fm(5)83 b Fl(spaces)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1499 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1499 29 100
v 0.9 TeXcolorgray Black 262 1499 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1499 29 100 v 0.9 TeXcolorgray
Black 3180 1499 4 100 v 415 1469 a Fm(6)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1599 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1599 29 100
v 0.9 TeXcolorgray Black 262 1599 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1599 29 100 v 0.9 TeXcolorgray
Black 3180 1599 4 100 v 415 1569 a(7)83 b Fl(processEvent)38
b(\(event)n(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262
1627 2921 29 v 0.9 TeXcolorgray Black 262 1627 4 29 v
263 1627 29 4 v 291 1627 250 4 v 541 1627 2616 4 v 3157
1627 29 4 v 3183 1627 4 29 v 415 1747 a Fm(The)28 b(pro)r(ducer)e(co)r
(de)i(is)f(symmetric,)h(in)g(a)f(w)n(a)n(y:)p Black 922
1919 a(Listing)g(4.12:)36 b(Finite)28 b(bu\013er)g(pro)r(ducer)e
(solution)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262
1979 2921 29 v 0.9 TeXcolorgray Black 262 1979 4 29 v
262 1955 29 4 v 291 1955 250 4 v 541 1955 2616 4 v 3157
1955 29 4 v 3183 1979 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2079 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2079 29 100 v 0.9 TeXcolorgray Black
262 2079 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2079 29 100 v 0.9 TeXcolorgray Black 3180 2079 4 100
v 415 2049 a(1)83 b Fl(event)41 b(=)i(waitForEvent)c(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2179 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2179 29 100 v 0.9 TeXcolorgray Black 262 2179 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2179 29 100
v 0.9 TeXcolorgray Black 3180 2179 4 100 v 415 2149 a
Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2278 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2278 29 100 v 0.9 TeXcolorgray Black 262 2278 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2278 29 100
v 0.9 TeXcolorgray Black 3180 2278 4 100 v 415 2248 a(3)83
b Fl(spaces)m(.wait)n(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2378 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2378 29 100 v 0.9 TeXcolorgray Black
262 2378 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2378 29 100 v 0.9 TeXcolorgray Black 3180 2378 4 100
v 415 2348 a Fm(4)g Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2478 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2478 29 100 v 0.9 TeXcolorgray Black 262 2478 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2478 29 100
v 0.9 TeXcolorgray Black 3180 2478 4 100 v 415 2448 a
Fm(5)240 b Fl(addEventToBuffe)o(r)38 b(\()o(event)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2577 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2577 29 100 v 0.9 TeXcolorgray Black 262 2577 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2577 29 100
v 0.9 TeXcolorgray Black 3180 2577 4 100 v 415 2547 a
Fm(6)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2677 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2677 29 100
v 0.9 TeXcolorgray Black 262 2677 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2677 29 100 v 0.9 TeXcolorgray
Black 3180 2677 4 100 v 415 2647 a Fm(7)83 b Fl(length)m(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2705 2921
29 v 0.9 TeXcolorgray Black 262 2705 4 29 v 263 2705
29 4 v 291 2705 250 4 v 541 2705 2616 4 v 3157 2705 29
4 v 3183 2705 4 29 v 415 2825 a Fm(In)30 b(order)f(to)h(a)n(v)n(oid)e
(deadlo)r(c)n(k,)i(pro)r(ducers)f(and)h(consumers)f(c)n(hec)n(k)g(a)n
(v)-5 b(ailabilit)n(y)29 b(b)r(e-)291 2924 y(fore)k(getting)i(the)g(m)n
(utex.)57 b(F)-7 b(or)34 b(b)r(est)h(p)r(erformance,)g(they)g(release)e
(the)i(m)n(utex)f(b)r(efore)291 3024 y(signalling.)291
3298 y Fh(4.2)135 b(Readers)46 b(and)f(writers)291 3480
y Fm(The)28 b(next)h(classical)e(problem,)h(called)g(the)h(Reader-W)-7
b(riter)27 b(Problem,)g(p)r(ertains)h(to)h(an)n(y)291
3579 y(situation)f(where)h(a)g(data)f(structure,)h(database,)g(or)f
(\014le)h(system)g(is)g(read)g(and)g(mo)r(di\014ed)291
3679 y(b)n(y)j(concurren)n(t)f(threads.)52 b(While)33
b(the)g(data)f(structure)g(is)h(b)r(eing)g(written)g(or)f(mo)r
(di\014ed)291 3779 y(it)i(is)f(often)i(necessary)d(to)h(bar)g(other)g
(threads)h(from)f(reading,)h(in)g(order)f(to)g(prev)n(en)n(t)g(a)291
3878 y(reader)25 b(from)i(in)n(terrupting)g(a)g(mo)r(di\014cation)g(in)
g(progress)e(and)i(reading)f(inconsisten)n(t)h(or)291
3978 y(in)n(v)-5 b(alid)27 b(data.)415 4078 y(As)h(in)h(the)f(pro)r
(ducer-consumer)e(problem,)i(the)h(solution)e(is)h(asymmetric.)38
b(Readers)291 4177 y(and)23 b(writers)g(execute)g(di\013eren)n(t)h(co)r
(de)f(b)r(efore)g(en)n(tering)g(the)h(critical)f(section.)35
b(The)23 b(basic)291 4277 y(sync)n(hronization)i(constrain)n(ts)h(are:)
p Black 392 4456 a(1.)p Black 41 w(An)n(y)i(n)n(um)n(b)r(er)f(of)h
(readers)d(can)j(b)r(e)g(in)g(the)g(critical)f(section)g(sim)n
(ultaneously)-7 b(.)p Black 392 4620 a(2.)p Black 41
w(W)g(riters)27 b(m)n(ust)h(ha)n(v)n(e)e(exclusiv)n(e)h(access)f(to)i
(the)g(critical)f(section.)415 4799 y(In)36 b(other)f(w)n(ords,)i(a)e
(writer)h(cannot)f(en)n(ter)g(the)i(critical)e(section)g(while)h(an)n
(y)f(other)291 4899 y(thread)24 b(\(reader)g(or)g(writer\))g(is)h
(there,)h(and)e(while)i(the)f(writer)f(is)h(there,)g(no)g(other)f
(thread)291 4998 y(ma)n(y)i(en)n(ter.)p Black Black eop
%%Page: 58 64
58 63 bop Black 739 252 a Fo(58)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 863
515 a Fm(Puzzle:)j(Use)27 b(semaphores)f(to)g(enforce)h(these)g
(constrain)n(ts,)e(while)i(allo)n(wing)f(readers)739
615 y(and)19 b(writers)g(to)g(access)f(the)i(data)f(structure,)i(and)e
(a)n(v)n(oiding)f(the)i(p)r(ossibilit)n(y)f(of)g(deadlo)r(c)n(k.)p
Black Black eop
%%Page: 59 65
59 64 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(59)p 291 286 2865 4 v Black 291 515 a Fe(4.2.1)112
b(Readers-writers)37 b(hin)m(t)291 669 y Fm(Here)27 b(is)g(a)h(set)f
(of)h(v)-5 b(ariables)26 b(that)i(is)f(su\016cien)n(t)h(to)g(solv)n(e)e
(the)i(problem.)p Black 955 843 a(Listing)f(4.13:)36
b(Readers-writers)25 b(initialization)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 2921 29 v 0.9 TeXcolorgray Black
262 904 4 29 v 262 879 29 4 v 291 879 250 4 v 541 879
2616 4 v 3157 879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1004 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 29 100
v 0.9 TeXcolorgray Black 262 1004 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1004 29 100 v 0.9 TeXcolorgray
Black 3180 1004 4 100 v 415 974 a(1)83 b Fl(int)42 b(readers)f(=)i(0;)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)83 b Fl(Semaphore)40 b(mutex)h(=)i(1;)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(3)83 b Fl(Semaphore)40
b(roomEmpty)f(=)44 b(1;)p 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1231 2921 29 v 0.9 TeXcolorgray Black 262 1231 4
29 v 263 1231 29 4 v 291 1231 250 4 v 541 1231 2616 4
v 3157 1231 29 4 v 3183 1231 4 29 v 415 1353 a Fm(The)39
b(coun)n(ter)f Fl(readers)e Fm(k)n(eeps)i(trac)n(k)g(of)h(ho)n(w)f(man)
n(y)g(readers)f(are)h(in)h(the)h(ro)r(om.)291 1452 y
Fl(mutex)e Fm(protects)i(the)h(shared)e(coun)n(ter.)75
b Fl(roomEmpty)36 b Fm(is)41 b(1)f(if)h(there)f(are)f(no)i(threads)291
1552 y(\(readers)26 b(or)g(writers\))h(in)h(the)g(critical)f(section,)g
(and)h(0)f(otherwise.)p Black Black eop
%%Page: 60 66
60 65 bop Black Black Black Black eop
%%Page: 61 67
61 66 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(61)p 291 286 2865 4 v Black 291 515 a Fe(4.2.2)112
b(Readers-writers)37 b(solution)291 670 y Fm(The)e(co)r(de)g(for)f
(writers)h(is)g(simple.)60 b(If)35 b(the)h(critical)e(section)h(is)g
(empt)n(y)-7 b(,)37 b(a)e(writer)g(ma)n(y)291 770 y(en)n(ter,)27
b(but)h(en)n(tering)f(has)g(the)h(e\013ect)g(of)f(excluding)h(all)f
(other)g(threads:)p Black 1188 946 a(Listing)h(4.14:)35
b(W)-7 b(riters)28 b(solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1009 2921 29 v 0.9 TeXcolorgray
Black 262 1009 4 29 v 262 984 29 4 v 291 984 250 4 v
541 984 2616 4 v 3157 984 29 4 v 3183 1009 4 29 v 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1108 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1108 29 100 v 0.9 TeXcolorgray Black 262 1108 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1108 29 100
v 0.9 TeXcolorgray Black 3180 1108 4 100 v 415 1078 a(1)83
b Fl(roomEmpty)l(.wait)41 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1208 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1208 29 100 v 0.9
TeXcolorgray Black 262 1208 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1208 29 100 v 0.9 TeXcolorgray
Black 3180 1208 4 100 v 415 1178 a Fm(2)240 b Fl(critical)40
b(section)h(for)h(writers)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1308 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1308 29 100 v 0.9 TeXcolorgray Black
262 1308 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1308 29 100 v 0.9 TeXcolorgray Black 3180 1308 4 100
v 415 1278 a Fm(3)83 b Fl(roomEmpty)l(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1336 2921 29 v
0.9 TeXcolorgray Black 262 1336 4 29 v 263 1336 29 4
v 291 1336 250 4 v 541 1336 2616 4 v 3157 1336 29 4 v
3183 1336 4 29 v 415 1460 a Fm(When)36 b(the)f(writer)g(exits,)i(can)d
(it)i(b)r(e)f(sure)g(that)g(the)h(ro)r(om)e(is)h(no)n(w)f(empt)n(y?)60
b(Y)-7 b(es,)291 1559 y(b)r(ecause)27 b(it)h(kno)n(ws)e(that)i(no)f
(other)h(thread)f(can)g(ha)n(v)n(e)f(en)n(tered)h(while)h(it)g(w)n(as)f
(there.)415 1660 y(The)33 b(co)r(de)g(for)f(readers)f(is)i(similar)f
(to)h(the)g(barrier)e(co)r(de)i(w)n(e)g(sa)n(w)f(in)h(the)g(previous)
291 1759 y(section.)55 b(W)-7 b(e)34 b(k)n(eep)f(trac)n(k)g(of)h(the)g
(n)n(um)n(b)r(er)f(of)h(readers)e(in)i(the)h(ro)r(om)e(so)g(that)h(w)n
(e)f(can)291 1859 y(giv)n(e)26 b(a)h(sp)r(ecial)h(assignmen)n(t)e(to)i
(the)g(\014rst)f(to)h(arriv)n(e)d(and)j(the)g(last)f(to)g(lea)n(v)n(e.)
415 1959 y(The)22 b(\014rst)f(reader)f(that)i(arriv)n(es)d(has)i(to)g
(w)n(ait)g(for)g Fl(roomEmpty)p Fm(.)31 b(If)22 b(the)g(ro)r(om)e(is)i
(empt)n(y)-7 b(,)291 2059 y(then)19 b(the)g(reader)e(pro)r(ceeds)g
(and,)j(at)f(the)g(same)f(time,)j(bars)c(writers.)33
b(Subsequen)n(t)19 b(readers)291 2159 y(can)27 b(still)h(en)n(ter)f(b)r
(ecause)g(none)g(of)h(them)g(will)g(try)f(to)h(w)n(ait)f(on)g
Fl(roomEmpty)p Fm(.)415 2259 y(If)d(a)e(reader)g(arriv)n(es)f(while)i
(there)f(is)h(a)g(writer)f(in)i(the)f(ro)r(om,)g(it)g(w)n(aits)g(on)f
Fl(roomEmpty)p Fm(.)291 2359 y(Since)27 b(it)h(holds)g(the)g(m)n(utex,)
f(an)n(y)g(subsequen)n(t)g(readers)f(queue)i(on)f Fl(mutex)p
Fm(.)p Black 1179 2535 a(Listing)g(4.15:)36 b(Readers)26
b(solution)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2598 2921 29 v 0.9 TeXcolorgray Black 262 2598 4
29 v 262 2573 29 4 v 291 2573 250 4 v 541 2573 2616 4
v 3157 2573 29 4 v 3183 2598 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2697 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2697 29 100
v 0.9 TeXcolorgray Black 262 2697 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2697 29 100 v 0.9 TeXcolorgray
Black 3180 2697 4 100 v 415 2667 a(1)83 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2797 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2797 29 100 v 0.9 TeXcolorgray Black 262 2797 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2797 29 100
v 0.9 TeXcolorgray Black 3180 2797 4 100 v 415 2767 a
Fm(2)240 b Fl(readers)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2897 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2897 29 100 v 0.9 TeXcolorgray Black
262 2897 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2897 29 100 v 0.9 TeXcolorgray Black 3180 2897 4 100
v 415 2867 a Fm(3)g Fl(if)42 b(\(readers)f(==)h(1\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2996 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2996 29 100 v 0.9 TeXcolorgray Black 262 2996 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2996 29 100
v 0.9 TeXcolorgray Black 3180 2996 4 100 v 415 2966 a
Fm(4)396 b Fl(roomEmpty)m(.)o(wait)42 b(\(\))121 b(//)43
b(first)f(in)g(locks)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3096 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3096 29 100 v 0.9 TeXcolorgray Black
262 3096 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3096 29 100 v 0.9 TeXcolorgray Black 3180 3096 4 100
v 415 3066 a Fm(5)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3195 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3195 29 100 v 0.9 TeXcolorgray Black 262 3195 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3195 29 100
v 0.9 TeXcolorgray Black 3180 3195 4 100 v 415 3166 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3295 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3295 29 100 v 0.9 TeXcolorgray Black 262 3295 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3295 29 100
v 0.9 TeXcolorgray Black 3180 3295 4 100 v 415 3265 a(7)240
b Fl(critical)40 b(section)h(for)h(readers)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3395 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3395 29 100
v 0.9 TeXcolorgray Black 262 3395 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3395 29 100 v 0.9 TeXcolorgray
Black 3180 3395 4 100 v 415 3365 a Fm(8)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3494 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3494 29 100
v 0.9 TeXcolorgray Black 262 3494 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3494 29 100 v 0.9 TeXcolorgray
Black 3180 3494 4 100 v 415 3464 a(9)83 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3594 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3594 29 100 v 0.9 TeXcolorgray Black 262 3594 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3594 29 100
v 0.9 TeXcolorgray Black 3180 3594 4 100 v 374 3564 a
Fm(10)239 b Fl(readers)m(--)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3694 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3694 29 100 v 0.9 TeXcolorgray Black
262 3694 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3694 29 100 v 0.9 TeXcolorgray Black 3180 3694 4 100
v 374 3664 a Fm(11)g Fl(if)42 b(\(readers)f(==)h(0\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3793 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3793 29 100 v 0.9 TeXcolorgray Black 262 3793 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3793 29 100
v 0.9 TeXcolorgray Black 3180 3793 4 100 v 374 3763 a
Fm(12)395 b Fl(roomEmpty)m(.)o(signal)41 b(\(\))i(//)g(last)f(out)g
(unlocks)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3893
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 3893 29 100 v 0.9 TeXcolorgray Black
262 3893 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3893 29 100 v 0.9 TeXcolorgray Black 3180 3893 4 100
v 374 3863 a Fm(13)82 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 3921 2921 29 v
0.9 TeXcolorgray Black 262 3921 4 29 v 263 3921 29 4
v 291 3921 250 4 v 541 3921 2616 4 v 3157 3921 29 4 v
3183 3921 4 29 v 415 4045 a Fm(The)34 b(co)r(de)f(after)h(the)g
(critical)f(section)g(is)h(similar.)54 b(The)34 b(last)f(reader)g(to)g
(lea)n(v)n(e)g(the)291 4144 y(ro)r(om)i(turns)g(out)h(the)g(ligh)n
(ts|that)g(is,)i(it)e(signals)f Fl(roomEmpty)p Fm(,)f(p)r(ossibly)i
(allo)n(wing)e(a)291 4244 y(w)n(aiting)26 b(writer)h(to)h(en)n(ter.)415
4344 y(Again,)37 b(to)e(demonstrate)g(that)g(this)h(co)r(de)f(is)g
(correct,)h(it)g(is)f(useful)h(to)f(assert)f(and)291
4444 y(demonstrate)23 b(a)h(n)n(um)n(b)r(er)g(of)g(claims)g(ab)r(out)h
(ho)n(w)e(the)i(program)d(m)n(ust)j(b)r(eha)n(v)n(e.)35
b(Can)24 b(y)n(ou)291 4544 y(con)n(vince)i(y)n(ourself)h(that)h(the)g
(follo)n(wing)e(are)h(true?)p Black 415 4730 a Fd(\017)p
Black 41 w Fm(Only)39 b(one)f(reader)g(can)h(queue)g(w)n(aiting)f(for)h
Fl(roomEmpty)p Fm(,)f(but)i(sev)n(eral)d(writers)498
4829 y(migh)n(t)28 b(b)r(e)g(queued.)p Black 415 4998
a Fd(\017)p Black 41 w Fm(When)g(a)f(reader)g(signals)f
Fl(roomEmpty)e Fm(the)k(ro)r(om)f(m)n(ust)g(b)r(e)h(empt)n(y)-7
b(.)p Black Black eop
%%Page: 62 68
62 67 bop Black 739 252 a Fo(62)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 863
515 a Fm(P)n(atterns)k(similar)g(to)g(this)h(reader)f(co)r(de)g(are)g
(common:)56 b(the)38 b(\014rst)g(thread)f(in)n(to)h(a)739
615 y(section)29 b(lo)r(c)n(ks)f(a)h(semaphore)f(\(or)h(queues\))g(and)
g(the)h(last)e(one)h(out)h(unlo)r(c)n(ks)e(it.)43 b(In)29
b(fact,)739 715 y(it)f(is)f(so)g(common)g(w)n(e)h(should)f(giv)n(e)g
(it)h(a)f(name)g(and)h(wrap)e(it)j(up)e(in)h(an)g(ob)5
b(ject.)863 814 y(The)29 b(name)f(of)g(the)g(pattern)g(is)g(\\\014lo,")
f(whic)n(h)h(stands)g(for)f(\\\014rst)h(in,)g(last)g(out.")38
b(The)739 914 y(instance)27 b(v)-5 b(ariables)27 b(for)g(a)g
Fl(Filo)f Fm(ob)5 b(ject)27 b(are)p Black 1673 1085 a(Listing)g(4.16:)
36 b(Filo)27 b(de\014nition)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1145 2921 29 v 0.9 TeXcolorgray
Black 711 1145 4 29 v 711 1120 29 4 v 739 1120 250 4
v 989 1120 2616 4 v 3605 1120 29 4 v 3631 1145 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 739 1245 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1245 29 100 v 0.9 TeXcolorgray Black 711 1245 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1245 29 100
v 0.9 TeXcolorgray Black 3628 1245 4 100 v 863 1215 a(1)83
b Fl(int)42 b(counter)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1344 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1344 29 100 v 0.9 TeXcolorgray Black
711 1344 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1344 29 100 v 0.9 TeXcolorgray Black 3628 1344 4 100
v 863 1314 a Fm(2)83 b Fl(Semaphore)40 b(mutex)p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 1372 2921 29 v 0.9
TeXcolorgray Black 711 1372 4 29 v 712 1372 29 4 v 739
1372 250 4 v 989 1372 2616 4 v 3605 1372 29 4 v 3631
1372 4 29 v 863 1491 a Fm(The)28 b(metho)r(ds)g(that)g(op)r(erate)f(on)
g Fl(Filo)p Fm(s)f(are)g Fl(lock)g Fm(and)i Fl(unlock)p
Fm(.)p Black 1586 1662 a(Listing)g(4.17:)35 b(Filo)28
b(lo)r(c)n(k)f(de\014nition)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1722 2921 29 v 0.9 TeXcolorgray
Black 711 1722 4 29 v 711 1697 29 4 v 739 1697 250 4
v 989 1697 2616 4 v 3605 1697 29 4 v 3631 1722 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 739 1822 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1822 29 100 v 0.9 TeXcolorgray Black 711 1822 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1822 29 100
v 0.9 TeXcolorgray Black 3628 1822 4 100 v 863 1792 a(1)83
b Fl(function)40 b(lock)i(\(semaphore)l(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1922 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1922 29 100
v 0.9 TeXcolorgray Black 711 1922 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1922 29 100 v 0.9 TeXcolorgray
Black 3628 1922 4 100 v 863 1892 a Fm(2)240 b Fl(wait)42
b(\()o(mutex)n(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 2021 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2021 29 100 v 0.9 TeXcolorgray Black
711 2021 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2021 29 100 v 0.9 TeXcolorgray Black 3628 2021 4 100
v 863 1991 a Fm(3)397 b Fl(counter)m(++)p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2121 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2121 29 100
v 0.9 TeXcolorgray Black 711 2121 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2121 29 100 v 0.9 TeXcolorgray
Black 3628 2121 4 100 v 863 2091 a Fm(4)g Fl(if)43 b(\()o(counter)e(=)i
(1\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2221 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2221 29 100 v 0.9 TeXcolorgray Black 711 2221 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2221 29 100
v 0.9 TeXcolorgray Black 3628 2221 4 100 v 863 2191 a
Fm(5)554 b Fl(wait)42 b(\()o(semaphore)l(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2320 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2320 29 100
v 0.9 TeXcolorgray Black 711 2320 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2320 29 100 v 0.9 TeXcolorgray
Black 3628 2320 4 100 v 863 2290 a Fm(6)240 b Fl(signal)41
b(\(mutex)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711
2348 2921 29 v 0.9 TeXcolorgray Black 711 2348 4 29 v
712 2348 29 4 v 739 2348 250 4 v 989 2348 2616 4 v 3605
2348 29 4 v 3631 2348 4 29 v 863 2467 a(lock)24 b Fm(tak)n(es)g(one)g
(parameter,)g(a)h(semaphore)e(that)j(it)f(will)g(c)n(hec)n(k)f(and)h(p)
r(ossibly)f(hold.)739 2567 y(It)k(p)r(erforms)f(the)h(follo)n(wing)e
(op)r(erations:)p Black 863 2744 a Fd(\017)p Black 41
w Fm(If)40 b(the)f(semaphore)e(is)i(lo)r(c)n(k)n(ed,)i(then)e(the)h
(calling)e(thread)g(and)h(all)g(subsequen)n(t)946 2843
y(callers)27 b(will)h(blo)r(c)n(k.)p Black 863 3007 a
Fd(\017)p Black 41 w Fm(When)k(the)f(semaphore)f(is)g(signalled,)h(all)
g(w)n(aiting)f(threads)g(and)h(all)g(subsequen)n(t)946
3107 y(callers)c(can)g(pro)r(ceed.)p Black 863 3270 a
Fd(\017)p Black 41 w Fm(While)i(the)f(\014lo)f(is)g(lo)r(c)n(k)n(ed,)g
(the)h(semaphore)e(is)i(lo)r(c)n(k)n(ed.)863 3447 y(Inside)j(the)g
(de\014nition)f(of)h Fl(lock)p Fm(,)e(the)i(references)e(to)i
Fl(mutex)d Fm(and)i Fl(counter)e Fm(refer)h(to)739 3547
y(the)h(instance)g(v)-5 b(ariables)29 b(of)g(the)i(curren)n(t)e(ob)5
b(ject,)30 b(the)h Fl(Filo)d Fm(the)i(metho)r(d)h(w)n(as)e(in)n(v)n(ok)
n(ed)739 3646 y(on.)863 3746 y(Here)f(is)f(the)h(co)r(de)g(for)f
Fl(unlock)p Fm(:)p Black 1540 3917 a(Listing)g(4.18:)36
b(Filo)27 b(unlo)r(c)n(k)h(de\014nition)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 3977 2921 29 v 0.9 TeXcolorgray
Black 711 3977 4 29 v 711 3952 29 4 v 739 3952 250 4
v 989 3952 2616 4 v 3605 3952 29 4 v 3631 3977 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 739 4077 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4077 29 100 v 0.9 TeXcolorgray Black 711 4077 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4077 29 100
v 0.9 TeXcolorgray Black 3628 4077 4 100 v 863 4047 a(1)83
b Fl(function)40 b(filoUnlock)g(\()o(semaphore)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 4176 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4176 29 100 v 0.9 TeXcolorgray Black 711 4176 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4176 29 100
v 0.9 TeXcolorgray Black 3628 4176 4 100 v 863 4147 a
Fm(2)240 b Fl(wait)42 b(\()o(mutex)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 4276 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 4276 29 100
v 0.9 TeXcolorgray Black 711 4276 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 4276 29 100 v 0.9 TeXcolorgray
Black 3628 4276 4 100 v 863 4246 a Fm(3)397 b Fl(counter)m(--)p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 4376 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4376 29 100 v 0.9 TeXcolorgray Black 711 4376 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4376 29 100
v 0.9 TeXcolorgray Black 3628 4376 4 100 v 863 4346 a
Fm(4)g Fl(if)43 b(\()o(counter)e(=)i(0\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 4475 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 4475 29 100
v 0.9 TeXcolorgray Black 711 4475 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 4475 29 100 v 0.9 TeXcolorgray
Black 3628 4475 4 100 v 863 4445 a Fm(5)554 b Fl(signal)41
b(\()o(semaphore)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4575 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4575 29 100 v 0.9 TeXcolorgray Black
711 4575 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4575 29 100 v 0.9 TeXcolorgray Black 3628 4575 4 100
v 863 4545 a Fm(6)240 b Fl(signal)41 b(\(mutex)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 711 4603 2921 29 v
0.9 TeXcolorgray Black 711 4603 4 29 v 712 4603 29 4
v 739 4603 250 4 v 989 4603 2616 4 v 3605 4603 29 4 v
3631 4603 4 29 v 863 4722 a(unlock)26 b Fm(has)h(the)h(follo)n(wing)e
(b)r(eha)n(vior:)p Black 863 4899 a Fd(\017)p Black 41
w Fm(This)31 b(function)g(do)r(es)f(nothing)g(un)n(til)h(ev)n(ery)e
(thread)h(that)h(called)f Fl(lock)f Fm(also)g(calls)946
4998 y Fl(unlock)p Fm(.)p Black Black eop
%%Page: 63 69
63 68 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(63)p 291 286 2865 4 v Black Black 415 515 a Fd(\017)p
Black 41 w Fm(When)28 b(the)g(last)g(thread)f(calls)g
Fl(unlock)p Fm(,)e(it)j(unlo)r(c)n(ks)f(the)h(semaphore.)415
698 y(Using)f(these)h(functions,)g(w)n(e)f(can)h(rewrite)e(the)i
(reader)e(co)r(de)i(more)f(simply:)p Black 1057 872 a(Listing)g(4.19:)
36 b(Concise)27 b(reader)f(solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 934 2921 29 v 0.9 TeXcolorgray Black
262 934 4 29 v 262 909 29 4 v 291 909 250 4 v 541 909
2616 4 v 3157 909 29 4 v 3183 934 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1033 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1033 29 100
v 0.9 TeXcolorgray Black 262 1033 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1033 29 100 v 0.9 TeXcolorgray
Black 3180 1033 4 100 v 415 1003 a(1)83 b Fl(readFilo)l(.lock)42
b(\()o(roomEmpty)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1133 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1133 29 100 v 0.9 TeXcolorgray Black
262 1133 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1133 29 100 v 0.9 TeXcolorgray Black 3180 1133 4 100
v 415 1103 a Fm(2)200 b Fl(critical)41 b(section)f(for)j(readers)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1233 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1233 29 100 v 0.9 TeXcolorgray Black 262 1233 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1233 29 100
v 0.9 TeXcolorgray Black 3180 1233 4 100 v 415 1203 a
Fm(3)83 b Fl(readFilo)l(.unlock)41 b(\(roomEmpty)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1261 2921 29 v
0.9 TeXcolorgray Black 262 1261 4 29 v 263 1261 29 4
v 291 1261 250 4 v 541 1261 2616 4 v 3157 1261 29 4 v
3183 1261 4 29 v 415 1382 a(readFilo)24 b Fm(is)k(a)f(shared)g
Fl(Filo)f Fm(ob)5 b(ject)27 b(whose)g(coun)n(ter)g(is)g(initially)h
(zero.)291 1614 y Fe(4.2.3)112 b(Starv)-6 b(ation)291
1768 y Fm(In)20 b(the)h(previous)e(solution,)i(is)g(there)f(an)n(y)f
(danger)h(of)g(deadlo)r(c)n(k?)34 b(In)20 b(order)f(for)h(a)g(deadlo)r
(c)n(k)291 1867 y(to)26 b(o)r(ccur,)f(it)i(m)n(ust)f(b)r(e)h(p)r
(ossible)f(for)f(a)h(thread)g(to)g(w)n(ait)g(on)f(a)h(semaphore)f
(while)h(holding)291 1967 y(another,)g(and)i(thereb)n(y)f(prev)n(en)n
(t)f(itself)j(from)e(b)r(eing)h(signalled.)415 2067 y(In)c(this)f
(example,)h(deadlo)r(c)n(k)e(is)i(not)f(p)r(ossible,)h(but)g(there)f
(is)g(a)g(related)g(problem)g(that)291 2166 y(is)k(almost)g(as)g(bad:)
37 b(it)28 b(is)f(p)r(ossible)g(for)h(a)f(writer)g(to)g(starv)n(e.)415
2266 y(If)c(a)f(writer)f(arriv)n(es)g(while)h(there)g(are)g(readers)e
(in)j(the)g(critical)e(section,)i(it)g(migh)n(t)f(w)n(ait)291
2365 y(in)33 b(queue)h(forev)n(er)e(while)i(readers)d(come)j(and)f(go.)
54 b(As)33 b(long)g(as)g(a)g(new)h(reader)e(arriv)n(es)291
2465 y(b)r(efore)j(the)h(last)f(of)h(the)g(curren)n(t)e(readers)g
(exits,)k(there)d(will)h(alw)n(a)n(ys)e(b)r(e)i(at)f(least)g(one)291
2565 y(reader)26 b(in)i(the)g(ro)r(om.)415 2664 y(This)d(situation)g
(is)g(not)h(a)f(deadlo)r(c)n(k,)f(b)r(ecause)h(some)g(threads)f(are)h
(making)f(progress,)291 2764 y(but)29 b(it)g(is)g(not)g(exactly)f
(desireable.)39 b(A)29 b(program)e(lik)n(e)h(this)h(migh)n(t)g(w)n(ork)
e(as)h(long)g(as)h(the)291 2864 y(load)23 b(on)g(the)i(system)e(is)h
(lo)n(w,)g(b)r(ecause)f(then)i(there)e(are)g(plen)n(t)n(y)h(of)g(opp)r
(ortunities)f(for)h(the)291 2963 y(readers.)34 b(But)26
b(as)f(the)h(load)f(increases)f(the)j(b)r(eha)n(vior)d(of)i(the)g
(system)f(w)n(ould)g(deteriorate)291 3063 y(quic)n(kly)i(\(at)g(least)g
(from)h(the)g(p)r(oin)n(t)f(of)h(view)f(of)h(writers\).)415
3162 y(Puzzle:)61 b(Extend)40 b(this)g(solution)g(so)f(that)h(when)g(a)
g(writer)f(arriv)n(es,)i(the)f(existing)291 3262 y(readers)25
b(can)j(\014nish,)g(but)g(no)f(additional)g(readers)f(ma)n(y)h(en)n
(ter.)p Black Black eop
%%Page: 64 70
64 69 bop Black Black Black Black eop
%%Page: 65 71
65 70 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(65)p 291 286 2865 4 v Black 291 515 a Fe(4.2.4)112
b(No-starv)m(e)38 b(readers-writers)f(hin)m(t)291 669
y Fm(Here's)19 b(a)h(hin)n(t.)35 b(Y)-7 b(ou)20 b(can)g(add)g(a)g
(turnstile)h(for)f(the)g(readers)f(and)h(allo)n(w)f(writers)h(to)g(lo)r
(c)n(k)f(it.)291 768 y(The)26 b(writers)f(ha)n(v)n(e)g(to)h(pass)f
(through)g(the)i(same)e(turnstile,)i(but)f(they)h(should)e(c)n(hec)n(k)
h(the)291 868 y Fl(roomEmpty)d Fm(semaphore)i(while)i(they)g(are)e
(inside)i(the)g(turnstile.)37 b(If)27 b(a)f(writer)g(gets)g(stuc)n(k)
291 967 y(in)h(the)g(turnstile)g(it)g(has)f(the)h(e\013ect)h(of)e
(forcing)g(the)h(readers)e(to)i(queue)g(at)f(the)i(turnstile.)291
1067 y(Then)e(when)f(the)i(last)e(reader)f(lea)n(v)n(es)h(the)h
(critical)f(section,)h(w)n(e)f(are)g(guaran)n(teed)f(that)i(at)291
1167 y(least)h(one)g(writer)g(en)n(ters)g(next)h(\(b)r(efore)f(an)n(y)g
(of)g(the)h(queued)g(readers)e(can)h(pro)r(ceed\).)p
Black 781 1341 a(Listing)g(4.20:)36 b(No-starv)n(e)25
b(readers-writers)g(initialization)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1402 2921 29 v 0.9 TeXcolorgray
Black 262 1402 4 29 v 262 1378 29 4 v 291 1378 250 4
v 541 1378 2616 4 v 3157 1378 29 4 v 3183 1402 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a(1)83
b Fl(Filo)42 b(readers)e(=)j(0)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 1602 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 29 100 v 0.9
TeXcolorgray Black 262 1602 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1602 29 100 v 0.9 TeXcolorgray
Black 3180 1602 4 100 v 415 1572 a Fm(2)83 b Fl(Semaphore)40
b(roomEmpty)f(=)44 b(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1701 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1701 29 100 v 0.9 TeXcolorgray Black
262 1701 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1701 29 100 v 0.9 TeXcolorgray Black 3180 1701 4 100
v 415 1671 a Fm(3)83 b Fl(Semaphore)40 b(turnstile)f(=)44
b(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1730 2921
29 v 0.9 TeXcolorgray Black 262 1730 4 29 v 263 1730
29 4 v 291 1730 250 4 v 541 1730 2616 4 v 3157 1730 29
4 v 3183 1730 4 29 v 415 1851 a(readers)29 b Fm(k)n(eeps)i(trac)n(k)f
(of)h(ho)n(w)g(man)n(y)g(readers)f(are)h(in)g(the)h(ro)r(om;)h(the)f
Fl(Filo)e Fm(lo)r(c)n(ks)291 1950 y Fl(roomEmpty)k Fm(when)39
b(the)g(\014rst)f(reader)f(en)n(ters)h(and)g(unlo)r(c)n(ks)g(it)h(when)
f(the)h(last)f(reader)291 2050 y(lea)n(v)n(es.)415 2150
y Fl(turnstile)24 b Fm(is)k(a)f(turnstile)h(for)f(readers)e(and)j(a)f
(m)n(utex)h(for)f(writers.)p Black Black eop
%%Page: 66 72
66 71 bop Black Black Black Black eop
%%Page: 67 73
67 72 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(67)p 291 286 2865 4 v Black 291 515 a Fe(4.2.5)112
b(No-starv)m(e)38 b(readers-writers)f(solution)291 675
y Fm(Here)27 b(is)g(the)h(writer)f(co)r(de:)p Black 1026
861 a(Listing)g(4.21:)36 b(No-starv)n(e)25 b(writer)i(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 926 2921
29 v 0.9 TeXcolorgray Black 262 926 4 29 v 262 901 29
4 v 291 901 250 4 v 541 901 2616 4 v 3157 901 29 4 v
3183 926 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1025 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1025 29 100 v 0.9 TeXcolorgray Black
262 1025 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1025 29 100 v 0.9 TeXcolorgray Black 3180 1025 4 100
v 415 995 a(1)83 b Fl(turnstile)l(.wait)41 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1125 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1125 29 100 v 0.9 TeXcolorgray Black 262 1125 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1125 29 100
v 0.9 TeXcolorgray Black 3180 1125 4 100 v 415 1095 a
Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1225 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1225 29 100 v 0.9 TeXcolorgray Black 262 1225 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1225 29 100
v 0.9 TeXcolorgray Black 3180 1225 4 100 v 415 1195 a(3)240
b Fl(roomEmpty)l(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1324 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1324 29 100
v 0.9 TeXcolorgray Black 262 1324 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1324 29 100 v 0.9 TeXcolorgray
Black 3180 1324 4 100 v 415 1294 a Fm(4)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1424 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1424 29 100
v 0.9 TeXcolorgray Black 262 1424 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1424 29 100 v 0.9 TeXcolorgray
Black 3180 1424 4 100 v 415 1394 a(5)240 b Fl(critical)40
b(section)h(for)h(writers)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1523 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1523 29 100 v 0.9 TeXcolorgray Black
262 1523 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1523 29 100 v 0.9 TeXcolorgray Black 3180 1523 4 100
v 415 1494 a Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1623 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1623 29 100 v 0.9 TeXcolorgray Black
262 1623 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1623 29 100 v 0.9 TeXcolorgray Black 3180 1623 4 100
v 415 1593 a(7)83 b Fl(turnstile)l(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1723 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1723 29 100 v 0.9 TeXcolorgray Black 262 1723 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1723 29 100
v 0.9 TeXcolorgray Black 3180 1723 4 100 v 415 1693 a
Fm(8)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1822 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1822 29 100 v 0.9 TeXcolorgray Black 262 1822 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1822 29 100
v 0.9 TeXcolorgray Black 3180 1822 4 100 v 415 1792 a(9)83
b Fl(roomEmpty)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1851 2921 29 v 0.9 TeXcolorgray
Black 262 1851 4 29 v 263 1851 29 4 v 291 1851 250 4
v 541 1851 2616 4 v 3157 1851 29 4 v 3183 1851 4 29 v
415 1983 a Fm(If)24 b(a)f(writer)f(arriv)n(es)f(while)j(there)f(are)f
(readers)g(in)h(the)h(ro)r(om,)f(it)h(will)f(blo)r(c)n(k)g(at)g(Line)g
(3,)291 2082 y(whic)n(h)18 b(means)h(that)g(the)g(turnstile)g(will)g(b)
r(e)g(lo)r(c)n(k)n(ed.)33 b(This)18 b(will)h(bar)f(readers)f(from)i(en)
n(tering)291 2182 y(while)27 b(a)h(writer)e(is)i(queued.)37
b(Here)27 b(is)h(the)g(reader)e(co)r(de:)p Black 1021
2367 a(Listing)i(4.22:)35 b(No-starv)n(e)26 b(reader)g(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2432 2921
29 v 0.9 TeXcolorgray Black 262 2432 4 29 v 262 2408
29 4 v 291 2408 250 4 v 541 2408 2616 4 v 3157 2408 29
4 v 3183 2432 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2532 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2532 29 100 v 0.9 TeXcolorgray Black
262 2532 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2532 29 100 v 0.9 TeXcolorgray Black 3180 2532 4 100
v 415 2502 a(1)83 b Fl(turnstile)l(.wait)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2632 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2632 29 100 v 0.9 TeXcolorgray Black 262 2632 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2632 29 100
v 0.9 TeXcolorgray Black 3180 2632 4 100 v 415 2602 a
Fm(2)83 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2731 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2731 29 100
v 0.9 TeXcolorgray Black 262 2731 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2731 29 100 v 0.9 TeXcolorgray
Black 3180 2731 4 100 v 415 2701 a Fm(3)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2831 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2831 29 100
v 0.9 TeXcolorgray Black 262 2831 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2831 29 100 v 0.9 TeXcolorgray
Black 3180 2831 4 100 v 415 2801 a(4)83 b Fl(filo)n(.lock)42
b(\()o(roomEmpty)l(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2931 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2931 29 100 v 0.9 TeXcolorgray Black
262 2931 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2931 29 100 v 0.9 TeXcolorgray Black 3180 2931 4 100
v 415 2901 a Fm(5)240 b Fl(critical)40 b(section)h(for)h(readers)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3030 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3030 29 100 v 0.9 TeXcolorgray Black 262 3030 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3030 29 100
v 0.9 TeXcolorgray Black 3180 3030 4 100 v 415 3000 a
Fm(6)83 b Fl(filo)n(.unlock)41 b(\()o(roomEmpty)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 3058 2921 29 v
0.9 TeXcolorgray Black 262 3058 4 29 v 263 3058 29 4
v 291 3058 250 4 v 541 3058 2616 4 v 3157 3058 29 4 v
3183 3058 4 29 v 415 3191 a Fm(When)34 b(the)g(last)f(reader)e(lea)n(v)
n(es,)j(it)f(signals)f Fl(roomEmpty)p Fm(,)g(un)n(blo)r(c)n(king)g(the)
i(w)n(aiting)291 3290 y(writer.)70 b(The)39 b(writer)f(immediately)i
(en)n(ters)e(its)h(critical)f(section,)k(since)d(none)g(of)g(the)291
3390 y(w)n(aiting)26 b(readers)g(can)i(pass)e(the)i(turnstile.)415
3493 y(When)21 b(the)f(writer)g(exits)g(it)g(signals)f
Fl(turnstile)p Fm(,)f(whic)n(h)i(un)n(blo)r(c)n(ks)f(a)h(w)n(aiting)f
(thread,)291 3593 y(whic)n(h)k(could)h(b)r(e)g(a)g(reader)e(or)h(a)g
(writer.)35 b(Th)n(us,)24 b(this)h(solution)e(guaran)n(tees)f(that)i
(at)f(least)291 3692 y(one)35 b(writer)g(gets)g(to)g(pro)r(ceed,)i(but)
f(it)g(is)f(still)h(p)r(ossible)f(for)g(a)g(reader)f(to)i(en)n(ter)f
(while)291 3792 y(there)27 b(are)g(writers)f(queued.)415
3895 y(Dep)r(ending)h(on)f(the)g(application,)g(it)g(migh)n(t)g(b)r(e)g
(a)g(go)r(o)r(d)f(idea)h(to)g(giv)n(e)f(more)g(priorit)n(y)291
3995 y(to)31 b(writers.)49 b(F)-7 b(or)31 b(example,)i(if)f(writers)f
(are)g(making)g(time-critical)g(up)r(dates)h(to)g(a)f(data)291
4095 y(structure,)36 b(it)f(is)f(b)r(est)h(to)g(minimize)g(the)g(n)n
(um)n(b)r(er)f(of)h(readers)e(that)i(see)f(the)h(old)f(data)291
4194 y(b)r(efore)27 b(the)h(writer)f(has)g(a)g(c)n(hance)g(to)g(pro)r
(ceed.)415 4297 y(In)g(general,)e(though,)h(it)h(is)f(up)g(to)h(the)f
(sc)n(heduler,)g(not)g(the)h(programmer,)d(to)i(c)n(ho)r(ose)291
4397 y(whic)n(h)f(w)n(aiting)f(thread)h(to)g(un)n(blo)r(c)n(k.)36
b(Some)25 b(sc)n(hedulers)f(use)h(a)g(\014rst-in-\014rst-out)f(queue,)
291 4497 y(whic)n(h)i(means)g(that)h(threads)f(are)f(un)n(blo)r(c)n(k)n
(ed)h(in)h(the)g(same)f(order)f(they)i(queued.)36 b(Other)291
4596 y(sc)n(hedulers)d(c)n(ho)r(ose)g(at)h(random,)i(or)d(according)g
(to)h(a)g(priorit)n(y)f(sc)n(heme)h(based)g(on)h(the)291
4696 y(prop)r(erties)26 b(of)i(the)g(w)n(aiting)f(threads.)415
4799 y(If)37 b(y)n(our)d(programming)g(en)n(vironmen)n(t)h(mak)n(es)g
(it)i(p)r(ossible)e(to)h(giv)n(e)f(some)h(threads)291
4899 y(priorit)n(y)25 b(o)n(v)n(er)g(others,)i(then)g(that)g(is)g(a)g
(simple)g(w)n(a)n(y)e(to)i(address)f(this)h(issue.)36
b(If)28 b(not,)f(y)n(ou)291 4998 y(will)g(ha)n(v)n(e)g(to)g(\014nd)h
(another)f(w)n(a)n(y)-7 b(.)p Black Black eop
%%Page: 68 74
68 73 bop Black 739 252 a Fo(68)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 863
515 a Fm(Puzzle:)44 b(W)-7 b(rite)32 b(a)f(solution)g(to)g(the)h
(readers-writers)c(problem)j(that)g(giv)n(es)g(priorit)n(y)739
615 y(to)26 b(writers.)36 b(That)26 b(is,)h(once)f(a)g(writer)g(arriv)n
(es,)f(no)h(readers)f(should)h(b)r(e)h(allo)n(w)n(ed)e(to)i(en)n(ter)
739 715 y(un)n(til)h(all)f(writers)g(ha)n(v)n(e)f(left)j(the)f(system.)
p Black Black eop
%%Page: 69 75
69 74 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(69)p 291 286 2865 4 v Black 291 515 a Fe(4.2.6)112
b(W)-9 b(riter-priorit)m(y)33 b(readers-writers)k(hin)m(t)291
669 y Fm(As)27 b(usual,)h(the)g(hin)n(t)g(is)f(in)h(the)g(form)f(of)h
(v)-5 b(ariables)26 b(used)i(in)f(the)h(solution.)p Black
687 843 a(Listing)g(4.23:)35 b(W)-7 b(riter-priorit)n(y)26
b(readers-writers)e(initialization)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 2921 29 v 0.9 TeXcolorgray Black
262 904 4 29 v 262 879 29 4 v 291 879 250 4 v 541 879
2616 4 v 3157 879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1004 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 29 100
v 0.9 TeXcolorgray Black 262 1004 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1004 29 100 v 0.9 TeXcolorgray
Black 3180 1004 4 100 v 415 974 a(1)83 b Fl(Filo)42 b(readFilo)l(,)h
(writeFilo)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 1104 29 100 v 0.9 TeXcolorgray Black
262 1104 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1104 29 100 v 0.9 TeXcolorgray Black 3180 1104 4 100
v 415 1074 a Fm(2)83 b Fl(Semaphore)40 b(mutex)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(3)83 b Fl(Semaphore)40 b(noReaders)f(=)44 b(1)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1303 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a
Fm(4)83 b Fl(Semaphore)40 b(noWriters)f(=)44 b(1)p 0.9
TeXcolorgray 0.9 TeXcolorgray 262 1331 2921 29 v 0.9
TeXcolorgray Black 262 1331 4 29 v 263 1331 29 4 v 291
1331 250 4 v 541 1331 2616 4 v 3157 1331 29 4 v 3183
1331 4 29 v Black Black eop
%%Page: 70 76
70 75 bop Black Black Black Black eop
%%Page: 71 77
71 76 bop Black 291 252 a Fo(4.2)30 b(Readers)i(and)g(writers)1770
b(71)p 291 286 2865 4 v Black 291 515 a Fe(4.2.7)112
b(W)-9 b(riter-priorit)m(y)33 b(readers-writers)k(solution)291
669 y Fm(Here)27 b(is)g(the)h(reader)e(co)r(de:)p Black
928 843 a(Listing)h(4.24:)36 b(W)-7 b(riter-priorit)n(y)25
b(reader)h(solution)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 904 2921 29 v 0.9 TeXcolorgray Black 262 904 4 29
v 262 879 29 4 v 291 879 250 4 v 541 879 2616 4 v 3157
879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(noReaders)l(.wait)n(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)240 b Fl(readFilo)l(.lock)42 b(\()o(noWriters)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(3)83 b Fl(noReaders)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(4)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1402 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1402 29 100
v 0.9 TeXcolorgray Black 262 1402 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1402 29 100 v 0.9 TeXcolorgray
Black 3180 1402 4 100 v 415 1373 a(5)240 b Fl(critical)40
b(section)h(for)h(readers)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1502 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1502 29 100 v 0.9 TeXcolorgray Black
262 1502 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1502 29 100 v 0.9 TeXcolorgray Black 3180 1502 4 100
v 415 1472 a Fm(6)83 b Fl(readFilo)l(.unlock)41 b(\(noWriters)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1530 2921 29 v
0.9 TeXcolorgray Black 262 1530 4 29 v 263 1530 29 4
v 291 1530 250 4 v 541 1530 2616 4 v 3157 1530 29 4 v
3183 1530 4 29 v 415 1652 a Fm(If)29 b(a)f(reader)e(is)i(in)h(the)f
(critical)g(section,)g(it)h(holds)e Fl(noWriters)p Fm(,)e(but)k(it)g
(do)r(esn't)f(hold)291 1751 y Fl(noReaders)p Fm(.)55
b(Th)n(us)34 b(if)h(a)g(writer)f(arriv)n(es)f(it)i(can)g(lo)r(c)n(k)f
Fl(noReaders)p Fm(,)f(whic)n(h)i(will)g(cause)291 1851
y(subsequen)n(t)27 b(readers)f(to)h(queue.)415 1950 y(When)20
b(the)g(last)f(reader)f(exits,)j(it)f(signals)e Fl(noWriters)p
Fm(,)g(allo)n(wing)g(an)n(y)g(queued)i(writers)291 2050
y(to)27 b(pro)r(ceed.)415 2150 y(The)h(writer)f(co)r(de:)p
Black 932 2324 a(Listing)h(4.25:)35 b(W)-7 b(riter-priorit)n(y)26
b(writer)h(solution)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2385 2921 29 v 0.9 TeXcolorgray Black 262 2385 4
29 v 262 2361 29 4 v 291 2361 250 4 v 541 2361 2616 4
v 3157 2361 29 4 v 3183 2385 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2485 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2485 29 100
v 0.9 TeXcolorgray Black 262 2485 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2485 29 100 v 0.9 TeXcolorgray
Black 3180 2485 4 100 v 415 2455 a(1)83 b Fl(writeFilo)l(.lock)41
b(\(noReaders)l(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2585 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2585 29 100 v 0.9 TeXcolorgray Black
262 2585 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2585 29 100 v 0.9 TeXcolorgray Black 3180 2585 4 100
v 415 2555 a Fm(2)240 b Fl(noWriters)l(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2684 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2684 29 100 v 0.9 TeXcolorgray Black 262 2684 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2684 29 100
v 0.9 TeXcolorgray Black 3180 2684 4 100 v 415 2654 a
Fm(3)396 b Fl(critical)41 b(section)f(for)j(writers)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2784 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2784 29 100 v 0.9 TeXcolorgray Black 262 2784 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2784 29 100
v 0.9 TeXcolorgray Black 3180 2784 4 100 v 415 2754 a
Fm(4)240 b Fl(noWriters)l(.)o(signal)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2884 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2884 29 100 v 0.9 TeXcolorgray Black 262 2884 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2884 29 100
v 0.9 TeXcolorgray Black 3180 2884 4 100 v 415 2854 a
Fm(5)83 b Fl(writeFilo)l(.unlock)41 b(\()o(noReaders)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 2912 2921 29 v
0.9 TeXcolorgray Black 262 2912 4 29 v 263 2912 29 4
v 291 2912 250 4 v 541 2912 2616 4 v 3157 2912 29 4 v
3183 2912 4 29 v 415 3033 a Fm(When)50 b(a)e(writer)g(is)h(in)g(the)h
(critical)e(section)h(it)g(holds)f(b)r(oth)i Fl(noReaders)45
b Fm(and)291 3133 y Fl(noWriters)p Fm(.)31 b(This)24
b(has)f(the)h(\(relativ)n(ely)e(ob)n(vious\))h(e\013ect)g(of)h
(insuring)f(that)g(there)h(are)e(no)291 3232 y(readers)i(and)i(no)g
(other)g(writers)f(in)i(the)f(critical)g(section.)36
b(In)26 b(addition,)h Fl(writeFilo)22 b Fm(has)291 3332
y(the)g(\(less)h(ob)n(vious\))e(e\013ect)i(of)g(allo)n(wing)e(m)n
(ultiple)i(writers)e(to)i(queue)f(on)g Fl(noWriters)p
Fm(,)e(but)291 3432 y(k)n(eeping)31 b Fl(noReaders)e
Fm(lo)r(c)n(k)n(ed)i(while)h(they)h(are)e(there.)51 b(Th)n(us,)33
b(man)n(y)f(writers)f(can)h(pass)291 3531 y(through)g(the)h(critical)g
(section)g(without)g(without)h(ev)n(er)e(signalling)g
Fl(noReaders)p Fm(.)49 b(Only)291 3631 y(when)27 b(the)h(last)g(writer)
f(exits)g(can)g(the)h(readers)e(en)n(ter.)415 3730 y(Of)k(course,)g(a)f
(dra)n(wbac)n(k)f(of)i(this)g(solution)g(is)g(that)g(no)n(w)g(it)g(is)g
(p)r(ossible)g(for)f Fg(r)l(e)l(aders)291 3830 y Fm(to)24
b(starv)n(e)e(\(or)i(at)g(least)g(face)g(long)f(dela)n(ys\).)35
b(F)-7 b(or)23 b(some)h(applications)f(it)i(migh)n(t)f(b)r(e)h(b)r
(etter)291 3930 y(to)i(get)g(obsolete)g(data)g(with)h(predictable)g
(turnaround)e(times.)415 4029 y(Also,)31 b(this)g(solution)f(do)r(es)g
(not)g(quite)h(satisfy)f(all)g(the)h(requiremen)n(ts.)44
b(While)31 b(there)291 4129 y(is)36 b(a)f(writer)h(in)g(the)g(critical)
g(section,)h(it)g(is)f(p)r(ossible)g(for)f(m)n(ultiple)i(readers)d(to)i
(queue)291 4229 y(on)31 b Fl(noReaders)p Fm(.)47 b(If)33
b(a)f(writer)f(arriv)n(es,)g(it)i(will)f(queue)h(on)e
Fl(noReaders)e Fm(along)i(with)i(the)291 4328 y(w)n(aiting)28
b(readers.)38 b(When)29 b(the)g(\014rst)g(writer)f(lea)n(v)n(es)f(the)i
(critical)f(section,)h(the)g(sc)n(heduler)291 4428 y(migh)n(t)e(allo)n
(w)g(the)h(w)n(aiting)e(readers)g(to)i(go)f(ahead)f(of)i(the)g(writer.)
415 4527 y(Again,)g(dep)r(ending)h(on)f(the)h(application,)f(that)h(p)r
(ossibilit)n(y)f(migh)n(t)g(b)r(e)h(tolerable.)38 b(If)291
4627 y(not,)27 b(w)n(e)g(can)h(impro)n(v)n(e)e(the)i(situation)f(b)n(y)
h(adding)f(a)g(m)n(utex)h(to)f(the)h(reader)e(co)r(de:)p
Black Black eop
%%Page: 72 78
72 77 bop Black 739 252 a Fo(72)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black Black
1195 515 a Fm(Listing)27 b(4.26:)36 b(W)-7 b(riter-priorit)n(y)25
b(impro)n(v)n(ed)i(reader)f(solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 577 2921 29 v 0.9 TeXcolorgray Black
711 577 4 29 v 711 552 29 4 v 739 552 250 4 v 989 552
2616 4 v 3605 552 29 4 v 3631 577 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 739 676 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 676 29 100
v 0.9 TeXcolorgray Black 711 676 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 676 29 100 v 0.9 TeXcolorgray Black
3628 676 4 100 v 863 646 a(1)83 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 776 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 776 29 100 v 0.9 TeXcolorgray Black 711 776 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 776 29 100 v
0.9 TeXcolorgray Black 3628 776 4 100 v 863 746 a Fm(2)240
b Fl(noReaders)l(.wait)n(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 876 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 876 29 100 v 0.9
TeXcolorgray Black 711 876 4 100 v 0.9 TeXcolorgray 0.9
TeXcolorgray 3603 876 29 100 v 0.9 TeXcolorgray Black
3628 876 4 100 v 863 846 a Fm(3)397 b Fl(readFilo)l(.lock)42
b(\(noWriters)l(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 975 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 975 29 100 v 0.9 TeXcolorgray Black
711 975 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
975 29 100 v 0.9 TeXcolorgray Black 3628 975 4 100 v
863 945 a Fm(4)240 b Fl(noReaders)l(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 1075 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1075 29 100 v 0.9 TeXcolorgray Black 711 1075 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1075 29 100
v 0.9 TeXcolorgray Black 3628 1075 4 100 v 863 1045 a
Fm(5)83 b Fl(mutex)n(.)o(signal)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1174 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1174 29 100
v 0.9 TeXcolorgray Black 711 1174 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1174 29 100 v 0.9 TeXcolorgray
Black 3628 1174 4 100 v 863 1145 a Fm(6)p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1274 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1274 29 100
v 0.9 TeXcolorgray Black 711 1274 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1274 29 100 v 0.9 TeXcolorgray
Black 3628 1274 4 100 v 863 1244 a(7)240 b Fl(critical)40
b(section)h(for)h(readers)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1374 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1374 29 100 v 0.9 TeXcolorgray Black
711 1374 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1374 29 100 v 0.9 TeXcolorgray Black 3628 1374 4 100
v 863 1344 a Fm(8)83 b Fl(readFilo)m(.)o(unlock)41 b(\(noWriters)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 711 1402 2921 29 v
0.9 TeXcolorgray Black 711 1402 4 29 v 712 1402 29 4
v 739 1402 250 4 v 989 1402 2616 4 v 3605 1402 29 4 v
3631 1402 4 29 v 863 1523 a Fm(No)n(w)c(there)g(can)f(b)r(e)i(at)f
(most)f(one)h(reader)f(queued)h(on)f Fl(noReaders)p Fm(.)62
b(If)37 b(a)g(writer)739 1623 y(arriv)n(es,)27 b(it)i(will)g(ha)n(v)n
(e)e(to)h(w)n(ait)h(for)f(an)n(y)g(readers)e(in)j(the)g(critical)f
(section,)h(and)f(it)h(migh)n(t)739 1722 y(ha)n(v)n(e)d(to)i(w)n(ait)f
(for)g(the)h(queued)g(reader,)e(but)i(that's)g(all.)863
1822 y(Y)-7 b(ou)29 b(migh)n(t)f(w)n(an)n(t)g(to)g(k)n(eep)g(this)h
(tric)n(k)e(in)i(mind.)40 b(T)-7 b(o)28 b(limit)h(the)g(n)n(um)n(b)r
(er)f(of)g(threads)739 1922 y(in)g(a)f(certain)g(queue,)h(surround)e
(it)i(with)g(a)f(m)n(utex)h(or)f(a)g(m)n(ultiplex.)739
2196 y Fh(4.3)135 b(Mutex)45 b(without)h(starv)-7 b(ation)739
2378 y Fm(An)n(y)27 b(time)g(w)n(e)f(use)h(a)f(semaphore)g(as)g(a)g(m)n
(utex,)h(there)g(is)f(at)h(least)f(a)h(theoretical)e(danger)739
2478 y(of)34 b(starv)-5 b(ation.)54 b(If)34 b(a)g(lo)n(w-priorit)n(y)d
(thread)j(is)f(w)n(aiting)g(on)h(the)g(m)n(utex,)i(it)e(migh)n(t)g(w)n
(ait)739 2577 y(forev)n(er)26 b(as)h(higher-priorit)n(y)e(threads)i
(arriv)n(e)e(and)j(pro)r(ceed.)863 2677 y(In)c(the)f(previous)f
(section,)i(w)n(e)f(addressed)f(what)h(I'll)h(call)e
Fo(categorical)28 b(starv)-5 b(ation)p Fm(,)739 2777
y(in)23 b(whic)n(h)g(one)g(category)e(of)i(threads)g(\(readers\))f
(allo)n(w)n(ed)f(another)h(category)g(\(writers\))g(to)739
2876 y(starv)n(e.)43 b(But)31 b(ev)n(en)e(in)i(the)f(\\no-starv)n(e")d
(solution)j(it)h(is)f(p)r(ossible)f(for)h(a)g(thread)g(to)g(w)n(ait)739
2976 y(inde\014nitely)e(while)g(other)f(threads)g(pass)g(it)h(b)n(y)-7
b(.)863 3075 y(According)81 b(to)g(Stallings)1777 3045
y Fj(1)1813 3075 y Fm(,)95 b(Dijkstra)81 b(ac)n(kno)n(wledged)e(this)j
(limitation)f(of)739 3175 y(semaphores,)26 b(and)g(conjectured)h(that)h
(there)f(w)n(as)f(no)h(w)n(a)n(y)f(to)h(solv)n(e)e(the)j(problem)f
(using)739 3275 y(a)g(\014nite)h(n)n(um)n(b)r(er)g(of)f(semaphores.)863
3374 y(In)21 b(1979,)g(J.M.)g(Morris)e(refuted)i(the)g(conjecture)g(b)n
(y)g(solving)e(the)j(problem.)34 b(Stallings)739 3474
y(pro)n(vides)26 b(some)h(hin)n(ts)h(ab)r(out)f(ho)n(w)g(the)h
(solution)f(w)n(orks;)f(our)h(job)h(is)f(to)h(recreate)e(it.)863
3574 y(Assume)j(that)h(w)n(e)e(ha)n(v)n(e)g(a)g(semaphore)g(named)g
Fl(sem)g Fm(that)h(w)n(e)g(are)f(using)g(to)h(enforce)739
3673 y(m)n(utual)f(exclusion.)36 b(The)27 b(con)n(v)n(en)n(tional)f(m)n
(utex)i(lo)r(oks)e(lik)n(e)i(this:)p Black 1564 3848
a(Listing)f(4.27:)36 b(Con)n(v)n(en)n(tional)25 b(m)n(utex)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 3909 2921
29 v 0.9 TeXcolorgray Black 711 3909 4 29 v 711 3884
29 4 v 739 3884 250 4 v 989 3884 2616 4 v 3605 3884 29
4 v 3631 3909 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4009 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4009 29 100 v 0.9 TeXcolorgray Black
711 4009 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4009 29 100 v 0.9 TeXcolorgray Black 3628 4009 4 100
v 863 3979 a(1)83 b Fl(sem)o(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 4108 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4108 29 100 v 0.9 TeXcolorgray Black 711 4108 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4108 29 100
v 0.9 TeXcolorgray Black 3628 4108 4 100 v 863 4078 a
Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 4208 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 4208 29 100 v 0.9 TeXcolorgray Black 711 4208 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 4208 29 100
v 0.9 TeXcolorgray Black 3628 4208 4 100 v 863 4178 a(3)83
b Fl(critical)40 b(section)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4308 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4308 29 100 v 0.9 TeXcolorgray Black
711 4308 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4308 29 100 v 0.9 TeXcolorgray Black 3628 4308 4 100
v 863 4278 a Fm(4)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 4407 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 4407 29 100 v 0.9 TeXcolorgray Black
711 4407 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
4407 29 100 v 0.9 TeXcolorgray Black 3628 4407 4 100
v 863 4377 a(5)83 b Fl(sem)o(.)o(signal)41 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 711 4435 2921 29 v 0.9
TeXcolorgray Black 711 4435 4 29 v 712 4435 29 4 v 739
4435 250 4 v 989 4435 2616 4 v 3605 4435 29 4 v 3631
4435 4 29 v 863 4557 a Fm(Puzzle:)d(add)27 b(semaphores)g(and)h(other)f
(co)r(de)h(to)g(this)g(m)n(utex)g(so)f(that)i(w)n(e)e(can)h(mak)n(e)739
4656 y(the)c(follo)n(wing)e(guaran)n(tee:)33 b(once)23
b(a)g(thread)g(arriv)n(es)e(and)i(attempts)h(to)f(en)n(ter)g(the)h(m)n
(utex,)739 4756 y(there)j(is)h(a)f(b)r(ound)h(on)f(the)h(n)n(um)n(b)r
(er)g(of)f(threads)g(that)h(can)f(pro)r(ceed)g(ahead)g(of)g(it.)p
Black 739 4921 1146 4 v 831 4975 a Fc(1)866 4998 y Fb(Op)l(er)l(ating)f
(Systems)p Fa(,)d(page)i(260)p Black Black Black eop
%%Page: 73 79
73 78 bop Black 291 252 a Fo(4.3)30 b(Mutex)i(without)g(starv)-5
b(ation)1536 b(73)p 291 286 2865 4 v Black 291 515 a
Fe(4.3.1)112 b(No-starv)m(e)38 b(m)m(utex)e(hin)m(t)291
673 y Fm(Morris's)27 b(solution)j(creates)e(a)h(w)n(aiting)g(ro)r(om)g
(b)r(et)n(w)n(een)g(t)n(w)n(o)g(turnstiles.)42 b(A)30
b(thread)f(has)291 773 y(to)e(pass)g(b)r(oth)h(turnstiles)f(b)r(efore)h
(it)g(can)f(w)n(ait)g(on)g Fl(sem)p Fm(.)415 875 y(Whenev)n(er)41
b(threads)f(are)g(w)n(aiting)h(on)g Fl(sem)p Fm(,)i(the)f(second)e
(turnstile)i(is)f(closed,)j(so)291 975 y(arriving)25
b(threads)i(accum)n(ulate)g(in)h(the)g(w)n(aiting)f(ro)r(om.)415
1077 y(When)c(the)g(last)f(thread)g(w)n(aiting)g(on)h
Fl(sem)e Fm(lea)n(v)n(es,)h(the)h(\014rst)f(turnstile)h(closes,)f
(barring)291 1177 y(additional)31 b(arriv)-5 b(als,)30
b(and)i(the)g(second)f(turnstile)g(op)r(ens,)i(allo)n(wing)d(all)h(the)
h(threads)f(in)291 1276 y(the)h(w)n(aiting)f(ro)r(om)h(to)g(pro)r
(ceed.)49 b(Although)33 b(there)e(ma)n(y)h(b)r(e)g(an)g(arbitrary)e(n)n
(um)n(b)r(er)i(of)291 1376 y(threads)h(in)i(the)g(w)n(aiting)e(ro)r
(om,)j(eac)n(h)d(one)h(is)h(guaran)n(teed)d(to)j(get)f(the)h(m)n(utex)f
(b)r(efore)291 1476 y(an)n(y)26 b(future)i(arriv)-5 b(als.)415
1578 y(Once)35 b(the)i(w)n(aiting)e(ro)r(om)g(is)g(empt)n(y)-7
b(,)38 b(the)f(second)e(turnstile)h(closes)e(and)i(the)g(\014rst)291
1678 y(op)r(ens,)27 b(restoring)f(the)i(original)e(state.)415
1780 y(Here)h(are)g(the)h(semaphores)e(and)h(other)g(v)-5
b(ariables)27 b(I)g(used)h(in)g(m)n(y)f(solution.)p Black
1092 1962 a(Listing)g(4.28:)36 b(No-starv)n(e)25 b(m)n(utex)j(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2026 2921
29 v 0.9 TeXcolorgray Black 262 2026 4 29 v 262 2001
29 4 v 291 2001 250 4 v 541 2001 2616 4 v 3157 2001 29
4 v 3183 2026 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2126 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2126 29 100 v 0.9 TeXcolorgray Black
262 2126 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2126 29 100 v 0.9 TeXcolorgray Black 3180 2126 4 100
v 415 2096 a(1)83 b Fl(int)42 b(room1)n(,)h(room2)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2225 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2225 29 100 v 0.9 TeXcolorgray Black 262 2225 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2225 29 100
v 0.9 TeXcolorgray Black 3180 2225 4 100 v 415 2195 a
Fm(2)83 b Fl(Semaphore)40 b(mutex)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2325 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2325 29 100
v 0.9 TeXcolorgray Black 262 2325 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2325 29 100 v 0.9 TeXcolorgray
Black 3180 2325 4 100 v 415 2295 a Fm(3)83 b Fl(Semaphore)40
b(turnstile1)f(=)k(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2425 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2425 29 100 v 0.9 TeXcolorgray Black
262 2425 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2425 29 100 v 0.9 TeXcolorgray Black 3180 2425 4 100
v 415 2395 a Fm(4)83 b Fl(Semaphore)40 b(turnstile2)f(=)k(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2524 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2524 29 100 v 0.9 TeXcolorgray Black 262 2524 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2524 29 100
v 0.9 TeXcolorgray Black 3180 2524 4 100 v 415 2494 a
Fm(5)83 b Fl(boolean)40 b(flag)p 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2552 2921 29 v 0.9 TeXcolorgray Black
262 2552 4 29 v 263 2552 29 4 v 291 2552 250 4 v 541
2552 2616 4 v 3157 2552 29 4 v 3183 2552 4 29 v 415 2681
a(room1)27 b Fm(and)h Fl(room2)f Fm(k)n(eep)h(trac)n(k)g(of)h(ho)n(w)f
(man)n(y)g(threads)g(are)g(in)h(the)g(w)n(aiting)f(ro)r(om,)291
2781 y(and)f(ho)n(w)g(man)n(y)g(are)g(w)n(aiting)f(on)i
Fl(sem)p Fm(.)35 b Fl(mutex)26 b Fm(protects)h(the)h(coun)n(ters.)415
2883 y(The)g(turnstiles)g(are)g(self-explanatory)-7 b(.)36
b(The)28 b Fl(flag)f Fm(indicates)h(what)g(mo)r(de)g(the)h(sys-)291
2983 y(tem)g(is)f(in.)40 b(If)29 b(it)g(is)f Fl(true)p
Fm(,)g(that)g(means)h(that)f(the)h(\014rst)g(turnstile)f(is)h(lo)r(c)n
(k)n(ed)e(and)i(w)n(e)f(are)291 3083 y(w)n(aiting)e(for)i(threads)e(to)
i(lea)n(v)n(e)e(the)i(w)n(aiting)f(ro)r(om.)291 3329
y Fe(4.3.2)112 b(No-starv)m(e)38 b(m)m(utex)e(solution)291
3487 y Fm(The)27 b(w)n(aiting)g(ro)r(om)g(idea)g(is)h(simple)f(enough,)
g(but)i(getting)e(it)h(to)f(w)n(ork)g(is)g(tric)n(ky)-7
b(.)p Black 1143 3669 a(Listing)28 b(4.29:)35 b(Morris's)26
b(algorithm)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3733 2921 29 v 0.9 TeXcolorgray Black 262 3733 4
29 v 262 3708 29 4 v 291 3708 250 4 v 541 3708 2616 4
v 3157 3708 29 4 v 3183 3733 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3833 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3833 29 100
v 0.9 TeXcolorgray Black 262 3833 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3833 29 100 v 0.9 TeXcolorgray
Black 3180 3833 4 100 v 415 3803 a(1)83 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3932 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3932 29 100 v 0.9 TeXcolorgray Black 262 3932 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3932 29 100
v 0.9 TeXcolorgray Black 3180 3932 4 100 v 415 3903 a
Fm(2)240 b Fl(room1)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 4032 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4032 29 100 v 0.9 TeXcolorgray Black
262 4032 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
4032 29 100 v 0.9 TeXcolorgray Black 3180 4032 4 100
v 415 4002 a Fm(3)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4132 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4132 29 100 v 0.9 TeXcolorgray Black 262 4132 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4132 29 100
v 0.9 TeXcolorgray Black 3180 4132 4 100 v 415 4102 a
Fm(4)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4231 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4231 29 100 v 0.9 TeXcolorgray Black 262 4231 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4231 29 100
v 0.9 TeXcolorgray Black 3180 4231 4 100 v 415 4201 a(5)83
b Fl(turnstile)l(.wait)41 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 4331 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 4331 29 100 v 0.9
TeXcolorgray Black 262 4331 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4331 29 100 v 0.9 TeXcolorgray
Black 3180 4331 4 100 v 415 4301 a Fm(6)240 b Fl(room2)m(++)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4431 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4431 29 100 v 0.9 TeXcolorgray Black 262 4431 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4431 29 100
v 0.9 TeXcolorgray Black 3180 4431 4 100 v 415 4401 a
Fm(7)g Fl(mutex)m(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4530 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4530 29 100
v 0.9 TeXcolorgray Black 262 4530 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4530 29 100 v 0.9 TeXcolorgray
Black 3180 4530 4 100 v 415 4500 a Fm(8)396 b Fl(room1)n(--)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4630 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4630 29 100 v 0.9 TeXcolorgray Black 262 4630 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4630 29 100
v 0.9 TeXcolorgray Black 3180 4630 4 100 v 415 4600 a
Fm(9)g Fl(if)43 b(\(room1)e(==)i(0\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4729 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4729 29 100
v 0.9 TeXcolorgray Black 262 4729 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4729 29 100 v 0.9 TeXcolorgray
Black 3180 4729 4 100 v 374 4700 a Fm(10)552 b Fl(mutex)n(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4829 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4829 29 100 v 0.9 TeXcolorgray Black 262 4829 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4829 29 100
v 0.9 TeXcolorgray Black 3180 4829 4 100 v 374 4799 a
Fm(11)552 b Fl(sem)o(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4929 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4929 29 100
v 0.9 TeXcolorgray Black 262 4929 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4929 29 100 v 0.9 TeXcolorgray
Black 3180 4929 4 100 v 374 4899 a Fm(12)395 b Fl(else)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 5028 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 5028 29 100 v 0.9 TeXcolorgray Black 262 5028 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 5028 29 100
v 0.9 TeXcolorgray Black 3180 5028 4 100 v 374 4998 a
Fm(13)552 b Fl(mutex)n(.signal)41 b(\(\))p Black Black
eop
%%Page: 74 80
74 79 bop Black 739 252 a Fo(74)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 0.9
TeXcolorgray 0.9 TeXcolorgray 739 545 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 545 29 100 v 0.9 TeXcolorgray Black 711 545 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 545 29 100 v
0.9 TeXcolorgray Black 3628 545 4 100 v 822 515 a Fm(14)553
b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 645 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 645 29 100
v 0.9 TeXcolorgray Black 711 645 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 645 29 100 v 0.9 TeXcolorgray Black
3628 645 4 100 v 822 615 a Fm(15)p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 744 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 744 29 100 v 0.9
TeXcolorgray Black 711 744 4 100 v 0.9 TeXcolorgray 0.9
TeXcolorgray 3603 744 29 100 v 0.9 TeXcolorgray Black
3628 744 4 100 v 822 715 a(16)82 b Fl(sem)o(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 844 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 844 29 100 v 0.9 TeXcolorgray Black 711 844 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 844 29 100 v
0.9 TeXcolorgray Black 3628 844 4 100 v 822 814 a Fm(17)239
b Fl(room2)n(--)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
944 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 944 29 100 v 0.9 TeXcolorgray Black
711 944 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
944 29 100 v 0.9 TeXcolorgray Black 3628 944 4 100 v
822 914 a Fm(18)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
1043 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1043 29 100 v 0.9 TeXcolorgray Black
711 1043 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1043 29 100 v 0.9 TeXcolorgray Black 3628 1043 4 100
v 822 1013 a(19)g Fl(//)43 b(critical)d(section)p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 1143 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1143 29 100 v 0.9 TeXcolorgray Black 711 1143 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1143 29 100
v 0.9 TeXcolorgray Black 3628 1143 4 100 v 822 1113 a
Fm(20)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1243 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1243 29 100 v 0.9 TeXcolorgray Black 711 1243 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1243 29 100
v 0.9 TeXcolorgray Black 3628 1243 4 100 v 822 1213 a(21)239
b Fl(if)43 b(\()o(room2)f(==)g(0\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1342 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1342 29 100
v 0.9 TeXcolorgray Black 711 1342 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1342 29 100 v 0.9 TeXcolorgray
Black 3628 1342 4 100 v 822 1312 a Fm(22)396 b Fl(turnstile)l(.signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1442
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 711 1442 29 100 v 0.9 TeXcolorgray Black
711 1442 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1442 29 100 v 0.9 TeXcolorgray Black 3628 1442 4 100
v 822 1412 a Fm(23)239 b Fl(else)p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 1541 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 1541 29 100 v 0.9
TeXcolorgray Black 711 1541 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1541 29 100 v 0.9 TeXcolorgray
Black 3628 1541 4 100 v 822 1512 a Fm(24)396 b Fl(sem)o(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1570 2921
29 v 0.9 TeXcolorgray Black 711 1570 4 29 v 712 1570
29 4 v 739 1570 250 4 v 989 1570 2616 4 v 3605 1570 29
4 v 3631 1570 4 29 v 863 1703 a Fm(Morris)20 b(pro)n(v)n(es)g(the)i
(correctness)d(of)j(this)f(algorithm)g(with)h(a)f(deft)h(dose)f(of)g
(formalism.)739 1803 y(I)37 b(w)n(ould)g(lik)n(e)g(to)g(\014nd)g(a)g(w)
n(a)n(y)f(to)h(explain)g(it)h(in)f(less)g(formal)f(terms,)k(but)e(so)e
(far)h(I'm)739 1902 y(stump)r(ed.)739 2199 y Fh(4.4)135
b(Cigarette)47 b(smok)l(er's)g(problem)739 2388 y Fm(The)19
b(cigarette)f(smok)n(er's)g(problem)h(problem)g(w)n(as)f(originally)f
(presen)n(ted)i(b)n(y)g(Suhas)g(P)n(atil,)739 2488 y(who)26
b(claimed)g(that)h(it)g(cannot)f(b)r(e)g(solv)n(ed)g(with)h
(semaphores.)34 b(That)27 b(claim)f(comes)g(with)739
2587 y(some)h(quali\014cations,)f(but)j(in)e(an)n(y)g(case)g(the)h
(problem)f(is)g(in)n(teresting)g(and)h(c)n(hallenging.)863
2691 y(F)-7 b(our)31 b(threads)g(are)f(in)n(v)n(olv)n(ed:)43
b(an)31 b(agen)n(t)g(and)g(three)g(smok)n(ers.)47 b(The)31
b(smok)n(ers)f(lo)r(op)739 2791 y(forev)n(er,)d(\014rst)h(w)n(aiting)g
(for)g(ingredien)n(ts,)g(then)h(making)e(and)i(smoking)e(cigarettes.)38
b(The)739 2890 y(ingredien)n(ts)27 b(are)f(tobacco,)h(pap)r(er,)g(and)g
(matc)n(hes.)863 2994 y(W)-7 b(e)25 b(assume)e(that)h(the)g(agen)n(t)f
(has)g(an)g(in\014nite)i(supply)f(of)g(all)f(three)h(ingredien)n(ts,)f
(and)739 3094 y(eac)n(h)31 b(smok)n(er)g(has)h(an)g(in\014nite)h
(supply)f(of)h(one)e(of)i(the)f(ingredien)n(ts.)50 b(No)33
b(t)n(w)n(o)e(smok)n(ers)739 3193 y(ha)n(v)n(e)26 b(the)i(same)f
(ingredien)n(t.)863 3297 y(The)c(agen)n(t)e(rep)r(eatedly)h(c)n(ho)r
(oses)f(t)n(w)n(o)g(di\013eren)n(t)h(ingredien)n(ts)g(at)g(random)f
(and)h(mak)n(es)739 3397 y(them)27 b(a)n(v)-5 b(ailable)24
b(to)i(the)h(smok)n(ers.)34 b(Dep)r(ending)27 b(on)f(whic)n(h)g
(ingredien)n(ts)f(are)g(c)n(hosen,)h(the)739 3496 y(smok)n(er)j(with)j
(the)f(complemen)n(tary)f(ingredien)n(t)g(should)h(pic)n(k)g(up)g(b)r
(oth)g(resources)e(and)739 3596 y(pro)r(ceed.)863 3700
y(F)-7 b(or)29 b(example,)f(if)i(the)f(agen)n(t)f(puts)h(out)f(tobacco)
g(and)h(pap)r(er,)f(the)h(smok)n(er)f(with)h(the)739
3799 y(matc)n(hes)d(should)h(pic)n(k)f(up)h(b)r(oth)h(ingredien)n(ts,)e
(mak)n(e)g(a)g(cigarette,)g(and)h(then)g(signal)f(the)739
3899 y(agen)n(t.)863 4002 y(Based)33 b(on)g(this)h(premise,)g(there)f
(are)g(three)g(v)n(ersions)e(of)j(this)f(problem)g(that)h(often)739
4102 y(app)r(ear)27 b(in)g(textb)r(o)r(oks:)p Black 739
4301 a Fo(The)32 b(imp)s(ossible)27 b(v)m(ersion:)p Black
41 w Fm(P)n(atil's)d(v)n(ersion)e(imp)r(oses)i(sev)n(eral)f
(arti\014cial)g(restrictions)946 4401 y(on)35 b(the)h(solution.)59
b(First,)37 b(the)e(co)r(de)g(for)g(the)g(agen)n(t)f(and)h(a)g(set)g
(of)g(accompan)n(y-)946 4500 y(ing)29 b(semaphores)d(is)j(giv)n(en)e
(as)h(an)g(unmo)r(di\014able)h(part)f(of)h(the)f(problem.)39
b(Second,)946 4600 y(the)c(solution)f(is)g(not)g(allo)n(w)n(ed)f(to)h
(use)g(conditional)g(statemen)n(ts)g(or)f(an)h(arra)n(y)e(of)946
4700 y(semaphores.)58 b(With)36 b(these)f(constrain)n(ts,)g(the)h
(problem)e(cannot)h(b)r(e)g(solv)n(ed.)58 b(In)946 4799
y(a)35 b(follo)n(wup)g(article,)h(P)n(arnas)d(p)r(oin)n(ts)h(out)h
(that)h(these)f(restrictions)f(are)g(uncom-)946 4899
y(fortably)d(arti\014cial.)46 b(With)32 b(constrain)n(ts)e(lik)n(e)h
(these,)h(a)f(lot)g(of)g(problems)f(b)r(ecome)946 4998
y(unsolv)-5 b(able.)p Black Black eop
%%Page: 75 81
75 80 bop Black 291 252 a Fo(4.4)30 b(Cigarette)i(smok)m(er's)e
(problem)1455 b(75)p 291 286 2865 4 v Black Black 291
515 a(The)32 b(in)m(teresting)e(v)m(ersion:)p Black 41
w Fm(This)57 b(v)n(ersion)d(imp)r(oses)i(no)h(additional)e(constrain)n
(ts)498 615 y(other)37 b(than)g(the)h(usual)f(goals:)54
b(all)37 b(threads)g(should)g(mak)n(e)f(progress)f(\(no)i(star-)498
715 y(v)-5 b(ation\))31 b(and)f(no)g(threads)f(should)i(busy-w)n(ait)e
(\(c)n(hec)n(k)h(for)f(a)h(condition)h(o)n(v)n(er)d(and)498
814 y(o)n(v)n(er\).)p Black 291 981 a Fo(The)k(trivial)f(v)m(ersion:)p
Black 41 w Fm(In)c(some)g(textb)r(o)r(oks,)g(the)g(problem)g(sp)r
(eci\014es)g(that)g(the)h(agen)n(t)498 1080 y(should)23
b(signal)g(the)h(smok)n(er)e(that)h(should)h(go)e(next,)j(according)d
(to)h(the)h(ingredien)n(ts)498 1180 y(that)34 b(are)e(a)n(v)-5
b(ailable.)53 b(This)33 b(v)n(ersion)f(of)h(the)h(problem)e(is)i(unin)n
(teresting)e(b)r(ecause)498 1279 y(it)27 b(mak)n(es)e(the)h(whole)g
(premise,)g(the)g(ingredien)n(ts)f(and)h(the)h(cigarettes,)e(irrelev)-5
b(an)n(t.)498 1379 y(Also,)30 b(as)f(a)h(practical)f(matter,)h(it)g(is)
g(probably)e(not)i(a)f(go)r(o)r(d)h(idea)f(to)h(require)f(the)498
1479 y(agen)n(t)36 b(to)h(kno)n(w)f(ab)r(out)h(the)g(other)f(threads)h
(and)f(what)h(they)g(are)f(w)n(aiting)g(for.)498 1578
y(Finally)-7 b(,)28 b(this)g(v)n(ersion)e(of)h(the)h(problem)f(is)h
(just)g(to)r(o)f(easy)-7 b(.)415 1761 y(Naturally)g(,)33
b(w)n(e)e(will)h(fo)r(cus)g(on)g(the)g(in)n(teresting)f(v)n(ersion.)49
b(T)-7 b(o)31 b(complete)h(the)g(state-)291 1861 y(men)n(t)i(of)g(the)g
(problem,)h(w)n(e)e(need)h(to)g(sp)r(ecify)g(the)h(agen)n(t)e(co)r(de.)
55 b(The)34 b(agen)n(t)f(uses)h(the)291 1961 y(follo)n(wing)26
b(semaphores:)p Black 1149 2135 a(Listing)i(4.30:)35
b(Agen)n(t)28 b(semaphores)p Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2197 2921 29 v 0.9 TeXcolorgray Black
262 2197 4 29 v 262 2172 29 4 v 291 2172 250 4 v 541
2172 2616 4 v 3157 2172 29 4 v 3183 2197 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2296 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2296 29 100
v 0.9 TeXcolorgray Black 262 2296 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2296 29 100 v 0.9 TeXcolorgray
Black 3180 2296 4 100 v 415 2267 a(1)83 b Fl(Semaphore)40
b(agentSem)g(=)j(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2396 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2396 29 100 v 0.9 TeXcolorgray Black
262 2396 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2396 29 100 v 0.9 TeXcolorgray Black 3180 2396 4 100
v 415 2366 a Fm(2)83 b Fl(Semaphore)40 b(tobacco)g(=)j(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2496 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2496 29 100 v 0.9 TeXcolorgray Black 262 2496 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2496 29 100
v 0.9 TeXcolorgray Black 3180 2496 4 100 v 415 2466 a
Fm(3)83 b Fl(Semaphore)40 b(paper)h(=)i(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2595 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2595 29 100
v 0.9 TeXcolorgray Black 262 2595 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2595 29 100 v 0.9 TeXcolorgray
Black 3180 2595 4 100 v 415 2565 a Fm(4)83 b Fl(Semaphore)40
b(match)h(=)i(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262
2624 2921 29 v 0.9 TeXcolorgray Black 262 2624 4 29 v
263 2624 29 4 v 291 2624 250 4 v 541 2624 2616 4 v 3157
2624 29 4 v 3183 2624 4 29 v 415 2745 a Fm(After)27 b(putting)h(out)e
(t)n(w)n(o)g(ingredien)n(ts,)g(the)i(agen)n(t)d(w)n(aits)h(for)h
Fl(agentSem)c Fm(b)r(efore)k(con-)291 2845 y(tin)n(uing.)37
b(The)27 b(other)g(three)h(semaphores)e(indicate)h(whic)n(h)h
(ingredien)n(ts)e(are)h(a)n(v)-5 b(ailable.)415 2944
y(The)27 b(agen)n(t)f(is)h(actually)f(made)h(up)g(of)g(three)f
(concurren)n(t)g(threads,)g(Agen)n(t)h(A,)g(Agen)n(t)291
3044 y(B)g(and)g(Agen)n(t)h(C.)g(Eac)n(h)e(pro)n(vides)g(di\013eren)n
(t)i(ingredien)n(ts.)p Black 1231 3219 a(Listing)f(4.31:)36
b(Agen)n(t)27 b(A)h(co)r(de)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3280 2921 29 v 0.9 TeXcolorgray
Black 262 3280 4 29 v 262 3255 29 4 v 291 3255 250 4
v 541 3255 2616 4 v 3157 3255 29 4 v 3183 3280 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3380 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3380 29 100 v 0.9 TeXcolorgray Black 262 3380 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3380 29 100
v 0.9 TeXcolorgray Black 3180 3380 4 100 v 415 3350 a(1)83
b Fl(agentSem)l(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 3479 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 3479 29 100 v 0.9
TeXcolorgray Black 262 3479 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3479 29 100 v 0.9 TeXcolorgray
Black 3180 3479 4 100 v 415 3450 a Fm(2)83 b Fl(tobacco)m(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3579 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3579 29 100 v 0.9 TeXcolorgray Black 262 3579 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3579 29 100
v 0.9 TeXcolorgray Black 3180 3579 4 100 v 415 3549 a
Fm(3)83 b Fl(paper)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3607 2921 29 v 0.9 TeXcolorgray
Black 262 3607 4 29 v 263 3607 29 4 v 291 3607 250 4
v 541 3607 2616 4 v 3157 3607 29 4 v 3183 3607 4 29 v
Black 1232 3804 a Fm(Listing)28 b(4.32:)35 b(Agen)n(t)28
b(B)f(co)r(de)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3865 2921 29 v 0.9 TeXcolorgray Black 262 3865 4
29 v 262 3840 29 4 v 291 3840 250 4 v 541 3840 2616 4
v 3157 3840 29 4 v 3183 3865 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3965 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3965 29 100
v 0.9 TeXcolorgray Black 262 3965 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3965 29 100 v 0.9 TeXcolorgray
Black 3180 3965 4 100 v 415 3935 a(1)83 b Fl(agentSem)l(.wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4064 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4064 29 100 v 0.9 TeXcolorgray Black 262 4064 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4064 29 100
v 0.9 TeXcolorgray Black 3180 4064 4 100 v 415 4035 a
Fm(2)83 b Fl(paper)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4164 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4164 29 100
v 0.9 TeXcolorgray Black 262 4164 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4164 29 100 v 0.9 TeXcolorgray
Black 3180 4164 4 100 v 415 4134 a Fm(3)83 b Fl(match)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4192 2921
29 v 0.9 TeXcolorgray Black 262 4192 4 29 v 263 4192
29 4 v 291 4192 250 4 v 541 4192 2616 4 v 3157 4192 29
4 v 3183 4192 4 29 v Black 1232 4389 a Fm(Listing)27
b(4.33:)36 b(Agen)n(t)27 b(C)h(co)r(de)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4450 2921 29 v 0.9 TeXcolorgray
Black 262 4450 4 29 v 262 4425 29 4 v 291 4425 250 4
v 541 4425 2616 4 v 3157 4425 29 4 v 3183 4450 4 29 v
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4550 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4550 29 100 v 0.9 TeXcolorgray Black 262 4550 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4550 29 100
v 0.9 TeXcolorgray Black 3180 4550 4 100 v 415 4520 a(1)83
b Fl(agentSem)l(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 4650 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 4650 29 100 v 0.9
TeXcolorgray Black 262 4650 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4650 29 100 v 0.9 TeXcolorgray
Black 3180 4650 4 100 v 415 4620 a Fm(2)83 b Fl(tobacco)m(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4749 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4749 29 100 v 0.9 TeXcolorgray Black 262 4749 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4749 29 100
v 0.9 TeXcolorgray Black 3180 4749 4 100 v 415 4719 a
Fm(3)83 b Fl(match)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4777 2921 29 v 0.9 TeXcolorgray
Black 262 4777 4 29 v 263 4777 29 4 v 291 4777 250 4
v 541 4777 2616 4 v 3157 4777 29 4 v 3183 4777 4 29 v
415 4899 a Fm(Initally)34 b(the)g(three)f(agen)n(t)g(threads)f(comp)r
(ete)i(for)f Fl(agentSem)p Fm(.)52 b(Whic)n(hev)n(er)32
b(gets)h(it)291 4998 y(determines)g(the)i(\014rst)f(pair)f(of)h
(ingredien)n(ts.)56 b(Subsequen)n(tly)-7 b(,)35 b(eac)n(h)f(time)g
Fl(agentSem)d Fm(is)p Black Black eop
%%Page: 76 82
76 81 bop Black 739 252 a Fo(76)1311 b(Classical)31 b(sync)m
(hronization)i(problems)p 739 286 2865 4 v Black 739
515 a Fm(signalled,)j(a)e(\\random")f(agen)n(t)h(thread)g(pro)r(ceeds.)
57 b(Of)35 b(course,)h(the)f(b)r(eha)n(vior)e(of)i(the)739
615 y(system)29 b(is)g(not)h(really)e(random;)h(it)h(dep)r(ends)g(on)f
(the)h(decisions)e(of)i(the)f(lo)r(cal)g(sc)n(heduler)739
715 y(\(whic)n(h)f(thread)f(runs)g(when\))h(and)g(the)g(queueing)f(p)r
(olicy)g(of)h(the)g(semaphore.)863 814 y(This)41 b(problem)f(is)g(hard)
g(b)r(ecause)f(the)i(natural)f(solution)g(do)r(es)g(not)g(w)n(ork.)74
b(It)40 b(is)739 914 y(tempting)28 b(to)g(write)f(something)g(lik)n(e:)
p Black 1539 1088 a(Listing)g(4.34:)36 b(Smok)n(er)26
b(with)j(matc)n(hes)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1150 2921 29 v 0.9 TeXcolorgray Black 711 1150 4
29 v 711 1125 29 4 v 739 1125 250 4 v 989 1125 2616 4
v 3605 1125 29 4 v 3631 1150 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1249 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1249 29 100
v 0.9 TeXcolorgray Black 711 1249 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1249 29 100 v 0.9 TeXcolorgray
Black 3628 1249 4 100 v 863 1219 a(1)83 b Fl(tobacco)m(.wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1349 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1349 29 100 v 0.9 TeXcolorgray Black 711 1349 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1349 29 100
v 0.9 TeXcolorgray Black 3628 1349 4 100 v 863 1319 a
Fm(2)83 b Fl(paper)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1448 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1448 29 100
v 0.9 TeXcolorgray Black 711 1448 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1448 29 100 v 0.9 TeXcolorgray
Black 3628 1448 4 100 v 863 1419 a Fm(3)83 b Fl(agentSem)m(.)o(signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1477
2921 29 v 0.9 TeXcolorgray Black 711 1477 4 29 v 712
1477 29 4 v 739 1477 250 4 v 989 1477 2616 4 v 3605 1477
29 4 v 3631 1477 4 29 v Black 1547 1673 a Fm(Listing)28
b(4.35:)35 b(Smok)n(er)27 b(with)h(tobacco)p Black 0.9
TeXcolorgray 0.9 TeXcolorgray 711 1734 2921 29 v 0.9
TeXcolorgray Black 711 1734 4 29 v 711 1709 29 4 v 739
1709 250 4 v 989 1709 2616 4 v 3605 1709 29 4 v 3631
1734 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1834
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 711 1834 29 100 v 0.9 TeXcolorgray Black
711 1834 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1834 29 100 v 0.9 TeXcolorgray Black 3628 1834 4 100
v 863 1804 a(1)83 b Fl(paper)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 1933 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1933 29 100 v 0.9 TeXcolorgray Black 711 1933 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1933 29 100
v 0.9 TeXcolorgray Black 3628 1933 4 100 v 863 1903 a
Fm(2)83 b Fl(match)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2033 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2033 29 100
v 0.9 TeXcolorgray Black 711 2033 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2033 29 100 v 0.9 TeXcolorgray
Black 3628 2033 4 100 v 863 2003 a Fm(3)83 b Fl(agentSem)m(.)o(signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2061
2921 29 v 0.9 TeXcolorgray Black 711 2061 4 29 v 712
2061 29 4 v 739 2061 250 4 v 989 2061 2616 4 v 3605 2061
29 4 v 3631 2061 4 29 v Black 1583 2257 a Fm(Listing)27
b(4.36:)36 b(Smok)n(er)26 b(with)j(pap)r(er)p Black 0.9
TeXcolorgray 0.9 TeXcolorgray 711 2319 2921 29 v 0.9
TeXcolorgray Black 711 2319 4 29 v 711 2294 29 4 v 739
2294 250 4 v 989 2294 2616 4 v 3605 2294 29 4 v 3631
2319 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2418
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 711 2418 29 100 v 0.9 TeXcolorgray Black
711 2418 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2418 29 100 v 0.9 TeXcolorgray Black 3628 2418 4 100
v 863 2388 a(1)83 b Fl(tobacco)m(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 2518 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2518 29 100 v 0.9 TeXcolorgray Black 711 2518 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2518 29 100
v 0.9 TeXcolorgray Black 3628 2518 4 100 v 863 2488 a
Fm(2)83 b Fl(match)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2617 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2617 29 100
v 0.9 TeXcolorgray Black 711 2617 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2617 29 100 v 0.9 TeXcolorgray
Black 3628 2617 4 100 v 863 2588 a Fm(3)83 b Fl(agentSem)m(.)o(signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2646
2921 29 v 0.9 TeXcolorgray Black 711 2646 4 29 v 712
2646 29 4 v 739 2646 250 4 v 989 2646 2616 4 v 3605 2646
29 4 v 3631 2646 4 29 v 863 2767 a Fm(What's)28 b(wrong)e(with)j(this)e
(solution?)p Black Black eop
%%Page: 77 83
77 82 bop Black 291 252 a Fo(4.4)30 b(Cigarette)i(smok)m(er's)e
(problem)1455 b(77)p 291 286 2865 4 v Black 291 515 a
Fe(4.4.1)112 b(Smok)m(er)37 b(problem)f(non-solution)291
669 y Fm(The)28 b(problem)g(with)i(the)f(previous)e(solution)h(is)h
(the)g(p)r(ossibilit)n(y)f(of)h(deadlo)r(c)n(k.)39 b(Imagine)291
768 y(that)e(the)g(agen)n(t)f(puts)h(out)g(tobacco)f(and)g(pap)r(er.)65
b(Since)37 b(the)g(smok)n(er)e(with)i(matc)n(hes)291
868 y(is)d(w)n(aiting)f(on)h Fl(tobacco)p Fm(,)g(it)g(will)h(b)r(e)g
(un)n(blo)r(c)n(k)n(ed.)56 b(But)35 b(the)f(smok)n(er)f(with)i(tobacco)
e(is)291 967 y(w)n(aiting)d(on)h Fl(paper)p Fm(,)f(so)g(it)i(is)f(p)r
(ossible)f(\(ev)n(en)h(lik)n(ely\))g(that)g(it)h(will)f(also)f(b)r(e)i
(un)n(blo)r(c)n(k)n(ed.)291 1067 y(Then)d(the)h(\014rst)g(thread)f
(will)h(blo)r(c)n(k)f(on)g Fl(paper)f Fm(and)h(the)h(second)g(will)f
(blo)r(c)n(k)g(on)h Fl(match)p Fm(.)291 1167 y(Deadlo)r(c)n(k!)p
Black Black eop
%%Page: 78 84
78 83 bop Black Black Black Black eop
%%Page: 79 85
79 84 bop Black 291 252 a Fo(4.4)30 b(Cigarette)i(smok)m(er's)e
(problem)1455 b(79)p 291 286 2865 4 v Black 291 515 a
Fe(4.4.2)112 b(Smok)m(er)37 b(problem)f(hin)m(t)291 669
y Fm(The)21 b(solution)f(prop)r(osed)g(b)n(y)h(P)n(arnas)d(uses)j
(three)g(help)r(er)f(threads)h(called)f(\\pushers")g(that)291
768 y(resp)r(ond)31 b(to)h(the)g(signals)f(from)h(the)h(agen)n(t,)f(k)n
(eep)g(trac)n(k)e(of)i(the)h(a)n(v)-5 b(ailable)31 b(ingredien)n(ts,)
291 868 y(and)c(signal)g(the)h(appropriate)e(smok)n(er.)415
967 y(The)i(additional)f(v)-5 b(ariables)26 b(and)i(semaphores)d(are)p
Black 1098 1142 a(Listing)i(4.37:)36 b(Smok)n(er)26 b(problem)h(hin)n
(t)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203
2921 29 v 0.9 TeXcolorgray Black 262 1203 4 29 v 262
1178 29 4 v 291 1178 250 4 v 541 1178 2616 4 v 3157 1178
29 4 v 3183 1203 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1273 a(1)83 b Fl(boolean)40 b(isTobacco)m(,)j(isPaper)m(,)g
(isMatch)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 1402 29 100 v 0.9 TeXcolorgray Black
262 1402 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1402 29 100 v 0.9 TeXcolorgray Black 3180 1402 4 100
v 415 1373 a Fm(2)83 b Fl(Semaphore)40 b(tobaccoSem)f(=)k(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(3)83 b Fl(Semaphore)40 b(paperSem)g(=)j(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1602 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 29 100
v 0.9 TeXcolorgray Black 262 1602 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1602 29 100 v 0.9 TeXcolorgray
Black 3180 1602 4 100 v 415 1572 a Fm(4)83 b Fl(Semaphore)40
b(matchSem)g(=)j(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1630 2921 29 v 0.9 TeXcolorgray Black 262 1630 4
29 v 263 1630 29 4 v 291 1630 250 4 v 541 1630 2616 4
v 3157 1630 29 4 v 3183 1630 4 29 v 415 1751 a Fm(The)26
b(b)r(o)r(olean)g(v)-5 b(ariables)25 b(indicate)i(whether)f(or)f(not)h
(an)g(ingredien)n(t)g(is)g(on)g(the)h(table.)291 1851
y(The)h(pushers)g(use)h Fl(tobaccoSem)24 b Fm(to)29 b(signal)f(the)h
(smok)n(er)e(with)i(tobacco,)f(and)g(the)h(other)291
1950 y(semaphores)d(lik)n(ewise.)p Black Black eop
%%Page: 80 86
80 85 bop Black Black Black Black eop
%%Page: 81 87
81 86 bop Black 291 252 a Fo(4.4)30 b(Cigarette)i(smok)m(er's)e
(problem)1455 b(81)p 291 286 2865 4 v Black 291 515 a
Fe(4.4.3)112 b(Smok)m(er)37 b(problem)f(solution)291
669 y Fm(Here)27 b(is)g(the)h(co)r(de)g(for)f(one)g(of)h(the)g
(pushers:)p Black 1309 843 a(Listing)g(4.38:)35 b(Pusher)27
b(A)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 904
2921 29 v 0.9 TeXcolorgray Black 262 904 4 29 v 262 879
29 4 v 291 879 250 4 v 541 879 2616 4 v 3157 879 29 4
v 3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(tobacco)m(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(3)240 b Fl(if)42
b(\(isPaper)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1273 a Fm(4)396 b Fl(isPaper)41 b(=)i(false)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1402 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(5)396 b Fl(matchSem)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1502 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1502 29 100
v 0.9 TeXcolorgray Black 262 1502 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1502 29 100 v 0.9 TeXcolorgray
Black 3180 1502 4 100 v 415 1472 a Fm(6)240 b Fl(else)41
b(if)i(\(isMatch)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1602 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1602 29 100 v 0.9 TeXcolorgray Black
262 1602 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1602 29 100 v 0.9 TeXcolorgray Black 3180 1602 4 100
v 415 1572 a Fm(7)396 b Fl(isMatch)41 b(=)i(false)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1701 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1701 29 100 v 0.9 TeXcolorgray Black 262 1701 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1701 29 100
v 0.9 TeXcolorgray Black 3180 1701 4 100 v 415 1671 a
Fm(8)396 b Fl(paperSem)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1801 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1801 29 100
v 0.9 TeXcolorgray Black 262 1801 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1801 29 100 v 0.9 TeXcolorgray
Black 3180 1801 4 100 v 415 1771 a Fm(9)240 b Fl(else)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1901 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1901 29 100 v 0.9 TeXcolorgray Black 262 1901 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1901 29 100
v 0.9 TeXcolorgray Black 3180 1901 4 100 v 374 1871 a
Fm(10)395 b Fl(isTobacco)40 b(=)j(true)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2000 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2000 29 100
v 0.9 TeXcolorgray Black 262 2000 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2000 29 100 v 0.9 TeXcolorgray
Black 3180 2000 4 100 v 374 1970 a Fm(11)82 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2028 2921
29 v 0.9 TeXcolorgray Black 262 2028 4 29 v 263 2028
29 4 v 291 2028 250 4 v 541 2028 2616 4 v 3157 2028 29
4 v 3183 2028 4 29 v 415 2150 a Fm(This)c(pusher)f(w)n(ak)n(es)f(up)h
(an)n(y)g(time)h(there)f(is)h(tobacco)e(on)h(the)h(table.)64
b(If)37 b(it)g(\014nds)291 2249 y Fl(isPaper)e Fm(true,)40
b(it)f(kno)n(ws)e(that)h(Pusher)f(B)h(has)f(already)g(run,)j(so)d(it)i
(can)e(signal)h(the)291 2349 y(smok)n(er)29 b(with)j(matc)n(hes.)47
b(Similarly)-7 b(,)32 b(if)g(it)f(\014nds)h(a)f(matc)n(h)g(on)g(the)g
(table,)h(it)g(can)f(signal)291 2449 y(the)d(smok)n(er)e(with)i(pap)r
(er.)415 2548 y(But)c(if)h(Pusher)e(A)h(runs)g(\014rst,)g(then)h(it)f
(will)g(\014nd)h(b)r(oth)f Fl(isPaper)d Fm(and)j Fl(isMatch)d
Fm(false.)291 2648 y(It)28 b(cannot)f(signal)f(an)n(y)h(of)h(the)g
(smok)n(ers,)e(so)g(it)j(sets)e Fl(isTobacco)p Fm(.)415
2747 y(The)32 b(other)g(pushers)f(are)h(similar.)50 b(Since)32
b(the)g(pushers)g(do)g(all)g(the)g(real)g(w)n(ork,)g(the)291
2847 y(smok)n(er)26 b(co)r(de)h(is)h(trivial:)p Black
1099 3021 a(Listing)f(4.39:)36 b(Smok)n(er)26 b(with)j(tobacco)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3083 2921
29 v 0.9 TeXcolorgray Black 262 3083 4 29 v 262 3058
29 4 v 291 3058 250 4 v 541 3058 2616 4 v 3157 3058 29
4 v 3183 3083 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3182 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3182 29 100 v 0.9 TeXcolorgray Black
262 3182 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3182 29 100 v 0.9 TeXcolorgray Black 3180 3182 4 100
v 415 3153 a(1)83 b Fl(tobaccoSem)l(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3282 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3282 29 100 v 0.9 TeXcolorgray Black 262 3282 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3282 29 100
v 0.9 TeXcolorgray Black 3180 3282 4 100 v 415 3252 a
Fm(2)83 b Fl(makeCigarette)38 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3382 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3382 29 100
v 0.9 TeXcolorgray Black 262 3382 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3382 29 100 v 0.9 TeXcolorgray
Black 3180 3382 4 100 v 415 3352 a Fm(3)83 b Fl(agentSem)l(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3481 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3481 29 100 v 0.9 TeXcolorgray Black 262 3481 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3481 29 100
v 0.9 TeXcolorgray Black 3180 3481 4 100 v 415 3451 a
Fm(4)83 b Fl(smoke)41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3510 2921 29 v 0.9 TeXcolorgray Black 262 3510 4
29 v 263 3510 29 4 v 291 3510 250 4 v 541 3510 2616 4
v 3157 3510 29 4 v 3183 3510 4 29 v 415 3631 a Fm(P)n(arnas)23
b(presen)n(ts)i(a)g(similar)g(solution)g(that)h(assem)n(bles)e(the)i(b)
r(o)r(olean)f(v)-5 b(ariables,)25 b(bit-)291 3730 y(wise,)37
b(in)n(to)f(an)f(in)n(teger,)i(and)f(then)g(uses)f(the)h(in)n(teger)f
(as)g(an)h(index)g(in)n(to)f(an)h(arra)n(y)d(of)291 3830
y(semaphores.)65 b(That)37 b(w)n(a)n(y)f(he)i(can)f(a)n(v)n(oid)f
(using)h(conditionals)g(\(one)g(of)h(the)g(arti\014cial)291
3930 y(constrain)n(ts\).)d(The)26 b(resulting)f(co)r(de)h(is)g(a)g(bit)
g(more)g(concise,)f(but)i(its)f(function)h(is)f(not)g(as)291
4029 y(ob)n(vious.)p Black Black eop
%%Page: 82 88
82 87 bop Black Black Black Black eop
%%Page: 83 89
83 88 bop Black 291 252 a Fo(4.5)30 b(Dining)h(philosophers)1782
b(83)p 291 286 2865 4 v Black 291 515 a Fe(4.4.4)112
b(Generalized)37 b(Smok)m(er's)g(Problem)291 669 y Fm(P)n(arnas)19
b(suggested)i(that)h(the)h(smok)n(er's)d(problem)h(b)r(ecomes)h(more)f
(di\016cult)h(if)h(w)n(e)e(mo)r(dify)291 768 y(the)36
b(agen)n(t,)i(eliminating)e(the)g(requiremen)n(t)f(that)i(the)f(agen)n
(t)g(w)n(ait)f(after)h(putting)h(out)291 868 y(ingredien)n(ts.)415
967 y(Puzzle:)f(mo)r(dify)28 b(the)g(previous)f(solution)g(to)h(deal)f
(with)h(this)g(v)-5 b(ariation.)291 1242 y Fh(4.5)135
b(Dining)45 b(philosophers)291 1424 y Fm(The)65 b(\014nal)g(classical)e
(sync)n(hronization)g(problem)i(in)n(v)n(olv)n(es)e(philosophers)g
(eating)291 1523 y(spaghetti)30 b(with)h(c)n(hopstic)n(ks.)44
b(The)31 b(next)f(edition)h(of)g Fg(The)i(Little)g(Bo)l(ok)g(of)g
(Semaphor)l(es)291 1623 y Fm(will)27 b(ha)n(v)n(e)g(a)g(section)g(on)h
(this)f(problem.)p Black Black eop
%%Page: 84 90
84 89 bop Black Black Black Black eop
%%Page: 85 91
85 90 bop Black Black 291 1138 a Fi(Chapter)64 b(5)291
1553 y Fk(Not-so-classical)291 1802 y(sync)-6 b(hronization)77
b(problems)291 2284 y Fh(5.1)135 b(Building)45 b(H)1246
2302 y Fm(2)1292 2284 y Fh(O)291 2466 y Fm(This)23 b(problem)f(has)h(b)
r(een)g(a)g(staple)g(of)g(the)h(Op)r(erating)e(Systems)h(class)f(at)h
(U.C.)g(Berk)n(eley)291 2565 y(for)k(at)g(least)g(a)g(decade.)37
b(I)28 b(don't)f(kno)n(w)g(who)g(created)g(it,)h(but)g(it)h(is)e(a)g
(nice)h(problem.)415 2665 y(There)f(are)g(t)n(w)n(o)f(kinds)i(of)f
(threads,)g(o)n(xygen)f(and)h(h)n(ydrogen.)36 b(In)27
b(order)g(to)g(assem)n(ble)291 2764 y(these)e(threads)g(in)n(to)g(w)n
(ater)f(molecules,)h(w)n(e)g(ha)n(v)n(e)g(to)g(create)f(a)h(barrier)f
(that)h(mak)n(es)g(eac)n(h)291 2864 y(thread)i(w)n(ait)g(un)n(til)h(a)f
(complete)h(molecule)f(is)g(ready)g(to)g(pro)r(ceed.)415
2964 y(As)34 b(eac)n(h)e(thread)h(passes)g(the)g(barrier,)h(it)f
(should)h(in)n(v)n(ok)n(e)d(a)i(metho)r(d)h(called)f
Fl(bond)p Fm(.)291 3063 y(Y)-7 b(ou)28 b(m)n(ust)g(guaran)n(tee)e(that)
i(all)f(the)i(threads)e(from)g(one)h(molecule)g(in)n(v)n(ok)n(e)e
Fl(bond)g Fm(b)r(efore)291 3163 y(an)n(y)g(of)i(the)g(threads)f(from)g
(the)h(next)g(molecule)f(do.)415 3263 y(In)h(other)f(w)n(ords:)p
Black 415 3445 a Fd(\017)p Black 41 w Fm(If)k(an)f(o)n(xygen)e(thread)i
(arriv)n(es)e(at)i(the)h(barrier)d(when)j(no)f(h)n(ydrogen)e(threads)i
(are)498 3545 y(presen)n(t,)d(it)h(has)f(to)h(w)n(ait)f(for)g(t)n(w)n
(o)g(h)n(ydrogen)f(threads.)p Black 415 3711 a Fd(\017)p
Black 41 w Fm(If)40 b(a)f(h)n(ydrogen)e(thread)i(arriv)n(es)e(at)i(the)
h(barrier)d(when)j(no)f(other)f(threads)h(are)498 3810
y(presen)n(t,)24 b(it)h(has)f(to)g(w)n(ait)g(for)g(an)g(o)n(xygen)e
(thread)i(and)g(another)g(h)n(ydrogen)e(thread.)p Black
415 3977 a Fd(\017)p Black 41 w Fm(If)30 b(w)n(e)e(examine)h(the)h
(sequence)e(of)h(threads)g(that)g(in)n(v)n(ok)n(e)f Fl(bond)f
Fm(and)i(divide)g(them)498 4076 y(in)n(to)22 b(groups)f(of)h(three,)h
(eac)n(h)f(group)f(will)h(con)n(tain)g(one)f(o)n(xygen)g(and)h(t)n(w)n
(o)g(h)n(ydrogen)498 4176 y(threads.)415 4358 y(W)-7
b(e)32 b(don't)g(ha)n(v)n(e)f(to)g(w)n(orry)f(ab)r(out)i(matc)n(hing)f
(the)h(threads)f(up)h(explicitly;)i(that)e(is,)291 4458
y(the)37 b(threads)f(do)g(not)h(necessarily)e(kno)n(w)h(whic)n(h)h
(other)f(threads)g(they)h(are)f(paired)g(up)291 4558
y(with.)h(The)28 b(k)n(ey)f(is)g(just)h(that)g(threads)f(pass)g(the)h
(barrier)e(in)h(complete)h(sets.)415 4657 y(Puzzle:)36
b(W)-7 b(rite)28 b(sync)n(hronization)e(co)r(de)h(for)g(o)n(xygen)g
(and)g(h)n(ydrogen)f(molecules.)p Black Black eop
%%Page: 86 92
86 91 bop Black Black Black Black eop
%%Page: 87 93
87 92 bop Black 291 252 a Fo(5.1)30 b(Building)h(H)906
264 y Fj(2)943 252 y Fo(O)2044 b(87)p 291 286 2865 4
v Black 291 515 a Fe(5.1.1)112 b(H)721 530 y Fa(2)760
515 y Fe(O)38 b(hin)m(t)291 669 y Fm(Here)27 b(are)f(the)i(v)-5
b(ariables)27 b(I)g(used)h(in)g(m)n(y)f(solution:)p Black
1142 843 a(Listing)g(5.1:)36 b(W)-7 b(ater)27 b(building)h(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 904 2921
29 v 0.9 TeXcolorgray Black 262 904 4 29 v 262 879 29
4 v 291 879 250 4 v 541 879 2616 4 v 3157 879 29 4 v
3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(Semaphore)40 b(hydroSem)g(=)j(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)83 b Fl(Semaphore)40 b(hydroSem2)f(=)44 b(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(3)83 b Fl(Semaphore)40 b(oxySem)h(=)i(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(4)83 b Fl(Semaphore)40
b(mutex)h(=)i(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1402 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1402 29 100 v 0.9 TeXcolorgray Black
262 1402 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1402 29 100 v 0.9 TeXcolorgray Black 3180 1402 4 100
v 415 1373 a Fm(5)83 b Fl(int)42 b(count)g(=)h(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 262 1431 2921 29 v 0.9
TeXcolorgray Black 262 1431 4 29 v 263 1431 29 4 v 291
1431 250 4 v 541 1431 2616 4 v 3157 1431 29 4 v 3183
1431 4 29 v 415 1552 a Fm(Hydrogen)21 b(threads)h(ha)n(v)n(e)e(to)i(w)n
(ait)g(t)n(wice,)h(\014rst)f(on)g Fl(hydroSem)p Fm(,)e(later)i(on)f
Fl(hydroSem2)p Fm(;)291 1652 y(o)n(xygen)38 b(threads)i(w)n(ait)g(on)g
Fl(oxySem)p Fm(.)72 b Fl(count)38 b Fm(k)n(eeps)i(trac)n(k)f(of)h(ho)n
(w)g(man)n(y)g(h)n(ydrogen)291 1751 y(threads)26 b(are)h(w)n(aiting)g
(for)g(o)n(xygen.)p Black Black eop
%%Page: 88 94
88 93 bop Black Black Black Black eop
%%Page: 89 95
89 94 bop Black 291 252 a Fo(5.1)30 b(Building)h(H)906
264 y Fj(2)943 252 y Fo(O)2044 b(89)p 291 286 2865 4
v Black 291 515 a Fe(5.1.2)112 b(H)721 530 y Fa(2)760
515 y Fe(O)38 b(solution)291 669 y Fm(Initially)33 b
Fl(hydroSem)d Fm(and)j Fl(oxySem)e Fm(are)i(lo)r(c)n(k)n(ed.)53
b(When)34 b(an)f(o)n(xygen)f(thread)h(arriv)n(es)e(it)291
768 y(signals)g Fl(hydroSem)d Fm(t)n(wice,)34 b(allo)n(wing)c(t)n(w)n
(o)i(h)n(ydrogens)e(to)i(pro)r(ceed.)50 b(Then)32 b(the)g(o)n(xygen)291
868 y(thread)27 b(w)n(aits)g(for)g(the)h(h)n(ydrogen)e(threads)h(to)g
(arriv)n(e.)p Black 1266 1039 a(Listing)h(5.2:)36 b(Oxygen)26
b(co)r(de)p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262
1099 2921 29 v 0.9 TeXcolorgray Black 262 1099 4 29 v
262 1075 29 4 v 291 1075 250 4 v 541 1075 2616 4 v 3157
1075 29 4 v 3183 1099 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1199 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1199 29 100 v 0.9 TeXcolorgray Black
262 1199 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1199 29 100 v 0.9 TeXcolorgray Black 3180 1199 4 100
v 415 1169 a(1)83 b Fl(signal)41 b(\()o(hydroSem)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1299 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1299 29 100 v 0.9 TeXcolorgray Black 262 1299 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1299 29 100
v 0.9 TeXcolorgray Black 3180 1299 4 100 v 415 1269 a
Fm(2)83 b Fl(signal)41 b(\()o(hydroSem)m(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1398 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1398 29 100
v 0.9 TeXcolorgray Black 262 1398 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1398 29 100 v 0.9 TeXcolorgray
Black 3180 1398 4 100 v 415 1368 a Fm(3)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1498 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1498 29 100
v 0.9 TeXcolorgray Black 262 1498 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1498 29 100 v 0.9 TeXcolorgray
Black 3180 1498 4 100 v 415 1468 a(4)83 b Fl(wait)42
b(\()o(oxyMutex)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1598 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1598 29 100 v 0.9 TeXcolorgray Black
262 1598 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1598 29 100 v 0.9 TeXcolorgray Black 3180 1598 4 100
v 415 1568 a Fm(5)240 b Fl(wait)41 b(\(oxySem)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1697 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1697 29 100 v 0.9 TeXcolorgray Black 262 1697 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1697 29 100
v 0.9 TeXcolorgray Black 3180 1697 4 100 v 415 1667 a
Fm(6)240 b Fl(bond)41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1797 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1797 29 100 v 0.9 TeXcolorgray Black
262 1797 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1797 29 100 v 0.9 TeXcolorgray Black 3180 1797 4 100
v 415 1767 a Fm(7)83 b Fl(signal)41 b(\()o(oxyMutex)m(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1825 2921 29 v
0.9 TeXcolorgray Black 262 1825 4 29 v 263 1825 29 4
v 291 1825 250 4 v 541 1825 2616 4 v 3157 1825 29 4 v
3183 1825 4 29 v 415 1944 a Fm(In)d(order)e(for)h(a)g(h)n(ydrogen)f
(thread)h(to)g(pass)g(Line)h(1,)h(there)f(m)n(ust)f(b)r(e)h(an)f(o)n
(xygen)291 2044 y(thread)28 b(w)n(aiting.)42 b(The)29
b(m)n(utex-protected)g(coun)n(ter)g(k)n(eeps)f(trac)n(k)g(of)i(ho)n(w)f
(man)n(y)f(h)n(ydro-)291 2143 y(gen)33 b(threads)f(ha)n(v)n(e)g(arriv)n
(ed.)53 b(When)34 b Fl(count)d Fm(gets)i(to)g(2,)i(w)n(e)e(signal)f
Fl(oxySem)f Fm(once)i(and)291 2243 y Fl(hydroSem2)24
b Fm(t)n(wice.)p Black 1229 2414 a(Listing)k(5.3:)36
b(Hydrogen)26 b(co)r(de)p Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2475 2921 29 v 0.9 TeXcolorgray Black
262 2475 4 29 v 262 2450 29 4 v 291 2450 250 4 v 541
2450 2616 4 v 3157 2450 29 4 v 3183 2475 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2574 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2574 29 100
v 0.9 TeXcolorgray Black 262 2574 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2574 29 100 v 0.9 TeXcolorgray
Black 3180 2574 4 100 v 415 2544 a(1)83 b Fl(wait)42
b(\()o(hydroSem)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2674 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2674 29 100 v 0.9 TeXcolorgray Black
262 2674 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2674 29 100 v 0.9 TeXcolorgray Black 3180 2674 4 100
v 415 2644 a Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2774 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2774 29 100 v 0.9 TeXcolorgray Black 262 2774 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2774 29 100
v 0.9 TeXcolorgray Black 3180 2774 4 100 v 415 2744 a
Fm(3)240 b Fl(count)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2873 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2873 29 100 v 0.9 TeXcolorgray Black
262 2873 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2873 29 100 v 0.9 TeXcolorgray Black 3180 2873 4 100
v 415 2843 a Fm(4)g Fl(if)42 b(\(count)f(==)i(2\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2973 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2973 29 100 v 0.9 TeXcolorgray Black 262 2973 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2973 29 100
v 0.9 TeXcolorgray Black 3180 2973 4 100 v 415 2943 a
Fm(5)396 b Fl(signal)42 b(\()o(oxySem)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3072 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3072 29 100
v 0.9 TeXcolorgray Black 262 3072 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3072 29 100 v 0.9 TeXcolorgray
Black 3180 3072 4 100 v 415 3043 a Fm(6)396 b Fl(signal)42
b(\()o(hydroSem2)l(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3172 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3172 29 100 v 0.9 TeXcolorgray Black
262 3172 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3172 29 100 v 0.9 TeXcolorgray Black 3180 3172 4 100
v 415 3142 a Fm(7)396 b Fl(signal)42 b(\()o(hydroSem2)l(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3272 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3272 29 100 v 0.9 TeXcolorgray Black 262 3272 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3272 29 100
v 0.9 TeXcolorgray Black 3180 3272 4 100 v 415 3242 a
Fm(8)396 b Fl(count)42 b(=)h(0)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 3371 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 3371 29 100 v 0.9
TeXcolorgray Black 262 3371 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3371 29 100 v 0.9 TeXcolorgray
Black 3180 3371 4 100 v 415 3341 a Fm(9)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3471 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3471 29 100 v 0.9 TeXcolorgray Black 262 3471 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3471 29 100
v 0.9 TeXcolorgray Black 3180 3471 4 100 v 374 3441 a
Fm(10)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3571 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3571 29 100 v 0.9 TeXcolorgray Black 262 3571 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3571 29 100
v 0.9 TeXcolorgray Black 3180 3571 4 100 v 374 3541 a(11)82
b Fl(wait)42 b(\()o(hydroSem2)l(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3670 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3670 29 100
v 0.9 TeXcolorgray Black 262 3670 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3670 29 100 v 0.9 TeXcolorgray
Black 3180 3670 4 100 v 374 3640 a Fm(12)82 b Fl(bond)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3698 2921
29 v 0.9 TeXcolorgray Black 262 3698 4 29 v 263 3698
29 4 v 291 3698 250 4 v 541 3698 2616 4 v 3157 3698 29
4 v 3183 3698 4 29 v 415 3818 a Fm(T)-7 b(o)48 b(demonstrate)f(the)i
(correctness)d(of)i(this)h(solution,)j(consider)47 b(the)i(follo)n
(wing)291 3917 y(medium-lev)n(el)27 b(assertions:)p Black
415 4095 a Fd(\017)p Black 41 w Fm(F)-7 b(or)36 b(ev)n(ery)g(molecule,)
j(w)n(e)d(need)h(to)f(signal)g Fl(oxySem)f Fm(once)h(and)g(b)r(oth)i(h)
n(ydrogen)498 4194 y(semaphores)26 b(t)n(wice.)p Black
415 4358 a Fd(\017)p Black 41 w Fm(Ev)n(ery)g(o)n(xygen)g(thread)h
(signals)g Fl(hydroSem)d Fm(t)n(wice.)p Black 415 4522
a Fd(\017)p Black 41 w Fm(In)35 b(eac)n(h)e(pair)h(of)g(h)n(ydrogen)f
(threads,)i(one)f(of)g(them)h(signals)e Fl(oxySem)f Fm(once)i(and)498
4622 y Fl(hydroSem2)24 b Fm(t)n(wice.)415 4799 y(There)30
b(is)h(one)f(asp)r(ect)g(of)h(this)f(solution)g(that)h(is)g
(disconcerting)e(but)i(that)g(ma)n(y)f(not)291 4899 y(b)r(e)g
(problematic.)44 b(Hydrogen)29 b(threads)g(do)h(not)g(necessarily)f(in)
n(v)n(ok)n(e)f Fl(bond)h Fm(in)h(the)g(same)291 4998
y(order)20 b(they)j(pass)e(through)g Fl(hydroSem)p Fm(.)32
b(In)22 b(particular,)g(an)g(o)n(xygen)e(thread)i(migh)n(t)g(signal)p
Black Black eop
%%Page: 90 96
90 95 bop Black 739 252 a Fo(90)1029 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
739 515 a Fm(t)n(w)n(o)j(h)n(ydrogen)e(threads)i(and)h(then)g(end)f(up)
h(b)r(onding)g(with)g(t)n(w)n(o)e(di\013eren)n(t)i(h)n(ydrogen)739
615 y(threads.)g(That)28 b(outcome)f(do)r(es)h(not)f(violate)g(the)i
(problem)e(constrain)n(ts)g(as)g(stated,)h(but)739 715
y(at)f(the)h(same)f(time)h(it)g(do)r(esn't)g(seem)g(quite)f(righ)n(t.)
863 814 y(If)d(y)n(ou)d(are)h(b)r(othered)h(b)n(y)f(this)h(problem,)g
(rewrite)f(the)h(solution)g(to)f(\014x)h(it.)36 b(Y)-7
b(ou)22 b(migh)n(t)739 914 y(w)n(an)n(t)27 b(to)g(do)h(the)g(next)f
(problem)g(\014rst)h(and)f(then)h(come)g(bac)n(k.)739
1188 y Fh(5.2)135 b(Riv)l(er)46 b(crossing)739 1370 y
Fm(This)20 b(problem)g(is)g(from)g(a)g(problem)g(set)g(written)g(b)n(y)
g(An)n(thon)n(y)g(Joseph)g(at)g(U.C.)h(Berk)n(eley)-7
b(,)739 1470 y(but)30 b(I)f(don't)g(kno)n(w)g(if)h(he)f(is)g(the)h
(original)d(author.)41 b(It)30 b(is)f(similar)g(to)g(the)g(H)3176
1482 y Fj(2)3214 1470 y Fm(O)g(problem)739 1569 y(in)e(the)g(sense)f
(that)h(it)g(is)g(a)f(p)r(eculiar)g(sort)g(of)h(barrier)e(that)i(only)f
(allo)n(ws)f(threads)h(to)h(pass)739 1669 y(in)h(certain)f(com)n
(binations.)863 1769 y(Somewhere)k(near)f(Redmond,)i(W)-7
b(ashington)30 b(there)h(is)g(a)f(ro)n(wb)r(oat)g(that)h(is)g(used)g(b)
n(y)739 1868 y(b)r(oth)e(Lin)n(ux)g(hac)n(k)n(ers)e(and)i(Microsoft)g
(emplo)n(y)n(ees)e(\(serfs\))i(to)g(cross)f(a)h(riv)n(er.)40
b(The)29 b(ferry)739 1968 y(can)i(hold)h(exactly)e(four)i(p)r(eople;)h
(it)f(w)n(on't)f(lea)n(v)n(e)g(the)h(shore)e(with)i(more)f(or)f(few)n
(er.)49 b(T)-7 b(o)739 2068 y(guaran)n(tee)29 b(the)j(safet)n(y)f(of)g
(the)h(passengers,)e(it)h(is)h(not)f(p)r(ermissible)g(to)g(put)h(one)f
(hac)n(k)n(er)739 2167 y(in)g(the)h(b)r(oat)f(with)h(three)f(serfs,)h
(or)e(to)h(put)h(one)f(serf)g(with)h(three)f(hac)n(k)n(ers.)46
b(An)n(y)31 b(other)739 2267 y(com)n(bination)c(is)g(safe.)863
2366 y(As)21 b(eac)n(h)e(thread)h(b)r(oards)f(the)i(b)r(oat)f(it)h
(should)f(in)n(v)n(ok)n(e)e(a)i(function)h(called)f Fl(board)p
Fm(.)32 b(Y)-7 b(ou)739 2466 y(m)n(ust)33 b(guaran)n(tee)f(that)i(all)f
(four)g(threads)f(from)h(eac)n(h)g(b)r(oatload)f(in)n(v)n(ok)n(e)g
Fl(board)g Fm(b)r(efore)739 2566 y(an)n(y)27 b(of)g(the)h(threads)f
(from)g(the)h(next)g(b)r(oatload)f(do.)863 2665 y(After)32
b(all)f(four)g(threads)f(ha)n(v)n(e)g(in)n(v)n(ok)n(ed)g
Fl(board)p Fm(,)g(exactly)g(one)h(of)g(them)h(should)f(call)739
2765 y(a)i(function)h(named)g Fl(rowBoat)p Fm(,)e(indicating)i(that)g
(that)g(thread)f(will)h(tak)n(e)f(the)h(oars.)53 b(It)739
2865 y(do)r(esn't)28 b(matter)f(whic)n(h)h(thread)f(calls)g(the)h
(function,)g(as)f(long)g(as)g(one)g(do)r(es.)863 2964
y(Don't)g(w)n(orry)d(ab)r(out)i(the)g(direction)g(of)g(tra)n(v)n(el.)35
b(Assume)26 b(w)n(e)g(are)f(only)g(in)n(terested)h(in)739
3064 y(tra\016c)h(going)f(in)i(one)f(of)h(the)g(directions.)p
Black Black eop
%%Page: 91 97
91 96 bop Black 291 252 a Fo(5.3)30 b(Riv)m(er)i(crossing)f(hin)m(t)
1823 b(91)p 291 286 2865 4 v Black 291 515 a Fh(5.3)135
b(Riv)l(er)46 b(crossing)f(hin)l(t)291 697 y Fm(Here)27
b(are)f(the)i(v)-5 b(ariables)27 b(I)g(used)h(in)g(m)n(y)f(solution:)p
Black 1159 871 a(Listing)g(5.4:)36 b(Riv)n(er)27 b(crossing)f(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 933 2921
29 v 0.9 TeXcolorgray Black 262 933 4 29 v 262 908 29
4 v 291 908 250 4 v 541 908 2616 4 v 3157 908 29 4 v
3183 933 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1033 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1033 29 100 v 0.9 TeXcolorgray Black
262 1033 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1033 29 100 v 0.9 TeXcolorgray Black 3180 1033 4 100
v 415 1003 a(1)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1132 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1132 29 100 v 0.9 TeXcolorgray Black 262 1132 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1132 29 100
v 0.9 TeXcolorgray Black 3180 1132 4 100 v 415 1102 a
Fm(2)83 b Fl(Barrier)40 b(barrier)h(=)i(4)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1232 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1232 29 100
v 0.9 TeXcolorgray Black 262 1232 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1232 29 100 v 0.9 TeXcolorgray
Black 3180 1232 4 100 v 415 1202 a Fm(3)83 b Fl(int)42
b(hackers)f(=)i(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1331 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1331 29 100 v 0.9 TeXcolorgray Black
262 1331 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1331 29 100 v 0.9 TeXcolorgray Black 3180 1331 4 100
v 415 1302 a Fm(4)83 b Fl(int)42 b(serfs)g(=)h(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1431 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1431 29 100 v 0.9 TeXcolorgray Black 262 1431 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1431 29 100
v 0.9 TeXcolorgray Black 3180 1431 4 100 v 415 1401 a
Fm(5)83 b Fl(Semaphore)40 b(hackerSem)f(=)44 b(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1531 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1531 29 100 v 0.9 TeXcolorgray Black 262 1531 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1531 29 100
v 0.9 TeXcolorgray Black 3180 1531 4 100 v 415 1501 a
Fm(6)83 b Fl(Semaphore)40 b(serfSem)g(=)j(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1630 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1630 29 100
v 0.9 TeXcolorgray Black 262 1630 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1630 29 100 v 0.9 TeXcolorgray
Black 3180 1630 4 100 v 415 1600 a Fm(7)83 b Fl(local)41
b(boolean)g(iAmTheCaptain)d(=)43 b(false)p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1659 2921 29 v 0.9 TeXcolorgray
Black 262 1659 4 29 v 263 1659 29 4 v 291 1659 250 4
v 541 1659 2616 4 v 3157 1659 29 4 v 3183 1659 4 29 v
415 1780 a(hackers)22 b Fm(and)i Fl(serfs)e Fm(coun)n(t)i(the)h(n)n(um)
n(b)r(er)f(of)h(hac)n(k)n(ers)d(and)i(serfs)g(w)n(aiting)f(to)i(b)r
(oard.)291 1879 y(Since)35 b(they)h(are)e(b)r(oth)i(protected)f(b)n(y)h
Fl(mutex)p Fm(,)f(w)n(e)g(can)g(c)n(hec)n(k)g(the)h(condition)f(of)g(b)
r(oth)291 1979 y(v)-5 b(ariables)26 b(without)i(w)n(orrying)d(ab)r(out)
j(an)f(un)n(timely)h(up)r(date.)415 2079 y Fl(hackerSem)21
b Fm(and)k Fl(serfSem)d Fm(allo)n(w)i(us)h(to)g(con)n(trol)f(the)h(n)n
(um)n(b)r(er)g(of)g(hac)n(k)n(ers)e(and)i(serfs)291 2178
y(that)37 b(pass.)63 b(The)36 b(barrier)f(mak)n(es)h(sure)g(that)h(all)
f(four)g(threads)g(ha)n(v)n(e)g(in)n(v)n(ok)n(ed)f Fl(board)291
2278 y Fm(b)r(efore)27 b(the)h(captain)f(in)n(v)n(ok)n(es)f
Fl(rowBoat)p Fm(.)415 2378 y Fl(iAmTheCaptain)20 b Fm(is)k(a)g(b)r(o)r
(olean,)h(meaning)g(it)g(is)f(true)h(or)f(false.)35 b(Initially)25
b(all)g(threads)291 2477 y(set)i Fl(iAmTheCaptain)38
b(=)44 b(false)p Fm(.)34 b(Only)28 b(one)f(thread)g(from)g(eac)n(h)g(b)
r(oat)h(sets)f(it)h(to)f Fl(true)p Fm(.)p Black Black
eop
%%Page: 92 98
92 97 bop Black Black Black Black eop
%%Page: 93 99
93 98 bop Black 291 252 a Fo(5.4)30 b(Riv)m(er)i(crossing)f(solution)
1659 b(93)p 291 286 2865 4 v Black 291 515 a Fh(5.4)135
b(Riv)l(er)46 b(crossing)f(solution)291 702 y Fm(The)29
b(basic)g(idea)g(of)g(this)h(solution)e(is)i(that)f(eac)n(h)g(arriv)-5
b(al)28 b(up)r(dates)h(one)g(of)g(the)h(coun)n(ters)291
802 y(and)24 b(then)h(c)n(hec)n(ks)f(whether)h(it)g(mak)n(es)f(a)g
(full)h(complemen)n(t,)h(either)e(b)n(y)h(b)r(eing)g(the)g(fourth)291
901 y(of)i(its)h(kind)g(or)e(b)n(y)i(completing)f(a)g(mixed)h(pair)f
(of)g(pairs.)415 1003 y(I'll)21 b(presen)n(t)e(the)i(co)r(de)f(for)g
(hac)n(k)n(ers;)g(the)h(serf)f(co)r(de)g(is)g(symmetric)g(\(except,)i
(of)e(course,)291 1103 y(that)38 b(it)h(is)f(1000)e(times)j(bigger,)h
(full)f(of)f(bugs,)i(and)e(it)h(con)n(tains)e(an)h(em)n(b)r(edded)h(w)n
(eb)291 1203 y(bro)n(wser\):)p Black 1089 1385 a(Listing)27
b(5.5:)36 b(Riv)n(er)27 b(crossing)e(solution)p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1449 2921 29 v
0.9 TeXcolorgray Black 262 1449 4 29 v 262 1424 29 4
v 291 1424 250 4 v 541 1424 2616 4 v 3157 1424 29 4 v
3183 1449 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1548 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1548 29 100 v 0.9 TeXcolorgray Black
262 1548 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1548 29 100 v 0.9 TeXcolorgray Black 3180 1548 4 100
v 415 1519 a(1)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1648 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1648 29 100 v 0.9 TeXcolorgray Black 262 1648 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1648 29 100
v 0.9 TeXcolorgray Black 3180 1648 4 100 v 415 1618 a
Fm(2)240 b Fl(hackers)m(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1748 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1748 29 100 v 0.9 TeXcolorgray Black
262 1748 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1748 29 100 v 0.9 TeXcolorgray Black 3180 1748 4 100
v 415 1718 a Fm(3)g Fl(if)42 b(\(hackers)f(==)h(4\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1847 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1847 29 100 v 0.9 TeXcolorgray Black 262 1847 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1847 29 100
v 0.9 TeXcolorgray Black 3180 1847 4 100 v 415 1817 a
Fm(4)396 b Fl(hackerSem)m(.)o(signal)41 b(\(4\))344 b(//)42
b(signal)f(four)h(times)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1947 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1947 29 100 v 0.9 TeXcolorgray Black
262 1947 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1947 29 100 v 0.9 TeXcolorgray Black 3180 1947 4 100
v 415 1917 a Fm(5)396 b Fl(rowBoat)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2047 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2047 29 100
v 0.9 TeXcolorgray Black 262 2047 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2047 29 100 v 0.9 TeXcolorgray
Black 3180 2047 4 100 v 415 2017 a Fm(6)396 b Fl(hackers)41
b(=)i(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2146
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2146 29 100 v 0.9 TeXcolorgray Black
262 2146 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2146 29 100 v 0.9 TeXcolorgray Black 3180 2146 4 100
v 415 2116 a Fm(7)396 b Fl(iAmTheCaptain)39 b(=)k(true)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2246 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2246 29 100 v 0.9 TeXcolorgray Black 262 2246 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2246 29 100
v 0.9 TeXcolorgray Black 3180 2246 4 100 v 415 2216 a
Fm(8)240 b Fl(else)41 b(if)i(\(hackers)e(==)h(2)h(and)g(serfs)e(>=)i
(2\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2345 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2345 29 100 v 0.9 TeXcolorgray Black 262 2345 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2345 29 100
v 0.9 TeXcolorgray Black 3180 2345 4 100 v 415 2316 a
Fm(9)396 b Fl(hackerSem)m(.)o(signal)41 b(\(2\))540 b(//)42
b(signal)g(twice)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2445 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2445 29 100 v 0.9 TeXcolorgray Black
262 2445 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2445 29 100 v 0.9 TeXcolorgray Black 3180 2445 4 100
v 374 2415 a Fm(10)395 b Fl(serfSem)n(.)o(signal)41 b(\(2\))627
b(//)42 b(signal)g(twice)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2545 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2545 29 100 v 0.9 TeXcolorgray Black
262 2545 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2545 29 100 v 0.9 TeXcolorgray Black 3180 2545 4 100
v 374 2515 a Fm(11)395 b Fl(rowBoat)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2644 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2644 29 100
v 0.9 TeXcolorgray Black 262 2644 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2644 29 100 v 0.9 TeXcolorgray
Black 3180 2644 4 100 v 374 2614 a Fm(12)395 b Fl(serfs)42
b(-=)h(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2744
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 2744 29 100 v 0.9 TeXcolorgray Black
262 2744 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2744 29 100 v 0.9 TeXcolorgray Black 3180 2744 4 100
v 374 2714 a Fm(13)395 b Fl(hackers)41 b(=)i(0)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2844 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2844 29 100 v 0.9 TeXcolorgray Black 262 2844 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2844 29 100
v 0.9 TeXcolorgray Black 3180 2844 4 100 v 374 2814 a
Fm(14)395 b Fl(iAmTheCaptain)39 b(=)k(true)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2943 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2943 29 100
v 0.9 TeXcolorgray Black 262 2943 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2943 29 100 v 0.9 TeXcolorgray
Black 3180 2943 4 100 v 374 2913 a Fm(15)239 b Fl(else)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3043 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3043 29 100 v 0.9 TeXcolorgray Black 262 3043 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3043 29 100
v 0.9 TeXcolorgray Black 3180 3043 4 100 v 374 3013 a
Fm(16)395 b Fl(mutex)n(.signal)41 b(\(\))91 b(//)43 b(captain)d(keeps)i
(the)g(mutex)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
3142 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3142 29 100 v 0.9 TeXcolorgray Black
262 3142 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3142 29 100 v 0.9 TeXcolorgray Black 3180 3142 4 100
v 374 3113 a Fm(17)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3242 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3242 29 100 v 0.9 TeXcolorgray Black
262 3242 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3242 29 100 v 0.9 TeXcolorgray Black 3180 3242 4 100
v 374 3212 a(18)82 b Fl(wait)42 b(\()o(hackerSem)l(\))362
b(//)43 b(wait)e(here)h(to)h(board)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3342 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3342 29 100
v 0.9 TeXcolorgray Black 262 3342 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3342 29 100 v 0.9 TeXcolorgray
Black 3180 3342 4 100 v 374 3312 a Fm(19)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3441 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3441 29 100
v 0.9 TeXcolorgray Black 262 3441 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3441 29 100 v 0.9 TeXcolorgray
Black 3180 3441 4 100 v 374 3411 a(20)82 b Fl(board)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3541 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3541 29 100 v 0.9 TeXcolorgray Black 262 3541 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3541 29 100
v 0.9 TeXcolorgray Black 3180 3541 4 100 v 374 3511 a
Fm(21)82 b Fl(barrier)m(.)o(wait)42 b(\(\))405 b(//)43
b(wait)e(until)h(all)g(4)i(have)d(boarded)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3641 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3641 29 100
v 0.9 TeXcolorgray Black 262 3641 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3641 29 100 v 0.9 TeXcolorgray
Black 3180 3641 4 100 v 374 3611 a Fm(22)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3740 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3740 29 100
v 0.9 TeXcolorgray Black 262 3740 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3740 29 100 v 0.9 TeXcolorgray
Black 3180 3740 4 100 v 374 3710 a(23)82 b Fl(if)42 b(\(iAmTheCaptain)
-5 b(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3840
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 3840 29 100 v 0.9 TeXcolorgray Black
262 3840 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3840 29 100 v 0.9 TeXcolorgray Black 3180 3840 4 100
v 374 3810 a Fm(24)239 b Fl(mutex)m(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3939 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3939 29 100 v 0.9 TeXcolorgray Black 262 3939 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3939 29 100
v 0.9 TeXcolorgray Black 3180 3939 4 100 v 374 3910 a
Fm(25)239 b Fl(rowBoat)40 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 262 3968 2921 29 v 0.9 TeXcolorgray Black
262 3968 4 29 v 263 3968 29 4 v 291 3968 250 4 v 541
3968 2616 4 v 3157 3968 29 4 v 3183 3968 4 29 v 415 4097
a Fm(This)27 b(is)h(the)f(\014rst)h(case)e(w)n(e)h(ha)n(v)n(e)f(seen)h
(where)g(a)g(m)n(utex)h(do)r(es)f(not)g(ha)n(v)n(e)f(a)h(clear)g(end)
291 4196 y(p)r(oin)n(t.)36 b(In)25 b(most)f(cases,)h(threads)f(en)n
(ter)g(the)h(m)n(utex,)h(up)r(date)f(the)g(coun)n(ter,)g(and)g(exit)g
(the)291 4296 y(m)n(utex.)37 b(Then)27 b(they)h(w)n(ait)f(on)h
Fl(hackerSem)c Fm(or)i Fl(serfSem)p Fm(.)415 4398 y(But)k(when)f(a)g
(thread)g(arriv)n(es)e(that)i(forms)g(a)g(complete)g(b)r(oatload,)f(it)
i(has)f(to)g(signal)291 4498 y Fl(hackerSem)e Fm(and)k
Fl(serfSem)d Fm(to)k(allo)n(w)e(the)h(other)g(threads)f(to)h(b)r(oard.)
47 b(Then)31 b(it)h(adjusts)291 4597 y(the)e(coun)n(ters.)45
b(Finally)-7 b(,)31 b(it)f(has)g(to)h(hold)f(on)n(to)f(the)i(m)n(utex)g
(un)n(til)g(all)f(the)g(threads)g(ha)n(v)n(e)291 4697
y(b)r(oarded.)415 4799 y(The)f(barrier)d(k)n(eeps)i(trac)n(k)g(of)g(ho)
n(w)g(man)n(y)g(threads)g(ha)n(v)n(e)f(b)r(oarded.)39
b(When)29 b(the)g(last)291 4899 y(thread)20 b(arriv)n(es,)f(all)h
(threads)g(pro)r(ceed.)34 b(One)20 b(of)g(them,)j(the)e(captain,)g
(releases)e(the)i(m)n(utex)291 4998 y(\(\014nally\))28
b(and)f(then)h(ro)n(ws)e(the)i(b)r(oat.)p Black Black
eop
%%Page: 94 100
94 99 bop Black 739 252 a Fo(94)1029 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
863 515 a Fm(Here)28 b(are)e(some)h(middle-lev)n(el)h(assertions)d(y)n
(ou)i(migh)n(t)h(w)n(an)n(t)f(to)g(pro)n(v)n(e)f(to)i(y)n(ourself:)p
Black 863 698 a Fd(\017)p Black 41 w Fm(There)k(can't)f(b)r(e)h(more)f
(than)h(4)f(hac)n(k)n(ers)f(or)h(4)g(serfs)g(in)h(the)g(b)r(oarding)f
(area)f(at)i(a)946 798 y(time.)p Black 863 964 a Fd(\017)p
Black 41 w Fm(When)23 b(all)f(four)f(passengers)f(ha)n(v)n(e)h(b)r
(oarded,)h(and)g(the)g(captain)f(is)h(ab)r(out)g(to)g(in)n(v)n(ok)n(e)
946 1063 y Fl(rowBoat)j Fm(there)j(can)f(b)r(e)h(at)f(most)h(1)f
(thread)g(in)h(the)g(b)r(oarding)e(area.)739 1338 y Fh(5.5)135
b(The)45 b(unisex)g(bathro)t(om)g(problem)739 1520 y
Fm(I)32 b(wrote)f(this)i(problem)e(when)h(m)n(y)g(friend)g(Shelb)n(y)g
(Nelson)g(left)h(her)e(p)r(osition)h(teac)n(hing)739
1619 y(ph)n(ysics)27 b(at)g(Colb)n(y)g(College)g(and)g(to)r(ok)g(a)g
(job)h(at)g(Xero)n(x.)863 1719 y(She)33 b(w)n(as)e(w)n(orking)f(in)j(a)
f(cubicle)g(in)h(the)f(basemen)n(t)g(of)g(a)g(concrete)f(monolith,)i
(and)739 1819 y(the)22 b(nearest)f(w)n(omen's)g(bathro)r(om)g(w)n(as)g
(t)n(w)n(o)g(\015o)r(ors)g(up.)36 b(She)22 b(prop)r(osed)f(to)g(the)i
(Ub)r(erb)r(oss)739 1918 y(that)30 b(they)f(con)n(v)n(ert)f(the)i
(men's)g(bathro)r(om)e(on)i(her)f(\015o)r(or)f(to)i(a)f(unisex)g
(bathro)r(om,)g(sort)739 2018 y(of)e(lik)n(e)h(on)f(Ally)h(McBeal.)863
2117 y(The)47 b(Ub)r(erb)r(oss)f(agreed,)k(pro)n(vided)c(that)h(the)g
(follo)n(wing)e(sync)n(hronization)g(con-)739 2217 y(strain)n(ts)27
b(can)g(b)r(e)h(main)n(tained:)p Black 863 2400 a Fd(\017)p
Black 41 w Fm(There)g(cannot)f(b)r(e)h(men)g(and)f(w)n(omen)g(in)h(the)
g(bathro)r(om)f(at)g(the)h(same)f(time.)p Black 863 2566
a Fd(\017)p Black 41 w Fm(There)k(should)f(nev)n(er)g(b)r(e)h(more)f
(than)g(three)h(emplo)n(y)n(ees)e(squandering)g(compan)n(y)946
2665 y(time)g(in)e(the)h(bathro)r(om.)863 2848 y(Of)e(course)e(the)i
(solution)f(should)g(a)n(v)n(oid)f(deadlo)r(c)n(k.)35
b(F)-7 b(or)25 b(no)n(w,)g(though,)h(don't)f(w)n(orry)739
2948 y(ab)r(out)j(starv)-5 b(ation.)36 b(Y)-7 b(ou)28
b(ma)n(y)g(assume)f(that)h(the)g(bathro)r(om)f(is)h(equipp)r(ed)h(with)
f(all)g(the)739 3047 y(semaphores)e(y)n(ou)h(need.)p
Black Black eop
%%Page: 95 101
95 100 bop Black 291 252 a Fo(5.6)30 b(Unisex)i(bathro)s(om)f(hin)m(t)
1692 b(95)p 291 286 2865 4 v Black 291 515 a Fh(5.6)135
b(Unisex)46 b(bathro)t(om)f(hin)l(t)291 697 y Fm(Here)27
b(are)f(the)i(v)-5 b(ariables)27 b(I)g(used)h(in)g(m)n(y)f(solution:)p
Black 1101 871 a(Listing)h(5.6:)36 b(Unisex)27 b(bathro)r(om)g(hin)n(t)
p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 933 2921
29 v 0.9 TeXcolorgray Black 262 933 4 29 v 262 908 29
4 v 291 908 250 4 v 541 908 2616 4 v 3157 908 29 4 v
3183 933 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1033 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1033 29 100 v 0.9 TeXcolorgray Black
262 1033 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1033 29 100 v 0.9 TeXcolorgray Black 3180 1033 4 100
v 415 1003 a(1)83 b Fl(Semaphore)40 b(empty)h(=)i(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1132 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1132 29 100 v 0.9 TeXcolorgray Black 262 1132 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1132 29 100
v 0.9 TeXcolorgray Black 3180 1132 4 100 v 415 1102 a
Fm(2)83 b Fl(Filo)42 b(maleFilo)l(,)h(femaleFilo)p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1232 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1232 29 100 v 0.9 TeXcolorgray Black 262 1232 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1232 29 100
v 0.9 TeXcolorgray Black 3180 1232 4 100 v 415 1202 a
Fm(3)83 b Fl(Semaphore)40 b(maleMultiplex)e(=)43 b(3)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1331 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1331 29 100 v 0.9 TeXcolorgray Black 262 1331 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1331 29 100
v 0.9 TeXcolorgray Black 3180 1331 4 100 v 415 1302 a
Fm(4)83 b Fl(Semaphore)40 b(femaleMultiplex)d(=)43 b(3)p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1360 2921 29 v
0.9 TeXcolorgray Black 262 1360 4 29 v 263 1360 29 4
v 291 1360 250 4 v 541 1360 2616 4 v 3157 1360 29 4 v
3183 1360 4 29 v 415 1481 a Fm(Finally)-7 b(,)28 b Fl(empty)d
Fm(is)j(1)f(if)h(the)g(ro)r(om)f(is)g(empt)n(y)h(and)f(0)h(otherwise.)
415 1580 y Fl(maleFilo)k Fm(allo)n(ws)h(men)i(to)f(bar)g(w)n(omen.)58
b(When)35 b(the)g(\014rst)g(male)f(en)n(ters,)i(the)f(\014lo)291
1680 y(lo)r(c)n(ks)19 b Fl(empty)p Fm(,)g(barring)f(w)n(omen;)k(When)f
(the)f(last)f(male)h(exist,)h(it)f(unlo)r(c)n(ks)g Fl(empty)d
Fm(allo)n(wing)291 1780 y(w)n(omen)27 b(to)g(en)n(ter.)36
b(W)-7 b(omen)28 b(do)g(lik)n(ewise)e(using)i Fl(femaleFilo)p
Fm(.)415 1879 y Fl(maleMultiplex)d Fm(and)30 b Fl(femaleMultiplex)24
b Fm(ensure)30 b(that)g(there)g(are)f(no)h(more)g(than)291
1979 y(three)d(men)h(and)f(three)h(w)n(omen)f(in)h(the)g(system)f(at)g
(a)h(time.)p Black Black eop
%%Page: 96 102
96 101 bop Black Black Black Black eop
%%Page: 97 103
97 102 bop Black 291 252 a Fo(5.7)30 b(Unisex)i(bathro)s(om)f(solution)
1528 b(97)p 291 286 2865 4 v Black 291 515 a Fh(5.7)135
b(Unisex)46 b(bathro)t(om)f(solution)291 697 y Fm(Here)27
b(is)g(the)h(female)g(co)r(de:)p Black 868 871 a(Listing)f(5.7:)36
b(Unisex)28 b(bathro)r(om)f(solution)g(\(female\))p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 933 2921 29 v 0.9
TeXcolorgray Black 262 933 4 29 v 262 908 29 4 v 291
908 250 4 v 541 908 2616 4 v 3157 908 29 4 v 3183 933
4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1033 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1033 29 100 v 0.9 TeXcolorgray Black 262 1033 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1033 29 100
v 0.9 TeXcolorgray Black 3180 1033 4 100 v 415 1003 a(1)83
b Fl(femaleFilo)l(.)o(lock)42 b(\(empty)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1132 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1132 29 100
v 0.9 TeXcolorgray Black 262 1132 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1132 29 100 v 0.9 TeXcolorgray
Black 3180 1132 4 100 v 415 1102 a Fm(2)240 b Fl(femaleMultiplex)-7
b(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1232 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1232 29 100 v 0.9 TeXcolorgray Black
262 1232 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1232 29 100 v 0.9 TeXcolorgray Black 3180 1232 4 100
v 415 1202 a Fm(3)396 b Fl(bathroom)41 b(code)h(here)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1331 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1331 29 100 v 0.9 TeXcolorgray Black 262 1331 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1331 29 100
v 0.9 TeXcolorgray Black 3180 1331 4 100 v 415 1302 a
Fm(4)240 b Fl(femaleMultiplex)-7 b(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1431 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1431 29 100 v 0.9 TeXcolorgray Black 262 1431 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1431 29 100
v 0.9 TeXcolorgray Black 3180 1431 4 100 v 415 1401 a
Fm(5)83 b Fl(female)41 b(Filo)n(.lock)h(\()o(empty)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1459 2921 29 v
0.9 TeXcolorgray Black 262 1459 4 29 v 263 1459 29 4
v 291 1459 250 4 v 541 1459 2616 4 v 3157 1459 29 4 v
3183 1459 4 29 v 415 1580 a Fm(The)28 b(male)f(co)r(de)h(is)f(similar.)
415 1680 y(The)e(exclusion)g(pattern)g(in)h(this)f(problem)g(migh)n(t)h
(b)r(e)f(called)g Fo(categorical)30 b(m)m(utual)291 1780
y(exclusion)p Fm(.)45 b(A)31 b(thread)f(in)h(the)g(critical)f(section)h
(do)r(es)f(not)h(necessarily)e(exclude)h(other)291 1879
y(threads,)f(but)h(the)g(presence)e(of)i(one)f(category)e(in)j(the)g
(critical)e(section)h(excludes)g(other)291 1979 y(categories.)415
2079 y(Are)e(there)h(an)n(y)f(problems)g(with)h(this)g(solution?)p
Black Black eop
%%Page: 98 104
98 103 bop Black Black Black Black eop
%%Page: 99 105
99 104 bop Black 291 252 a Fo(5.8)30 b(No-starv)m(e)j(unisex)e(bathro)s
(om)f(problem)1097 b(99)p 291 286 2865 4 v Black 291
515 a Fh(5.8)135 b(No-starv)l(e)46 b(unisex)f(bathro)t(om)h(problem)291
697 y Fm(The)25 b(problem)h(with)g(the)g(previous)f(solution)h(is)f
(that)h(it)h(allo)n(ws)d(starv)-5 b(ation.)35 b(A)27
b(long)e(line)291 797 y(of)i(w)n(omen)g(can)g(arriv)n(e)f(and)i(en)n
(ter)f(while)g(there)h(is)f(a)g(man)h(w)n(aiting,)f(and)g(vice)h(v)n
(ersa.)415 896 y(Puzzle:)36 b(\014x)28 b(the)g(problem.)p
Black Black eop
%%Page: 100 106
100 105 bop Black Black Black Black eop
%%Page: 101 107
101 106 bop Black 291 252 a Fo(5.9)30 b(No-starv)m(e)j(unisex)e(bathro)
s(om)f(solution)1064 b(101)p 291 286 2865 4 v Black 291
515 a Fh(5.9)135 b(No-starv)l(e)46 b(unisex)f(bathro)t(om)h(solution)
291 697 y Fm(As)32 b(w)n(e)f(ha)n(v)n(e)g(seen)g(b)r(efore,)i(w)n(e)e
(can)h(use)f(a)h(turnstile)g(to)g(allo)n(w)e(one)i(kind)g(of)g(thread)f
(to)291 797 y(stop)24 b(the)h(\015o)n(w)f(of)h(the)g(other)g(kind)g(of)
f(thread.)36 b(This)25 b(time)g(w)n(e'll)g(lo)r(ok)f(at)g(the)i(male)e
(co)r(de:)p Black 719 971 a(Listing)j(5.8:)36 b(No-starv)n(e)26
b(unisex)h(bathro)r(om)g(solution)g(\(male\))p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1033 2921 29 v
0.9 TeXcolorgray Black 262 1033 4 29 v 262 1008 29 4
v 291 1008 250 4 v 541 1008 2616 4 v 3157 1008 29 4 v
3183 1033 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1132 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1132 29 100 v 0.9 TeXcolorgray Black
262 1132 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1132 29 100 v 0.9 TeXcolorgray Black 3180 1132 4 100
v 415 1102 a(1)83 b Fl(turnstile)l(.wait)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1232 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1232 29 100 v 0.9 TeXcolorgray Black 262 1232 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1232 29 100
v 0.9 TeXcolorgray Black 3180 1232 4 100 v 415 1202 a
Fm(2)240 b Fl(maleFilo)l(.lock)42 b(\()o(empty)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1331 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1331 29 100 v 0.9 TeXcolorgray Black 262 1331 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1331 29 100
v 0.9 TeXcolorgray Black 3180 1331 4 100 v 415 1302 a
Fm(3)83 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1431 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1431 29 100
v 0.9 TeXcolorgray Black 262 1431 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1431 29 100 v 0.9 TeXcolorgray
Black 3180 1431 4 100 v 415 1401 a Fm(4)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1531 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1531 29 100
v 0.9 TeXcolorgray Black 262 1531 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1531 29 100 v 0.9 TeXcolorgray
Black 3180 1531 4 100 v 415 1501 a(5)240 b Fl(maleMultiplex)-6
b(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1630 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1630 29 100 v 0.9 TeXcolorgray Black
262 1630 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1630 29 100 v 0.9 TeXcolorgray Black 3180 1630 4 100
v 415 1600 a Fm(6)396 b Fl(bathroom)41 b(code)h(here)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1730 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1730 29 100 v 0.9 TeXcolorgray Black 262 1730 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1730 29 100
v 0.9 TeXcolorgray Black 3180 1730 4 100 v 415 1700 a
Fm(7)240 b Fl(maleMultiplex)-6 b(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1830 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1830 29 100 v 0.9 TeXcolorgray Black 262 1830 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1830 29 100
v 0.9 TeXcolorgray Black 3180 1830 4 100 v 415 1800 a
Fm(8)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1929 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1929 29 100 v 0.9 TeXcolorgray Black 262 1929 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1929 29 100
v 0.9 TeXcolorgray Black 3180 1929 4 100 v 415 1899 a(9)83
b Fl(maleFilo)l(.unlock)41 b(\(empty)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1957 2921 29 v 0.9 TeXcolorgray
Black 262 1957 4 29 v 263 1957 29 4 v 291 1957 250 4
v 541 1957 2616 4 v 3157 1957 29 4 v 3183 1957 4 29 v
415 2079 a Fm(As)34 b(long)g(as)g(there)g(are)f(men)i(in)f(the)h(ro)r
(om,)g(new)f(arriv)-5 b(als)33 b(will)h(pass)g(through)g(the)291
2178 y(turnstile)e(and)f(en)n(ter.)49 b(If)33 b(there)e(are)g(w)n(omen)
g(in)i(the)f(ro)r(om)f(when)h(a)f(male)h(arriv)n(es,)f(the)291
2278 y(male)f(will)i(blo)r(c)n(k)e(inside)h(the)h(turnstile,)g(whic)n
(h)f(will)g(bar)g(all)f(later)h(arriv)-5 b(als)29 b(\(male)i(and)291
2378 y(female\))25 b(from)g(en)n(tering)f(un)n(til)h(the)h(curren)n(t)e
(o)r(ccupan)n(ts)g(lea)n(v)n(e.)35 b(A)n(t)25 b(that)h(p)r(oin)n(t)f
(the)g(male)291 2477 y(in)i(the)h(turnstile)g(en)n(ters,)f(p)r(ossibly)
g(allo)n(wing)f(additional)h(males)h(to)f(en)n(ter.)415
2577 y(The)22 b(female)g(co)r(de)f(is)h(similar,)g(so)f(if)i(there)e
(are)g(men)h(in)g(the)g(ro)r(om)f(an)h(arriving)e(female)291
2676 y(will)27 b(get)h(stuc)n(k)f(in)h(the)g(turnstile,)g(barring)e
(additional)h(men.)291 2909 y Fe(5.9.1)112 b(E\016cien)m(t)36
b(no-starv)m(e)i(unisex)g(bathro)s(om)f(problem)291 3062
y Fm(There)27 b(is)i(one)f(asp)r(ect)g(of)h(this)f(solution)g(that)h
(is)f(p)r(ossibly)g(ine\016cien)n(t.)40 b(If)29 b(the)g(system)f(is)291
3162 y(busy)-7 b(,)29 b(then)h(there)f(will)g(often)g(b)r(e)h(sev)n
(eral)d(threads,)i(male)g(and)g(female,)h(queued)f(on)g(the)291
3261 y(turnstile.)41 b(Eac)n(h)28 b(time)i Fl(empty)d
Fm(is)i(signalled,)g(one)g(thread)g(will)g(lea)n(v)n(e)f(the)i
(turnstile)f(and)291 3361 y(another)i(will)i(en)n(ter.)52
b(If)33 b(the)h(new)e(thread)h(is)f(the)h(opp)r(osite)g(gender,)g(it)g
(will)g(promptly)291 3461 y(blo)r(c)n(k,)21 b(barring)e(additional)i
(threads.)34 b(Th)n(us,)22 b(there)e(will)h(usually)f(b)r(e)i(only)e
(1-2)g(threads)g(in)291 3560 y(the)26 b(bathro)r(om)g(at)g(a)g(line,)h
(and)f(the)h(system)f(will)g(not)h(tak)n(e)e(adv)-5 b(an)n(tage)25
b(of)h(the)h(a)n(v)-5 b(ailable)291 3660 y(parallelism.)415
3759 y(Puzzle:)41 b(Extend)30 b(this)g(solution)g(so)f(that)h(when)h
Fl(empty)d Fm(is)h(signalled)h(b)n(y)f(an)h(exiting)291
3859 y(thread,)25 b(a)g(w)n(aiting)g(thread)g(of)g(the)h(opp)r(osite)f
(gender)f(pro)r(ceeds)h(\(if)h(there)f(is)g(one\),)h(along)291
3959 y(with)i(up)g(to)f(t)n(w)n(o)g(additional)g(threads)g(of)g(the)h
(same)f(gender.)p Black Black eop
%%Page: 102 108
102 107 bop Black Black Black Black eop
%%Page: 103 109
103 108 bop Black 291 252 a Fo(5.9)30 b(No-starv)m(e)j(unisex)e(bathro)
s(om)f(solution)1064 b(103)p 291 286 2865 4 v Black 291
515 a Fe(5.9.2)112 b(E\016cien)m(t)36 b(no-starv)m(e)i(unisex)g(bathro)
s(om)f(hin)m(t)291 669 y Fm(The)26 b(fundamen)n(tal)h(problem)f(is)h
(that)g(only)f(one)g(thread)g(can)h(w)n(ait)f(inside)h(the)g
(turnstile,)291 768 y(so)32 b(when)i(the)g(bathro)r(om)f(is)g(empt)n(y)
h(w)n(e)f(are)f(only)h(guaran)n(teed)f(that)i(one)f(new)g(thread)291
868 y(can)27 b(en)n(ter.)415 967 y(W)-7 b(e)27 b(w)n(ould)f(lik)n(e)f
(to)i(replace)e(the)h(turnstile)h(with)g(a)e(\\w)n(aiting)g(ro)r(om,")h
(that)g(can)g(hold)291 1067 y(m)n(ultiple)34 b(threads)f(of)h(the)h
(same)e(gender.)55 b(The)34 b(requiremen)n(ts)f(for)g(the)i(w)n(aiting)
e(ro)r(om)291 1167 y(are)25 b(similar)g(to)h(the)g(requiremen)n(ts)f
(for)h(the)h(bathro)r(om)e(itself)h({)g(it)h(has)e(limited)i(capacit)n
(y)291 1266 y(and)g(should)g(enforce)g(categorical)f(m)n(utual)h
(exclusion.)415 1366 y(My)h(solution)f(uses)g(the)h(follo)n(wing)f
(additional)g(v)-5 b(ariables.)p Black 1101 1540 a(Listing)28
b(5.9:)36 b(Unisex)27 b(bathro)r(om)g(hin)n(t)p Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1602 2921 29 v
0.9 TeXcolorgray Black 262 1602 4 29 v 262 1577 29 4
v 291 1577 250 4 v 541 1577 2616 4 v 3157 1577 29 4 v
3183 1602 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1701 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1701 29 100 v 0.9 TeXcolorgray Black
262 1701 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1701 29 100 v 0.9 TeXcolorgray Black 3180 1701 4 100
v 415 1671 a(1)83 b Fl(Semaphore)40 b(waitRoomEmpty)e(=)43
b(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1801 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1801 29 100 v 0.9 TeXcolorgray Black 262 1801 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1801 29 100
v 0.9 TeXcolorgray Black 3180 1801 4 100 v 415 1771 a
Fm(2)83 b Fl(Filo)42 b(maleWaitFilo)-5 b(,)43 b(femaleWaitFilo)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1901 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1901 29 100 v 0.9 TeXcolorgray Black 262 1901 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1901 29 100
v 0.9 TeXcolorgray Black 3180 1901 4 100 v 415 1871 a
Fm(3)83 b Fl(Semaphore)40 b(maleWaitMultipl)o(ex)d(=)43
b(3)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2000 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2000 29 100 v 0.9 TeXcolorgray Black 262 2000 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2000 29 100
v 0.9 TeXcolorgray Black 3180 2000 4 100 v 415 1970 a
Fm(4)83 b Fl(Semaphore)40 b(femaleWaitMulti)o(pl)o(ex)d(=)43
b(3)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2028 2921
29 v 0.9 TeXcolorgray Black 262 2028 4 29 v 263 2028
29 4 v 291 2028 250 4 v 541 2028 2616 4 v 3157 2028 29
4 v 3183 2028 4 29 v Black Black eop
%%Page: 104 110
104 109 bop Black Black Black Black eop
%%Page: 105 111
105 110 bop Black 291 252 a Fo(5.9)30 b(No-starv)m(e)j(unisex)e(bathro)
s(om)f(solution)1064 b(105)p 291 286 2865 4 v Black 291
515 a Fe(5.9.3)112 b(E\016cien)m(t)36 b(unisex)i(bathro)s(om)f
(solution)p Black 855 743 a Fm(Listing)27 b(5.10:)36
b(E\016cien)n(t)27 b(unisex)g(bathro)r(om)g(solution)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 805 2921
29 v 0.9 TeXcolorgray Black 262 805 4 29 v 262 780 29
4 v 291 780 250 4 v 541 780 2616 4 v 3157 780 29 4 v
3183 805 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
904 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 29 100 v 0.9 TeXcolorgray Black
262 904 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
904 29 100 v 0.9 TeXcolorgray Black 3180 904 4 100 v
415 874 a(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1004
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(2)83 b Fl(maleWaitMultipl)o(ex)-6 b(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1104 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(3)240 b Fl(maleWaitFilo)-5 b(.)o(lock)42 b(\(waitRoomEmpty)-6
b(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(4)396 b Fl(maleFilo)m(.lock)42 b(\()o(empty)n(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1303 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1303 29 100 v 0.9 TeXcolorgray Black 262 1303 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1303 29 100
v 0.9 TeXcolorgray Black 3180 1303 4 100 v 415 1273 a
Fm(5)240 b Fl(maleWaitFilo)-5 b(.)o(unlock)41 b(\(waitRoomEmpty)-6
b(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(6)83 b Fl(maleWaitMultipl)o(ex)-6 b(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1502 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1502 29 100 v 0.9 TeXcolorgray Black 262 1502 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1502 29 100
v 0.9 TeXcolorgray Black 3180 1502 4 100 v 415 1472 a
Fm(7)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1602 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1602 29 100 v 0.9 TeXcolorgray Black 262 1602 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1602 29 100
v 0.9 TeXcolorgray Black 3180 1602 4 100 v 415 1572 a(8)240
b Fl(maleMultiplex)-6 b(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1701 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1701 29 100
v 0.9 TeXcolorgray Black 262 1701 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1701 29 100 v 0.9 TeXcolorgray
Black 3180 1701 4 100 v 415 1671 a Fm(9)396 b Fl(bathroom)41
b(code)h(here)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291
1801 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1801 29 100 v 0.9 TeXcolorgray Black
262 1801 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1801 29 100 v 0.9 TeXcolorgray Black 3180 1801 4 100
v 374 1771 a Fm(10)239 b Fl(maleMultiplex)-6 b(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1901 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1901 29 100 v 0.9 TeXcolorgray Black 262 1901 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1901 29 100
v 0.9 TeXcolorgray Black 3180 1901 4 100 v 374 1871 a
Fm(11)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2000 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2000 29 100 v 0.9 TeXcolorgray Black 262 2000 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2000 29 100
v 0.9 TeXcolorgray Black 3180 2000 4 100 v 374 1970 a(12)82
b Fl(maleFilo)l(.unlock)41 b(\(empty)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2028 2921 29 v 0.9 TeXcolorgray
Black 262 2028 4 29 v 263 2028 29 4 v 291 2028 250 4
v 541 2028 2616 4 v 3157 2028 29 4 v 3183 2028 4 29 v
415 2150 a Fm(The)33 b(m)n(ultiplex)g(allo)n(ws)f(up)h(to)f(three)h
(male)f(threads)h(to)f(b)r(e)h(in)g(the)h(w)n(aiting)e(ro)r(om.)291
2249 y(The)27 b(\014lo)h(and)f Fl(waitRoomEmpty)22 b
Fm(enforce)27 b(categorical)f(m)n(utual)h(exclusion.)415
2349 y(Imagine)j(that)h(there)g(are)f(female)g(threads)g(in)h(the)g
(bathro)r(om.)46 b(Additional)31 b(female)291 2449 y(threads)d(pass)h
(through)g(the)h(w)n(aiting)f(ro)r(om)f(without)i(blo)r(c)n(king.)42
b(When)30 b(the)g(\014rst)f(male)291 2548 y(thread)e(arriv)n(e,)f(it)i
(blo)r(c)n(ks)f(on)h Fl(maleFilo)p Fm(.)34 b(A)n(t)28
b(this)g(p)r(oin)n(t,)g(female)g(threads)f(hold)h Fl(empty)291
2648 y Fm(but)d(male)g(threads)g(hold)g Fl(waitRoomEmpty)p
Fm(.)31 b(Th)n(us,)25 b(additional)g(female)g(threads)f(cannot)291
2747 y(en)n(ter)c(the)i(w)n(aiting)e(ro)r(om.)34 b(Up)22
b(to)f(t)n(w)n(o)f(additional)g(male)h(threads)g(can)f(en)n(ter)h(the)h
(w)n(aiting)291 2847 y(ro)r(om,)g(where)g(they)g(will)h(also)e(blo)r(c)
n(k)h(on)f Fl(maleFilo)p Fm(.)32 b(An)n(y)23 b(additional)e(male)h
(threads)g(will)291 2947 y(blo)r(c)n(k)27 b(on)g Fl(maleWaitMultiple)o
(x)p Fm(.)415 3046 y(Ev)n(en)n(tually)d(the)i(last)f(female)h(thread)e
(will)i(signal)f Fl(empty)p Fm(.)34 b(A)n(t)26 b(that)f(p)r(oin)n(t,)h
(the)g(male)291 3146 y(threads)38 b(in)h Fl(maleFilo)c
Fm(un)n(blo)r(c)n(k)j(and)h(en)n(ter)f(the)i(bathro)r(om.)69
b(When)40 b(the)f(last)f(male)291 3246 y(thread)i(lea)n(v)n(es)f(the)h
(w)n(aiting)g(ro)r(om,)j(it)e(signals)f Fl(waitRoomEmpty)p
Fm(.)70 b(A)n(t)41 b(this)g(p)r(oin)n(t)f(a)291 3345
y(female)c(thread)f(ma)n(y)g(en)n(ter)h(the)g(w)n(aiting)g(ro)r(om,)h
(but)f(there)g(is)g(no)g(guaran)n(tee)e(that)i(a)291
3445 y(male)27 b(threads)g(do)r(esn't)h(get)f(there)g(\014rst.)415
3544 y(So)h(this)g(solution)f(solv)n(ed)g(the)h(e\016ciency)f(problem,)
h(but)g(it)g(brough)n(t)f(bac)n(k)g(the)h(star-)291 3644
y(v)-5 b(ation)23 b(problem.)36 b(F)-7 b(ortunately)g(,)24
b(w)n(e)g(can)f(solv)n(e)g(the)i(starv)-5 b(ation)23
b(problem)g(the)i(same)e(w)n(a)n(y)291 3744 y(w)n(e)k(did)h(b)r(efore,)
f(b)n(y)g(adding)h(a)f(turnstile:)p Black Black eop
%%Page: 106 112
106 111 bop Black 739 252 a Fo(106)981 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
Black 1303 515 a Fm(Listing)27 b(5.11:)36 b(E\016cien)n(t)27
b(unisex)h(bathro)r(om)f(solution)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 573 2921 29 v 0.9 TeXcolorgray Black
711 573 4 29 v 711 548 29 4 v 739 548 250 4 v 989 548
2616 4 v 3605 548 29 4 v 3631 573 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 739 672 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 672 29 100
v 0.9 TeXcolorgray Black 711 672 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 672 29 100 v 0.9 TeXcolorgray Black
3628 672 4 100 v 863 643 a(1)83 b Fl(maleWaitMultiple)o(x)-6
b(.wait)41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 772 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 772 29 100 v 0.9 TeXcolorgray Black
711 772 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
772 29 100 v 0.9 TeXcolorgray Black 3628 772 4 100 v
863 742 a Fm(2)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
872 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 872 29 100 v 0.9 TeXcolorgray Black
711 872 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
872 29 100 v 0.9 TeXcolorgray Black 3628 872 4 100 v
863 842 a(3)83 b Fl(turnstile)l(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 971 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 971 29 100 v 0.9 TeXcolorgray Black 711 971 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 971 29 100 v
0.9 TeXcolorgray Black 3628 971 4 100 v 863 941 a Fm(4)240
b Fl(maleWaitFilo)-5 b(.)o(lock)42 b(\(waitRoomEmpty)-5
b(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1071 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1071 29 100 v 0.9 TeXcolorgray Black 711 1071 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1071 29 100
v 0.9 TeXcolorgray Black 3628 1071 4 100 v 863 1041 a
Fm(5)83 b Fl(turnstile)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1171 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1171 29 100
v 0.9 TeXcolorgray Black 711 1171 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1171 29 100 v 0.9 TeXcolorgray
Black 3628 1171 4 100 v 863 1141 a Fm(6)p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1270 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1270 29 100
v 0.9 TeXcolorgray Black 711 1270 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1270 29 100 v 0.9 TeXcolorgray
Black 3628 1270 4 100 v 863 1240 a(7)397 b Fl(maleFilo)l(.lock)42
b(\(empty)n(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
1370 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1370 29 100 v 0.9 TeXcolorgray Black
711 1370 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1370 29 100 v 0.9 TeXcolorgray Black 3628 1370 4 100
v 863 1340 a Fm(8)240 b Fl(maleWaitFilo)-5 b(.)o(unlock)42
b(\()o(waitRoomEmpty)-5 b(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1469 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1469 29 100 v 0.9 TeXcolorgray Black
711 1469 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1469 29 100 v 0.9 TeXcolorgray Black 3628 1469 4 100
v 863 1440 a Fm(9)83 b Fl(maleWaitMultiple)o(x)-6 b(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1569 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1569 29 100 v 0.9 TeXcolorgray Black 711 1569 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1569 29 100
v 0.9 TeXcolorgray Black 3628 1569 4 100 v 822 1539 a
Fm(10)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1669 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1669 29 100 v 0.9 TeXcolorgray Black 711 1669 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1669 29 100
v 0.9 TeXcolorgray Black 3628 1669 4 100 v 822 1639 a(11)239
b Fl(maleMultiplex)-6 b(.wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1768 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1768 29 100
v 0.9 TeXcolorgray Black 711 1768 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1768 29 100 v 0.9 TeXcolorgray
Black 3628 1768 4 100 v 822 1738 a Fm(12)396 b Fl(bathroom)40
b(code)i(here)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
1868 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1868 29 100 v 0.9 TeXcolorgray Black
711 1868 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1868 29 100 v 0.9 TeXcolorgray Black 3628 1868 4 100
v 822 1838 a Fm(13)239 b Fl(maleMultiplex)-6 b(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1968 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1968 29 100 v 0.9 TeXcolorgray Black 711 1968 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1968 29 100
v 0.9 TeXcolorgray Black 3628 1968 4 100 v 822 1938 a
Fm(14)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2067 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2067 29 100 v 0.9 TeXcolorgray Black 711 2067 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2067 29 100
v 0.9 TeXcolorgray Black 3628 2067 4 100 v 822 2037 a(15)82
b Fl(maleFilo)m(.)o(unlock)41 b(\(empty)n(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2095 2921 29 v 0.9 TeXcolorgray
Black 711 2095 4 29 v 712 2095 29 4 v 739 2095 250 4
v 989 2095 2616 4 v 3605 2095 29 4 v 3631 2095 4 29 v
863 2209 a Fm(A)n(t)32 b(this)f(p)r(oin)n(t)h(the)f(solution)g(is)g
(complicated)g(enough)g(that)g(it)h(is)f(hard)f(to)h(b)r(e)h(sure)739
2309 y(that)19 b(it)h(is)f(correct.)33 b(T)-7 b(o)19
b(b)r(e)h(honest,)g(the)g(e\013ort)f(to)g(mak)n(e)g(the)g(solution)g
(more)g(e\016cien)n(t)g(ma)n(y)739 2408 y(ha)n(v)n(e)27
b(b)r(een)i(misguided.)39 b(The)28 b(original)f(\(no-starv)n(e\))g
(solution)h(is)g(probably)f(adequate)h(if)739 2508 y(the)e(n)n(um)n(b)r
(er)g(of)g(threads)g(comp)r(eting)g(for)g(the)g(bathro)r(om)f(is)h
(small.)36 b(If)27 b(that)f(is)h(the)f(case,)739 2607
y(then)k(the)f(original)f(solution)h(is)g(probably)g(more)f(e\016cien)n
(t)i(just)g(b)r(ecause)e(it)i(sp)r(ends)g(less)739 2707
y(time)e(\014ddling)g(with)g(semaphores!)863 2807 y(Also,)j(k)n(eep)f
(in)g(mind)h(that)f(for)g(the)g(v)-5 b(ast)30 b(ma)5
b(jorit)n(y)29 b(of)h(applications)f(correctness)f(is)739
2906 y(more)f(imp)r(ortan)n(t)g(than)h(e\016ciency)-7
b(.)37 b(W)-7 b(rite)27 b(co)r(de)h(that)g(is)f(pro)n(v)-5
b(ably)26 b(correct.)739 3177 y Fh(5.10)135 b(Bab)t(o)t(on)45
b(crossing)739 3359 y Fm(This)38 b(problem)h(is)f(adapted)g(from)g(T)-7
b(anen)n(baum's)38 b Fg(Op)l(er)l(ating)i(Systems:)59
b(Design)40 b(and)739 3459 y(Implementation)p Fm(.)47
b(There)31 b(is)f(a)h(deep)g(can)n(y)n(on)e(somewhere)h(in)h(Kruger)e
(National)h(P)n(ark,)739 3559 y(South)g(Africa,)g(and)f(a)g(single)g
(rop)r(e)g(that)h(spans)f(the)h(can)n(y)n(on.)41 b(Bab)r(o)r(ons)29
b(can)g(cross)f(the)739 3658 y(can)n(y)n(on)j(b)n(y)i(swinging)e
(hand-o)n(v)n(er-hand)g(on)h(the)h(rop)r(e,)h(but)f(if)g(t)n(w)n(o)f
(bab)r(o)r(ons)g(going)g(in)739 3758 y(opp)r(osite)25
b(directions)f(meet)h(in)h(the)f(middle,)h(they)g(will)f(\014gh)n(t)g
(and)g(drop)f(to)h(their)g(deaths.)739 3857 y(F)-7 b(urthermore,)35
b(the)g(rop)r(e)e(is)h(only)g(strong)f(enough)h(to)g(hold)g(5)g(bab)r
(o)r(ons.)56 b(If)35 b(there)f(are)739 3957 y(more)27
b(bab)r(o)r(ons)g(on)g(the)h(rop)r(e)f(at)g(the)h(same)f(time,)i(it)f
(will)f(break.)863 4057 y(Assuming)i(that)g(w)n(e)f(can)g(teac)n(h)h
(the)g(bab)r(o)r(ons)f(to)g(use)h(semaphores,)e(w)n(e)h(w)n(ould)h(lik)
n(e)739 4156 y(to)e(design)h(a)f(sync)n(hronization)e(sc)n(heme)i(with)
i(the)f(follo)n(wing)e(prop)r(erties:)p Black 863 4320
a Fd(\017)p Black 41 w Fm(Once)34 b(a)f(bab)r(o)r(on)h(has)f(b)r(egun)h
(to)g(cross,)g(it)g(is)g(guaran)n(teed)e(to)i(get)g(to)g(the)g(other)
946 4419 y(side)28 b(without)g(running)f(in)n(to)h(a)f(bab)r(o)r(on)g
(going)f(the)i(other)f(w)n(a)n(y)-7 b(.)p Black 863 4577
a Fd(\017)p Black 41 w Fm(There)28 b(are)e(nev)n(er)h(more)g(than)g(5)g
(bab)r(o)r(ons)g(on)h(the)g(rop)r(e.)p Black 863 4736
a Fd(\017)p Black 41 w Fm(A)j(con)n(tin)n(uing)e(stream)g(of)h(bab)r(o)
r(ons)f(crossing)f(in)i(one)f(direction)h(should)f(not)h(bar)946
4835 y(bab)r(o)r(ons)d(going)g(the)h(other)f(w)n(a)n(y)f
(inde\014nitely)i(\(no)g(starv)-5 b(ation\).)863 4998
y(I)25 b(will)f(not)g(include)h(a)f(solution)g(to)g(this)g(problem)g
(for)g(reasons)e(that)j(should)f(b)r(e)g(clear.)p Black
Black eop
%%Page: 107 113
107 112 bop Black 291 252 a Fo(5.11)30 b(The)i(barb)s(ershop)g(problem)
1479 b(107)p 291 286 2865 4 v Black 291 515 a Fh(5.11)135
b(The)45 b(barb)t(ershop)f(problem)291 697 y Fm(The)32
b(original)g(barb)r(ershop)f(problem)h(w)n(as)g(prop)r(osed)g(b)n(y)g
(Dijkstra.)52 b(A)33 b(v)-5 b(ariation)32 b(of)g(it)291
797 y(app)r(ears)26 b(in)i(Silb)r(ersc)n(hatz)f(and)g(Galvin's)g
Fg(Op)l(er)l(ating)j(Systems)g(Conc)l(epts)p Fm(.)p Black
Black 623 979 a(A)f(barb)r(ershop)f(consists)h(of)h(a)f(w)n(aiting)f
(ro)r(om)h(with)h Ff(n)f Fm(c)n(hairs,)g(and)g(the)498
1079 y(barb)r(er)f(ro)r(om)f(con)n(taining)g(the)i(barb)r(er)e(c)n
(hair.)38 b(If)29 b(there)f(are)f(no)h(customers)498
1179 y(to)39 b(b)r(e)g(serv)n(ed,)i(the)f(barb)r(er)e(go)r(es)g(to)h
(sleep.)70 b(If)40 b(a)e(customer)h(en)n(ters)f(the)498
1278 y(barb)r(ershop)f(and)h(all)g(c)n(hairs)f(are)g(o)r(ccupied,)k
(then)e(the)f(customer)g(lea)n(v)n(es)498 1378 y(the)d(shop.)56
b(If)34 b(the)h(barb)r(er)e(is)h(busy)-7 b(,)35 b(but)g(c)n(hairs)e
(are)g(a)n(v)-5 b(ailable,)34 b(then)h(the)498 1478 y(customer)d(sits)g
(in)g(one)g(of)g(the)h(free)f(c)n(hairs.)49 b(If)32 b(the)h(barb)r(er)e
(is)h(asleep,)h(the)498 1577 y(customer)d(w)n(ak)n(es)f(up)i(the)g
(barb)r(er.)45 b(W)-7 b(rite)31 b(a)f(program)f(to)h(co)r(ordinate)g
(the)498 1677 y(barb)r(er)d(and)g(the)h(customers.)415
1859 y(T)-7 b(o)28 b(mak)n(e)f(the)i(problem)e(a)h(little)h(more)e
(concrete,)g(I)h(added)g(the)h(follo)n(wing)e(informa-)291
1959 y(tion:)p Black 415 2142 a Fd(\017)p Black 41 w
Fm(If)22 b(a)g(customer)f(thread)g(arriv)n(es)f(when)i(the)g(shop)f(is)
h(full,)i(it)e(can)f(in)n(v)n(ok)n(e)g Fl(exit)p Fm(.)33
b(This)498 2241 y(op)r(eration)27 b(terminates)g(the)h(thread.)p
Black 415 2407 a Fd(\017)p Black 41 w Fm(When)40 b(the)h(barb)r(er)e
(in)n(v)n(ok)n(es)e Fl(cutHair)g Fm(there)j(should)g(b)r(e)g(exactly)f
(one)g(thread)498 2507 y(in)n(v)n(oking)26 b Fl(getHairCut)e
Fm(concurren)n(tly)-7 b(.)p Black Black eop
%%Page: 108 114
108 113 bop Black Black Black Black eop
%%Page: 109 115
109 114 bop Black 291 252 a Fo(5.11)30 b(The)i(barb)s(ershop)g(problem)
1479 b(109)p 291 286 2865 4 v Black 291 515 a Fe(5.11.1)112
b(Barb)s(ershop)38 b(hin)m(t)p Black 1185 743 a Fm(Listing)27
b(5.12:)36 b(Barb)r(ershop)25 b(hin)n(t)p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 805 2921 29 v 0.9 TeXcolorgray Black
262 805 4 29 v 262 780 29 4 v 291 780 250 4 v 541 780
2616 4 v 3157 780 29 4 v 3183 805 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 904 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 904 29 100
v 0.9 TeXcolorgray Black 262 904 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 904 29 100 v 0.9 TeXcolorgray Black
3180 904 4 100 v 415 874 a(1)83 b Fl(int)42 b(customers)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1004 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1004 29 100 v 0.9 TeXcolorgray Black 262 1004 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1004 29 100
v 0.9 TeXcolorgray Black 3180 1004 4 100 v 415 974 a
Fm(2)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1104 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 29 100
v 0.9 TeXcolorgray Black 262 1104 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1104 29 100 v 0.9 TeXcolorgray
Black 3180 1104 4 100 v 415 1074 a Fm(3)83 b Fl(Semaphore)40
b(barber)h(=)i(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1203 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1203 29 100 v 0.9 TeXcolorgray Black
262 1203 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1203 29 100 v 0.9 TeXcolorgray Black 3180 1203 4 100
v 415 1173 a Fm(4)83 b Fl(Semaphore)40 b(customer)g(=)j(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1231 2921 29 v
0.9 TeXcolorgray Black 262 1231 4 29 v 263 1231 29 4
v 291 1231 250 4 v 541 1231 2616 4 v 3157 1231 29 4 v
3183 1231 4 29 v 415 1353 a(customers)28 b Fm(coun)n(ts)j(the)h(n)n(um)
n(b)r(er)f(of)h(customers)e(in)i(the)g(shop;)i(it)e(is)f(protected)g(b)
n(y)291 1452 y Fl(mutex)p Fm(.)415 1552 y(The)40 b(barb)r(er)g(w)n
(aits)f(on)h Fl(barber)e Fm(un)n(til)j(a)f(customer)f(en)n(ters)h(the)h
(shop,)i(then)e(the)291 1652 y(customer)c(w)n(aits)g(on)g
Fl(customer)d Fm(un)n(til)k(the)h(barb)r(er)d(signals)h(him)h(to)g(en)n
(ter)f(the)h(ro)r(om)291 1751 y(with)28 b(the)g(barb)r(er)e(c)n(hair.)p
Black Black eop
%%Page: 110 116
110 115 bop Black Black Black Black eop
%%Page: 111 117
111 116 bop Black 291 252 a Fo(5.11)30 b(The)i(barb)s(ershop)g(problem)
1479 b(111)p 291 286 2865 4 v Black 291 515 a Fe(5.11.2)112
b(Barb)s(ershop)38 b(solution)291 669 y Fm(If)28 b(there)g(are)f
Ff(n)h Fm(customers)f(in)i(the)f(w)n(aiting)f(ro)r(om)h(and)g(one)f(in)
i(the)f(barb)r(er)f(c)n(hair,)g(then)291 768 y(the)h(shop)f(is)g(full)i
(and)e(an)n(y)g(customers)f(that)i(arriv)n(e)e(immediately)i(in)n(v)n
(ok)n(e)e Fl(exit)p Fm(.)415 868 y(Otherwise)h(eac)n(h)h(customer)f
(signals)g(the)i(barb)r(er)e(and)h(w)n(aits)g(for)g(a)f(signal)h(from)g
(the)291 968 y(barb)r(er.)36 b(This)27 b(is)h(exactly)f(the)h(rendezv)n
(ous)e(pattern)h(from)g(Section)h(3.2.)p Black 904 1142
a(Listing)f(5.13:)36 b(Barb)r(ershop)26 b(solution)h(\(customer\))p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1204 2921
29 v 0.9 TeXcolorgray Black 262 1204 4 29 v 262 1179
29 4 v 291 1179 250 4 v 541 1179 2616 4 v 3157 1179 29
4 v 3183 1204 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1274 a(1)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1403 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1403 29 100 v 0.9 TeXcolorgray Black 262 1403 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1403 29 100
v 0.9 TeXcolorgray Black 3180 1403 4 100 v 415 1373 a
Fm(2)240 b Fl(if)42 b(\(customers)e(==)j(n)o(+1\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1503 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1503 29 100 v 0.9 TeXcolorgray Black 262 1503 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1503 29 100
v 0.9 TeXcolorgray Black 3180 1503 4 100 v 415 1473 a
Fm(3)396 b Fl(exit)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1602 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1602 29 100 v 0.9 TeXcolorgray Black
262 1602 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1602 29 100 v 0.9 TeXcolorgray Black 3180 1602 4 100
v 415 1572 a Fm(4)240 b Fl(customers)l(++)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1702 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1702 29 100
v 0.9 TeXcolorgray Black 262 1702 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1702 29 100 v 0.9 TeXcolorgray
Black 3180 1702 4 100 v 415 1672 a Fm(5)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1802 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1802 29 100 v 0.9 TeXcolorgray Black 262 1802 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1802 29 100
v 0.9 TeXcolorgray Black 3180 1802 4 100 v 415 1772 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1901 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1901 29 100 v 0.9 TeXcolorgray Black 262 1901 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1901 29 100
v 0.9 TeXcolorgray Black 3180 1901 4 100 v 415 1871 a(7)83
b Fl(barber)m(.signal)41 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 2001 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 2001 29 100 v 0.9
TeXcolorgray Black 262 2001 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2001 29 100 v 0.9 TeXcolorgray
Black 3180 2001 4 100 v 415 1971 a Fm(8)83 b Fl(customer)l(.wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2100 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2100 29 100 v 0.9 TeXcolorgray Black 262 2100 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2100 29 100
v 0.9 TeXcolorgray Black 3180 2100 4 100 v 415 2071 a
Fm(9)83 b Fl(getHairCut)39 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2200 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2200 29 100
v 0.9 TeXcolorgray Black 262 2200 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2200 29 100 v 0.9 TeXcolorgray
Black 3180 2200 4 100 v 374 2170 a Fm(10)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2300 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2300 29 100
v 0.9 TeXcolorgray Black 262 2300 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2300 29 100 v 0.9 TeXcolorgray
Black 3180 2300 4 100 v 374 2270 a(11)82 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 2399 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2399 29 100 v 0.9 TeXcolorgray Black 262 2399 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2399 29 100
v 0.9 TeXcolorgray Black 3180 2399 4 100 v 374 2369 a
Fm(12)239 b Fl(customers)l(--)p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 2499 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 2499 29 100 v 0.9
TeXcolorgray Black 262 2499 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2499 29 100 v 0.9 TeXcolorgray
Black 3180 2499 4 100 v 374 2469 a Fm(13)82 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2527 2921
29 v 0.9 TeXcolorgray Black 262 2527 4 29 v 263 2527
29 4 v 291 2527 250 4 v 541 2527 2616 4 v 3157 2527 29
4 v 3183 2527 4 29 v 415 2649 a Fm(The)26 b(barb)r(er)g(runs)g(in)g(a)g
(lo)r(op.)36 b(Eac)n(h)25 b(time)i(a)f(customer)f(signals,)g(the)i
(barb)r(er)e(w)n(ak)n(es,)291 2748 y(signals)h(one)h(customer,)g(and)h
(giv)n(es)e(one)h(hair)g(cut.)38 b(If)28 b(another)e(customer)h(arriv)n
(es)f(while)291 2848 y(the)k(barb)r(er)g(is)g(busy)-7
b(,)31 b(then)f(on)g(the)h(next)f(iteration)g(the)g(barb)r(er)g(will)g
(pass)g(the)g Fl(barber)291 2947 y Fm(semaphore)c(without)i(sleeping.)p
Black 949 3122 a(Listing)f(5.14:)36 b(Barb)r(ershop)26
b(solution)h(\(barb)r(er\))p Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 3184 2921 29 v 0.9 TeXcolorgray Black
262 3184 4 29 v 262 3159 29 4 v 291 3159 250 4 v 541
3159 2616 4 v 3157 3159 29 4 v 3183 3184 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3283 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3283 29 100
v 0.9 TeXcolorgray Black 262 3283 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3283 29 100 v 0.9 TeXcolorgray
Black 3180 3283 4 100 v 415 3253 a(1)83 b Fl(barber)m(.wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3383 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3383 29 100 v 0.9 TeXcolorgray Black 262 3383 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3383 29 100
v 0.9 TeXcolorgray Black 3180 3383 4 100 v 415 3353 a
Fm(2)83 b Fl(customer)l(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3482 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3482 29 100
v 0.9 TeXcolorgray Black 262 3482 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3482 29 100 v 0.9 TeXcolorgray
Black 3180 3482 4 100 v 415 3453 a Fm(3)83 b Fl(cutHair)40
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3511 2921
29 v 0.9 TeXcolorgray Black 262 3511 4 29 v 263 3511
29 4 v 291 3511 250 4 v 541 3511 2616 4 v 3157 3511 29
4 v 3183 3511 4 29 v 291 3765 a Fe(5.11.3)112 b(Hilzer's)35
b(Barb)s(ershop)291 3919 y Fm(William)28 b(Stallings)g(presen)n(ts)f(a)
h(more)f(complicated)h(v)n(ersion)f(of)h(the)g(barb)r(ershop)f(prob-)
291 4018 y(lem,)32 b(whic)n(h)f(he)g(attributes)g(to)g(Ralph)g(Hilzer)g
(at)g(the)h(California)e(State)h(Univ)n(ersit)n(y)f(at)291
4118 y(Chico.)p Black Black 623 4301 a(Our)k(barb)r(ershop)f(has)i
(three)g(c)n(hairs,)g(three)g(barb)r(ers,)h(and)f(a)f(w)n(aiting)498
4401 y(area)i(that)h(can)g(accomo)r(date)f(four)h(customers)f(on)h(a)g
(sofa)f(and)h(that)h(has)498 4500 y(standing)c(ro)r(om)f(for)h
(assitional)f(customers.)56 b(Fire)34 b(co)r(des)g(limit)h(the)g(total)
498 4600 y(n)n(um)n(b)r(er)27 b(of)h(customers)f(in)g(the)h(shop)g(to)f
(20.)623 4700 y(A)g(customer)f(will)h(not)g(en)n(ter)g(the)g(shop)f(if)
i(it)f(is)g(\014lled)g(to)g(capacit)n(y)f(with)498 4799
y(other)g(customers.)36 b(Once)26 b(inside,)h(the)f(customer)g(tak)n
(es)g(a)g(sear)f(on)h(the)h(sofa)498 4899 y(or)k(stands)h(if)g(the)h
(sofa)e(is)h(\014lled.)51 b(When)32 b(a)g(barb)r(er)f(is)h(free,)h(the)
f(customer)498 4998 y(that)c(has)e(b)r(een)i(on)f(the)g(sofa)g(the)g
(longest)g(is)g(serv)n(ed)f(and,)h(if)h(there)f(are)f(an)n(y)p
Black Black eop
%%Page: 112 118
112 117 bop Black 739 252 a Fo(112)981 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
946 515 a Fm(standing)f(customers,)g(the)h(one)e(that)i(has)e(b)r(een)i
(in)f(the)g(shop)g(the)g(longest)946 615 y(tak)n(es)38
b(a)g(seat)h(on)f(the)h(sofa.)69 b(When)40 b(a)e(customer's)g(haircut)g
(is)g(\014nished,)946 715 y(an)n(y)28 b(barb)r(er)f(can)h(accept)g(pa)n
(ymen)n(t,)g(but)h(b)r(ecause)f(there)g(is)g(only)f(one)h(cash)946
814 y(register,)h(pa)n(ymen)n(t)f(is)h(accepted)g(for)g(one)f(customer)
h(at)g(a)g(time.)42 b(The)29 b(bar-)946 914 y(b)r(ers)h(divide)h(their)
f(time)g(among)f(cutting)i(hair,)f(accepting)g(pa)n(ymen)n(t,)g(and)946
1013 y(sleeping)e(in)f(their)h(c)n(hair)e(w)n(aiting)h(for)g(a)h
(customer.)863 1196 y(Customers)46 b(should)g(in)n(v)n(ok)n(e)e(the)j
(follo)n(wing)e(functions,)51 b(in)c(order:)73 b Fl(enterShop)p
Fm(,)739 1296 y Fl(sitOnSofa)p Fm(,)62 b Fl(getUpFromSofa)p
Fm(,)f Fl(sitInBarberChair)p Fm(,)f Fl(leaveBarberChair)o
Fm(,)g Fl(pay)p Fm(,)739 1395 y Fl(exitShop)p Fm(.)863
1495 y(Barb)r(ers)21 b(in)n(v)n(ok)n(e)f Fl(cutHair)f
Fm(and)i Fl(acceptPayment)p Fm(.)30 b(The)22 b(follo)n(wing)e(sync)n
(hronization)739 1595 y(constrain)n(ts)26 b(apply:)p
Black 863 1777 a Fd(\017)p Black 41 w Fm(Customers)h(cannot)g(in)n(v)n
(ok)n(e)f Fl(enterShop)e Fm(if)k(the)g(shop)f(is)h(at)f(capacit)n(y)-7
b(.)p Black 863 1943 a Fd(\017)p Black 41 w Fm(If)35
b(the)g(sofa)f(is)g(full,)j(an)e(arriving)d(customers)i(cannot)g(in)n
(v)n(ok)n(e)f Fl(sitOnSofa)e Fm(un)n(til)946 2043 y(one)d(of)f(the)h
(customers)f(on)g(the)h(sofa)f(in)n(v)n(ok)n(es)f Fl(getUpFromSofa)p
Fm(.)p Black 863 2209 a Fd(\017)p Black 41 w Fm(If)50
b(all)e(three)h(barb)r(er)f(c)n(hairs)f(are)h(busy)-7
b(,)54 b(an)49 b(arriving)e(customer)h(cannot)g(in-)946
2309 y(v)n(ok)n(e)40 b Fl(sitInBarberChair)35 b Fm(un)n(til)41
b(one)g(of)g(the)h(customers)e(in)h(a)g(c)n(hair)f(in)n(v)n(ok)n(es)946
2408 y Fl(leaveBarberChair)p Fm(.)p Black 863 2574 a
Fd(\017)p Black 41 w Fm(The)28 b(customer)f(has)g(to)g
Fl(pay)g Fm(b)r(efore)g(the)h(barb)r(er)f(can)g Fl(acceptPayment)p
Fm(.)p Black 863 2740 a Fd(\017)p Black 41 w Fm(The)h(barb)r(er)f(m)n
(ust)g Fl(acceptPayment)c Fm(b)r(efore)k(the)h(customer)f(can)g
Fl(exitShop)p Fm(.)739 2973 y Fe(5.11.4)112 b(Hilzer's)36
b(barb)s(ershop)j(hin)m(t)739 3143 y(5.11.5)112 b(Hilzer's)36
b(barb)s(ershop)j(solution)739 3312 y(5.11.6)112 b(Hilzer's)36
b(barb)s(ershop)j(b)s(etter)e(hin)m(t)739 3482 y(5.11.7)112
b(Hilzer's)36 b(barb)s(ershop)j(b)s(etter)e(solution)p
Black Black eop
%%Page: 113 119
113 118 bop Black 291 252 a Fo(5.12)30 b(The)i(ro)s(om)e(part)m(y)j
(problem)1476 b(113)p 291 286 2865 4 v Black 291 515
a Fh(5.12)135 b(The)45 b(ro)t(om)g(part)l(y)g(problem)291
697 y Fm(I)36 b(wrote)g(this)h(problem)f(while)h(I)g(w)n(as)e(at)i
(Colb)n(y)e(College.)63 b(One)37 b(semester)f(there)g(w)n(as)291
797 y(a)c(con)n(tro)n(v)n(ersy)d(o)n(v)n(er)i(an)h(allegation)g(b)n(y)g
(a)g(studen)n(t)h(that)g(someone)f(from)g(the)h(Dean)g(of)291
896 y(Studen)n(ts)c(O\016ce)g(had)g(searc)n(hed)f(his)h(ro)r(om)f(in)i
(his)f(absence.)41 b(Although)29 b(the)g(allegation)291
996 y(w)n(as)j(public,)k(the)e(Dean)f(of)h(Studen)n(ts)g(w)n(asn't)f
(able)g(to)h(commen)n(t)f(on)g(the)h(case,)g(so)f(w)n(e)291
1096 y(nev)n(er)d(found)i(our)e(what)h(really)f(happ)r(ened.)49
b(I)31 b(wrote)g(this)g(problem)g(to)g(tease)g(a)g(friend)291
1195 y(of)c(mine,)h(who)f(w)n(as)g(the)h(Dean)g(of)f(Studen)n(t)h
(Housing.)415 1295 y(The)33 b(follo)n(wing)f(sync)n(hronization)f
(constrain)n(ts)g(apply)h(to)h(studen)n(ts)g(and)g(the)g(Dean)291
1395 y(of)27 b(Studen)n(ts:)p Black 392 1577 a(1.)p Black
41 w(An)n(y)h(n)n(um)n(b)r(er)f(of)h(studen)n(ts)f(can)h(b)r(e)g(in)f
(a)h(ro)r(om)e(at)i(the)g(same)f(time.)p Black 392 1743
a(2.)p Black 41 w(The)32 b(Dean)g(of)g(Studen)n(ts)h(can)e(only)h(en)n
(ter)f(a)h(ro)r(om)f(if)h(there)g(are)f(no)h(studen)n(ts)g(in)498
1843 y(the)g(ro)r(om)f(\(to)h(conduct)g(a)f(searc)n(h\))f(or)h(if)h
(there)g(are)e(more)h(than)h(50)f(studen)n(ts)h(in)498
1942 y(the)c(ro)r(om)f(\(to)h(break)e(up)i(the)g(part)n(y\).)p
Black 392 2109 a(3.)p Black 41 w(While)34 b(the)f(Dean)g(of)g(Studen)n
(ts)g(is)g(in)h(the)f(ro)r(om,)g(no)g(additional)g(studen)n(ts)g(ma)n
(y)498 2208 y(en)n(ter,)27 b(but)h(studen)n(ts)g(ma)n(y)f(lea)n(v)n(e.)
p Black 392 2374 a(4.)p Black 41 w(The)e(Dean)g(of)g(Studen)n(ts)h(ma)n
(y)e(not)h(lea)n(v)n(e)f(the)i(ro)r(om)e(un)n(til)h(all)g(studen)n(ts)g
(ha)n(v)n(e)f(left.)p Black 392 2540 a(5.)p Black 41
w(There)19 b(is)h(only)g(one)f(Dean)h(of)g(Studen)n(ts,)i(so)d(y)n(ou)g
(do)g(not)h(ha)n(v)n(e)f(to)g(enforce)h(exclusion)498
2640 y(among)27 b(m)n(ultiple)h(deans.)415 2823 y(Puzzle:)52
b(write)35 b(sync)n(hronization)e(co)r(de)i(for)g(studen)n(ts)h(and)f
(for)f(the)i(Dean)f(of)h(Stu-)291 2922 y(den)n(ts)24
b(that)i(enforces)e(all)g(of)h(these)g(constrain)n(ts.)34
b(Y)-7 b(ou)25 b(ma)n(y)g(use)f(semaphores,)g(lo)r(c)n(ks)g(and)291
3022 y(condition)j(v)-5 b(ariables.)p Black Black eop
%%Page: 114 120
114 119 bop Black Black Black Black eop
%%Page: 115 121
115 120 bop Black 291 252 a Fo(5.12)30 b(The)i(ro)s(om)e(part)m(y)j
(problem)1476 b(115)p 291 286 2865 4 v Black 291 515
a Fe(5.12.1)112 b(Ro)s(om)37 b(part)m(y)g(hin)m(t)p Black
1175 743 a Fm(Listing)27 b(5.15:)36 b(Ro)r(om)27 b(part)n(y)f(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 805 2921
29 v 0.9 TeXcolorgray Black 262 805 4 29 v 262 780 29
4 v 291 780 250 4 v 541 780 2616 4 v 3157 780 29 4 v
3183 805 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
904 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 29 100 v 0.9 TeXcolorgray Black
262 904 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
904 29 100 v 0.9 TeXcolorgray Black 3180 904 4 100 v
415 874 a(1)83 b Fl(int)42 b(students)690 b(//)42 b(number)g(of)g
(students)f(in)h(room)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a Fm(2)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)388
b(//)42 b(protect)f(the)h(student)f(count)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1104 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1104 29 100
v 0.9 TeXcolorgray Black 262 1104 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1104 29 100 v 0.9 TeXcolorgray
Black 3180 1104 4 100 v 415 1074 a Fm(3)83 b Fl(Semaphore)40
b(noDean)h(=)i(1)344 b(//)42 b(the)h(dean)f(is)g(not)h(in)g(the)f(room)
p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100
v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(4)83 b Fl(Semaphore)40 b(deanCanEnter)e(=)43 b(1)83
b(//)42 b(the)h(dean)f(may)g(enter)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(5)83 b Fl(Semaphore)40
b(noStudents)f(=)k(1)170 b(//)42 b(there)g(are)g(no)h(students)d(in)j
(the)f(room)p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1331
2921 29 v 0.9 TeXcolorgray Black 262 1331 4 29 v 263
1331 29 4 v 291 1331 250 4 v 541 1331 2616 4 v 3157 1331
29 4 v 3183 1331 4 29 v 415 1452 a(students)29 b Fm(coun)n(ts)k(the)g
(n)n(um)n(b)r(er)f(of)g(studen)n(ts)h(in)g(the)g(ro)r(om.)51
b Fl(mutex)31 b Fm(protects)h(the)291 1552 y(coun)n(ter)26
b(\(and)i(also)f(allo)n(ws)f(the)i(dean)f(to)h(bar)e(studen)n(ts)i
(from)f(en)n(tering\).)415 1652 y Fl(noDean)f Fm(is)h(1)h(when)g(the)g
(dean)g(is)f(not)h(in)g(the)g(ro)r(om.)37 b Fl(noStudents)24
b Fm(is)k(1)f(when)h(there)291 1751 y(are)e(no)i(studen)n(ts)f(in)h
(the)h(ro)r(om.)36 b Fl(deadCanEnter)23 b Fm(is)k(1)h(when)f(there)h
(are)f(no)g(studen)n(ts)h(or)291 1851 y(more)e(than)i(50.)p
Black Black eop
%%Page: 116 122
116 121 bop Black Black Black Black eop
%%Page: 117 123
117 122 bop Black 291 252 a Fo(5.12)30 b(The)i(ro)s(om)e(part)m(y)j
(problem)1476 b(117)p 291 286 2865 4 v Black 291 515
a Fe(5.12.2)112 b(Ro)s(om)37 b(part)m(y)g(solution)291
669 y Fm(This)30 b(problem)h(is)f(hard.)46 b(I)31 b(w)n(en)n(t)f
(through)g(a)h(lot)f(of)h(trial)f(and)h(error)e(b)r(efore)h(I)h(found)g
(a)291 768 y(solution)f(that)h(\(I)h(am)f(prett)n(y)f(sure\))h(w)n
(orks.)45 b(One)31 b(of)g(the)g(di\016culties)h(is)f(that)g(w)n(e)g
(need)291 868 y(to)d(allo)n(w)f(studen)n(ts)i(to)f(lea)n(v)n(e)f
(without)i(allo)n(wing)e(new)i(studen)n(ts)g(to)f(en)n(ter;)h(the)f
(solution)291 967 y(I)d(c)n(hose)f(requires)h(studen)n(ts)g(to)g(hold)h
(t)n(w)n(o)e(m)n(utexes)i(\()p Fl(mutex)d Fm(and)j Fl(noDean)p
Fm(\))d(to)i(en)n(ter)g(and)291 1067 y(only)i(one)g(to)g(lea)n(v)n(e.)
415 1167 y Fl(noDean)i Fm(is)h(a)h(m)n(utex)g(for)f(b)r(oth)h(studen)n
(ts)g(and)g(deans.)46 b(It)32 b(prev)n(en)n(ts)d(studen)n(ts)i(from)291
1266 y(en)n(tering)26 b(when)i(the)g(dean)f(is)g(in)h(the)f(ro)r(om.)36
b(It)28 b(also)e(prev)n(en)n(ts)h(the)h(dean)f(from)g(en)n(tering)291
1366 y(while)g(a)h(studen)n(t)g(is)f(in)h(the)g(middle)g(of)g(c)n(hec)n
(king)e(in.)38 b(Inciden)n(tally)-7 b(,)27 b(it)h(enforces)f(m)n(utual)
291 1466 y(exclusion)i(among)f(m)n(ultiple)i(deans,)g(whic)n(h)g(is)f
(not)h(required,)f(but)h(it)h(is)e(acceptable.)42 b(If)291
1565 y(it)28 b(w)n(ere)e(not)i(acceptable,)f(ho)n(w)g(w)n(ould)g(y)n
(ou)g(\014x)g(it?)415 1665 y Fl(noStudents)e Fm(is)k(1)f(if)h(there)g
(are)f(no)h(studen)n(ts)g(in)g(the)g(ro)r(om)f(and)h(0)f(otherwise.)40
b(The)291 1764 y(studen)n(t)30 b(threads)g(main)n(tain)g(it)h(using)e
(a)h(pattern)h(similar)e(to)h(a)g(Filo;)i(the)e(\014rst)h(studen)n(t)
291 1864 y(in)25 b(lo)r(c)n(ks)f(it)h(and)g(the)g(last)g(one)g(out)g
(unlo)r(c)n(ks)f(it.)36 b(The)25 b(deans)g(use)g Fl(noStudents)c
Fm(to)k(ensure)291 1964 y(that)i(all)h(the)g(studen)n(ts)f(ha)n(v)n(e)g
(left)h(the)g(ro)r(om)f(b)r(efore)g(they)h(exit.)415
2063 y Fl(deanCanEnter)f Fm(is)32 b(a)g(turnstile)g(for)f(deans.)50
b(When)33 b(there)e(are)g(no)h(studen)n(ts)g(in)h(the)291
2163 y(ro)r(om,)39 b(the)f(turnstile)g(is)g(unlo)r(c)n(k)n(ed.)67
b(The)38 b(\014rst)f(studen)n(t)h(to)g(en)n(ter)f(lo)r(c)n(ks)g(it,)k
(but)e(the)291 2263 y(50th)28 b(unlo)r(c)n(ks)g(it)h(again.)39
b(Similarly)-7 b(,)29 b(when)g(the)g(n)n(um)n(b)r(er)f(of)h(studen)n
(ts)g(drops)e(b)r(elo)n(w)i(50,)291 2362 y Fl(deanCanEnter)g
Fm(gets)34 b(lo)r(c)n(k)n(ed)g(again.)56 b(When)35 b(the)f(last)h
(studen)n(t)f(exits,)i(it)f(is)g(unlo)r(c)n(k)n(ed)291
2462 y(one)27 b(more)g(time.)p Black 923 2616 a(Listing)g(5.16:)36
b(Ro)r(om)27 b(part)n(y)g(solution)g(\(studen)n(t\))p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2671 2921
29 v 0.9 TeXcolorgray Black 262 2671 4 29 v 262 2646
29 4 v 291 2646 250 4 v 541 2646 2616 4 v 3157 2646 29
4 v 3183 2671 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2770 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2770 29 100 v 0.9 TeXcolorgray Black
262 2770 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2770 29 100 v 0.9 TeXcolorgray Black 3180 2770 4 100
v 415 2740 a(1)83 b Fl(noDean)m(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2870 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2870 29 100 v 0.9 TeXcolorgray Black 262 2870 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2870 29 100
v 0.9 TeXcolorgray Black 3180 2870 4 100 v 415 2840 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2970 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2970 29 100
v 0.9 TeXcolorgray Black 262 2970 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2970 29 100 v 0.9 TeXcolorgray
Black 3180 2970 4 100 v 415 2940 a Fm(3)240 b Fl(count)m(++)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3069 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3069 29 100 v 0.9 TeXcolorgray Black 262 3069 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3069 29 100
v 0.9 TeXcolorgray Black 3180 3069 4 100 v 415 3039 a
Fm(4)g Fl(if)42 b(\(count)f(==)i(1\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3169 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3169 29 100
v 0.9 TeXcolorgray Black 262 3169 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3169 29 100 v 0.9 TeXcolorgray
Black 3180 3169 4 100 v 415 3139 a Fm(5)396 b Fl(deanCanEnter)-5
b(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3268 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3268 29 100 v 0.9 TeXcolorgray Black
262 3268 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3268 29 100 v 0.9 TeXcolorgray Black 3180 3268 4 100
v 415 3239 a Fm(6)396 b Fl(noStudents)l(.wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3368 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3368 29 100 v 0.9 TeXcolorgray Black 262 3368 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3368 29 100
v 0.9 TeXcolorgray Black 3180 3368 4 100 v 415 3338 a
Fm(7)240 b Fl(if)42 b(\(count)f(==)i(51\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3468 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3468 29 100
v 0.9 TeXcolorgray Black 262 3468 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3468 29 100 v 0.9 TeXcolorgray
Black 3180 3468 4 100 v 415 3438 a Fm(8)396 b Fl(deanCanEnter)-5
b(.signal)41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3567 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3567 29 100 v 0.9 TeXcolorgray Black
262 3567 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3567 29 100 v 0.9 TeXcolorgray Black 3180 3567 4 100
v 415 3537 a Fm(9)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3667 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3667 29 100 v 0.9 TeXcolorgray Black 262 3667 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3667 29 100
v 0.9 TeXcolorgray Black 3180 3667 4 100 v 374 3637 a
Fm(10)82 b Fl(noDean)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3767 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3767 29 100
v 0.9 TeXcolorgray Black 262 3767 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3767 29 100 v 0.9 TeXcolorgray
Black 3180 3767 4 100 v 374 3737 a Fm(11)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3866 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3866 29 100
v 0.9 TeXcolorgray Black 262 3866 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3866 29 100 v 0.9 TeXcolorgray
Black 3180 3866 4 100 v 374 3836 a(12)82 b Fl(party)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3966 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3966 29 100 v 0.9 TeXcolorgray Black 262 3966 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3966 29 100
v 0.9 TeXcolorgray Black 3180 3966 4 100 v 374 3936 a
Fm(13)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4065 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4065 29 100 v 0.9 TeXcolorgray Black 262 4065 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4065 29 100
v 0.9 TeXcolorgray Black 3180 4065 4 100 v 374 4036 a(14)82
b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 291 4165 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 262 4165 29 100 v 0.9
TeXcolorgray Black 262 4165 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4165 29 100 v 0.9 TeXcolorgray
Black 3180 4165 4 100 v 374 4135 a Fm(15)239 b Fl(count)m(--)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 4265 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4265 29 100 v 0.9 TeXcolorgray Black 262 4265 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4265 29 100
v 0.9 TeXcolorgray Black 3180 4265 4 100 v 374 4235 a
Fm(16)g Fl(if)42 b(\(count)f(==)i(0\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4364 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4364 29 100
v 0.9 TeXcolorgray Black 262 4364 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4364 29 100 v 0.9 TeXcolorgray
Black 3180 4364 4 100 v 374 4334 a Fm(17)395 b Fl(noStudents)l(.signal)
41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4464
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 262 4464 29 100 v 0.9 TeXcolorgray Black
262 4464 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
4464 29 100 v 0.9 TeXcolorgray Black 3180 4464 4 100
v 374 4434 a Fm(18)395 b Fl(deanCanEnter)-5 b(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 4564 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 4564 29 100 v 0.9 TeXcolorgray Black 262 4564 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 4564 29 100
v 0.9 TeXcolorgray Black 3180 4564 4 100 v 374 4534 a
Fm(19)239 b Fl(if)42 b(\(count)f(==)i(50\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 4663 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 4663 29 100
v 0.9 TeXcolorgray Black 262 4663 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 4663 29 100 v 0.9 TeXcolorgray
Black 3180 4663 4 100 v 374 4633 a Fm(20)395 b Fl(deanCanEnter)-5
b(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 4763 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 4763 29 100 v 0.9 TeXcolorgray Black
262 4763 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
4763 29 100 v 0.9 TeXcolorgray Black 3180 4763 4 100
v 374 4733 a Fm(21)82 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 4791 2921 29 v
0.9 TeXcolorgray Black 262 4791 4 29 v 263 4791 29 4
v 291 4791 250 4 v 541 4791 2616 4 v 3157 4791 29 4 v
3183 4791 4 29 v 415 4899 a Fm(The)g(dean's)e(co)r(de)i(uses)f
Fl(mutex)e Fm(in)i(a)g(non-standard)f(w)n(a)n(y)-7 b(.)74
b(The)41 b(dean)f(gets)g(the)291 4998 y(m)n(utex)23 b(to)g(prev)n(en)n
(t)f(studen)n(ts)i(from)e(c)n(hanging)g(the)i(coun)n(ter)e(while)i(the)
f(dean)g(is)g(c)n(hec)n(king)p Black Black eop
%%Page: 118 124
118 123 bop Black 739 252 a Fo(118)981 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
739 515 a Fm(it.)39 b(If)28 b(there)g(are)f(more)h(than)g(50)f(studen)n
(ts,)h(then)h(the)g(dean)e(has)h(to)g(release)f(the)h(m)n(utex,)739
615 y(allo)n(wing)18 b(studen)n(ts)i(to)f(exit,)i(b)r(efore)f(w)n
(aiting)e(on)i Fl(noStudents)p Fm(.)30 b(Otherwise)18
b(the)i(program)739 715 y(deadlo)r(c)n(ks.)p Black 1421
900 a(Listing)27 b(5.17:)36 b(Ro)r(om)27 b(part)n(y)g(solution)g
(\(dean\))p Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711
965 2921 29 v 0.9 TeXcolorgray Black 711 965 4 29 v 711
940 29 4 v 739 940 250 4 v 989 940 2616 4 v 3605 940
29 4 v 3631 965 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1065 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1065 29 100 v 0.9 TeXcolorgray Black
711 1065 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1065 29 100 v 0.9 TeXcolorgray Black 3628 1065 4 100
v 863 1035 a(1)83 b Fl(deanCanEnter)-5 b(.wait)42 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 1165 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1165 29 100 v 0.9 TeXcolorgray Black 711 1165 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1165 29 100
v 0.9 TeXcolorgray Black 3628 1165 4 100 v 863 1135 a
Fm(2)83 b Fl(deanCanEnter)-5 b(.signal)41 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 739 1264 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1264 29 100 v 0.9 TeXcolorgray Black 711 1264 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1264 29 100
v 0.9 TeXcolorgray Black 3628 1264 4 100 v 863 1234 a
Fm(3)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1364 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1364 29 100 v 0.9 TeXcolorgray Black 711 1364 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1364 29 100
v 0.9 TeXcolorgray Black 3628 1364 4 100 v 863 1334 a(4)83
b Fl(noDean)m(.wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 1463 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 1463 29 100 v 0.9
TeXcolorgray Black 711 1463 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1463 29 100 v 0.9 TeXcolorgray
Black 3628 1463 4 100 v 863 1434 a Fm(5)240 b Fl(mutex)n(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1563 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1563 29 100 v 0.9 TeXcolorgray Black 711 1563 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1563 29 100
v 0.9 TeXcolorgray Black 3628 1563 4 100 v 863 1533 a
Fm(6)240 b Fl(if)43 b(\()o(count)f(==)g(0\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1663 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1663 29 100
v 0.9 TeXcolorgray Black 711 1663 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1663 29 100 v 0.9 TeXcolorgray
Black 3628 1663 4 100 v 863 1633 a Fm(7)397 b Fl(search)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1762 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1762 29 100 v 0.9 TeXcolorgray Black 711 1762 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1762 29 100
v 0.9 TeXcolorgray Black 3628 1762 4 100 v 863 1732 a
Fm(8)397 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1862 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1862 29 100
v 0.9 TeXcolorgray Black 711 1862 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1862 29 100 v 0.9 TeXcolorgray
Black 3628 1862 4 100 v 863 1832 a Fm(9)240 b Fl(if)43
b(\()o(count)f(>)h(50\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1962 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1962 29 100 v 0.9 TeXcolorgray Black
711 1962 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1962 29 100 v 0.9 TeXcolorgray Black 3628 1962 4 100
v 822 1932 a Fm(10)396 b Fl(breakUpParty)38 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 2061 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2061 29 100 v 0.9 TeXcolorgray Black 711 2061 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2061 29 100
v 0.9 TeXcolorgray Black 3628 2061 4 100 v 822 2031 a
Fm(11)396 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2161 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2161 29 100
v 0.9 TeXcolorgray Black 711 2161 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2161 29 100 v 0.9 TeXcolorgray
Black 3628 2161 4 100 v 822 2131 a Fm(12)396 b Fl(noStudents)l(.)o
(wait)42 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739
2260 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2260 29 100 v 0.9 TeXcolorgray Black
711 2260 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2260 29 100 v 0.9 TeXcolorgray Black 3628 2260 4 100
v 822 2231 a Fm(13)396 b Fl(noStudents)l(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2360 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2360 29 100 v 0.9 TeXcolorgray Black 711 2360 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2360 29 100
v 0.9 TeXcolorgray Black 3628 2360 4 100 v 822 2330 a
Fm(14)239 b Fl(else)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 2460 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2460 29 100 v 0.9 TeXcolorgray Black
711 2460 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
2460 29 100 v 0.9 TeXcolorgray Black 3628 2460 4 100
v 822 2430 a Fm(15)396 b Fl(mutex)n(.)o(signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 2559 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2559 29 100 v 0.9 TeXcolorgray Black 711 2559 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2559 29 100
v 0.9 TeXcolorgray Black 3628 2559 4 100 v 822 2529 a
Fm(16)82 b Fl(noDean)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 711 2588 2921 29 v 0.9 TeXcolorgray
Black 711 2588 4 29 v 712 2588 29 4 v 739 2588 250 4
v 989 2588 2616 4 v 3605 2588 29 4 v 3631 2588 4 29 v
863 2720 a Fm(In)29 b(this)g(solution,)f(it)h(is)f(p)r(ossible)g(for)g
(studen)n(ts)h(to)f(en)n(ter)g(and)g(lea)n(v)n(e)g(after)g(the)g(dean)
739 2820 y(passes)d(the)i(turnstile,)g(whic)n(h)f(means)g(that)h(b)n(y)
f(the)h(time)g(the)g(dean)f(c)n(hec)n(ks)f(the)i(coun)n(ter)739
2919 y(there)33 b(migh)n(t)g(b)r(e)g(more)f(than)h(0)g(and)g(few)n(er)f
(than)i(50)e(studen)n(ts)h(in)g(the)g(ro)r(om.)53 b(In)33
b(this)739 3019 y(case,)26 b(the)h(dean)f(should)h(exit)f(without)h(in)
n(v)n(oking)e Fl(search)f Fm(or)i Fl(breakUpParty)p Fm(.)32
b(It)27 b(is)f(not)739 3118 y(e\016cien)n(t)37 b(to)g(allo)n(w)f(deans)
h(to)g(en)n(ter)g(and)g(exit)h(without)f(doing)g(useful)g(w)n(ork,)i
(but)f(w)n(e)739 3218 y(exp)r(ect)28 b(this)g(to)f(happ)r(en)h(only)f
(o)r(ccasionally)-7 b(,)26 b(since)h(it)i(dep)r(ends)f(on)f(a)g(\015uk)
n(e)g(of)h(timing.)739 3512 y Fh(5.13)135 b(The)45 b(San)l(ta)h(Claus)f
(problem)739 3701 y Fm(This)30 b(problem)f(is)h(from)g(William)g
(Stallings's)f Fg(Op)l(er)l(ating)j(Systems)p Fm(,)f(but)f(he)g
(attributes)739 3801 y(it)e(to)f(John)g(T)-7 b(rono)27
b(of)g(St.)38 b(Mic)n(hael's)27 b(College)f(in)i(V)-7
b(ermon)n(t.)p Black Black 1071 4002 a(Stand)33 b(Claus)f(sleeps)g(in)g
(his)h(shop)f(at)g(the)h(North)f(P)n(ole)g(and)g(can)g(only)946
4102 y(b)r(e)k(a)n(w)n(ak)n(ened)d(b)n(y)h(either)h(\(1\))g(all)f(nine)
h(reindeer)f(b)r(eing)h(bac)n(k)f(from)h(their)946 4201
y(v)-5 b(acation)30 b(in)h(the)g(South)g(P)n(aci\014c,)f(or)g(\(2\))h
(some)f(of)g(the)h(elv)n(es)f(ha)n(ving)g(di\016-)946
4301 y(cult)n(y)j(making)e(to)n(ys;)j(to)e(allo)n(w)g(San)n(ta)f(to)i
(get)f(some)f(sleep,)j(the)f(elv)n(es)e(can)946 4401
y(only)23 b(w)n(ak)n(e)f(him)i(when)f(three)g(of)g(them)h(ha)n(v)n(e)e
(problems.)35 b(When)23 b(three)g(elv)n(es)946 4500 y(are)36
b(ha)n(ving)e(their)j(problems)e(solv)n(ed,)i(an)n(y)e(other)h(elv)n
(es)f(wishing)h(to)g(visit)946 4600 y(San)n(ta)26 b(m)n(ust)g(w)n(ait)g
(for)g(those)g(elv)n(es)f(to)i(return.)36 b(If)26 b(San)n(ta)g(w)n(ak)n
(es)e(up)j(to)f(\014nd)946 4700 y(three)32 b(elv)n(es)f(w)n(aiting)g
(at)h(his)g(shop's)f(do)r(or,)h(along)f(with)h(the)g(last)g(reindeer)
946 4799 y(ha)n(ving)27 b(come)h(bac)n(k)f(from)g(the)h(tropis,)g(San)n
(ta)f(has)g(decided)h(that)g(the)g(elv)n(es)946 4899
y(can)h(w)n(ait)g(un)n(til)g(after)g(Christmas,)f(b)r(ecuase)h(it)g(is)
g(more)f(imp)r(ortan)n(t)h(to)g(get)946 4998 y(his)36
b(sleigh)g(ready)-7 b(.)60 b(\(It)36 b(is)g(assumed)f(that)h(the)g
(reindeer)f(do)h(not)g(w)n(an)n(t)f(to)p Black Black
eop
%%Page: 119 125
119 124 bop Black 291 252 a Fo(5.13)30 b(The)i(San)m(ta)h(Claus)f
(problem)1450 b(119)p 291 286 2865 4 v Black 498 515
a Fm(lea)n(v)n(e)28 b(the)h(tropics,)g(and)g(therefore)g(they)g(sta)n
(y)f(there)h(un)n(til)h(the)f(last)g(p)r(ossi-)498 615
y(ble)i(momen)n(t.\))46 b(The)30 b(last)g(reindeer)g(to)g(arriv)n(e)f
(m)n(ust)h(get)h(San)n(ta)e(while)i(the)498 715 y(others)c(w)n(ait)g
(in)h(a)f(w)n(arming)f(h)n(ut)i(b)r(efore)g(b)r(eing)f(harnessed)g(to)g
(the)h(sleigh.)415 897 y(Here)f(are)g(some)g(addition)g(sp)r
(eci\014cations:)p Black 415 1080 a Fd(\017)p Black 41
w Fm(After)33 b(the)g(nin)n(th)g(reindeer)e(arriv)n(es,)h(San)n(ta)g(m)
n(ust)g(in)n(v)n(ok)n(e)f Fl(prepareSleigh)c Fm(and)498
1179 y(then)h(eac)n(h)f(reindeer)g(m)n(ust)g(in)n(v)n(ok)n(e)f
Fl(getHitched)p Fm(.)p Black 415 1346 a Fd(\017)p Black
41 w Fm(After)32 b(the)g(third)g(elf)g(arriv)n(es,)f(San)n(ta)g(m)n
(ust)h(in)n(v)n(ok)n(e)e Fl(helpElves)p Fm(.)45 b(Concurren)n(tly)-7
b(,)498 1445 y(all)27 b(three)h(elv)n(es)f(should)g(in)n(v)n(ok)n(e)f
Fl(getHelp)p Fm(.)p Black 415 1611 a Fd(\017)p Black
41 w Fm(All)42 b(three)f(elv)n(es)f(m)n(ust)h(in)n(v)n(ok)n(e)f
Fl(getHelp)e Fm(b)r(efore)j(an)n(y)f(additional)h(elv)n(es)f(en)n(ter)
498 1711 y(\(incremen)n(t)28 b(the)g(elf)g(coun)n(ter\).)415
1893 y(San)n(ta)22 b(should)h(run)g(in)g(a)g(lo)r(op)g(so)f(he)h(can)g
(help)g(man)n(y)f(sets)h(of)g(elv)n(es.)35 b(W)-7 b(e)23
b(can)g(assume)291 1993 y(that)k(there)h(are)e(exactly)h(9)h(reindeer,)
e(but)j(there)e(ma)n(y)g(b)r(e)h(an)n(y)f(n)n(um)n(b)r(er)g(of)h(elv)n
(es.)p Black Black eop
%%Page: 120 126
120 125 bop Black Black Black Black eop
%%Page: 121 127
121 126 bop Black 291 252 a Fo(5.13)30 b(The)i(San)m(ta)h(Claus)f
(problem)1450 b(121)p 291 286 2865 4 v Black 291 515
a Fe(5.13.1)112 b(San)m(ta)38 b(problem)f(hin)m(t)p Black
1129 743 a Fm(Listing)27 b(5.18:)36 b(San)n(ta)27 b(problem)g(hin)n(t)p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 805 2921
29 v 0.9 TeXcolorgray Black 262 805 4 29 v 262 780 29
4 v 291 780 250 4 v 541 780 2616 4 v 3157 780 29 4 v
3183 805 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray 291
904 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 904 29 100 v 0.9 TeXcolorgray Black
262 904 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
904 29 100 v 0.9 TeXcolorgray Black 3180 904 4 100 v
415 874 a(1)83 b Fl(int)42 b(elves)g(=)h(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1004 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1004 29 100
v 0.9 TeXcolorgray Black 262 1004 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1004 29 100 v 0.9 TeXcolorgray
Black 3180 1004 4 100 v 415 974 a Fm(2)83 b Fl(int)42
b(reindeer)e(=)j(0)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1104 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1104 29 100 v 0.9 TeXcolorgray Black
262 1104 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1104 29 100 v 0.9 TeXcolorgray Black 3180 1104 4 100
v 415 1074 a Fm(3)83 b Fl(Semaphore)40 b(santaSem)g(=)j(0)p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1203 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1203 29 100 v 0.9 TeXcolorgray Black 262 1203 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1203 29 100
v 0.9 TeXcolorgray Black 3180 1203 4 100 v 415 1173 a
Fm(4)83 b Fl(Semaphore)40 b(reinSem)g(=)j(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1303 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1303 29 100
v 0.9 TeXcolorgray Black 262 1303 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1303 29 100 v 0.9 TeXcolorgray
Black 3180 1303 4 100 v 415 1273 a Fm(5)83 b Fl(Semaphore)40
b(elfTex)h(=)i(1)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1402 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1402 29 100 v 0.9 TeXcolorgray Black
262 1402 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1402 29 100 v 0.9 TeXcolorgray Black 3180 1402 4 100
v 415 1373 a Fm(6)83 b Fl(Semaphore)40 b(mutex)h(=)i(1)p
0.9 TeXcolorgray 0.9 TeXcolorgray 262 1431 2921 29 v
0.9 TeXcolorgray Black 262 1431 4 29 v 263 1431 29 4
v 291 1431 250 4 v 541 1431 2616 4 v 3157 1431 29 4 v
3183 1431 4 29 v 415 1552 a(elves)38 b Fm(and)h Fl(reindeer)d
Fm(are)j(coun)n(ters,)i(b)r(oth)f(protected)f(b)n(y)g(m)n(utex.)73
b(Elv)n(es)38 b(and)291 1652 y(reindeer)26 b(get)i Fl(mutex)d
Fm(to)j(mo)r(dify)g(the)g(coun)n(ters;)e(San)n(ta)h(gets)g(it)h(to)g(c)
n(hec)n(k)f(them.)415 1751 y(San)n(ta)g(w)n(aits)g(on)g
Fl(santaSem)e Fm(un)n(til)j(either)f(an)g(elf)h(or)f(a)g(reindeer)g
(signals)f(him.)415 1851 y(The)e(reindeer)f(w)n(ait)g(on)h
Fl(reinSem)d Fm(un)n(til)j(San)n(ta)f(signals)f(them)j(to)e(en)n(ter)h
(the)g(paddo)r(c)n(k)291 1950 y(and)j(get)g(hitc)n(hed.)415
2050 y(The)j(elv)n(es)g(use)g Fl(elfTex)e Fm(to)i(prev)n(en)n(t)f
(additional)h(elv)n(es)f(from)h(en)n(tering)g(while)g(three)291
2150 y(elv)n(es)c(are)h(b)r(eing)h(help)r(ed.)p Black
Black eop
%%Page: 122 128
122 127 bop Black Black Black Black eop
%%Page: 123 129
123 128 bop Black 291 252 a Fo(5.13)30 b(The)i(San)m(ta)h(Claus)f
(problem)1450 b(123)p 291 286 2865 4 v Black 291 515
a Fe(5.13.2)112 b(San)m(ta)38 b(problem)f(solution)291
669 y Fm(San)n(ta's)26 b(co)r(de)i(is)f(prett)n(y)h(straigh)n(tforw)n
(ard.)33 b(Remem)n(b)r(er)28 b(that)g(it)g(runs)f(in)h(a)f(lo)r(op.)p
Black 910 843 a(Listing)g(5.19:)36 b(San)n(ta)27 b(problem)g(solution)g
(\(San)n(ta\))p Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 904 2921 29 v 0.9 TeXcolorgray Black 262 904 4 29
v 262 879 29 4 v 291 879 250 4 v 541 879 2616 4 v 3157
879 29 4 v 3183 904 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1004 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1004 29 100 v 0.9 TeXcolorgray Black
262 1004 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1004 29 100 v 0.9 TeXcolorgray Black 3180 1004 4 100
v 415 974 a(1)83 b Fl(santaSem)l(.wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1104 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1104 29 100 v 0.9 TeXcolorgray Black 262 1104 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1104 29 100
v 0.9 TeXcolorgray Black 3180 1104 4 100 v 415 1074 a
Fm(2)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1203 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1203 29 100
v 0.9 TeXcolorgray Black 262 1203 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1203 29 100 v 0.9 TeXcolorgray
Black 3180 1203 4 100 v 415 1173 a Fm(3)240 b Fl(if)42
b(\(reindeer)e(==)j(9\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1303 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1303 29 100 v 0.9 TeXcolorgray Black
262 1303 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1303 29 100 v 0.9 TeXcolorgray Black 3180 1303 4 100
v 415 1273 a Fm(4)396 b Fl(prepareSleigh)39 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 1402 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1402 29 100 v 0.9 TeXcolorgray Black 262 1402 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1402 29 100
v 0.9 TeXcolorgray Black 3180 1402 4 100 v 415 1373 a
Fm(5)396 b Fl(reinSem)n(.)o(signal)41 b(\(9\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 1502 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 1502 29 100
v 0.9 TeXcolorgray Black 262 1502 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 1502 29 100 v 0.9 TeXcolorgray
Black 3180 1502 4 100 v 415 1472 a Fm(6)240 b Fl(else)41
b(if)i(\(elves)e(==)i(3\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 1602 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1602 29 100 v 0.9 TeXcolorgray Black
262 1602 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
1602 29 100 v 0.9 TeXcolorgray Black 3180 1602 4 100
v 415 1572 a Fm(7)396 b Fl(helpElves)40 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 1701 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 1701 29 100 v 0.9 TeXcolorgray Black 262 1701 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 1701 29 100
v 0.9 TeXcolorgray Black 3180 1701 4 100 v 415 1671 a
Fm(8)83 b Fl(mutex)n(.)o(signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 262 1730 2921 29 v 0.9 TeXcolorgray
Black 262 1730 4 29 v 263 1730 29 4 v 291 1730 250 4
v 541 1730 2616 4 v 3157 1730 29 4 v 3183 1730 4 29 v
415 1851 a Fm(The)d(nin)n(th)f(reindeer)g(sets)g(a)g(lo)r(cal)g(v)-5
b(ariable,)38 b Fl(rudolph)d Fm(so)i(w)n(e)g(can)g(iden)n(tify)g(him)
291 1950 y(later.)66 b(After)38 b(releasing)e(the)i(m)n(utex,)j(the)d
(sp)r(ecial)f(reindeer)g(w)n(ak)n(es)f(San)n(ta)h(and)g(then)291
2050 y(joins)27 b(the)h(other)f(reindeer)g(w)n(aiting)g(on)g
Fl(reinSem)p Fm(.)415 2150 y(After)22 b(San)n(ta)f(in)n(v)n(ok)n(es)f
Fl(prepareSleigh)p Fm(,)e(he)k(signals)e Fl(reinSem)f
Fm(nine)j(times,)h(allo)n(wing)291 2249 y(the)28 b(reindeer)e(to)i(in)n
(v)n(ok)n(e)e Fl(getHitched)p Fm(.)p Black 867 2424 a(Listing)h(5.20:)
36 b(San)n(ta)27 b(problem)g(solution)g(\(reindeer\))p
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2485 2921
29 v 0.9 TeXcolorgray Black 262 2485 4 29 v 262 2460
29 4 v 291 2460 250 4 v 541 2460 2616 4 v 3157 2460 29
4 v 3183 2485 4 29 v 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2585 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2585 29 100 v 0.9 TeXcolorgray Black
262 2585 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2585 29 100 v 0.9 TeXcolorgray Black 3180 2585 4 100
v 415 2555 a(1)83 b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9
TeXcolorgray 0.9 TeXcolorgray 291 2684 2865 100 v 0.9
TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2684 29 100 v 0.9 TeXcolorgray Black 262 2684 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2684 29 100
v 0.9 TeXcolorgray Black 3180 2684 4 100 v 415 2654 a
Fm(2)240 b Fl(reindeer)l(++)p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 2784 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 2784 29 100 v 0.9 TeXcolorgray Black
262 2784 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
2784 29 100 v 0.9 TeXcolorgray Black 3180 2784 4 100
v 415 2754 a Fm(3)g Fl(if)42 b(\(reindeer)e(==)j(9\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 2884 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 2884 29 100 v 0.9 TeXcolorgray Black 262 2884 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 2884 29 100
v 0.9 TeXcolorgray Black 3180 2884 4 100 v 415 2854 a
Fm(4)396 b Fl(rudolph)41 b(=)i(true)p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 2983 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 2983 29 100
v 0.9 TeXcolorgray Black 262 2983 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 2983 29 100 v 0.9 TeXcolorgray
Black 3180 2983 4 100 v 415 2953 a Fm(5)83 b Fl(mutex)n(.)o(signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3083 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3083 29 100 v 0.9 TeXcolorgray Black 262 3083 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3083 29 100
v 0.9 TeXcolorgray Black 3180 3083 4 100 v 415 3053 a
Fm(6)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3182 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3182 29 100 v 0.9 TeXcolorgray Black 262 3182 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3182 29 100
v 0.9 TeXcolorgray Black 3180 3182 4 100 v 415 3153 a(7)83
b Fl(if)42 b(\(rudolph)m(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
291 3282 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 262 3282 29 100 v 0.9 TeXcolorgray Black
262 3282 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155
3282 29 100 v 0.9 TeXcolorgray Black 3180 3282 4 100
v 415 3252 a Fm(8)200 b Fl(santaSem)m(.signal)41 b(\(\))p
0.9 TeXcolorgray 0.9 TeXcolorgray 291 3382 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3382 29 100 v 0.9 TeXcolorgray Black 262 3382 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3382 29 100
v 0.9 TeXcolorgray Black 3180 3382 4 100 v 415 3352 a
Fm(9)p 0.9 TeXcolorgray 0.9 TeXcolorgray 291 3481 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
262 3481 29 100 v 0.9 TeXcolorgray Black 262 3481 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3155 3481 29 100
v 0.9 TeXcolorgray Black 3180 3481 4 100 v 374 3451 a(10)82
b Fl(reinSem)m(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 291 3581 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3581 29 100
v 0.9 TeXcolorgray Black 262 3581 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3155 3581 29 100 v 0.9 TeXcolorgray
Black 3180 3581 4 100 v 374 3551 a Fm(11)82 b Fl(getHitched)39
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 262 3609 2921
29 v 0.9 TeXcolorgray Black 262 3609 4 29 v 263 3609
29 4 v 291 3609 250 4 v 541 3609 2616 4 v 3157 3609 29
4 v 3183 3609 4 29 v 415 3730 a Fm(The)25 b(elf)f(co)r(de)h(is)f
(similar)g(in)g(the)h(sense)f(that)h(the)f(third)h(arriv)-5
b(al)23 b(sets)h(a)g(lo)r(cal)g(v)-5 b(ariable)291 3830
y(and)33 b(w)n(ak)n(es)g(San)n(ta.)55 b(The)34 b(elv)n(es)g(don't)g(ha)
n(v)n(e)f(to)g(w)n(ait)h(for)g(San)n(ta)f(to)h(do)f(an)n(ything)h(b)r
(e-)291 3930 y(fore)28 b(they)g(in)n(v)n(ok)n(e)g Fl(getHelp)p
Fm(,)e(so)i Fl(helpElves)d Fm(and)j Fl(getHelp)e Fm(run)i(concurren)n
(tly)g(\(whic)n(h)291 4029 y(do)r(esn't)f(necessarily)f(mean)i(that)g
(they)f(o)n(v)n(erlap\).)415 4129 y(The)h(\014rst)g(t)n(w)n(o)f(elv)n
(es)g(release)g Fl(elfTex)e Fm(at)j(the)g(same)f(time)i(they)f(release)
f(the)h Fl(mutex)p Fm(,)291 4229 y(but)k(the)f(last)g(elf)h(holds)f
Fl(elfTex)p Fm(,)f(barring)g(other)g(elv)n(es)h(from)g(en)n(tering)f
(un)n(til)i(all)f(three)291 4328 y(elv)n(es)26 b(ha)n(v)n(e)h(in)n(v)n
(ok)n(ed)f Fl(getHelp)f Fm(and)i(passed)g(the)h(barrier.)415
4428 y(The)38 b(last)f(elf)h(is)f(named)h(Hermey)f(after)g(the)h(main)g
(c)n(haracter)d(in)j(the)g(Christmas)291 4527 y(sp)r(ecial)27
b Fl(Rudolph)41 b(the)h(Red-Nosed)e(Reindeer)p Fm(.)p
Black Black eop
%%Page: 124 130
124 129 bop Black 739 252 a Fo(124)981 b(Not-so-classical)30
b(sync)m(hronization)j(problems)p 739 286 2865 4 v Black
Black 1375 515 a Fm(Listing)28 b(5.21:)35 b(San)n(ta)27
b(problem)g(solution)g(\(elv)n(es\))p Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 577 2921 29 v 0.9 TeXcolorgray Black
711 577 4 29 v 711 552 29 4 v 739 552 250 4 v 989 552
2616 4 v 3605 552 29 4 v 3631 577 4 29 v 0.9 TeXcolorgray
0.9 TeXcolorgray 739 676 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 676 29 100
v 0.9 TeXcolorgray Black 711 676 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 676 29 100 v 0.9 TeXcolorgray Black
3628 676 4 100 v 863 646 a(1)83 b Fl(elfTex)m(.wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 776 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 776 29 100 v 0.9 TeXcolorgray Black 711 776 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 776 29 100 v
0.9 TeXcolorgray Black 3628 776 4 100 v 863 746 a Fm(2)83
b Fl(mutex)n(.)o(wait)42 b(\(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 876 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 876 29 100 v 0.9
TeXcolorgray Black 711 876 4 100 v 0.9 TeXcolorgray 0.9
TeXcolorgray 3603 876 29 100 v 0.9 TeXcolorgray Black
3628 876 4 100 v 863 846 a Fm(3)240 b Fl(elves)n(++)p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 975 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 975 29 100 v 0.9 TeXcolorgray Black 711 975 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 975 29 100 v
0.9 TeXcolorgray Black 3628 975 4 100 v 863 945 a Fm(4)g
Fl(if)43 b(\()o(elves)f(==)g(3\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 1075 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 1075 29 100 v 0.9
TeXcolorgray Black 711 1075 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1075 29 100 v 0.9 TeXcolorgray
Black 3628 1075 4 100 v 863 1045 a Fm(5)397 b Fl(hermey)41
b(=)i(true)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1174
2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9
TeXcolorgray 711 1174 29 100 v 0.9 TeXcolorgray Black
711 1174 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1174 29 100 v 0.9 TeXcolorgray Black 3628 1174 4 100
v 863 1145 a Fm(6)397 b Fl(elves)41 b(=)i(0)p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1274 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1274 29 100
v 0.9 TeXcolorgray Black 711 1274 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1274 29 100 v 0.9 TeXcolorgray
Black 3628 1274 4 100 v 863 1244 a Fm(7)240 b Fl(else)p
0.9 TeXcolorgray 0.9 TeXcolorgray 739 1374 2865 100 v
0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1374 29 100 v 0.9 TeXcolorgray Black 711 1374 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1374 29 100
v 0.9 TeXcolorgray Black 3628 1374 4 100 v 863 1344 a
Fm(8)397 b Fl(elfTex)m(.signal)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 1473 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 1473 29 100
v 0.9 TeXcolorgray Black 711 1473 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1473 29 100 v 0.9 TeXcolorgray
Black 3628 1473 4 100 v 863 1443 a Fm(9)83 b Fl(mutex)n(.)o(signal)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1573 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1573 29 100 v 0.9 TeXcolorgray Black 711 1573 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1573 29 100
v 0.9 TeXcolorgray Black 3628 1573 4 100 v 822 1543 a
Fm(10)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 1673 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 1673 29 100 v 0.9 TeXcolorgray Black 711 1673 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 1673 29 100
v 0.9 TeXcolorgray Black 3628 1673 4 100 v 822 1643 a(11)82
b Fl(if)43 b(\()o(hermey)n(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 1772 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 1772 29 100 v 0.9
TeXcolorgray Black 711 1772 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 1772 29 100 v 0.9 TeXcolorgray
Black 3628 1772 4 100 v 822 1742 a Fm(12)239 b Fl(santaSem)m(.)o
(signal)41 b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1872 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1872 29 100 v 0.9 TeXcolorgray Black
711 1872 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1872 29 100 v 0.9 TeXcolorgray Black 3628 1872 4 100
v 822 1842 a Fm(13)p 0.9 TeXcolorgray 0.9 TeXcolorgray
739 1972 2865 100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray
0.9 TeXcolorgray 711 1972 29 100 v 0.9 TeXcolorgray Black
711 1972 4 100 v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603
1972 29 100 v 0.9 TeXcolorgray Black 3628 1972 4 100
v 822 1942 a(14)82 b Fl(getHelp)41 b(\(\))p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2071 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2071 29 100
v 0.9 TeXcolorgray Black 711 2071 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2071 29 100 v 0.9 TeXcolorgray
Black 3628 2071 4 100 v 822 2041 a Fm(15)p 0.9 TeXcolorgray
0.9 TeXcolorgray 739 2171 2865 100 v 0.9 TeXcolorgray
Black 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2171 29 100
v 0.9 TeXcolorgray Black 711 2171 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2171 29 100 v 0.9 TeXcolorgray
Black 3628 2171 4 100 v 822 2141 a(16)82 b Fl(elfBarrier)l(.)o(wait)42
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2270 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2270 29 100 v 0.9 TeXcolorgray Black 711 2270 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2270 29 100
v 0.9 TeXcolorgray Black 3628 2270 4 100 v 822 2240 a
Fm(17)p 0.9 TeXcolorgray 0.9 TeXcolorgray 739 2370 2865
100 v 0.9 TeXcolorgray Black 0.9 TeXcolorgray 0.9 TeXcolorgray
711 2370 29 100 v 0.9 TeXcolorgray Black 711 2370 4 100
v 0.9 TeXcolorgray 0.9 TeXcolorgray 3603 2370 29 100
v 0.9 TeXcolorgray Black 3628 2370 4 100 v 822 2340 a(18)82
b Fl(if)43 b(\()o(hermey)n(\))p 0.9 TeXcolorgray 0.9
TeXcolorgray 739 2470 2865 100 v 0.9 TeXcolorgray Black
0.9 TeXcolorgray 0.9 TeXcolorgray 711 2470 29 100 v 0.9
TeXcolorgray Black 711 2470 4 100 v 0.9 TeXcolorgray
0.9 TeXcolorgray 3603 2470 29 100 v 0.9 TeXcolorgray
Black 3628 2470 4 100 v 822 2440 a Fm(19)239 b Fl(elfTex)m(.signal)41
b(\(\))p 0.9 TeXcolorgray 0.9 TeXcolorgray 711 2498 2921
29 v 0.9 TeXcolorgray Black 711 2498 4 29 v 712 2498
29 4 v 739 2498 250 4 v 989 2498 2616 4 v 3605 2498 29
4 v 3631 2498 4 29 v 863 2619 a Fm(When)29 b(San)n(ta)e(w)n(ak)n(es)e
(up)j(w)n(e)g(kno)n(w)e(he)i(will)g(b)r(e)g(able)f(to)h(get)f(the)h(m)n
(utex)g(b)r(ecause)p Black 863 2802 a Fd(\017)p Black
41 w Fm(The)38 b(thread)e(that)h(signals)f(San)n(ta,)j(either)e(a)f
(third)i(elf)f(or)f(the)i(nin)n(th)f(reindeer,)946 2901
y(do)r(esn't)28 b(hold)g(the)g(m)n(utex.)p Black 863
3067 a Fd(\017)p Black 41 w Fm(If)33 b(another)e(thread)h(holds)f(the)i
(m)n(utex,)g(it)f(w)n(ould)g(ha)n(v)n(e)f(to)h(b)r(e)g(a)g(ten)n(th)g
(reindeer)946 3167 y(or)c(a)g(fourth)g(elf.)39 b(There)28
b(are)f(only)h(nine)g(reindeer,)g(and)g(the)g(fourth)g(elf)h(w)n(ould)f
(b)r(e)946 3267 y(blo)r(c)n(k)n(ed)f(on)h Fl(elfTex)d
Fm(b)r(efore)i(getting)g Fl(mutex)p Fm(.)863 3449 y(And)i(so)e(I)g(am)h
(inclined)g(to)f(b)r(eliev)n(e)h(that)f(this)h(solution)f(is)h(deadlo)r
(c)n(k)e(free.)p Black Black eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
